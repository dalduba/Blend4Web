/**
 * Copyright (C) 2014-2015 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a",";","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bz",";","varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";","varying","vec4","bF",";","varying","vec4","bG",";","varying","vec4","bH",";","varying","vec4","bI",";","uniform","float","u_perspective_cast_far_bound",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","qK",",","qL",";","vec3","qM",",","qN",",","qO",",","qP",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["qM","=","u_camera_eye_frag","-","bz",";","qM","=","normalize","(","qM",")",";","qJ","(","qM",",","qN",",","qO",",","qP",",","qK",",","qL",")",";","qL","=","qL",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qL","=","(","texture2D","(","u_sampler",",","bJ",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qL","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","qL","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bz",";","varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ts",";","float","tt",",","tu",",","tv",";","mat4","tw",";","vec3","tx",",","ty",",","tz",",","tA",",","tB",",","tC",";","tx","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["ty","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","vec3","(","a_tangent",")",";","tA","=","a_tangent","[","3","]","*","cross","(","ty",",","tz",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tz","=","vec3","(","0.0",")",";","tA","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ty","=","vec3","(","0.0",")",";","tz","=","vec3","(","0.0",")",";","tA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tx","=","mix","(","tx",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["ty","=","mix","(","ty",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","a_tangent",")",";","tC","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tB",")",";","tz","=","mix","(","tz",",","tB",",","u_va_frame_factor",")",";","tA","=","mix","(","tA",",","tC",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sy","(","tx",",","tz",",","tA",",","ty",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","(","u_model_matrix","*","vec4","(","tA",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","rr","(","u_camera_eye",",","tz",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tw","=","rl","(","u_camera_eye",",","tz",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","(","u_model_matrix","*","vec4","(","tA",",","1.0",")",")",".","xyz",";","tw","=","tw","*","rd","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tC",")",";"]}]}}]},{type:"textline",tokens:["aR","tD","=","ry","(","tx","-","tA",",","tA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tw",")",";","tD",".","b","=","tz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aR","tD","=","ry","(","tx",",","tA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tm","(","tD",".","a",",","tD",".","b",",","ty",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ty","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ty","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tm","(","tD",".","a",",","tD",".","b",",","ty",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","rB","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bz","=","tD",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","tD",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tt","=","(","dot","(","cross","(","tD",".","e",",","tD",".","c",")",",","tD",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bC","=","vec4","(","tD",".","c",",","tt",")",";"]}]}}]},{type:"textline",tokens:["bA","=","u_view_matrix","*","vec4","(","tD",".","a",",","1.0",")",";","ts","=","u_proj_matrix","*","bA",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["ts",".","xy","+=","u_subpixel_jitter","*","ts",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tt","=","ts",".","x",";","tu","=","ts",".","y",";","tv","=","ts",".","w",";","bD",".","x","=","(","tt","+","tv",")","/","2.0",";","bD",".","y","=","(","tu","+","tv",")","/","2.0",";","bD",".","z","=","tv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","-","bA",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tr","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","tD",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","ts",",","tt",";","vec3","tu",",","tv",",","tw",",","tx",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tu","=","u_camera_eye_frag","-","bz",";","tu","=","normalize","(","tu",")",";","qJ","(","tu",",","tv",",","tw",",","tx",",","ts",",","tt",")",";","tt","=","tt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tt","=","(","texture2D","(","u_colormap0",",","bJ",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tt","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","tt","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","dl","(","bA",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","+=","0.00001","*","bC",".","r",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","uh",";","vec4","ui",",","uj",";","float","uk",";","mat4","ul",",","um",";","vec3","un",",","uo",",","up",",","uq",",","ur",",","us",";","un","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["up","=","vec3","(","a_tangent",")",";","uq","=","a_tangent","[","3","]","*","cross","(","uo",",","up",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["up","=","vec3","(","0.0",")",";","uq","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["un","=","mix","(","un",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","mix","(","uo",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","vec3","(","a_tangent",")",";","us","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","ur",")",";","up","=","mix","(","up",",","ur",",","u_va_frame_factor",")",";","uq","=","mix","(","uq",",","us",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sy","(","un",",","up",",","uq",",","uo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uq","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uq","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aR","ut","=","tX","(","un",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uo",",","uq",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["up","=","(","u_model_matrix","*","vec4","(","uq",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ul","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","=","rr","(","u_camera_eye",",","up",",","ul",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","rl","(","u_camera_eye",",","up",",","ul",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["us","=","(","u_model_matrix","*","vec4","(","uq",",","1.0",")",")",".","xyz",";","um","=","um","*","rd","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","us",")",";"]}]}}]},{type:"textline",tokens:["aR","ut","=","ry","(","un","-","uq",",","uq",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uo",",","um",")",";","ut",".","b","=","up",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aR","ut","=","ry","(","un",",","uq",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uo",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uo","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tm","(","ut",".","a",",","ut",".","b",",","uo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bz","=","ut",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","ut",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","(","dot","(","cross","(","ut",".","e",",","ut",".","c",")",",","ut",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bC","=","vec4","(","ut",".","c",",","uk",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ui","=","u_view_matrix","*","vec4","(","ut",".","a",",","1.0",")",";","uj","=","u_proj_matrix","*","ui",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uj",".","xy","+=","u_subpixel_jitter","*","uj",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","by","(","uj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","-","bA",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tr","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","rB","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ug","(","ut",".","a",",","ut",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bA","=","ui",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","uk","=","SHADOW_TEX_RES","/","2.0",";","uh","=","floor","(","uh","*","uk","+","0.5",")","/","uk","-","uh",";","uj",".","xy","+=","uh",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uj",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uh",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uh",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","uh",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","uh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uh",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uh",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ui",";","mat4","uj",";","vec3","uk",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","uj","=","rl","(","u_camera_eye",",","uk",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","uj","*","rd","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["aR","ul","=","ry","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uj",")",";","ul",".","b","=","uk",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aR","ul","=","ry","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["ui","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ul",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uh","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ui",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","ui",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bJ",";","varying","float","uj",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","uk","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","uk","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","um","(","float","ul",")","{","return","ul","-","floor","(","ul","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uv","(","inout","float","un",",","in","float","uo","[","uk","]",",","in","float","up",")","{","float","uq",",","ur",",","us",",","ut",";","for","(","int","uu","=","0",";","uu","<","NUM_RINGS",";","uu","++",")","{","uq","=","40.0","*","uo","[","uu","]",";","ur","=","300.0","*","(","um","(","uq",")","-","0.005",")",";","us","=","uq",";","ut","=","abs","(","us","*","(","u_halo_size","*","ur","-","up",")",")",";","un","+=","1.0","-","min","(","ut",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","uE","(","inout","float","uw",",","in","float","ux","[","uk","]",",","in","float","uy",")","{","float","uz",",","uA",",","uB",",","uC",";","for","(","int","uD","=","0",";","uD","<","NUM_LINES",";","uD","++",")","{","uz","=","ux","[","uD","]",";","uA","=","uz",";","uB","=","1000.0","*","(","um","(","uz",")","-","0.005",")",";","uC","=","20.0","*","abs","(","uA","*","bJ",".","x","+","uB","*","bJ",".","y",")",";","uw","+=","1.0","-","min","(","uC",",","1.0",")",";","}","uw","*=","uy",";","}"]}]}}]},{type:"textline",tokens:["void","uL","(","inout","float","uF",",","in","vec2","uG",")","{","float","uH",",","uI",",","uJ",",","uK",";","uI","=","atan","(","uG",".","y",",","uG",".","x",")",";","uI","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","uJ","=","cos","(","uI",")",";","uK","=","sin","(","uI",")",";","uI","=","(","uJ","*","uG",".","x","+","uK","*","uG",".","y",")","*","(","uJ","*","uG",".","y","-","uK","*","uG",".","x",")",";","uH","=","abs","(","uI",")",";","if","(","uH","<","1.0",")","{","uH","=","(","0.01","*","u_halo_size",")","/","(","uH",")",";","uF","*=","sqrt","(","min","(","uH",",","1.0",")",")",";","}","}","void","main","(",")","{","vec3","uM",";","float","uN",",","uO",",","uP",",","uQ",";","uN","=","(","bJ",".","x","*","bJ",".","x","+","bJ",".","y","*","bJ",".","y",")",";","uO","=","sqrt","(","uN",")",";","uN","=","max","(","1.0","-","uN",",","0.0",")",";","uN","=","pow","(","uN",",","u_halo_hardness",")",";","uP","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","uR","[","uk","]",";","for","(","int","uS","=","0",";","uS","<","uk",";","uS","++",")","{","uR","[","uS","]","=","fract","(","uj","/","(","float","(","uS",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","=","0.0",";","uv","(","uQ",",","uR",",","uO",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uO","=","0.0",";","uE","(","uO",",","uR",",","uN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uL","(","uN",",","bJ",")",";"]}]}}]},{type:"textline",tokens:["uN","*=","uP",";","uM","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","*=","uN",";","uM","+=","u_halo_rings_color","*","uQ",";","uN","+=","uQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uO","*=","uP",";","uM","+=","u_halo_lines_color","*","uO",";","uN","+=","uO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uN","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uO","=","u_halo_stars_blend","*","(","ui",".","y","-","u_halo_stars_height",")",";","uN","*=","clamp","(","uO",",","0.0",",","1.0",")",";","uN","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["aH","(","uM",")",";","aK","(","uM",",","uN",")",";","gl_FragColor","=","vec4","(","uM",",","uN",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bJ",";","varying","float","uj",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ui",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","uk",",","ul",";","mat4","um",",","un",";","vec3","uo",";","uo","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bJ","=","a_halo_bb_vertex","*","2.0",";","uj","=","fract","(","uo",".","x","+","uo",".","y","+","uo",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","qQ","(","uo",",","u_view_matrix",")",";","un","=","u_view_matrix",";","un","[","3","]","[","0","]","=","0.0",";","un","[","3","]","[","1","]","=","0.0",";","un","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","qQ","(","uo",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["uk","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","uk","=","um","*","uk",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ul","=","u_proj_matrix","*","un","*","uk",";","ul",".","z","=","0.99999","*","ul",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ui","=","uk",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ul","=","u_proj_matrix","*","u_view_matrix","*","uk",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ul",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","uk",";","uk","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","uk",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"textline",tokens:["varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","uZ",";","vec3","u_",",","va",",","vb",",","vc",",","vd",";","float","ve",",","vf",",","vg",",","vh",";","ve","=","length","(","bA",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vf","=","bz",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["u_","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["va","=","normalize","(","u_camera_eye_frag","-","bz",")",";","qJ","(","va",",","vb",",","vc",",","vd",",","vg",",","vh",")",";","vb","=","vb",";","vh","=","vh",";","vd","=","vd",";","vg","=","vg",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["vb","=","max","(","vb","-","sqrt","(","0.01","*","-","min","(","vf",",","0.0",")",")",",","0.5","*","vb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["aC","(","vb",",","vf",",","u_time",",","vg",",","vd",",","u_sun_direction",",","u_",",","u_sun_quaternion",",","bz",",","ve",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","vh","<","0.5",")","discard",";","vh","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vh","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uY","(","vb",",","length","(","bA",")",",","va",",","vf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uY","(","vb",",","length","(","bA",")",",","va",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","texture2DProj","(","u_shadow_mask",",","bD",")",".","rg",";","vf","=","uZ",".","g",";","vb","=","vec3","(","vf",")",";"]}]}}]},{type:"textline",tokens:["aH","(","vb",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},"NODES_GLOW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aK","(","vb",",","vh",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","vb",",","vh",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uZ",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","u_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","va",",","vb",";","float","vc",";","mat4","vd",";","vec3","ve",",","vf",",","vg",",","vh",",","vi",",","vj",",","vk",";","ve","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vf","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vf","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vg","=","vec3","(","a_tangent",")",";","vh","=","a_tangent","[","3","]","*","cross","(","vf",",","vg",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vi","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vj","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vi","=","vi","-","u_camera_eye",";","vh","=","cross","(","vi",",","vj",")",";","vg","=","cross","(","vj",",","vh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vg","=","vec3","(","0.0",")",";","vh","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","mix","(","ve",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vf","=","mix","(","vf",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vj","=","vec3","(","a_tangent",")",";","vi","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vj",")",";","vg","=","mix","(","vg",",","vj",",","u_va_frame_factor",")",";","vh","=","mix","(","vh",",","vi",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sy","(","ve",",","vg",",","vh",",","vf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vi","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vi","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aR","vl","=","tX","(","ve",",","vg",",","vh",",","vf",",","vi",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vj","=","(","u_model_matrix","*","vec4","(","vi",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vd","=","rr","(","u_camera_eye",",","vj",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vd","=","rl","(","u_camera_eye",",","vj",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","(","u_model_matrix","*","vec4","(","vi",",","1.0",")",")",".","xyz",";","vd","=","vd","*","rd","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vk",")",";"]}]}}]},{type:"textline",tokens:["aR","vl","=","ry","(","ve","-","vi",",","vi",",","vg",",","vh",",","vf",",","vd",")",";","vl",".","b","=","vj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aR","vl","=","ry","(","ve",",","vi",",","vg",",","vh",",","vf",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vc","=","(","dot","(","cross","(","vl",".","e",",","vl",".","c",")",",","vl",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bC","=","vec4","(","vl",".","c",",","vc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tm","(","vl",".","a",",","vl",".","b",",","vf",")",";"]}]}}]},{type:"textline",tokens:["bz","=","vl",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","vl",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","u_camera_eye","-","vl",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","rB","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["u_","=","vl",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["u_","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["va","=","u_view_matrix","*","vec4","(","vl",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bA","=","va",";"]}]}}]},{type:"textline",tokens:["vb","=","u_proj_matrix","*","va",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vb",".","xy","+=","u_subpixel_jitter","*","vb",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","by","(","vb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ug","(","vl",".","a",",","vl",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","-","va",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tr","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vb",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bz",";","varying","vec3","bB",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uZ",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","u_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xg",",","xh",",","xi",",","xj",";","mat3","xk",";","vec2","xl",",","xm",",","xn",",","xo",";","vec3","xp",",","xq",",","xr",",","xs",",","xt",",","xu",",","xv",",","xw",",","xx",";","float","xy",",","xz",",","xA",",","xB",",","xC",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xy","=","length","(","bA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["xz","=","bz",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xl","=","bJ",";"]}]}}]},{type:"textline",tokens:["xq","=","normalize","(","bB",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","xq","=","xq",";","else","xq","=","-","xq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xr","=","cross","(","xq",",","bC",".","xyz",")","*","bC",".","w",";","xk","=","mat3","(","bC",".","xyz",",","xr",",","xq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","normalize","(","u_view_matrix_frag","*","vec4","(","bB",",","0.0",")",")",".","st",";","xm","=","xm","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xy","<","PARALLAX_LOD_DIST",")","{","xA","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","xy",")",",","0.0",",","1.0",")",";","xA","=","u_parallax_scale","*","xA",";","xr","=","normalize","(","uZ","*","xk",")",";","xB","=","1.0","/","PARALLAX_STEPS",";","xn","=","xr",".","xy","*","xA","/","(","PARALLAX_STEPS","*","xr",".","z",")",";","xA","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","xm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xo","=","xl",";"]}]}}]},{type:"textline",tokens:["xC","=","texture2D","(","u_normalmap0",",","xo",")",".","a",";","for","(","float","xD","=","1.0",";","xD","<=","PARALLAX_STEPS",";","xD","++",")","{","if","(","xC","<","xA",")","{","xA","-=","xB",";","xo","-=","xn",";","xC","=","texture2D","(","u_normalmap0",",","xo",")",".","a",";","}","}","xn","=","xo","+","xn",";","xB","=","texture2D","(","u_normalmap0",",","xn",")",".","a","-","(","xA","+","xB",")",";","xA","=","xC","-","xA",";","xB","=","xA","/","(","xA","-","xB",")",";","xo","=","xB","*","xn","+","(","1.0","-","xB",")","*","xo",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xl","+=","xo","-","xm",";"]}]}}]},{type:"textline",tokens:["xm","=","xo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xm","+=","xo","-","xl",";"]}]}}]},{type:"textline",tokens:["xl","=","xo",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xg","=","texture2D","(","u_normalmap0",",","xm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xg","=","texture2D","(","u_normalmap0",",","xl",")",";"]}]}}]},{type:"textline",tokens:["xr","=","xg",".","rgb","-","0.5",";","xr","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","xr",",","u_normal_factor",")",";","xr","=","xk","*","xr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xr","=","xq",";"]}]}}]},{type:"textline",tokens:["xr","=","normalize","(","xr",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","normalize","(","u_view_matrix_frag","*","vec4","(","xr",",","0.0",")",")",".","st",";","xm","=","xm","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["xq","=","normalize","(","uZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","u_",";","aE","(","xs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xg","=","vec4","(","xs",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xg","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["xB","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xh","=","texture2D","(","u_colormap0",",","xm",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xh","=","texture2D","(","u_colormap0",",","xl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["aE","(","xh",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xi","=","texture2D","(","u_colormap1",",","xm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xi","=","texture2D","(","u_colormap1",",","xl",")",";"]}]}}]},{type:"textline",tokens:["aE","(","xi",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xj","=","texture2D","(","u_stencil0",",","xm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xj","=","texture2D","(","u_stencil0",",","xl",")",";"]}]}}]},{type:"textline",tokens:["xh","=","mix","(","xh",",","xi",",","xj",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xg",".","rgb","=","mix","(","xg",".","rgb",",","xh",".","rgb",",","u_diffuse_color_factor",")",";","xA","=","u_alpha_factor","*","xh",".","a",";","xA","+=","(","1.0","-","step","(","0.0",",","xA",")",")",";","xg",".","a","=","mix","(","xA",",","1.0",",","u_diffuse_color",".","a",")",";","xB","=","xh",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xg",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xh",".","rgb",",","u_diffuse_color_factor",")",";","xg",".","a","=","xh",".","a",";","xB","=","xh",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["xs","=","u_diffuse_intensity","*","xg",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","xs",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xu","=","u_environment_energy","*","dO","(","xr",")",";","xu","=","u_ambient","*","xu",";","xA","=","dr","(","xs",")",";","xv","=","u_emit","*","xg",".","rgb",";","xw","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["xx","=","vec3","(","xB",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xx","=","texture2D","(","u_specmap0",",","xm",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xx","=","texture2D","(","u_specmap0",",","xl",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["aE","(","xx",".","rgb",")",";","xw","=","mix","(","xw",",","xx",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["xB","=","u_specular_params","[","0","]",";","xl","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","xw","=","xB","*","xw",";","xf","(","xv",",","xu",",","xs",",","xw",",","bz",",","xr",",","xq",",","xl",",","u_diffuse_params",",","xA",",","0.0",",","vec4","(","0.0",")",",","xt",",","xx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dL","(","xt",",","xq",",","xr",",","u_reflect_factor",")",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dL","(","xt",",","xq",",","xr",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xt","+=","xx",";"]}]}}]},{type:"textline",tokens:["xB","=","xg",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","max","(","xt","-","sqrt","(","0.01","*","-","min","(","xz",",","0.0",")",")",",","0.5","*","xt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["aC","(","xt",",","xz",",","u_time",",","xA",",","xr",",","u_sun_direction",",","xp",",","u_sun_quaternion",",","bz",",","xy",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xB","<","0.5",")","discard",";","xB","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","max","(","max","(","xx",".","r",",","xx",".","g",")",",","xx",".","b",")","*","u_specular_alpha",";","xB","=","xg",".","a","*","(","1.0","-","xA",")","+","xA",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xB","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","mix","(","eb","(","bD",",","xr",".","xz","*","u_refr_bump",")",",","xt",",","xB",")",";","xB","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uY","(","xt",",","xy",",","xq",",","xz",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uY","(","xt",",","xy",",","xq",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["aH","(","xt",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aK","(","xt",",","xB",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xt",",","xB",")",";","}"]}]},exports["main_stack.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uZ",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","u_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xg",",","xh",";","float","xi",";","mat4","xj",";","vec3","xk",",","xl",",","xm",",","xn",",","xo",",","xp",",","xq",";","xk","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["xl","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xl","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","vec3","(","a_tangent",")",";","xn","=","a_tangent","[","3","]","*","cross","(","xl",",","xm",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xp","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","xo","=","xo","-","u_camera_eye",";","xn","=","cross","(","xo",",","xp",")",";","xm","=","cross","(","xp",",","xn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xm","=","vec3","(","0.0",")",";","xn","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["xk","=","mix","(","xk",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["xl","=","mix","(","xl",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","vec3","(","a_tangent",")",";","xo","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","xp",")",";","xm","=","mix","(","xm",",","xp",",","u_va_frame_factor",")",";","xn","=","mix","(","xn",",","xo",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sy","(","xk",",","xm",",","xn",",","xl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aR","xr","=","tX","(","xk",",","xm",",","xn",",","xl",",","xo",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","(","u_model_matrix","*","vec4","(","xo",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xj","=","rr","(","u_camera_eye",",","xp",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xj","=","rl","(","u_camera_eye",",","xp",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xq","=","(","u_model_matrix","*","vec4","(","xo",",","1.0",")",")",".","xyz",";","xj","=","xj","*","rd","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","xq",")",";"]}]}}]},{type:"textline",tokens:["aR","xr","=","ry","(","xk","-","xo",",","xo",",","xm",",","xn",",","xl",",","xj",")",";","xr",".","b","=","xp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aR","xr","=","ry","(","xk",",","xo",",","xm",",","xn",",","xl",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xi","=","(","dot","(","cross","(","xr",".","e",",","xr",".","c",")",",","xr",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bC","=","vec4","(","xr",".","c",",","xi",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tm","(","xr",".","a",",","xr",".","b",",","xl",")",";"]}]}}]},{type:"textline",tokens:["bz","=","xr",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","xr",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","u_camera_eye","-","xr",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","rB","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["u_","=","xr",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["u_","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["xg","=","u_view_matrix","*","vec4","(","xr",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bA","=","xg",";"]}]}}]},{type:"textline",tokens:["xh","=","u_proj_matrix","*","xg",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["xh",".","xy","+=","u_subpixel_jitter","*","xh",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","by","(","xh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ug","(","xr",".","a",",","xr",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","-","xg",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tr","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","xh",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec2","u_texel_size",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","float","xg",";","varying","vec3","u_",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";","varying","vec3","bD",";","varying","float","xh",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xi",";","vec3","xj",";","float","xk",",","xl",",","xm",";","vec2","xn",",","xo",";","xn","=","gl_PointCoord","-","0.5",";","xk","=","2.0","*","length","(","xn",")",";","xk","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","xk",")",";","xk","=","u_diffuse_color",".","a","*","xg","*","(","1.0","-","xk",")",";","xj","=","u_","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","bD",".","xy","/","bD",".","z",";","xn","=","vec2","(","xn",".","x",",","-","xn",".","y",")","*","xh","*","u_texel_size",";","xn","=","vec2","(","xo","+","xn",")",";","xi","=","texture2D","(","u_scene_depth",",","xn",")",";","xl","=","k","(","xi",")",";","xm","=","-","bA",".","z","/","u_view_max_depth",";","xm","=","xl","-","xm",";","xm","=","u_view_max_depth","/","SOFT_STRENGTH","*","xm",";","xk","=","xk","*","min","(","xm",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["aH","(","xj",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aK","(","xj",",","xk",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xj",",","xk",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","xg",";","varying","vec3","u_",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";","varying","vec3","bD",";","varying","float","xh",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","xV",",","xW",",","xX",",","xY",";","vec4","xZ",",","x_",";","xi","ya",";","ya","=","xU","(",")",";","xZ","=","u_view_matrix","*","vec4","(","ya",".","b",",","1.0",")",";","x_","=","u_proj_matrix","*","xZ",";","gl_Position","=","x_",";","xg","=","ya",".","c",";","u_","=","ya",".","d",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bA","=","xZ",";"]}]}}]},{type:"textline",tokens:["xV","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","xV","=","ya",".","a","*","xV",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","x_",".","x",";","xX","=","x_",".","y",";","xY","=","x_",".","w",";","bD",".","x","=","(","xW","+","xY",")","/","2.0",";","bD",".","y","=","(","xX","+","xY",")","/","2.0",";","bD",".","z","=","xY",";","xh","=","xV",";"]}]}}]},{type:"textline",tokens:["gl_PointSize","=","xV",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","xg",";","varying","vec3","u_",";","varying","vec2","bJ",";","varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","xV",";","float","xW",",","xX",",","xY",";","vec3","xZ",",","x_",",","ya",",","yb",",","yc",",","yd",",","ye",",","yf",";","vec4","yg",",","yh",";","yg","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["yh","=","texture2D","(","u_sampler",",","bJ",")",";","aE","(","yh",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yg",".","rgb","=","mix","(","yg",".","rgb",",","yh",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yg",".","rgb","*=","mix","(","vec3","(","1.0",")",",","yh",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yg",".","a","=","yh",".","a",";"]}]}}]},{type:"textline",tokens:["yg",".","rgb","*=","u_",";","xZ","=","u_diffuse_intensity","*","yg",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["x_","=","normalize","(","uZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","u_emit","*","yg",".","rgb",";","yb","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["yc","=","u_environment_energy","*","dO","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yc","=","u_environment_energy","*","dO","(","yb",")",";"]}]}}]},{type:"textline",tokens:["yc","=","u_ambient","*","yc",";","xW","=","u_specular_params","[","0","]",";","xV","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","yd","=","xW","*","u_specular_color",";","xf","(","ya",",","yc",",","xZ",",","yd",",","bz",",","yb",",","x_",",","xV",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","ye",",","yf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ye","=","xZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uY","(","ye",",","length","(","bA",")",",","x_",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["xW","=","yg",".","a","*","xg",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xX","=","-","bA",".","z","/","u_view_max_depth",";","yg","=","texture2DProj","(","u_scene_depth",",","bD",")",";","xY","=","k","(","yg",")",";","xX","=","xY","-","xX",";","xX","=","u_view_max_depth","/","SOFT_STRENGTH","*","xX",";","xW","=","xW","*","min","(","xX",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["aH","(","ye",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aK","(","ye",",","xW",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ye",",","xW",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","xg",";","varying","vec3","u_",";","varying","vec2","bJ",";","varying","vec3","uZ",";","varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","xX","(","vec2","xV",",","vec2","xW",")","{","return","(","atan","(","xW",".","y",",","xW",".","x",")","-","atan","(","xV",".","y",",","xV",".","x",")",")",";","}","void","main","(",")","{","vec4","xY",",","xZ",",","x_",";","mat4","ya",";","float","yb",",","yc",",","yd",";","xi","ye",";","ye","=","xU","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","yb","=","ye",".","e",";","ya","=","qQ","(","ye",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","yb","=","ye",".","e",";","ya","=","bk","(",")",";","ya","[","3","]","=","vec4","(","ye",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","yb","=","ye",".","e",";","ya","=","bo","(","radians","(","90.0",")",")",";","ya","[","3","]","=","vec4","(","ye",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","yb","=","xX","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","ye",".","e",";","ya","=","bm","(","radians","(","-","90.0",")",")",";","ya","[","3","]","=","vec4","(","ye",".","b",",","1.0",")",";","}","xY","=","vec4","(","a_p_bb_vertex","*","2.0","*","ye",".","a","*","u_p_size",",","0.0",",","1.0",")",";","xY","=","ya","*","bq","(","yb",")","*","xY",";","xZ","=","u_view_matrix","*","xY",";","x_","=","u_proj_matrix","*","xZ",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["yb","=","x_",".","x",";","yc","=","x_",".","y",";","yd","=","x_",".","w",";","bD",".","x","=","(","yb","+","yd",")","/","2.0",";","bD",".","y","=","(","yc","+","yd",")","/","2.0",";","bD",".","z","=","yd",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","x_",";","xg","=","ye",".","c",";","u_","=","ye",".","d",";","bJ","=","a_p_bb_vertex","+","0.5",";","bz","=","xY",".","xyz",";","uZ","=","u_camera_eye","-","xY",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bA","=","xZ",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","xV",";","const","float","xW","=","0.99",";","const","float","xX","=","1.8",";","const","int","xY","=","8",";","float","yd","(","vec3","xZ",",","vec3","x_",")","{","float","ya",",","yb",",","yc",";","ya","=","dot","(","x_",",","x_",")",";","yb","=","2.0","*","dot","(","x_",",","xZ",")",";","yc","=","dot","(","xZ",",","xZ",")","-","1.0",";","ya","=","yb","*","yb","-","4.0","*","ya","*","yc",";","ya","=","sqrt","(","ya",")",";","ya","=","(","-","yb","-","ya",")","/","2.0",";","ya","=","yc","/","ya",";","return","ya",";","}","float","yk","(","float","ye",",","float","yf",")","{","float","yg",",","yh",",","yi",",","yj",";","yg","=","3.0","*","(","1.0","-","yf","*","yf",")",";","yh","=","2.0","*","(","2.0","+","yf","*","yf",")",";","yi","=","1.0","+","ye","*","ye",";","yj","=","pow","(","1.0","+","yf","*","yf","-","2.0","*","yf","*","ye",",","1.5",")",";","yj","=","max","(","yj",",","0.00001",")",";","return","(","yg","/","yh",")","*","(","yi","/","yj",")",";","}","float","yq","(","vec3","yl",",","vec3","ym",",","float","yn",")","{","vec3","yo",";","float","yp",";","yp","=","dot","(","ym",",","-","yl",")",";","if","(","yp","<","0.0",")","{","return","1.0",";","}","yo","=","yl","+","yp","*","ym",";","if","(","length","(","yo",")","<","yn",")","{","return","0.0",";","}","else","if","(","length","(","yo",")",">=","yn",")","{","yo","=","normalize","(","yo",")","*","yn","-","yl",";","yp","=","acos","(","dot","(","normalize","(","yo",")",",","ym",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","yp","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","yu","(","float","yr",",","vec3","ys",",","float","yt",")","{","return","ys","-","ys","*","pow","(","u_sky_color",",","vec3","(","yt","/","yr",")",")",";","}","void","main","(",")","{","float","yv",",","yw",",","yx",",","yy",",","yz",",","yA",",","yB",",","yC",",","yD",";","vec3","yE",",","yF",",","yG",",","yH",",","yI",",","yJ",",","yK",";","yE","=","normalize","(","xV",")",";","yF","=","u_sun_direction",";","yv","=","dot","(","yE",",","yF",")",";","yw","=","yk","(","yv",",","-","0.01",")","*","u_rayleigh_brightness","*","yF",".","y",";","yx","=","yk","(","yv","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","yF",".","y",")",";","yv","=","smoothstep","(","0.0",",","100.0",",","yk","(","yv",",","0.9995",")",")","*","u_spot_brightness",";","yG","=","vec3","(","0.0",",","xW",",","0.0",")",";","yy","=","yd","(","yG",",","yE",")",";","yz","=","yy","/","float","(","xY",")",";","yA","=","yq","(","yG",",","yE",",","xW","-","0.3",")",";","yH","=","vec3","(","0.0",",","0.0",",","0.0",")",";","yI","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","yL","=","0",";","yL","<","xY",";","yL","++",")","{","yB","=","yz","*","float","(","yL",")",";","yJ","=","yG","+","yE","*","yB",";","yC","=","yq","(","yJ",",","yF",",","xW","-","0.2",")",";","yD","=","yd","(","yJ",",","yF",")",";","yK","=","yu","(","yD",",","vec3","(","xX",")",",","u_scatter_strength",")","*","yC",";","yH","+=","yu","(","sqrt","(","yB",")",",","u_sky_color","*","yK",",","u_rayleigh_strength",")",";","yI","+=","yu","(","yB",",","yK",",","u_mie_strength",")",";","}","yH","=","yH","*","yA","*","pow","(","yy",",","u_rayleigh_collection_power",")","/","float","(","xY",")",";","yI","=","(","yI","*","yA","*","pow","(","yy",",","u_mie_collection_power",")",")","/","float","(","xY",")",";","yH","=","vec3","(","yv","*","yI","+","yx","*","yI","+","yw","*","yH",")",";","aH","(","yH",")",";","gl_FragColor","=","vec4","(","yH",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","xV",";","void","main","(",")","{","vec4","xW",",","xX",";","xW","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","xX","=","u_cube_view_matrix","*","xW",";","xV","=","xX",".","xyz",";","gl_Position","=","xW",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bJ",";","void","main","(",")","{","vec4","xW",";","xW","=","texture2D","(","u_sampler",",","bJ",")",";","aH","(","xW",".","rgb",")",";","aK","(","xW",".","rgb",",","xW",".","a",")",";","gl_FragColor","=","xW",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bJ",";","void","main","(",")","{","vec2","xW",";","float","xX",";","vec4","xY",";","vec3","xZ",";","bJ","=","a_texcoord",";","xZ","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","xY","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","xZ",",","0.0",")",";","xY",".","x","/=","xY",".","w",";","xY",".","y","/=","xY",".","w",";","xY","+=","99999.0","*","step","(","xY",".","z",",","0.0",")",";","xY","+=","100.0","*","(","step","(","1.0",",","abs","(","xY",".","x",")",")","+","step","(","1.0",",","abs","(","xY",".","y",")",")",")",";","xY",".","x","=","-","a_lf_dist","*","xY",".","x",";","xY",".","y","=","-","a_lf_dist","*","xY",".","y",";","xX","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","xW","=","vec2","(","a_lf_bb_vertex",".","x","/","xX",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","x_","=","1.9",";","xW","*=","(","1.0","+","x_","*","length","(","xY",".","xy",")",")",";","}","gl_Position","=","vec4","(","xY",".","xy","+","xW",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","Ab","(","vec3","zX",",","vec3","zY",",","float","zZ",",","float","z_",")","{","float","Aa",";","Aa","=","zZ","*","z_",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yl","(","zY",",","zX",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yp","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yt","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yy","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yD","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yI","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yM","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yQ","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yU","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yY","(","zX",",","zY",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zd","(","zY",",","zX",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zj","(","zY",",","zX",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zp","(","zY",",","zX",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zv","(","zY",",","zX",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zA","(","zY",",","zX",",","Aa",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zE","(","zY",",","zX",",","Aa",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Aj","(","float","Ac",",","float","Ad",",","float","Ae",",","float","Af",")","{","float","Ag",";","vec3","Ah",",","Ai",";","Ah","=","vec3","(","Ac",")",",","Ai","=","vec3","(","Ad",")",";","Ag","=","Ae","*","Af",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yl","(","Ai",",","Ah",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yp","(","Ah",",","Ai",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yt","(","Ah",",","Ai",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zK","(","Ac",",","Ad",",","Ag",",","Af",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zQ","(","Ac",",","Ad",",","Ag",",","Af",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zW","(","Ac",",","Ad",",","Ag",",","Af",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yM","(","Ah",",","Ai",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yQ","(","Ah",",","Ai",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yU","(","Ah",",","Ai",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yY","(","Ah",",","Ai",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zA","(","Ai",",","Ah",",","Ag",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zE","(","Ai",",","Ah",",","Ag",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","xV",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Ak",";","float","Al",",","Am",",","An",";","vec3","Ao",",","Ap",",","Aq",",","Ar",",","As",";","Ap","=","normalize","(","xV",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","textureCube","(","u_sky",",","Ap",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","u_horizon_color",";","aH","(","Ao",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","vec3","(","bJ",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","vec3","(","xV",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["Al","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","abs","(","bJ",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Al","=","(","bJ",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","acos","(","Ap",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","abs","(","Am","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Al","=","1.0","-","Am","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["Ar","=","u_horizon_color",";","As","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","1.0",";","Ak","=","textureCube","(","u_sky",",","Ap",")",";","aE","(","Ak",".","rgb",")",";","Am","=","Ak",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","aO","(","Ak",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ak","=","vec4","(","vec3","(","1.0",")","-","Ak",".","rgb",",","Ak",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","1.0","-","Am",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ak","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","Ak",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","Ab","(","Ak",".","rgb",",","Ar",",","Am",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["An","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","Aq",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","An","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","An","!=","0.0",")","As","=","Ab","(","Ak",".","rgb",",","As",",","Am",",","An",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","dot","(","Ak",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Al","=","Aj","(","u_sky_tex_dvar",",","Al",",","Am",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","mix","(","Ar",",","As",",","Al",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","Ar",";"]}]}}]},{type:"textline",tokens:["aH","(","Ao",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aH","(","Ar",")",";","aH","(","As",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","mix","(","Ar",",","As",",","Al",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","Ar",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["aE","(","Ao",")",";","Al","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","Al","=","min","(","-","Al","*","0.03",",","0.8",")",";","Am","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","Ar","=","vec3","(","0.0",")",";","Ak","=","u_underwater_fog_color_density",";","Ak",".","rgb","=","mix","(","Ak",".","rgb",",","Ar",",","min","(","-","Ap",".","y","+","Al",",","1.0",")",")","*","Am",";","Al","=","clamp","(","sign","(","Ap",".","y","-","0.05","*","Al",")",",","0.0",",","1.0",")",";","Ao","=","mix","(","Ak",".","rgb",",","Ao",",","Al",")",";","aH","(","Ao",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ao",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","xV",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","zX",",","zY",";","zX","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","zY","=","u_sky_vp_inverse","*","zX",";","xV","=","zY",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","zX",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","zX","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uZ",";","varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","zY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","z_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Aa",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","Am","(","in","vec2","Ab",",","in","vec3","Ac",",","in","vec3","Ad",",","in","vec3","Ae",",","out","float","Af",")","{","float","Ag",",","Ah",",","Ai",";","vec2","Aj",";","vec3","Ak",",","Al",";","Af","=","0.0",";","Ak","=","reflect","(","-","Ad",",","Ac",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","Ab",".","xy","+","Ac",".","xz","*","REFL_BUMP","/","bE",";","Af","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Al","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","Al","=","texture2D","(","u_plane_reflection",",","Aj",")",".","rgb",";","aE","(","Al",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","u_mirror_factor",";","Al","=","Ae","*","textureCube","(","u_mirrormap",",","Ak",")",".","rgb",";","aE","(","Al",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Af","=","u_reflect_factor",";","Al","=","Ae","*","vec3","(","0.3",",","0.5",",","1.0",")",";","aE","(","Al",")",";"]}]}}]},{type:"textline",tokens:["Ak","=","normalize","(","Ak","+","Ad",")",";","Ag","=","1.0","-","dot","(","Ad",",","Ak",")",";","Ah","=","u_fresnel_params","[","3","]",";","Ai","=","u_fresnel_params","[","2","]",";","Ai","=","Ah","+","(","1.0","-","Ah",")","*","pow","(","Ag",",","Ai",")",";","Af","=","min","(","Af","*","Ai",",","1.0",")",";","return","Al",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","An",";","vec2","Ao",",","Ap",",","Aq",";","float","Ar",",","As",",","At",",","Au",",","Av",",","Aw",";","vec3","Ax",",","Ay",",","Az",",","AA",",","AB",",","AC",",","AD",",","AE",",","AF",";","mat3","AG",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","mat3","(","bC",",","zY",",","bB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","normalize","(","bB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","bz",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","vec2","(","zZ",".","x",",","-","zZ",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","vec2","(","bz",".","x",",","-","bz",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","bJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","vec3","(","0.0",")",";","Az","=","texture2D","(","u_normalmap0",",","Ao","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ay","+=","Az",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["AA","+=","Az",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","texture2D","(","u_normalmap0",",","Ao","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ay","+=","Az",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["AA","+=","Az",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","texture2D","(","u_normalmap0",",","Ao","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ay","+=","Az",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["AA","+=","Az",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","texture2D","(","u_normalmap0",",","Ao","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ay","+=","Az",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["AA","+=","Az",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","AG","*","AA",";","if","(","!","aU","(","AA",",","vec3","(","0.0",")",")",")","AA","=","normalize","(","AA",")",";","AA","=","mix","(","Ax",",","AA",",","0.2",")",";","AA","=","normalize","(","AA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","mix","(","Ax",",","normalize","(","AG","*","Ay",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","mix","(","Ax",",","normalize","(","AG","*","Ay",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["Ax","=","normalize","(","Ax",")",";"]}]}}]},{type:"textline",tokens:["Ay","=","normalize","(","uZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","bD",".","xy","/","bD",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["As","=","bE","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["At","=","u_diffuse_color",".","a",";","An","=","texture2DProj","(","u_scene_depth",",","bD",")",";","Au","=","k","(","An",")",";","Av","=","max","(","Au","-","bE",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","Ap","+","Ax",".","xz","*","u_refr_bump","/","bE",";","Au","=","dU","(","Au",",","Aq",",","Ap",")",";","Au","=","max","(","Au","-","bE",",","0.0",")",";","Au","=","u_view_max_depth","/","ABSORB","*","Au",";","if","(","u_cam_water_depth","<","0.0",")","Aw","=","0.0",";","else","Aw","=","min","(","At","*","Au",",","1.0",")",";","Au","=","u_view_max_depth","/","ABSORB","*","Av",";","At","=","min","(","15.0","*","At","*","u_view_max_depth","*","Av",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Au","=","u_view_max_depth","/","ABSORB","*","Av",";","if","(","u_cam_water_depth",">","0.0",")","At","=","min","(","At","*","Au",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["At","*=","min","(","5.0","*","As",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["At","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","1.0","-","At",";","Aq","=","Ap","+","Ax",".","xz","*","u_refr_bump","/","bE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","texture2D","(","u_refractmap",",","Aq",")",".","rgb",";","aE","(","Az",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","pow","(","min","(","z_",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","AB","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","Au",")",";","Au","=","pow","(","min","(","z_",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","AB","=","mix","(","u_shore_water_col",",","AB",",","Au",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AB","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","max","(","1.0","-","u_view_max_depth","*","Av",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Av","=","1.0","-","At",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","max","(","Ar","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","normalize","(","vec3","(","z_",".","r",",","0.0",",","z_",".","g",")",")",";","AC","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","AC",",","0.8",")",")",";","Au","=","1.25","*","max","(","dot","(","AA",",","AC",")","-","0.2",",","0.0",")",";","Au","+=","max","(","dot","(","AA",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","Av","+=","Au","*","(","1.0","-","z_",".","b",")",";","Ar","*=","(","1.0","-","0.95","*","pow","(","z_",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["Av","+=","Ar",";","Av","=","min","(","u_foam_factor","*","Av",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["An","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Ao","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["Ar","=","u_specular_params","[","0","]",";","Ao","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","AA","=","Ar","*","u_specular_color",";","AC","=","u_environment_energy","*","dO","(","Ax",")",";","AC","=","u_ambient","*","AC",";","AC","=","AC","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AD","=","Am","(","Ap",",","Ax",",","Ay",",","AC",",","Ar",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AD","=","Am","(","vec2","(","0.0",")",",","Ax",",","Ay",",","AC",",","Ar",")",";"]}]}}]},{type:"textline",tokens:["AB","=","u_diffuse_intensity","*","AB",";","xf","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","AB",",","AA",",","bz",",","Ax",",","Ay",",","Ao",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","AE",",","AF",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","max","(","dot","(","u_sun_direction",",","-","bB",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","Ay",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","Au","=","clamp","(","SSS_STRENGTH","*","Au",",","0.0",",","1.0",")",";","AE","=","mix","(","AE",",","u_shallow_water_col",",","Au",")",";","AE","=","mix","(","AE",",","u_shore_water_col",",","Au",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AE","=","mix","(","Az",",","AE",",","Aw",")",";"]}]}}]},{type:"textline",tokens:["AE","=","mix","(","AE",",","AD",",","Ar",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","mix","(","An",".","g",",","An",".","r",",","max","(","4.0","*","(","Av","-","0.75",")",",","0.0",")",")",";","Ar","=","mix","(","An",".","b",",","Ar",",","max","(","2.0","*","Av","-","1.0",",","0.0",")",")",";","Ar","=","mix","(","0.0",",","Ar",",","Av",")",";","AE","=","mix","(","AE",",","AC",",","Ar",")",";"]}]}}]},{type:"textline",tokens:["AE","+=","AF",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","uR","(","AE",",","As",",","u_cam_water_depth",")",";","}","else","{","uY","(","AE",",","As",",","Ay",",","1.0",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uY","(","AE",",","As",",","Ay",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["aH","(","AE",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["At","=","max","(","At",",","AF",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["At","+=","Ar",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["aK","(","AE",",","At",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["AF","=","fwidth","(","Aa",")",";","AF","=","smoothstep","(","vec3","(","0.0",")",",","AF","*","zX",",","Aa",")",";","Ar","=","min","(","min","(","AF",".","x",",","AF",".","y",")",",","AF",".","z",")",";","Ar","=","clamp","(","Ar",",","0.0",",","1.0",")",";","AE","=","mix","(","u_wireframe_edge_color",",","AE",",","Ar",")",";","At","=","mix","(","1.0",",","At",",","Ar",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","AE",",","At",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uZ",";","varying","vec3","bz",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","zY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","zZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","z_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Aa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Af","(","in","vec2","zX",")","{","float","Ab",";","vec4","Ac",";","vec2","Ad",";","Ad","=","0.5","+","vec2","(","(","zX",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","zX",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","Ac","=","texture2D","(","u_shore_dist_map",",","Ad",")",";","const","vec2","Ae","=","vec2","(","1.0","/","255.0",",","1.0",")",";","Ab","=","dot","(","Ac",".","ba",",","Ae",")",";","Ad","=","normalize","(","Ac",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Ad",",","Ab",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","Ar","(","inout","vec3","Ag",",","in","float","Ah",",","in","vec3","Ai",")","{","vec2","Aj",",","Ak",",","Al",";","float","Am",",","An",",","Ao",",","Ap",",","Aq",";","Am","=","ag","(","DST_NOISE_SCALE_0","*","(","Ag",".","xz","+","DST_NOISE_FREQ_0","*","Ah",")",")","*","ag","(","DST_NOISE_SCALE_1","*","(","Ag",".","zx","-","DST_NOISE_FREQ_1","*","Ah",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Ao","=","Ai",".","b",";","Ap","=","sqrt","(","Ao",")",";","An","=","max","(","Ao",",","DIR_MIN_SHR_FAC",")","*","sin","(","Ap","/","An","+","DIR_FREQ","*","Ah",")",";","Aq","=","max","(","ag","(","DIR_NOISE_SCALE","*","(","Ag",".","xz","+","DIR_NOISE_FREQ","*","Ah",")",")",",","DIR_MIN_NOISE_FAC",")",";","An","*=","Aq",";","Ap","=","WAVES_HEIGHT","*","mix","(","An",",","Am",",","max","(","Ap",",","DST_MIN_FAC",")",")",";","Aj","=","Ai",".","rg",";","An","=","WAVES_HOR_FAC","*","An","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Ao",")",",","0.0",")",";","Aj","=","An","*","Aj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","WAVES_HEIGHT","*","Am",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Ak","=","2.0","*","(","Ag",".","xz","-","0.1","*","Ah",")",";","Al","=","1.3","*","(","Ag",".","zx","+","0.03","*","Ah",")",";","Am","=","L","(","0.5","*","Ak",")",".","x","+","L","(","0.5","*","Al",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ag",".","xz","+=","Aj",";","Am","*=","Ao",";"]}]}}]},{type:"textline",tokens:["Ap","+=","SMALL_WAVES_FAC","*","Am",";"]}]}}]},{type:"textline",tokens:["Ag",".","y","+=","Ap",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","As",",","At",";","vec2","Au",";","float","Av",",","Aw",",","Ax",";","vec3","Ay",",","Az",",","AA",",","AB",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","Aa","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Aa","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Aa","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Ay","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","abs","(","Ay",".","y",")",";","Au","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","Av",")",";","Ay",".","y","=","WATER_LEVEL",";","Ay",".","xz","+=","Au",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["aR","AC","=","ry","(","Ay",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","Af","(","AC",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","length","(","u_wind",")",";","Ax","=","u_time",";","Ax","*=","Aw",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","Av",";","Ay","=","AC",".","a","+","vec3","(","Av",",","0.0",",","0.0",")",";","Az","=","AC",".","a","+","vec3","(","0.0",",","0.0",",","Av",")",";","if","(","a_position",".","y","<","0.0",")","{","AC",".","a",".","y","=","WATER_LEVEL","-","1.0",";","Ay",".","y","=","AC",".","a",".","y",";","Az",".","y","=","AC",".","a",".","y",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zZ","=","AC",".","a",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","AC",".","a","+","vec3","(","0.05",",","0.0",",","0.0",")",";","Az","=","AC",".","a","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","Af","(","Ay",".","xz",")",";","AB","=","Af","(","Az",".","xz",")",";","Ar","(","Ay",",","Ax",",","AA",")",";","Ar","(","Az",",","Ax",",","AB",")",";","Ar","(","AC",".","a",",","Ax",",","z_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ar","(","Ay",",","Ax",",","vec3","(","0.0",")",")",";","Ar","(","Az",",","Ax",",","vec3","(","0.0",")",")",";","Ar","(","AC",".","a",",","Ax",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["Ay","=","normalize","(","Ay","-","AC",".","a",")",";","Az","=","normalize","(","Az","-","AC",".","a",")",";","bB","=","normalize","(","cross","(","Az",",","Ay",")",")",";","Ax","=","dot","(","bB",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Ax","=","clamp","(","0.8","-","Ax",",","0.0",",","1.0",")",";","bB","=","mix","(","bB",",","vec3","(","0.0",",","1.0",",","0.0",")",",","Ax",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","a_tangent",";","bB","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bC","=","Az",";","zY","=","cross","(","bB",",","bC",")",";"]}]}}]},{type:"textline",tokens:["bz","=","AC",".","a",";","uZ","=","u_camera_eye","-","AC",".","a",";","As","=","u_view_matrix","*","vec4","(","AC",".","a",",","1.0",")",";","At","=","u_proj_matrix","*","As",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","At",".","x",";","Av","=","At",".","y",";","Aw","=","At",".","w",";","bD",".","x","=","(","Ax","+","Aw",")","/","2.0",";","bD",".","y","=","(","Av","+","Aw",")","/","2.0",";","bD",".","z","=","Aw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","-","As",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","At",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_NONE",tokens:["0"]},{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"WM_DEBUG_SPHERES",tokens:["4"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Aa",";","const","float","zX","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ab","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ab","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ac","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","Ad","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","Ae","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Af",",","Ag",";","vec3","Ah",",","Ai",";","Ah","=","vec3","(","0.0",")",";","Af","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","sign","(","Aa","-","vec3","(","0.02","*","zX",")",")",";","if","(","Ai",".","x","<","0.0","||","Ai",".","y","<","0.0","||","Ai",".","z","<","0.0",")","{","Ah","=","Ab",";","Af","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","sign","(","Aa","-","vec3","(","0.02","*","zX",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","Ai",".","x","<","0.0","||","Ai",".","y","<","0.0","||","Ai",".","z","<","0.0",")","Ah","=","u_wireframe_edge_color",";","else","Ah","=","Ae",";","Af","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","Ai",".","x","<","0.0","||","Ai",".","y","<","0.0","||","Ai",".","z","<","0.0",")","Af","=","1.0",";","else","Af","=","0.0",";","Ah","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","Ai",".","x","<","0.0","||","Ai",".","y","<","0.0","||","Ai",".","z","<","0.0",")","Ah","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","Ah","=","Ac",";","else","Ah","=","Ad",";","Af","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["Ai","=","fwidth","(","Aa",")",";","Ai","=","smoothstep","(","vec3","(","0.0",")",",","Ai","*","zX",",","Aa",")",";","Ag","=","min","(","min","(","Ai",".","x",",","Ai",".","y",")",",","Ai",".","z",")",";","Ag","=","clamp","(","Ag",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","Ah","=","vec3","(","mix","(","u_wireframe_edge_color",",","Ae",",","Ag",")",")",";","Af","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","Ah","=","u_wireframe_edge_color",";","Af","=","mix","(","1.0",",","0.0",",","Ag",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","Ah","=","mix","(","u_wireframe_edge_color",",","Ac",",","Ag",")",";","else","Ah","=","mix","(","u_wireframe_edge_color",",","Ad",",","Ag",")",";","Af","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["aH","(","Ah",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["aK","(","Ah",",","Af",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ah",",","Af",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","Aa",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","zX",";","mat4","Ab",";","vec3","Ac",",","Ad",",","Ae",",","Af",",","Ag",";","if","(","a_polyindex","==","0.0",")","Aa","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Aa","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Aa","=","vec3","(","0.0",",","0.0",",","1.0",")",";","Ac","=","a_position",";","Ad","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["aR","Ah","=","ry","(","Ac",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["Ac","=","mix","(","Ac",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["Ae","=","vec3","(","0.0",")",";","Af","=","vec3","(","0.0",")",";","sy","(","Ac",",","Ae",",","Af",",","Ad",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Af","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aR","Ah","=","tX","(","Ac",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Af",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["Ae","=","(","u_model_matrix","*","vec4","(","Af",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ab","=","rr","(","u_camera_eye",",","Ae",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ab","=","rl","(","u_camera_eye",",","Ae",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","(","u_model_matrix","*","vec4","(","Af",",","1.0",")",")",".","xyz",";","Ab","=","Ab","*","rd","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","Ag",")",";"]}]}}]},{type:"textline",tokens:["aR","Ah","=","ry","(","Ac","-","Af",",","Af",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ab",")",";","Ah",".","b","=","Ae",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aR","Ah","=","ry","(","Ac",",","Af",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tm","(","Ah",".","a",",","Ah",".","b",",","Ad",")",";"]}]}}]}]}}]},{type:"textline",tokens:["zX","=","u_view_matrix","*","vec4","(","Ah",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","zX",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bJ",";","void","main","(",")","{","vec4","zX",",","Ab",";","zX","=","texture2D","(","u_sampler_left",",","bJ",")",";","Ab","=","texture2D","(","u_sampler_right",",","bJ",")",";","gl_FragColor","=","vec4","(","zX","[","0","]",",","Ab","[","1","]",",","Ab","[","2","]",",","zX","[","3","]","+","Ab","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bJ",";"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["2"]},{type:"define",name:"AA_QUALITY_LOW",tokens:["0"]},{type:"define",name:"AA_QUALITY_MEDIUM",tokens:["1"]},{type:"define",name:"AA_QUALITY_HIGH",tokens:["2"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["vec4","Ad","(","float","zX",",","float","Ab",")","{","vec2","Ac",";","Ac","=","bJ","+","vec2","(","zX",",","Ab",")","*","u_texel_size",";","return","texture2D","(","u_color",",","Ac",")",";","}","vec4","Aq","(",")","{","vec2","Ae",";","float","Af",",","Ag",",","Ah",",","Ai",",","Aj",",","Ak",";","vec4","Al",",","Am",",","An",",","Ao",",","Ap",";","Al","=","Ad","(","-","1.0",",","-","1.0",")",";","Am","=","Ad","(","1.0",",","-","1.0",")",";","An","=","Ad","(","-","1.0",",","1.0",")",";","Ao","=","Ad","(","1.0",",","1.0",")",";","Ap","=","Ad","(","0.0",",","0.0",")",";","Af","=","aO","(","Ap",")",";","Ag","=","aO","(","Al",")",";","Ah","=","aO","(","Am",")",";","Ai","=","aO","(","An",")",";","Aj","=","aO","(","Ao",")",";","Ak","=","min","(","Af",",","min","(","min","(","Ag",",","Ah",")",",","min","(","Ai",",","Aj",")",")",")",";","Af","=","max","(","Af",",","max","(","max","(","Ag",",","Ah",")",",","max","(","Ai",",","Aj",")",")",")",";","Ae",".","x","=","-","(","(","Ag","+","Ah",")","-","(","Ai","+","Aj",")",")",";","Ae",".","y","=","(","(","Ag","+","Ai",")","-","(","Ah","+","Aj",")",")",";","Aj","=","max","(","(","Ag","+","Ah","+","Ai","+","Aj",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","Aj","=","1.0","/","(","min","(","abs","(","Ae",".","x",")",",","abs","(","Ae",".","y",")",")","+","Aj",")",";","Ae","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Ae","*","Aj",")",")","*","u_texel_size",";","Ao","=","0.5","*","(","texture2D","(","u_color",",","bJ","+","Ae","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bJ","+","Ae","*","(","2.0","/","3.0","-","0.5",")",")",")",";","An","=","Ao","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bJ","+","Ae","*","-","0.5",")","+","texture2D","(","u_color",",","bJ","+","Ae","*","0.5",")",")",";","Aj","=","aO","(","An",")",";","if","(","(","Aj","<","Ak",")","||","(","Aj",">","Af",")",")","return","Ao",";","else","return","An",";","}"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["1"]},{type:"define",name:"FXAA_BLEND4WEB",tokens:["1"]},{type:"include",file:"fxaa.glslf"},{type:"condition",parts:[{type:"if",expression:["AA_QUALITY","AA_QUALITY_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["39"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["1.00"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.063"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0312"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["20"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.65"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0625"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.50"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0833"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Aq","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Bg","(","bJ",",","u_color",",","u_texel_size",",","FXAA_QUALITY_SUBPIX",",","FXAA_QUALITY_EDGE_THRESHOLD",",","FXAA_QUALITY_EDGE_THRESHOLD_MIN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bJ",";","void","main","(",")","{","vec4","zX",";","vec2","Ab",",","Ac",";","Ab","=","vec2","(","0.0",",","0.0",")",";","Ac","=","u_texel_size",";","zX","=","texture2D","(","u_color",",","bJ",")",";","gl_FragColor","=","zX","*","0.0875447373698",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0858112354248",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0808139781061",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0731235112908",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0635705267419",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0530985673112",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0426125984122",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0328565115809",";","Ab","+=","Ac",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","+","Ab",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bJ","-","Ab",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","zX",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bJ",";","void","main","(",")","{","vec4","zX",",","Ab",";","zX","=","texture2D","(","u_main",",","bJ",")",";","Ab","=","texture2D","(","u_bloom",",","bJ",")",";","zX","=","zX",";","zX","+=","Ab",";","gl_FragColor","=","vec4","(","zX",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bJ",";","void","main","(",")","{","float","zX",";","vec3","Ab",";","vec4","Ac",";","Ac","=","texture2D","(","u_color",",","bJ",")",";","Ab","=","Ac",".","rgb",";","if","(","u_brightness","<","0.0",")","Ab","=","Ab","*","(","1.0","+","u_brightness",")",";","else","Ab","=","Ab","+","(","(","1.0","-","Ab",")","*","u_brightness",")",";","Ab","=","(","Ab","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","Ab","*=","u_exposure",";","zX","=","aO","(","vec4","(","Ab",",","0.0",")",")",";","Ab","=","mix","(","vec3","(","zX",")",",","Ab",",","u_saturation",")",";","gl_FragColor","=","vec4","(","Ab",",","Ac",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bJ",";","void","main","(",")","{","gl_FragColor","=","g","(","clamp","(","Bn","(","u_depth",",","bJ",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bJ",";","void","main","(",")","{","float","zX",",","Ab",";","vec4","Ac",",","Ad",";","Ac","=","texture2D","(","u_sharp",",","bJ",")",";","if","(","u_dof_dist",">","0.0",")","{","zX","=","Bn","(","u_depth",",","bJ",",","u_camera_range",")",";","zX","*=","u_view_max_depth",";","if","(","zX","<","u_dof_dist",")","Ab","=","(","u_dof_dist","-","zX",")","/","u_dof_front",";","else","Ab","=","(","zX","-","u_dof_dist",")","/","u_dof_rear",";","Ab","=","clamp","(","Ab",",","0.0",",","1.0",")",";","Ad","=","texture2D","(","u_blurred",",","bJ",")",";","gl_FragColor","=","mix","(","Ac",",","Ad",",","Ab",")",";","}","else","gl_FragColor","=","Ac",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bJ",";","void","main","(",")","{","float","zX",";","vec4","Ab",",","Ac",",","Ad",";","Ab","=","texture2D","(","u_src_color",",","bJ",")",";","Ac","=","texture2D","(","u_glow_mask_small",",","bJ",")",";","Ad","=","texture2D","(","u_glow_mask_large",",","bJ",")",";","gl_FragColor","=","Ab",";","if","(","Ad",".","a","!=","0.0",")","{","zX","=","u_glow_mask_large_coeff","*","Ad",".","a",";","zX","=","clamp","(","zX",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ad",".","rgb","/","Ad",".","a",",","zX",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","zX",")",";","}","if","(","Ac",".","a","!=","0.0",")","{","zX","=","u_glow_mask_small_coeff","*","Ac",".","a",";","zX","=","clamp","(","zX",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ac",".","rgb","/","Ac",".","a",",","zX",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","zX",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Bo",";","varying","vec2","Bp",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bJ",";","varying","vec4","Bq",";","void","main","(",")","{","vec4","Br",";","float","Bs",",","Bt",",","Bu",",","Bv",",","Bw",";","vec2","Bx",",","By",",","Bz",";","Bx","=","(","Bq",".","xy","-","bJ",")",";","Bs","=","length","(","Bx",")",";","Bx","=","u_radial_blur_step","*","Bx","/","Bs",";","Bt","=","Bs","/","u_radial_blur_step",";","Bx","*=","min","(","Bt",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Bt","=","max","(","Bt",",","STEPS_PER_PASS",")",";","By","=","bJ",";","Bu","=","0.0",";","for","(","float","BA","=","0.0",";","BA","<","STEPS_PER_PASS",";","BA","+=","1.0",")","{","if","(","BA","<=","Bt",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["Bv","=","Bn","(","u_input",",","By",",","u_camera_range",")",";","Bu","+=","max","(","(","1.0","-","pow","(","Bs",",","0.3",")",")","*","step","(","0.9",",","Bv",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Br","=","texture2D","(","u_input",",","By",")",";","Bu","+=","k","(","Br",")",";"]}]}}]},{type:"textline",tokens:["}","By","+=","Bx",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Bz","=","bJ","+","Bp",";","Bw","=","L","(","vec2","(","2.5","*","(","Bz",".","x",")",",","2.5","*","(","Bz",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","L","(","vec2","(","5.0","*","(","Bz",".","x",")","-","0.66","*","u_time",",","5.0","*","(","Bz",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","ag","(","vec2","(","7.5","*","(","Bz",".","x",")","+","0.33","*","u_time",",","7.5","*","(","Bz",".","y",")","-","0.33","*","u_time",")",")",";","Bw","*=","clamp","(","1.2","-","sqrt","(","0.2","*","Bs",")",",","0.0",",","1.0",")","*","Bo",";","Bu","=","max","(","Bw",",","Bu",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","g","(","Bu","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Bo",";","varying","vec2","Bp",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bJ",";","varying","vec4","Bq",";","void","main","(",")","{","float","zX",",","Ab",";","vec3","Ac",";","bJ","=","a_bb_vertex","+","0.5",";","Ac","=","normalize","(","u_sun_direction",")",";","Bq","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","Ac",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Bo","=","1.0",";","Ac","=","vec3","(","0.0",",","1.0",",","0.0",")",";","Ac","=","aX","(","u_camera_quat",",","Ac",")",";","Ac","=","normalize","(","Ac",")",";","zX","=","dot","(","Ac",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Ab","=","atan","(","Ac",".","x",",","Ac",".","z",")",";","Bp","=","vec2","(","-","Ab",",","acos","(","zX",")",")",";","}","else","{","Bo","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Bq",".","xy","=","0.5","*","(","Bq",".","xy","/","Bq",".","w","+","1.0",")",";","Bq","+=","99999.0","*","step","(","Bq",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bJ",";","void","main","(",")","{","float","zX",";","vec3","Ab",";","vec4","Ac",";","Ac","=","texture2D","(","u_main",",","bJ",")",";","Ab","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","aE","(","Ac",".","rgb",")",";","zX","=","k","(","texture2D","(","u_god_rays",",","bJ",")",")",";","Ab","=","Ac",".","rgb","+","u_god_rays_intensity","*","vec3","(","zX",")","*","Ab",";","aH","(","Ab",")",";"]},{type:"condition",parts:[{type:"if",expression:["SAFARI_CANVAS_ALPHA_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ab",",","max","(","0.01",",","Ac",".","a",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ab",",","Ac",".","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bJ",";","void","main","(",")","{","float","zX",";","vec4","Ab",";","Ab","=","texture2D","(","u_input",",","bJ",")",";","zX","=","dot","(","Ab",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","zX",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","zX",",","Ab",";","Ab","=","0.0",";","for","(","float","Ac","=","0.025",";","Ac","<","1.0",";","Ac","+=","0.05",")","for","(","float","Ad","=","0.025",";","Ad","<","1.0",";","Ad","+=","0.05",")","{","zX","=","max","(","texture2D","(","u_input",",","vec2","(","Ac",",","Ad",")",")",".","r",",","0.01",")",";","Ab","+=","log","(","zX",")",";","}","Ab","=","exp","(","Ab","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","Ab",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bJ",";","varying","float","Br",";","void","main","(",")","{","vec4","Bs",";","float","Bt",",","Bu",";","Bt","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","Bu","=","texture2D","(","u_luminance",",","bJ",")",".","r",";","Bs","=","texture2D","(","u_main",",","bJ",")",";","Bt","=","Bu","/","Bt",";","Bu","=","u_bloom_edge_lum",";","gl_FragColor","=","Bs","*","max","(","Bt","-","Bu",",","0.0",")","*","Br",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bJ",";","varying","float","Br",";","const","vec3","zX","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Ai","(","in","vec4","Ab",",","in","vec3","Ac",",","out","vec3","Ad",")","{","float","Ae",",","Af",",","Ag",",","Ah",";","Ae","=","Ab",".","w","*","Ac",".","x","+","Ab",".","y","*","Ac",".","z","-","Ab",".","z","*","Ac",".","y",";","Af","=","Ab",".","w","*","Ac",".","y","+","Ab",".","z","*","Ac",".","x","-","Ab",".","x","*","Ac",".","z",";","Ag","=","Ab",".","w","*","Ac",".","z","+","Ab",".","x","*","Ac",".","y","-","Ab",".","y","*","Ac",".","x",";","Ah","=","-","Ab",".","x","*","Ac",".","x","-","Ab",".","y","*","Ac",".","y","-","Ab",".","z","*","Ac",".","z",";","Ad",".","x","=","Ae","*","Ab",".","w","-","Ah","*","Ab",".","x","-","Af","*","Ab",".","z","+","Ag","*","Ab",".","y",";","Ad",".","y","=","Af","*","Ab",".","w","-","Ah","*","Ab",".","y","-","Ag","*","Ab",".","x","+","Ae","*","Ab",".","z",";","Ad",".","z","=","Ag","*","Ab",".","w","-","Ah","*","Ab",".","z","-","Ae","*","Ab",".","y","+","Af","*","Ab",".","x",";","}","void","main","(",")","{","vec3","Aj",";","bJ","=","2.0","*","a_position",";","Ai","(","u_camera_quat",",","zX",",","Aj",")",";","Br","=","dot","(","-","Aj",",","u_sun_direction",")","*","u_bloom_key",";","Br","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bJ",";","float","zX","=","0.0042",";","void","main","(",")","{","vec4","Ab",",","Ac",",","Ad",",","Ae",";","Ab","=","texture2D","(","u_mb_tex_curr",",","bJ",")",";","Ac","=","texture2D","(","u_mb_tex_accum",",","bJ",")",";","if","(","length","(","Ab","-","Ac",")",">","u_motion_blur_decay_threshold",")","{","Ad","=","(","1.0","-","u_motion_blur_exp",")","*","Ab","+","u_motion_blur_exp","*","Ac",";","Ad","=","Ad","-","Ac",";","Ae","=","Ab","-","Ac",";","Ad","=","min","(","max","(","abs","(","Ad",")",",","vec4","(","zX",")",")",",","abs","(","Ae",")",")","*","sign","(","Ad",")",";","gl_FragColor","=","Ac","+","Ad",";","}","else","{","gl_FragColor","=","Ab",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bJ",";","void","main","(",")","{","vec3","zX",";","float","Ab",";","vec4","Ac",",","Ad",",","Ae",";","Ac","=","texture2D","(","u_outline_src",",","bJ",")",";","gl_FragColor","=","Ac",";","if","(","u_draw_outline","!=","0.0",")","{","Ad","=","texture2D","(","u_outline_mask",",","bJ",")",";","Ae","=","texture2D","(","u_outline_mask_blurred",",","bJ",")",";","Ab","=","Ae",".","a","-","Ad",".","a",";","if","(","Ab","!=","0.0",")","{","Ab","=","smoothstep","(","0.0",",","1.0",",","Ae",".","a",")",";","if","(","Ad",".","a","==","0.0",")","{","zX","=","u_outline_color",";","aH","(","zX",")",";","Ad","=","vec4","(","clamp","(","zX",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","Ac",",","Ad",",","Ab",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"define",name:"FLIP_CUBEMAP_COORDS",tokens:["7"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_tex_number",";","uniform","vec2","u_delta",";"]}]}}]},{type:"textline",tokens:["varying","vec2","bJ",";","void","main","(",")","{","float","zX",",","Ab",",","Ac",",","Ad",";","vec2","Ae",",","Af",";","vec4","Ag",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bJ",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","texture2D","(","u_color",",","bJ",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Ag",".","r","+","Ag",".","g","+","Ag",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ae","=","vec2","(","0.0",",","0.0",")",";","Af","=","u_texel_size",";","Ag","=","texture2D","(","u_color",",","bJ",")",";","gl_FragColor","=","Ag","*","0.2270270270",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","0.1945945946",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","0.1945945946",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","0.1216216216",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","0.1216216216",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","0.0540540541",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","0.0540540541",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","0.0162162162",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ae","=","vec2","(","0.0",",","0.0",")",";","Af","=","u_texel_size",";","Ag","=","texture2D","(","u_color",",","bJ",")",";","gl_FragColor","=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.152507",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.141763",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.141763",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.113861",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.113861",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.079019",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.079019",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.047383",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.047383",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.024549",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.024549",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.01099",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.01099",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.00425",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.00425",";","Ae","+=","Af",";","Ag","=","texture2D","(","u_color",",","bJ","+","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.00142",";","Ag","=","texture2D","(","u_color",",","bJ","-","Ae",")",";","gl_FragColor","+=","Ag","*","(","1.0","-","step","(","0.0",",","-","Ag",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","u_texel_size",";","Ag","=","texture2D","(","u_color",",","bJ",")",";","gl_FragColor","=","Ag",";","if","(","Ag",".","a","==","0.0",")","{","Ag","=","texture2D","(","u_color",",","bJ","+","Af",")",";","if","(","Ag",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Ag",".","a",")",";","else","{","Ag","=","texture2D","(","u_color",",","bJ","-","Af",")",";","if","(","Ag",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Ag",".","a",")",";","}","}"]}]}},{type:"elif",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["zX","=","u_delta","[","0","]",";","Ab","=","u_delta","[","1","]",";","Ac","=","1.0","/","3.0",";","Ad","=","0.5",";","Af","=","vec2","(","Ac",",","Ad",")",";","if","(","u_tex_number","==","0",")","{","Ae","=","bJ","*","Af","+","vec2","(","2.0","*","Ac",",","0.0",")",";","Ae","[","0","]","=","min","(","Ae","[","0","]",",","1.0","-","zX",")",";","Ae","[","1","]","=","min","(","Ae","[","1","]",",","0.5","-","Ab",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Ac","-","Ae","[","0","]",",","Ae","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","1",")","{","Ae","=","bJ","*","Af",";","Ae","[","0","]","=","max","(","Ae","[","0","]",",","zX",")",";","Ae","[","1","]","=","min","(","Ae","[","1","]",",","0.5","-","Ab",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Ac","-","Ae","[","0","]",",","Ae","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","2",")","{","Ae","=","bJ","*","Af","+","vec2","(","Ac",",","Ad",")",";","Ae","[","0","]","=","max","(","Ae","[","0","]",",","Ac","+","zX",")",";","Ae","[","0","]","=","min","(","Ae","[","0","]",",","2.0","*","Ac","-","zX",")",";","Ae","[","1","]","=","min","(","Ae","[","1","]",",","1.0","-","Ab",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Ae","[","0","]",",","3.0","*","Ad","-","Ae","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","3",")","{","Ae","=","bJ","*","Af","+","vec2","(","0.0",",","Ad",")",";","Ae","[","0","]","=","min","(","Ae","[","0","]",",","Ac","-","zX",")",";","Ae","[","1","]","=","min","(","Ae","[","1","]",",","1.0","-","Ab",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Ae","[","0","]",",","3.0","*","Ad","-","Ae","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","4",")","{","Ae","=","bJ","*","Af","+","vec2","(","Ac",",","0.0",")",";","Ae","[","0","]","=","max","(","Ae","[","0","]",",","Ac","+","zX",")",";","Ae","[","0","]","=","min","(","Ae","[","0","]",",","2.0","*","Ac","-","zX",")",";","Ae","[","1","]","=","min","(","Ae","[","1","]",",","0.5","-","Ab",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","1.0","-","Ae","[","0","]",",","Ae","[","1","]",")",")",";","}","else","{","Af","=","bJ","*","Af","+","vec2","(","2.0","*","Ac",",","Ad",")",";","Af","[","0","]","=","min","(","Af","[","0","]",",","1.0","-","zX",")",";","Af","[","1","]","=","max","(","Af","[","1","]",",","0.5","+","Ab",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Ac","-","Af","[","0","]",",","Af","[","1","]",")",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bJ",";","void","main","(",")","{","bJ","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bJ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bs",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bt",";","varying","vec4","Bu",";","varying","vec4","Bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BC","(","vec2","Bx",",","sampler2D","By",")","{","float","Bz",",","BA",",","BB",";","Bz","=","texture2D","(","By",",","Bx",")",".","r",";","BA","=","texture2D","(","By",",","Bt",".","xy",")",".","r",";","BB","=","texture2D","(","By",",","Bt",".","zw",")",".","r",";","return","vec3","(","Bz",",","BA",",","BB",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","BH","(","vec2","BD",",","sampler2D","BE",")","{","vec2","BF",";","vec3","BG",";","BG","=","BC","(","BD",",","BE",")",";","BF","=","abs","(","BG",".","xx","-","BG",".","yz",")",";","BF","=","step","(","SMAA_PREDICATION_THRESHOLD",",","BF",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","BF",")",";","}"]}]}}]},{type:"textline",tokens:["void","BL","(","bvec2","BI",",","inout","vec2","BJ",",","vec2","BK",")","{","if","(","BI",".","x",")","BJ",".","x","=","BK",".","x",";","if","(","BI",".","y",")","BJ",".","y","=","BK",".","y",";","}","void","BL","(","bvec4","BM",",","inout","vec4","BN",",","vec4","BO",")","{","BL","(","BM",".","xy",",","BN",".","xy",",","BO",".","xy",")",";","BL","(","BM",".","zw",",","BN",".","zw",",","BO",".","zw",")",";","}","vec2","BQ","(","vec2","BP",")","{","return","sign","(","BP",")","*","floor","(","abs","(","BP",")","+",".5",")",";","}","vec4","BQ","(","vec4","BR",")","{","return","sign","(","BR",")","*","floor","(","abs","(","BR",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cd","(","vec2","BS",",","sampler2D","BT"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","BU"]}]}}]},{type:"textline",tokens:[")","{","vec4","BV",";","float","BW",",","BX",",","BY",",","BZ",",","B_",";","vec3","Ca",";","vec2","Cb",",","Cc",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["Cb","=","BH","(","BS",",","BU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cb","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["Ca","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","BW","=","dot","(","texture2D","(","BT",",","BS",")",".","rgb",",","Ca",")",";","BX","=","dot","(","texture2D","(","BT",",","Bt",".","xy",")",".","rgb",",","Ca",")",";","BY","=","dot","(","texture2D","(","BT",",","Bt",".","zw",")",".","rgb",",","Ca",")",";","BV",".","xy","=","abs","(","BW","-","vec2","(","BX",",","BY",")",")",";","Cb","=","step","(","Cb",",","BV",".","xy",")",";","if","(","dot","(","Cb",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","BZ","=","dot","(","texture2D","(","BT",",","Bu",".","xy",")",".","rgb",",","Ca",")",";","B_","=","dot","(","texture2D","(","BT",",","Bu",".","zw",")",".","rgb",",","Ca",")",";","BV",".","zw","=","abs","(","BW","-","vec2","(","BZ",",","B_",")",")",";","Cc","=","max","(","BV",".","xy",",","BV",".","zw",")",";","B_","=","dot","(","texture2D","(","BT",",","Bv",".","xy",")",".","rgb",",","Ca",")",";","BZ","=","dot","(","texture2D","(","BT",",","Bv",".","zw",")",".","rgb",",","Ca",")",";","BV",".","zw","=","abs","(","vec2","(","BX",",","BY",")","-","vec2","(","B_",",","BZ",")",")",";","Cc","=","max","(","Cc",".","xy",",","BV",".","zw",")",";","BZ","=","max","(","Cc",".","x",",","Cc",".","y",")",";","Cb",".","xy","*=","step","(","BZ",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","BV",".","xy",")",";","return","Cb",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cf","(","vec2","Ce",")","{","Ce",".","r","=","Ce",".","r","*","abs","(","5.0","*","Ce",".","r","-","5.0","*","0.75",")",";","return","BQ","(","Ce",")",";","}","vec4","Cf","(","vec4","Cg",")","{","Cg",".","rb","=","Cg",".","rb","*","abs","(","5.0","*","Cg",".","rb","-","5.0","*","0.75",")",";","return","BQ","(","Cg",")",";","}","vec2","Co","(","sampler2D","Ch",",","vec2","Ci",",","vec2","Cj",",","out","vec2","Ck",")","{","vec3","Cl",";","vec4","Cm",";","Cm","=","vec4","(","Ci",",","-","1.0",",","1.0",")",";","Cl","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Cn","=","0",";","Cn","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Cn","++",")","{","if","(","Cm",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Cm",".","w",">","0.9",")","{","Cm",".","xyz","+=","Cl","*","vec3","(","Cj",",","1.0",")",";","Ck","=","texture2D","(","Ch",",","Cm",".","xy",",","0.0",")",".","rg",";","Cm",".","w","=","dot","(","Ck",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Cm",".","zw",";","}","vec2","Cw","(","sampler2D","Cp",",","vec2","Cq",",","vec2","Cr",",","out","vec2","Cs",")","{","vec3","Ct",";","vec4","Cu",";","Cu","=","vec4","(","Cq",",","-","1.0",",","1.0",")",";","Cu",".","x","+=","0.25","*","u_texel_size",".","x",";","Ct","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Cv","=","0",";","Cv","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Cv","++",")","{","if","(","Cu",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Cu",".","w",">","0.9",")","{","Cu",".","xyz","=","Ct","*","vec3","(","Cr",",","1.0",")","+","Cu",".","xyz",";","Cs","=","texture2D","(","Cp",",","Cu",".","xy",",","0.0",")",".","rg",";","Cs","=","Cf","(","Cs",")",";","Cu",".","w","=","dot","(","Cs",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Cu",".","zw",";","}","vec2","CC","(","sampler2D","Cx",",","vec2","Cy",",","vec2","Cz",",","float","CA",")","{","vec2","CB",";","CB","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","Cz","+","Cy",";","CB","=","SMAA_AREATEX_PIXEL_SIZE","*","CB","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","CB",".","x","+=","0.5",";","CB",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","CA",";","return","texture2D","(","Cx",",","CB",",","0.0",")",".","rg",";","}","vec2","CO","(","sampler2D","CD",",","sampler2D","CE",",","vec2","CF",",","vec2","CG",",","vec4","CH",")","{","vec4","CI",",","CJ",",","CK",";","vec2","CL",",","CM",",","CN",";","CL","=","vec2","(","0.0",",","0.0",")",";","if","(","CG",".","r",">","0.0",")","{","CI",".","xz","=","Co","(","CD",",","CF",",","vec2","(","-","1.0",",","1.0",")",",","CM",")",";","CI",".","x","+=","float","(","CM",".","y",">","0.9",")",";","}","else","CI",".","xz","=","vec2","(","0.0",",","0.0",")",";","CI",".","yw","=","Co","(","CD",",","CF",",","vec2","(","1.0",",","-","1.0",")",",","CM",")",";","if","(","CI",".","x","+","CI",".","y",">","2.0",")","{","CJ","=","vec4","(","-","CI",".","x","+","0.25",",","CI",".","x",",","CI",".","y",",","-","CI",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","CF",".","xyxy",";","CK",".","xy","=","texture2D","(","CD",",","CJ",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","CK",".","zw","=","texture2D","(","CD",",","CJ",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","CK",".","yxwz","=","Cf","(","CK",".","xyzw",")",";","CN","=","vec2","(","2.0",",","2.0",")","*","CK",".","xz","+","CK",".","yw",";","BL","(","bvec2","(","step","(","0.9",",","CI",".","zw",")",")",",","CN",",","vec2","(","0.0",",","0.0",")",")",";","CL","+=","CC","(","CE",",","CI",".","xy",",","CN",",","CH",".","z",")",";","}","CI",".","xz","=","Cw","(","CD",",","CF",",","vec2","(","-","1",",","-","1",")",",","CM",")",";","if","(","texture2D","(","CD",",","CF","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","CI",".","yw","=","Cw","(","CD",",","CF",",","vec2","(","1",",","1",")",",","CM",")",";","CI",".","y","+=","float","(","CM",".","y",">","0.9",")",";","}","else","CI",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","CI",".","x","+","CI",".","y",">","2.0",")","{","CK","=","vec4","(","-","CI",".","x",",","-","CI",".","x",",","CI",".","y",",","CI",".","y",")","*","u_texel_size",".","xyxy","+","CF",".","xyxy",";","CJ",".","x","=","texture2D","(","CD",",","CK",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","CJ",".","y","=","texture2D","(","CD",",","CK",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","CJ",".","zw","=","texture2D","(","CD",",","CK",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","CM","=","vec2","(","2.0",",","2.0",")","*","CJ",".","xz","+","CJ",".","yw",";","BL","(","bvec2","(","step","(","0.9",",","CI",".","zw",")",")",",","CM",",","vec2","(","0",",","0",")",")",";","CL","+=","CC","(","CE",",","CI",".","xy",",","CM",",","CH",".","w",")",".","gr",";","}","return","CL",";","}"]}]}}]},{type:"textline",tokens:["float","CU","(","sampler2D","CP",",","vec2","CQ",",","float","CR",")","{","vec2","CS",",","CT",";","CS","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","CT","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","CR",",","1.0",")",";","CS","+=","vec2","(","-","1.0",",","1.0",")",";","CT","+=","vec2","(","0.5",",","-","0.5",")",";","CS","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","CT","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","CP",",","CS","*","CQ","+","CT",",","0.0",")",".","r",";","}","float","Db","(","sampler2D","CV",",","sampler2D","CW",",","vec2","CX",",","float","CY",")","{","float","CZ",";","vec2","C_",";","C_","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Da","=","0",";","Da","<","SMAA_MAX_SEARCH_STEPS",";","Da","++",")","{","if","(","CX",".","x",">","CY","&&","C_",".","g",">","0.8281","&&","C_",".","r","==","0.0",")","{","C_","=","texture2D","(","CV",",","CX",",","0.0",")",".","rg",";","CX","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","CX",";","}","}","CZ","=","-","(","255.0","/","127.0",")","*","CU","(","CW",",","C_",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","CZ","+","CX",".","x",";","}","float","Dj","(","sampler2D","Dc",",","sampler2D","Dd",",","vec2","De",",","float","Df",")","{","float","Dg",";","vec2","Dh",";","Dh","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Di","=","0",";","Di","<","SMAA_MAX_SEARCH_STEPS",";","Di","++",")","{","if","(","De",".","x","<","Df","&&","Dh",".","g",">","0.8281","&&","Dh",".","r","==","0.0",")","{","Dh","=","texture2D","(","Dc",",","De",",","0.0",")",".","rg",";","De","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","De",";","}","}","Dg","=","-","(","255.0","/","127.0",")","*","CU","(","Dd",",","Dh",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Dg","+","De",".","x",";","}","float","Dr","(","sampler2D","Dk",",","sampler2D","Dl",",","vec2","Dm",",","float","Dn",")","{","float","Do",";","vec2","Dp",";","Dp","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Dq","=","0",";","Dq","<","SMAA_MAX_SEARCH_STEPS",";","Dq","++",")","{","if","(","Dm",".","y",">","Dn","&&","Dp",".","r",">","0.8281","&&","Dp",".","g","==","0.0",")","{","Dp","=","texture2D","(","Dk",",","Dm",",","0.0",")",".","rg",";","Dm","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Dm",";","}","}","Do","=","-","(","255.0","/","127.0",")","*","CU","(","Dl",",","Dp",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Do","+","Dm",".","y",";","}","float","Dz","(","sampler2D","Ds",",","sampler2D","Dt",",","vec2","Du",",","float","Dv",")","{","float","Dw",";","vec2","Dx",";","Dx","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Dy","=","0",";","Dy","<","SMAA_MAX_SEARCH_STEPS",";","Dy","++",")","{","if","(","Du",".","y","<","Dv","&&","Dx",".","r",">","0.8281","&&","Dx",".","g","==","0.0",")","{","Dx","=","texture2D","(","Ds",",","Du",",","0.0",")",".","rg",";","Du","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Du",";","}","}","Dw","=","-","(","255.0","/","127.0",")","*","CU","(","Dt",",","Dx",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","Dw","+","Du",".","y",";","}","vec2","DG","(","sampler2D","DA",",","vec2","DB",",","float","DC",",","float","DD",",","float","DE",")","{","vec2","DF",";","DF","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","BQ","(","4.0","*","vec2","(","DC",",","DD",")",")","+","DB",";","DF","=","SMAA_AREATEX_PIXEL_SIZE","*","DF","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","DF",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","DE","+","DF",".","y",";","return","texture2D","(","DA",",","DF",",","0.0",")",".","rg",";","}","void","DN","(","sampler2D","DH",",","inout","vec2","DI",",","vec4","DJ",",","vec2","DK",")","{","vec2","DL",",","DM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["DL","=","step","(","DK",".","xy",",","DK",".","yx",")",";","DM","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","DL",";","DM","/=","DL",".","x","+","DL",".","y",";","DL","=","vec2","(","1.0",",","1.0",")",";","DL",".","x","-=","DM",".","x","*","texture2D","(","DH",",","DJ",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","DL",".","x","-=","DM",".","y","*","texture2D","(","DH",",","DJ",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","DL",".","y","-=","DM",".","x","*","texture2D","(","DH",",","DJ",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","DL",".","y","-=","DM",".","y","*","texture2D","(","DH",",","DJ",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","DI","*=","clamp","(","DL",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","DU","(","sampler2D","DO",",","inout","vec2","DP",",","vec4","DQ",",","vec2","DR",")","{","vec2","DS",",","DT",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["DS","=","step","(","DR",".","xy",",","DR",".","yx",")",";","DT","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","DS",";","DT","/=","DS",".","x","+","DS",".","y",";","DS","=","vec2","(","1.0",",","1.0",")",";","DS",".","x","-=","DT",".","x","*","texture2D","(","DO",",","DQ",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","DS",".","x","-=","DT",".","y","*","texture2D","(","DO",",","DQ",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","DS",".","y","-=","DT",".","x","*","texture2D","(","DO",",","DQ",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","DS",".","y","-=","DT",".","y","*","texture2D","(","DO",",","DQ",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","DP","*=","clamp","(","DS",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Eh","(","vec2","DV",",","vec2","DW",",","sampler2D","DX",",","sampler2D","DY",",","sampler2D","DZ",",","vec4","D_",")","{","float","Ea",",","Eb",";","vec3","Ec",";","vec2","Ed",",","Ee",",","Ef",";","vec4","Eg",";","Eg","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","Ed","=","texture2D","(","DX",",","DV",")",".","rg",";","if","(","Ed",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Eg",".","rg","=","CO","(","DX",",","DY",",","DV",",","Ed",",","D_",")",";","if","(","Eg",".","r","==","-","Eg",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Ec",".","x","=","Db","(","DX",",","DZ",",","Bt",".","xy",",","Bv",".","x",")",";","Ec",".","y","=","Bu",".","y",";","Ee",".","x","=","Ec",".","x",";","Ea","=","texture2D","(","DX",",","Ec",".","xy",",","0.0",")",".","r",";","Ec",".","z","=","Dj","(","DX",",","DZ",",","Bt",".","zw",",","Bv",".","y",")",";","Ee",".","y","=","Ec",".","z",";","Ee","=","abs","(","BQ","(","Ee","/","u_texel_size",".","xx","-","DW",".","xx",")",")",";","Ef","=","sqrt","(","Ee",")",";","Eb","=","texture2D","(","DX",",","Ec",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Eg",".","rg","=","DG","(","DY",",","Ef",",","Ea",",","Eb",",","D_",".","y",")",";","Ec",".","y","=","DV",".","y",";","DN","(","DX",",","Eg",".","rg",",","Ec",".","xyzy",",","Ee",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Ed",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Ed",".","r",">","0.0",")","{",";","Ec",".","y","=","Dr","(","DX",",","DZ",",","Bu",".","xy",",","Bv",".","z",")",";","Ec",".","x","=","Bt",".","x",";","Ed",".","x","=","Ec",".","y",";","Eb","=","texture2D","(","DX",",","Ec",".","xy",",","0.0",")",".","g",";","Ec",".","z","=","Dz","(","DX",",","DZ",",","Bu",".","zw",",","Bv",".","w",")",";","Ed",".","y","=","Ec",".","z",";","Ed","=","abs","(","BQ","(","Ed","/","u_texel_size",".","yy","-","DW",".","yy",")",")",";","Ee","=","sqrt","(","Ed",")",";","Ea","=","texture2D","(","DX",",","Ec",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Eg",".","ba","=","DG","(","DY",",","Ee",",","Eb",",","Ea",",","D_",".","x",")",";","Ec",".","x","=","DV",".","x",";","DU","(","DX",",","Eg",".","ba",",","Ec",".","xyxz",",","Ed",")",";","}","return","Eg",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Et","(","vec2","Ei",",","sampler2D","Ej",",","sampler2D","Ek"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","El"]}]}}]},{type:"textline",tokens:[")","{","bool","Em",";","vec2","En",",","Eo",",","Ep",";","vec4","Eq",",","Er",",","Es",";","Eq",".","x","=","texture2D","(","Ek",",","Bs",".","xy",")",".","a",";","Eq",".","y","=","texture2D","(","Ek",",","Bs",".","zw",")",".","g",";","Eq",".","wz","=","texture2D","(","Ek",",","Ei",")",".","xz",";","if","(","dot","(","Eq",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","Er","=","texture2D","(","Ej",",","Ei",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Es","=","texture2D","(","El",",","bJ",")",";","En","=","2.0","*","s","(","Es",")","-","1.0",";","Er",".","a","=","sqrt","(","2.0","*","length","(","En",")",")",";"]}]}}]},{type:"textline",tokens:["return","Er",";","}","else","{","Em","=","max","(","Eq",".","x",",","Eq",".","z",")",">","max","(","Eq",".","y",",","Eq",".","w",")",";","Er","=","vec4","(","0.0",",","Eq",".","y",",","0.0",",","Eq",".","w",")",";","En","=","Eq",".","yw",";","BL","(","bvec4","(","Em",",","Em",",","Em",",","Em",")",",","Er",",","vec4","(","Eq",".","x",",","0.0",",","Eq",".","z",",","0.0",")",")",";","BL","(","bvec2","(","Em",",","Em",")",",","En",",","Eq",".","xz",")",";","En","/=","dot","(","En",",","vec2","(","1.0",",","1.0",")",")",";","Er","=","Er","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Ei",".","xyxy",";","Eq","=","En",".","x","*","texture2D","(","Ej",",","Er",".","xy",",","0.0",")",";","Eq","+=","En",".","y","*","texture2D","(","Ej",",","Er",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Es","=","texture2D","(","El",",","Er",".","xy",")",";","Eo","=","2.0","*","s","(","Es",")","-","1.0",";","Ep","=","En",".","x","*","Eo",";","Es","=","texture2D","(","El",",","Er",".","zw",")",";","Eo","=","2.0","*","s","(","Es",")","-","1.0",";","Ep","+=","En",".","y","*","Eo",";","Eq",".","a","=","sqrt","(","2.0","*","length","(","Ep",")",")",";"]}]}}]},{type:"textline",tokens:["return","Eq",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ED","(","vec2","Eu",",","sampler2D","Ev",",","sampler2D","Ew"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Ex"]}]}}]},{type:"textline",tokens:[")","{","float","Ey",";","vec2","Ez",";","vec4","EA",",","EB",",","EC",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["EA","=","texture2D","(","Ex",",","bJ",")",";","Ez","=","2.0","*","s","(","EA",")","-","1.0",";","EA","=","texture2D","(","Ev",",","Eu",")",";","EB","=","texture2D","(","Ew",",","Eu","-","Ez",")",";","Ey","=","abs","(","EA",".","a","*","EA",".","a","-","EB",".","a","*","EB",".","a",")","/","2.0",";","Ey","=","0.5","*","clamp","(","1.0","-","sqrt","(","Ey",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","EC","=","mix","(","EA",",","EB",",","Ey",")",";","EC",".","a","=","1.0",";","return","EC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EA","=","texture2D","(","Ev",",","Eu",")",";","EB","=","texture2D","(","Ew",",","Eu",")",";","return","mix","(","EA",",","EB",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","EE",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EE","=","vec4","(","Cd","(","bJ",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EE","=","Eh","(","bJ",",","Bw",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EE","=","Et","(","bJ",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EE","=","vec4","(","ED","(","bJ",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EE","=","texture2D","(","u_color",",","bJ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","EE",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bJ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bs",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bt",";","varying","vec4","Bu",";","varying","vec4","Bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ab","(","vec2","zX",")","{","Bt","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","zX",".","xyxy",";","Bu","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","zX",".","xyxy",";","Bv","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","zX",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ae","(","vec2","Ac",",","out","vec2","Ad",")","{","Ad","=","Ac","/","u_texel_size",";","Bt","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","Ac",".","xyxy",";","Bu","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","Ac",".","xyxy",";","Bv","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Bt",".","xz",",","Bu",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ag","(","vec2","Af",")","{","Bs","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Af",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bJ","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ab","(","bJ",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ae","(","bJ",",","Bw",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ag","(","bJ",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bJ",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","Ab","(","in","vec2","zX",")","{","return","Bn","(","u_depth",",","zX",",","u_camera_range",")",";","}","void","main","(",")","{","vec3","Ac",",","Ad",",","Ae",";","float","Af",",","Ag",",","Ah",",","Ai",",","Aj",",","Ak",",","Al",";","Af","=","texture2D","(","u_color",",","bJ",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Af",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["Ac","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bJ","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","Ag","=","Ab","(","bJ",")",";","Ah","=","Ag","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Am","=","8.0",";","const","int","An","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Am","=","16.0",";","const","int","An","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Am","=","24.0",";","const","int","An","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Am","=","32.0",";","const","int","An","=","4",";"]}]}}]},{type:"textline",tokens:["Ai","=","u_ssao_radius_increase","*","0.001",";","const","float","Ao","=","1.0","+","2.4","/","Am",";","Aj","=","0.0",";","for","(","int","Ap","=","0",";","Ap","<","An",";","Ap","++",")","for","(","int","Aq","=","-","1",";","Aq","<=","1",";","Aq","+=","2",")","for","(","int","Bx","=","-","1",";","Bx","<=","1",";","Bx","+=","2",")","for","(","int","By","=","-","1",";","By","<=","1",";","By","+=","2",")","{","Ad","=","reflect","(","normalize","(","vec3","(","Aq",",","Bx",",","By",")",")",",","Ac",")","*","(","Ai","*=","Ao",")",";","Ae","=","vec3","(","bJ",",","Ah",")",";","Ae","+=","vec3","(","Ad",".","xy",",","Ad",".","z","*","Ah","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Ae",".","z","-=","1.4","*","(","Ae",".","z","-","Ah",")","*","step","(","Ah",",","Ae",".","z",")",";"]}]}}]},{type:"textline",tokens:["Ak","=","Ab","(","Ae",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","Al","=","clamp","(","(","Ah","-","Ak",")","/","Ak",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Aj","+=","mix","(","1.0",",","Al",",","step","(","Ak",",","Ae",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aj","+=","mix","(","step","(","Ae",".","z",",","Ak",")",",","0.5",",","Al",")",";"]}]}}]},{type:"textline",tokens:["}","Aj","=","Aj","/","Am",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","clamp","(","Aj","*","Aj","+","0.6","*","Aj",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","clamp","(","Aj","*","Aj","+","Aj",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Ag","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","Ag",")",";","Aj","=","mix","(","1.0",",","Aj",",","Ag",")",";","gl_FragColor","=","vec4","(","Af",",","Aj",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bJ",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","Ab","(","in","vec2","zX",")","{","return","Bn","(","u_depth",",","zX",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Ac",",","Ad",";","float","Ae",",","Af",",","Ag",",","Ah",",","Ai",",","Aj",",","Ak",";","Ae","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","Ab","(","bJ",")",";","Ag","=","0.0",";","Ah","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["Ac","=","vec2","(","-","2.0",")",";","for","(","int","Al","=","0",";","Al","<","4",";","++","Al",")","{","for","(","int","Am","=","0",";","Am","<","4",";","++","Am",")","{","Ad","=","(","Ac","+","vec2","(","float","(","Al",")",",","float","(","Am",")",")",")","*","u_texel_size",";","Ai","=","texture2D","(","u_ssao_mask",",","bJ","+","Ad",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","Ab","(","bJ","+","Ad",")",";","Ak","=","1.0","-","clamp","(","abs","(","Aj","-","Af",")","*","Ah",",","0.0",",","1.0",")",";","Ae","+=","Ai","*","Ak",";","Ag","+=","Ak",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ae","+=","Ai",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bJ",")",".","r",",","Ae","/","Ag",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bJ",")",".","r",",","Ae","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bJ",";","void","main","(",")","{","vec2","zX",";","vec4","Ab",",","Ac",";","float","Ad",";","Ad","=","texture2D","(","u_depth",",","bJ",")",".","x",";","Ab","=","vec4","(","bJ","*","2.0","-","1.0",",","2.0","*","Ad","-","1.0",",","1.0",")",";","Ac","=","u_view_proj_inverse","*","Ab",";","Ac","=","Ac","/","Ac",".","w",";","Ac","=","u_view_proj_prev","*","Ac",";","Ac","/=","Ac",".","w",";","zX","=","(","Ab",".","xy","-","Ac",".","xy",")","/","4.0","+","0.5",";","zX","=","clamp","(","zX",",","0.0",",","1.0",")",";","gl_FragColor","=","g","(","zX",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","a","=","255.0",";","float","b","=","0.0",";","float","c","=","1.0",";","vec4","g","(","const","in","float","d",")","{","vec4","e",",","f",";","e","=","vec4","(","a","*","a","*","a",",","a","*","a",",","a",",","c",")",";","f","=","vec4","(","b",",","c","/","a",",","c","/","a",",","c","/","a",")",";","e","=","fract","(","d","*","e",")",";","e","-=","e",".","xxyz","*","f",";","return","e",";","}","float","k","(","const","in","vec4","h",")","{","vec4","i",";","float","j",";","i","=","vec4","(","c","/","(","a","*","a","*","a",")",",","c","/","(","a","*","a",")",",","c","/","a",",","c",")",";","j","=","dot","(","h",",","i",")",";","return","j",";","}","vec4","g","(","const","in","vec2","l",")","{","vec4","m",";","vec2","n",",","o",";","n","=","vec2","(","a",",","c",")",";","o","=","vec2","(","b",",","c","/","a",")",";","m","=","fract","(","l",".","xxyy","*","n",".","xyxy",")",";","m","-=","m",".","xxzz","*","o",".","xyxy",";","if","(","l",".","r","==","c",")","m",".","rg","=","vec2","(","b",",","c",")",";","if","(","l",".","g","==","c",")","m",".","ba","=","vec2","(","b",",","c",")",";","return","m",";","}","vec2","s","(","const","in","vec4","p",")","{","vec2","q",",","r",";","r","=","vec2","(","c","/","a",",","c",")",";","q",".","r","=","dot","(","p",".","rg",",","r",")",";","q",".","g","=","dot","(","p",".","ba",",","r",")",";","return","q",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","t","=","0.0",";","float","u","=","1.0",";","vec4","w","(","vec4","v",")","{","return","v","-","floor","(","v","*","(","u","/","289.0",")",")","*","289.0",";","}","vec3","w","(","vec3","x",")","{","return","x","-","floor","(","x","*","(","u","/","289.0",")",")","*","289.0",";","}","vec2","w","(","vec2","y",")","{","return","y","-","floor","(","y","*","(","u","/","289.0",")",")","*","289.0",";","}","vec4","A","(","vec4","z",")","{","return","z","-","floor","(","z","*","(","u","/","7.0",")",")","*","7.0",";","}","vec4","C","(","vec4","B",")","{","return","w","(","(","34.0","*","B","+","5.0",")","*","B",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","L","(","vec2","D",")","{","vec4","E",",","F",",","G",",","H",";","vec2","I",",","J",";","I","=","w","(","floor","(","D",")",")",";","J","=","fract","(","D",")",";","E","=","J",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","F","=","J",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","G","=","C","(","I",".","x","+","vec4","(","t",",","u",",","t",",","u",")",")",";","G","=","C","(","G","+","I",".","y","+","vec4","(","t",",","t",",","u",",","u",")",")",";","H","=","A","(","G",")","*","K","+","K2",";","G","=","A","(","floor","(","G","*","K",")",")","*","K","+","K2",";","H","=","E","+","JITTER","*","H",";","G","=","F","+","JITTER","*","G",";","G","=","H","*","H","+","G","*","G",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["G",".","xy","=","min","(","G",".","xy",",","G",".","zw",")",";","G",".","x","=","min","(","G",".","x",",","G",".","y",")",";","return","G",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["G",".","xy","=","(","G",".","x","<","G",".","y",")","?","G",".","xy",":","G",".","yx",";","G",".","xz","=","(","G",".","x","<","G",".","z",")","?","G",".","xz",":","G",".","zx",";","G",".","xw","=","(","G",".","x","<","G",".","w",")","?","G",".","xw",":","G",".","wx",";","G",".","y","=","min","(","G",".","y",",","G",".","z",")",";","G",".","y","=","min","(","G",".","y",",","G",".","w",")",";","return","sqrt","(","G",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","U","(","vec2","M",",","float","N",")","{","vec4","O",",","P",",","Q",",","R",";","vec2","S",",","T",";","S","=","w","(","floor","(","M",")",")",";","T","=","fract","(","M",")",";","O","=","T",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","P","=","T",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","Q","=","C","(","S",".","x","+","vec4","(","t",",","u",",","t",",","u",")",")",";","Q","=","C","(","Q","+","S",".","y","+","vec4","(","t",",","t",",","u",",","u",")",")",";","R","=","A","(","Q",")","*","K","+","K2",";","Q","=","A","(","floor","(","Q","*","K",")",")","*","K","+","K2",";","R","=","O","+","JITTER","*","R",";","Q","=","P","+","JITTER","*","Q",";","P","=","R","*","R","+","Q","*","Q",";","R","+=","N",";","Q","+=","N",";","O","=","R","*","R","+","Q","*","Q",";","R","+=","N",";","Q","+=","N",";","Q","=","R","*","R","+","Q","*","Q",";","P",".","xy","=","min","(","P",".","xy",",","P",".","zw",")",";","P",".","x","=","min","(","P",".","x",",","P",".","y",")",";","O",".","xy","=","min","(","O",".","xy",",","O",".","zw",")",";","O",".","x","=","min","(","O",".","x",",","O",".","y",")",";","Q",".","xy","=","min","(","Q",".","xy",",","Q",".","zw",")",";","Q",".","x","=","min","(","Q",".","x",",","Q",".","y",")",";","return","vec3","(","P",".","x",",","O",".","x",",","Q",".","x",")",";","}","vec3","W","(","vec3","V",")","{","return","w","(","(","(","V","*","34.0",")","+","u",")","*","V",")",";","}","float","ag","(","vec2","X",")","{","vec3","Y",",","Z",",","_",",","aa",";","vec4","ab",";","vec2","ac",",","ad",",","ae",";","const","vec4","af","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","ac","=","floor","(","X","+","dot","(","X",",","af",".","yy",")",")",";","ad","=","X","-","ac","+","dot","(","ac",",","af",".","xx",")",";","ae","=","(","ad",".","x",">","ad",".","y",")","?","vec2","(","u",",","t",")",":","vec2","(","t",",","u",")",";","ab","=","ad",".","xyxy","+","af",".","xxzz",";","ab",".","xy","-=","ae",";","ac","=","w","(","ac",")",";","Y","=","W","(","W","(","ac",".","y","+","vec3","(","t",",","ae",".","y",",","u",")",")","+","ac",".","x","+","vec3","(","t",",","ae",".","x",",","u",")",")",";","Z","=","max","(","0.5","-","vec3","(","dot","(","ad",",","ad",")",",","dot","(","ab",".","xy",",","ab",".","xy",")",",","dot","(","ab",".","zw",",","ab",".","zw",")",")",",","t",")",";","Z","=","Z","*","Z",";","Z","=","Z","*","Z",";","Y","=","2.0","*","fract","(","Y","*","af",".","www",")","-","u",";","_","=","abs","(","Y",")","-","0.5",";","aa","=","floor","(","Y","+","0.5",")",";","aa","=","Y","-","aa",";","Z","*=","1.79284291400159","-","0.85373472095314","*","(","aa","*","aa","+","_","*","_",")",";","Y",".","x","=","aa",".","x","*","ad",".","x","+","_",".","x","*","ad",".","y",";","Y",".","yz","=","aa",".","yz","*","ab",".","xz","+","_",".","yz","*","ab",".","yw",";","return","130.0","*","dot","(","Z",",","Y",")",";","}","vec2","ak","(","vec2","ah",")","{","float","ai",",","aj",";","ai","=","dot","(","ah",",","vec2","(","12.9898",",","78.233",")",")",";","aj","=","dot","(","ah",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","ai","=","fract","(","sin","(","ai",")","*","43758.5453",")","*","2.0","-","u",";","aj","=","fract","(","sin","(","aj",")","*","43758.5453",")","*","2.0","-","u",";","return","vec2","(","ai",",","aj",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","aC","(","inout","vec3","al",",","float","am",",","float","an",",","float","ao",",","vec3","ap",",","vec3","aq",",","vec3","ar",",","vec4","as",",","vec3","at",",","float","au",")","{","float","av",",","aw",",","ax",";","vec2","ay",",","az",";","vec3","aA",";","vec4","aB",";","if","(","au",">","CAUSTICS_VIEW_DISTANCE",")","return",";","aB","=","as",";","aA","=","at","+","ap",";","aA",".","xz","=","10.0","*","sin","(","0.1","*","aA",".","xz",")",";","aA","=","aA","+","2.0","*","cross","(","-","aB",".","xyz",",","cross","(","-","aB",".","xyz",",","aA",")","+","aB",".","w","*","aA",")",";","ay","=","aA",".","xz",";","aA","=","aq",";","av","=","max","(","dot","(","ap",",","aA",")",",","0.0",")",";","aw","=","0.025",";","az","=","CAUST_SPEED","*","an",";","ay",".","s","+=","0.25","*","sin","(","dot","(","at","+","an",",","vec3","(","1.0",")",")",")",";","ay",".","t","+=","0.35","*","(","-","sin","(","dot","(","at","-","an",",","vec3","(","-","0.7",")",")",")",")",";","ay",".","st","+=","0.15","*","cos","(","4.0","*","am","-","az",".","x",")","+","1.5","*","sin","(","am","-","0.3","*","az",".","y",")",";","ax","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","am",",","0.0",")",")",";","aA","=","U","(","(","ay","/","ax",")",",","aw",")",";","aA","*=","CAUST_BRIGHT",";","aA","*=","aA",";","aw","=","min","(","0.25","*","am",",","-","am",")","+","1.0",";","aw","=","max","(","aw",",","0.0",")",";","av","=","ao","*","av",";","ax","=","max","(","sign","(","am",")",",","0.0",")",";","av","=","av","+","max","(","0.5","*","sign","(","-","ap",".","y",")","*","ax",",","0.0",")",";","av","=","min","(","av",",","1.0",")",";","al","+=","ar","*","aA","*","aw","*","av",";","}"]}]},exports["include/color_util.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","aE","(","inout","vec3","aD",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["aD","=","max","(","vec3","(","0.0",")",",","aD",")",";","aD","=","pow","(","aD",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","aE","(","inout","float","aF",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["aF","=","pow","(","max","(","0.0",",","aF",")",",","2.2",")",";"]}]}}]},{type:"textline",tokens:["}","void","aH","(","inout","vec3","aG",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["aG","=","max","(","vec3","(","0.0",")",",","aG",")",";","aG","=","pow","(","aG",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","aK","(","inout","vec3","aI",",","in","float","aJ",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["aI","=","aI","*","aJ",";"]}]}}]},{type:"textline",tokens:["}","float","aO","(","vec4","aL",")","{","float","aM",";","vec3","aN",";","aN","=","vec3","(","0.299",",","0.587",",","0.114",")",";","aM","=","dot","(","aL",".","rgb",",","aN",")",";","return","aM",";","}"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","aP","=","0.0",";","float","aQ","=","1.0",";","struct","aR","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","aU","(","vec3","aS",",","vec3","aT",")","{","return","any","(","lessThan","(","abs","(","aS","-","aT",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","aX","(","in","vec4","aV",",","in","vec3","aW",")","{","return","aW","+","2.0","*","cross","(","aV",".","xyz",",","cross","(","aV",".","xyz",",","aW",")","+","aV",".","w","*","aW",")",";","}","vec4","aZ","(","in","vec4","aY",")","{","return","vec4","(","-","aY",".","xyz",",","aY",".","w",")","/","dot","(","aY",",","aY",")",";","}","vec3","bd","(","vec4","a_",",","vec4","ba",",","vec4","bb",")","{","vec3","bc",";","bc","=","bb",".","xyz","*","a_",".","w",";","bc","=","aX","(","ba",",","bc",")",";","bc","+=","a_",".","xyz","*","bb",".","w",";","return","bc",";","}","vec3","bj","(","vec4","be",",","vec4","bf",",","vec4","bg",")","{","vec4","bh",";","vec3","bi",";","bi","=","bg",".","xyz","-","be",".","xyz","*","bg",".","w",";","bh","=","aZ","(","bf",")",";","bi","=","aX","(","bh",",","bi",")",";","bi","/=","be",".","w",";","return","bi",";","}","mat4","bk","(",")","{","return","mat4","(","aQ",",","aP",",","aP",",","aP",",","aP",",","aQ",",","aP",",","aP",",","aP",",","aP",",","aQ",",","aP",",","aP",",","aP",",","aP",",","aQ",")",";","}","mat4","bm","(","float","bl",")","{","return","mat4","(","aQ",",","aP",",","aP",",","aP",",","aP",",","cos","(","bl",")",",","sin","(","bl",")",",","aP",",","aP",",","-","sin","(","bl",")",",","cos","(","bl",")",",","aP",",","aP",",","aP",",","aP",",","aQ",")",";","}","mat4","bo","(","float","bn",")","{","return","mat4","(","cos","(","bn",")",",","aP",",","-","sin","(","bn",")",",","aP",",","aP",",","aQ",",","aP",",","aP",",","sin","(","bn",")",",","aP",",","cos","(","bn",")",",","aP",",","aP",",","aP",",","aP",",","aQ",")",";","}","mat4","bq","(","float","bp",")","{","return","mat4","(","cos","(","bp",")",",","sin","(","bp",")",",","aP",",","aP",",","-","sin","(","bp",")",",","cos","(","bp",")",",","aP",",","aP",",","aP",",","aP",",","aQ",",","aP",",","aP",",","aP",",","aP",",","aQ",")",";","}","aR","bs","(","in","aR","br",")","{","return","aR","(","br",".","a",",","br",".","b",",","normalize","(","br",".","c",")",",","normalize","(","br",".","d",")",",","normalize","(","br",".","e",")",",","br",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","by","(","vec4","bt",")","{","vec3","bu",";","float","bv",",","bw",",","bx",";","bv","=","bt",".","x",";","bw","=","bt",".","y",";","bx","=","bt",".","w",";","bu",".","x","=","(","bv","+","bx",")","/","2.0",";","bu",".","y","=","(","bw","+","bx",")","/","2.0",";","bu",".","z","=","bx",";","return","bu",";","}"]}]}}]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bL","=","0.1",";","const","float","bM","=","0.1",";","const","float","bN","=","-","0.01",";","const","float","bO","=","0.05",";","vec4","bP","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bQ","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bR","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bS","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bT","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bU","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bV","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bW","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","bZ","(","vec2","bX",",","float","bY",")","{","return","all","(","lessThanEqual","(","bX",",","vec2","(","1.0","+","bY",")",")",")","&&","all","(","greaterThanEqual","(","bX",",","vec2","(","0.0","-","bY",")",")",")",";","}","float","ch","(","float","b_",",","float","ca",",","mat2","cb",",","vec3","cc",",","float","cd",",","PRECISION","sampler2D","ce",")","{","vec2","cf",",","cg",";","cg",".","x","=","b_",";","cg",".","y","=","ca",";","cg","=","cb","*","cg",";","cf","=","cc",".","xy","+","cg","*","cd","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","bZ","(","cf",",","bN",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","cc",".","z",",","texture2D","(","ce",",","cf",")",".","r",")",";","}","float","cq","(","vec3","ci",",","PRECISION","sampler2D","cj",",","float","ck",")","{","mat2","cl",";","float","cm",",","cn",",","co",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ci",".","z",">","u_perspective_cast_far_bound",")","return","1.0",";","else","{"]}]}}]},{type:"textline",tokens:["ci",".","z","=","clamp","(","ci",".","z",",","0.0",",","1.0",")",";","cm","=","0.0",";","cn","=","ak","(","ci",".","xy",")",".","x","*","M_PI",";","co","=","cos","(","cn",")",";","cn","=","sin","(","cn",")",";","cl","=","mat2","(","co",",","cn",",","-","cn",",","co",")",";","for","(","int","cp","=","0",";","cp","<","4",";","cp","++",")","{","cm","+=","ch","(","bP","[","cp","]",",","bT","[","cp","]",",","cl",",","ci",",","ck",",","cj",")",";","cm","+=","ch","(","bQ","[","cp","]",",","bU","[","cp","]",",","cl",",","ci",",","ck",",","cj",")",";","cm","+=","ch","(","bR","[","cp","]",",","bV","[","cp","]",",","cl",",","ci",",","ck",",","cj",")",";","cm","+=","ch","(","bS","[","cp","]",",","bW","[","cp","]",",","cl",",","ci",",","ck",",","cj",")",";","}","cm","/=","16.0",";","return","clamp","(","cm",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","1.0",";","}","float","cF","(","vec3","cr",",","PRECISION","sampler2D","cs",",","vec3","ct",",","PRECISION","sampler2D","cu",",","float","cv",",","float","cw",",","float","cx",")","{","mat2","cy",";","float","cz",",","cA",",","cB",",","cC",";","cr",".","z","=","clamp","(","cr",".","z",",","0.0",",","1.0",")",";","ct",".","z","=","clamp","(","ct",".","z",",","0.0",",","1.0",")",";","cz","=","0.0",";","cA","=","0.0",";","cB","=","ak","(","cr",".","xy",")",".","x","*","M_PI",";","cC","=","cos","(","cB",")",";","cB","=","sin","(","cB",")",";","cy","=","mat2","(","cC",",","cB",",","-","cB",",","cC",")",";","for","(","int","cD","=","0",";","cD","<","4",";","cD","++",")","{","cz","+=","ch","(","bP","[","cD","]",",","bT","[","cD","]",",","cy",",","cr",",","cv",",","cs",")",";","cz","+=","ch","(","bQ","[","cD","]",",","bU","[","cD","]",",","cy",",","cr",",","cv",",","cs",")",";","cz","+=","ch","(","bR","[","cD","]",",","bV","[","cD","]",",","cy",",","cr",",","cv",",","cs",")",";","cz","+=","ch","(","bS","[","cD","]",",","bW","[","cD","]",",","cy",",","cr",",","cv",",","cs",")",";","}","for","(","int","cE","=","0",";","cE","<","4",";","cE","++",")","{","cA","+=","ch","(","bP","[","cE","]",",","bT","[","cE","]",",","cy",",","ct",",","cw",",","cu",")",";","cA","+=","ch","(","bQ","[","cE","]",",","bU","[","cE","]",",","cy",",","ct",",","cw",",","cu",")",";","cA","+=","ch","(","bR","[","cE","]",",","bV","[","cE","]",",","cy",",","ct",",","cw",",","cu",")",";","cA","+=","ch","(","bS","[","cE","]",",","bW","[","cE","]",",","cy",",","ct",",","cw",",","cu",")",";","}","cz","=","mix","(","cz",",","cA",",","cx",")",";","cz","/=","16.0",";","return","clamp","(","cz",",","0.0",",","1.0",")",";","}","float","cJ","(","vec2","cG",")","{","float","cH",",","cI",";","cH","=","min","(","cG",".","x",",","cG",".","y",")",";","cI","=","min","(","1.0","-","cG",".","x",",","1.0","-","cG",".","y",")",";","return","min","(","cH",",","cI",")",";","}","float","cM","(","float","cK",",","float","cL",")","{","if","(","cL",">=","0.0","&&","cL","<=","bM",")","cK","=","(","cK","-","1.0",")","/","bM","*","cL","+","1.0",";","return","cK",";","}","float","cX","(","vec3","cN",",","vec3","cO",",","PRECISION","sampler2D","cP",",","PRECISION","sampler2D","cQ",",","float","cR",",","float","cS",",","float","cT",",","float","cU",")","{","float","cV",",","cW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["cW","=","cJ","(","cN",".","xy",")",";","if","(","-","cU",">","cT","&&","cW",">=","0.0","&&","cW","<=","bL","&&","bZ","(","cO",".","xy",",","0.0",")",")","{","cW","=","1.0","-","cW","/","bL",";","cV","=","cF","(","cN",",","cP",",","cO",",","cQ",",","cR",",","cS",",","cW",")",";","}","else"]}]}}]},{type:"textline",tokens:["cV","=","cq","(","cN",",","cP",",","cR",")",";","return","cV",";","}","float","de","(","vec3","cY",",","PRECISION","sampler2D","cZ",",","float","c_",",","float","da",",","float","db",")","{","float","dc",",","dd",";","dc","=","cq","(","cY",",","cZ",",","c_",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","db",">","da",")","{","dd","=","cJ","(","cY",".","xy",")",";","dc","=","cM","(","dc",",","dd",")",";","}"]}]}}]},{type:"textline",tokens:["return","dc",";","}","float","dl","(","float","df",")","{","vec3","dg",",","dh",",","di",",","dj",";","float","dk",";","dk","=","1.0",";","dg","=","bF",".","xyz","/","bF",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["dh","=","bG",".","xyz","/","bG",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["di","=","bH",".","xyz","/","bH",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dj","=","bI",".","xyz","/","bI",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","bZ","(","dg",".","xy",",","0.0",")",")","{","dk","=","cX","(","dg",",","dh",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","df",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","bZ","(","dg",".","xy",",","bO",")",")","{","dk","=","de","(","dg",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","df",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","bZ","(","dh",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","cX","(","dh",",","di",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","df",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dk","=","de","(","dh",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","df",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","bZ","(","di",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","cX","(","di",",","dj",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","df",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dk","=","de","(","di",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","df",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","bZ","(","dj",".","xy",",","0.0",")",")","dk","=","de","(","dj",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","df",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","dk",";","}"]}]}}]},{type:"textline",tokens:["float","dr","(","inout","vec3","dm",")","{","float","dn",";","vec3","dp",";","vec2","dq",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dq","=","texture2DProj","(","u_shadow_mask",",","bD",")",".","rg",";","dp","=","vec3","(","dq",".","r",")",";","dn","=","dq",".","g",";","bK","=","vec4","(","dp",",","dn",")",";","dm","*=","bK",".","a",";","return","bK",".","r",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","dl","(","bA",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dy","(","in","vec3","ds",",","vec3","dt",",","float","du",",","float","dv",")","{","float","dw",";","vec3","dx",";","dx","=","normalize","(","dt","+","ds",")",";","dw","=","1.0","-","dot","(","ds",",","dx",")",";","dw","=","dv","+","(","1.0","-","dv",")","*","pow","(","dw",",","du",")",";","return","dw",";","}","void","dL","(","inout","vec3","dz",",","vec3","dA",",","vec3","dB",",","float","dC",")","{","vec2","dD",",","dE",";","float","dF",",","dG",",","dH",";","vec3","dI",",","dJ",",","dK",";","dI","=","reflect","(","-","dA",",","dB",")",";","dF","=","u_fresnel_params","[","2","]",";","dG","=","u_fresnel_params","[","3","]",";","dH","=","1.0",";","if","(","dF","!=","0.0",")","dH","=","dy","(","dA",",","dI",",","dF",",","dG",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dJ","=","textureCube","(","u_cube_reflection",",","dI",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dK","=","u_refl_plane",".","xyz","*","dot","(","dB",",","u_refl_plane",".","xyz",")",";","dK","=","dB","-","dK",";","dD","=","(","u_view_matrix_frag","*","vec4","(","dK",",","0.0",")",")",".","xy",";","dE","=","bD",".","xy","/","bD",".","z",";","dE","+=","dD","*","REFL_BUMP",";","dJ","=","texture2D","(","u_plane_reflection",",","dE",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dJ","=","textureCube","(","u_mirrormap",",","dI",")",".","xyz",";","dC","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["aE","(","dJ",".","rgb",")",";","dz","=","mix","(","dz",",","dJ",",","dC","*","dH",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dO","(","vec3","dM",")","{","float","dN",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dM",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","0.5","*","dM",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","dU","(","in","float","dP",",","inout","vec2","dQ",",","in","vec2","dR",")","{","float","dS",";","vec4","dT",";","dT","=","texture2D","(","u_scene_depth",",","dQ",")",";","dS","=","k","(","dT",")",";","if","(","dS","<","bE",")","{","dQ","=","dR",";","return","dP",";","}","else","{","return","dS",";","}","return","dP",";","}"]}]}}]},{type:"textline",tokens:["vec3","eb","(","in","vec3","dV",",","in","vec2","dW",")","{","vec3","dX",";","float","dY",";","vec4","dZ",";","vec2","d_",",","ea",";","d_","=","dV",".","xy","/","dV",".","z",";","ea","=","d_","+","dW",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["dZ","=","texture2DProj","(","u_scene_depth",",","dV",")",";","dY","=","k","(","dZ",")",";","dU","(","dY",",","ea",",","d_",")",";"]}]}}]},{type:"textline",tokens:["dX","=","texture2D","(","u_refractmap",",","ea",")",".","rgb",";","aE","(","dX",")",";","return","dX",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ec",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","ed","=","0.5",";","vec3","ee","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","ef","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ej","(","in","vec3","eg",",","in","float","eh",")","{","vec3","ei",";","ei","=","ee",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ei","=","eb","(","bD",",","eg",".","xz","*","eh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ei","=","texture2D","(","u_refractmap",",","bD",".","xy","/","bD",".","z",")",".","rgb",";","aE","(","ei",")",";"]}]}}]},{type:"textline",tokens:["return","ei",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eo","(","vec3","ek",")","{","float","el",",","em",";","vec4","en",";","en","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","en","=","mix","(","vec4","(","ek",".","bg",",","en",".","wz",")",",","vec4","(","ek",".","gb",",","en",".","xy",")",",","step","(","ek",".","b",",","ek",".","g",")",")",";","en","=","mix","(","vec4","(","en",".","xyw",",","ek",".","r",")",",","vec4","(","ek",".","r",",","en",".","yzx",")",",","step","(","en",".","x",",","ek",".","r",")",")",";","el","=","en",".","x","-","min","(","en",".","w",",","en",".","y",")",";","em","=","1.0e-10",";","return","vec3","(","abs","(","en",".","z","+","(","en",".","w","-","en",".","y",")","/","(","6.0","*","el","+","em",")",")",",","el","/","(","en",".","x","+","em",")",",","en",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","es","(","vec3","ep",")","{","vec3","eq",";","vec4","er",";","er","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","eq","=","abs","(","fract","(","vec3","(","ep",".","r",",","ep",".","r",",","ep",".","r",")","+","er",".","xyz",")","*","6.0","-","er",".","www",")",";","return","ep",".","b","*","mix","(","er",".","xxx",",","clamp","(","eq","-","er",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ep",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eu","(","vec2","et",")","{","return","vec3","(","et","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ew","(","vec3","ev",")","{","return","vec2","(","ev",".","xy","*","ed","+","vec2","(","ed",",","ed",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fk",qualifier:["float"],is_optional:true},{type:"node_out",name:"fl",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fj"],statements:[{type:"textline",tokens:["fj","=","normalize","(","fa",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fk"],statements:[{type:"textline",tokens:["fk","=","abs","(","fa",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fl"],statements:[{type:"textline",tokens:["fl","=","length","(","fa",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"fm",qualifier:["float"],is_optional:false},{type:"node_in",name:"fn",qualifier:["float"],is_optional:false},{type:"node_in",name:"fo",qualifier:["float"],is_optional:false},{type:"node_out",name:"fp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fp","=","vec3","(","fm",",","fn",",","fo",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"fq",qualifier:["float"],is_optional:false},{type:"node_in",name:"fr",qualifier:["float"],is_optional:false},{type:"node_in",name:"fs",qualifier:["float"],is_optional:false},{type:"node_out",name:"ft",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ft","=","es","(","vec3","(","fq",",","fr",",","fs",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fu","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fv","=","ee",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ex",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fw","=","eu","(","ex",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fx","=","2.0","*","ec","-","ef",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fy",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ey",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fy","=","ey",";","aE","(","fy",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fz",qualifier:["float"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["fz","=","ez",";","aE","(","fz",")",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fA",qualifier:["float"],is_optional:false},{type:"node_out",name:"fB",qualifier:["float"],is_optional:false},{type:"node_param",name:"eA",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fA","=","eA","[","0","]",";","fB","=","eA","[","1","]",";","aE","(","fA",")",";","aE","(","fB",")",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fC",qualifier:["float"],is_optional:false},{type:"node_out",name:"fD",qualifier:["float"],is_optional:false},{type:"node_out",name:"fE",qualifier:["float"],is_optional:false},{type:"node_param",name:"eB",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fC","=","eB","[","0","]",";","fD","=","eB","[","1","]",";","fE","=","eB","[","2","]",";","aE","(","fC",")",";","aE","(","fD",")",";","aE","(","fE",")",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fF","=","fd",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fG","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fH","=","eK",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fI","[","0","]","=","fa","[","0","]",";","fI","[","1","]","=","fa","[","1","]",";","fI","[","2","]","=","fa","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fJ","=","vec3","(","fe",".","r",",","-","fe",".","b",",","fe",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"fR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fK","=","ee",";","fL","=","ee",";","fM","=","ee",";","fN","=","ee",";","fO","=","ee",";","fP","=","ee",";","fQ","=","ZERO_VALUE_NODES",";","fR","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fS",qualifier:["float"],is_optional:false},{type:"node_in",name:"fT",qualifier:["float"],is_optional:false},{type:"node_in",name:"fU",qualifier:["float"],is_optional:false},{type:"node_in",name:"fV",qualifier:["float"],is_optional:false},{type:"node_in",name:"fW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fg","=","eo","(","fW",")",";","fg","[","0","]","+=","(","fS","-","ed",")",";","if","(","fg","[","0","]",">","UNITY_VALUE_NODES",")","fg","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fg","[","0","]","<","ZERO_VALUE_NODES",")","fg","[","0","]","+=","UNITY_VALUE_NODES",";","fg","*=","vec3","(","UNITY_VALUE_NODES",",","fT",",","fU",")",";","fg","=","mix","(","ef",",","mix","(","ee",",","fg",",","step","(","ee",",","fg",")",")",",","step","(","fg",",","ef",")",")",";","fX","=","mix","(","fW",",","es","(","fg",")",",","fV",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"fY",qualifier:["float"],is_optional:false},{type:"node_in",name:"fZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"f_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["f_","=","mix","(","fZ",",","ef","-","fZ",",","fY",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"ga",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gc",qualifier:["float"],is_optional:false},{type:"node_out",name:"gd",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ga"],statements:[{type:"textline",tokens:["ga","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fb","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fg","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fh","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","eU","=","fb",".","z",";","if","(","eU","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["gb","=","fh","-","bz",";","gc","=","length","(","gb",")",";","gb","=","normalize","(","gb",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gd"],statements:[{type:"textline",tokens:["gd","=","eU","/","(","eU","+","gc","*","gc",")",";","eU","=","fb",".","x",";","eV","=","fb",".","y",";","if","(","eU",">","-","UNITY_VALUE_NODES",")","{","eW","=","dot","(","gb",",","fg",")",";","eW","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eW","-","eU",")","/","eV",")",";","gd","*=","eW",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gb"],statements:[{type:"textline",tokens:["gb","=","fg",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gc"],statements:[{type:"textline",tokens:["gc","=","length","(","fh","-","bz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gd"],statements:[{type:"textline",tokens:["gd","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"ge",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gf",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gg",qualifier:["float"],is_optional:true},{type:"node_param",name:"eC",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gf"],statements:[{type:"textline",tokens:["gf","=","eC",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","-","dot","(","ge",",","eC",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"gh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gi","=","-","(","u_view_matrix_frag","*","vec4","(","gh",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gk",qualifier:["float"],is_optional:false},{type:"node_in",name:"gl",qualifier:["float"],is_optional:false},{type:"node_in",name:"gm",qualifier:["float"],is_optional:false},{type:"node_in",name:"gn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"go",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gp","=","gj",";"]},{type:"textline",tokens:["gk",";","gl",";","gm",";","gn",";","go",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gr",qualifier:["float"],is_optional:false},{type:"node_in",name:"gs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gt","=","gq",";"]},{type:"textline",tokens:["gr",";","gs",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gv",qualifier:["float"],is_optional:false},{type:"node_in",name:"gw",qualifier:["float"],is_optional:false},{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gy","=","gu",";"]},{type:"textline",tokens:["gv",";","gw",";","gx",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gA",qualifier:["float"],is_optional:false},{type:"node_in",name:"gB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gC","=","gz",";"]},{type:"textline",tokens:["gA",";","gB",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gE",qualifier:["float"],is_optional:false},{type:"node_in",name:"gF",qualifier:["float"],is_optional:false},{type:"node_in",name:"gG",qualifier:["float"],is_optional:false},{type:"node_out",name:"gH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gH","=","gD",";"]},{type:"textline",tokens:["gE",";","gF",";","gG",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gJ","=","gI",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gM","=","gK",";"]},{type:"textline",tokens:["gL",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gO",qualifier:["float"],is_optional:false},{type:"node_in",name:"gP",qualifier:["float"],is_optional:false},{type:"node_in",name:"gQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gR","[","0","]","=","gR","[","1","]","=","gR","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gN",";","gO",";","gP",";","gQ",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gT",qualifier:["float"],is_optional:false},{type:"node_in",name:"gU",qualifier:["float"],is_optional:false},{type:"node_in",name:"gV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gW","=","gS",";"]},{type:"textline",tokens:["gT",";","gU",";","gV",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"gX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gY",qualifier:["float"],is_optional:false},{type:"node_in",name:"gZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"g_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["g_","=","gX",";"]},{type:"textline",tokens:["gY",";","gZ",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"ha",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hb",qualifier:["float"],is_optional:false},{type:"node_in",name:"hc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hd",qualifier:["float"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hg","[","0","]","=","hg","[","1","]","=","hg","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ha",";","hc",";","hd",";","he",";","hf",";","hb",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"hh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hi",qualifier:["float"],is_optional:false},{type:"node_out",name:"hj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hj","=","hh",";"]},{type:"textline",tokens:["hi",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hl","[","0","]","=","hl","[","1","]","=","hl","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hk",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"hm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hm","[","0","]","=","hm","[","1","]","=","hm","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ho",qualifier:["float"],is_optional:false},{type:"node_out",name:"hp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hp","[","0","]","=","hp","[","1","]","=","hp","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hn",";","ho",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"hq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hr",qualifier:["float"],is_optional:false},{type:"node_in",name:"hs",qualifier:["float"],is_optional:false},{type:"node_out",name:"ht",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ht","[","0","]","=","ht","[","1","]","=","ht","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hq",";","hr",";","hs",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hu",qualifier:["float"],is_optional:false},{type:"node_in",name:"hv",qualifier:["float"],is_optional:false},{type:"node_in",name:"hw",qualifier:["float"],is_optional:false},{type:"node_in",name:"hx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hy","=","hx",";"]},{type:"textline",tokens:["hu",";","hv",";","hw",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_in",name:"hA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hB","=","hA",";"]},{type:"textline",tokens:["hz",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hD","[","0","]","=","hD","[","1","]","=","hD","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hC",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hE",qualifier:["float"],is_optional:false},{type:"node_out",name:"hF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hF","[","0","]","=","hF","[","1","]","=","hF","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hE",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hG",qualifier:["float"],is_optional:false},{type:"node_out",name:"hH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hH","[","0","]","=","hH","[","1","]","=","hH","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hG",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hK",qualifier:["float"],is_optional:false},{type:"node_out",name:"hL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hJ","=","hI","[","0","]",";","hK","=","hI","[","1","]",";","hL","=","hI","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hM",qualifier:["float"],is_optional:false},{type:"node_in",name:"hN",qualifier:["float"],is_optional:false},{type:"node_in",name:"hO",qualifier:["float"],is_optional:false},{type:"node_out",name:"hP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hP","[","0","]","=","hM",";","hP","[","1","]","=","hN",";","hP","[","2","]","=","hO",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hR",qualifier:["float"],is_optional:false},{type:"node_in",name:"hS",qualifier:["float"],is_optional:false},{type:"node_out",name:"hT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","hR","-","hS","*","ed",";","hT","=","max","(","(","UNITY_VALUE_NODES","+","hS",")","*","hQ","+","eW",",","ee",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"hU",qualifier:["float"],is_optional:false},{type:"node_in",name:"hV",qualifier:["float"],is_optional:false},{type:"node_out",name:"hW",qualifier:["float"],is_optional:false},{type:"node_out",name:"hX",qualifier:["float"],is_optional:false},{type:"node_out",name:"hY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hW","=","hX","=","hY","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hU",";","hV",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"hZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"h_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ia",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["h_","[","0","]","=","h_","[","1","]","=","h_","[","2","]","=","ZERO_VALUE_NODES",";","ia","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["hZ",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ib",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ic",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ic","[","0","]","=","ic","[","1","]","=","ic","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ib",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"id",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ie",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ie","[","0","]","=","ie","[","1","]","=","ie","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["id",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"ig",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ih",qualifier:["float"],is_optional:false},{type:"node_in",name:"ii",qualifier:["float"],is_optional:false},{type:"node_in",name:"ij",qualifier:["float"],is_optional:false},{type:"node_out",name:"ik",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"il",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ik","[","0","]","=","ik","[","1","]","=","ik","[","2","]","=","ZERO_VALUE_NODES",";","il","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ig",";","ih",";","ii",";","ij",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"im",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"io",qualifier:["float"],is_optional:false},{type:"node_in",name:"ip",qualifier:["float"],is_optional:false},{type:"node_in",name:"iq",qualifier:["float"],is_optional:false},{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_out",name:"is",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"it",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["is","[","0","]","=","is","[","1","]","=","is","[","2","]","=","ZERO_VALUE_NODES",";","it","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["im",";","io",";","ip",";","iq",";","ir",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"iu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iv",qualifier:["float"],is_optional:false},{type:"node_out",name:"iw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ix",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iw","[","0","]","=","iw","[","1","]","=","iw","[","2","]","=","ZERO_VALUE_NODES",";","ix","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iu",";","iv",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iz",qualifier:["float"],is_optional:false},{type:"node_in",name:"iA",qualifier:["float"],is_optional:false},{type:"node_in",name:"iB",qualifier:["float"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_in",name:"iD",qualifier:["float"],is_optional:false},{type:"node_in",name:"iE",qualifier:["float"],is_optional:false},{type:"node_out",name:"iF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iF","[","0","]","=","iF","[","1","]","=","iF","[","2","]","=","ZERO_VALUE_NODES",";","iG","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iy",";","iz",";","iA",";","iB",";","iC",";","iD",";","iE",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iI","[","0","]","=","iI","[","1","]","=","iI","[","2","]","=","ZERO_VALUE_NODES",";","iJ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iH",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iL",qualifier:["float"],is_optional:false},{type:"node_in",name:"iM",qualifier:["float"],is_optional:false},{type:"node_out",name:"iN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iN","[","0","]","=","iN","[","1","]","=","iN","[","2","]","=","ZERO_VALUE_NODES",";","iO","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iK",";","iL",";","iM",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iS",qualifier:["float"],is_optional:false},{type:"node_out",name:"iT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iT","[","0","]","=","iT","[","1","]","=","iT","[","2","]","=","ZERO_VALUE_NODES",";","iU","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iP",";","iQ",";","iR",";","iS",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"iV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"i_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ja",qualifier:["float"],is_optional:false},{type:"node_in",name:"jb",qualifier:["float"],is_optional:false},{type:"node_in",name:"jc",qualifier:["float"],is_optional:false},{type:"node_out",name:"jd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"je",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jd","[","0","]","=","jd","[","1","]","=","jd","[","2","]","=","ZERO_VALUE_NODES",";","je","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iV",";","iW",";","iX",";","iY",";","iZ",";","i_",";","ja",";","jb",";","jc",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"jf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jh","=","clamp","(","jf","+","jg",",","ee",",","ef",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"ji",qualifier:["float"],is_optional:false},{type:"node_in",name:"jj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","ji",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","jl","=","eW","*","jj","+","(","UNITY_VALUE_NODES","-","eW",")","*","jk",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jn",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eD",qualifier:["varying","vec2"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jm"],statements:[{type:"textline",tokens:["jm","=","eu","(","eD",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jn"],statements:[{type:"textline",tokens:["jn","=","vec3","(","eD",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eE",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jo","=","vec3","(","eE",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"jp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jp","=","ff",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jq","=","ec",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"jr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jr","[","0","]","=","jr","[","1","]","=","jr","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["js","[","0","]","=","fa","[","0","]",";","js","[","1","]","=","fa","[","1","]",";","js","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jt","[","0","]","=","jt","[","1","]","=","jt","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ju","[","0","]","=","ju","[","1","]","=","ju","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jv","=","vec3","(","eF",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jw",qualifier:["float"],is_optional:false},{type:"node_out",name:"jx",qualifier:["float"],is_optional:false},{type:"node_out",name:"jy",qualifier:["float"],is_optional:false},{type:"node_out",name:"jz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jA",qualifier:["float"],is_optional:false},{type:"node_out",name:"jB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","=","ZERO_VALUE_NODES",";","jx","=","ZERO_VALUE_NODES",";","jy","=","ZERO_VALUE_NODES",";","jz","=","vec3","(","ZERO_VALUE_NODES",")",";","jA","=","ZERO_VALUE_NODES",";","jB","=","jz",";","jC","=","jz",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["float"],is_optional:false},{type:"node_out",name:"jF",qualifier:["float"],is_optional:false},{type:"node_out",name:"jG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jD","=","ZERO_VALUE_NODES",";","jE","=","ZERO_VALUE_NODES",";","jF","=","ZERO_VALUE_NODES",";","jG","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jI",qualifier:["float"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"jK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jI","=","ZERO_VALUE_NODES",";","jJ","=","ZERO_VALUE_NODES",";","jK","=","ZERO_VALUE_NODES",";","jH","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jL",qualifier:["float"],is_optional:false},{type:"node_out",name:"jM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jM","=","jL",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jN","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jO",qualifier:["float"],is_optional:false},{type:"node_in",name:"jP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"jR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jQ","=","jR","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jP",";","jO",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jS",qualifier:["float"],is_optional:false},{type:"node_out",name:"jT",qualifier:["float"],is_optional:false},{type:"node_out",name:"jU",qualifier:["float"],is_optional:false},{type:"node_out",name:"jV",qualifier:["float"],is_optional:false},{type:"node_out",name:"jW",qualifier:["float"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jS","=","jT","=","jU","=","ZERO_VALUE_NODES",";","jV","=","jW","=","jX","=","ZERO_VALUE_NODES",";","jY","=","jY","=","j_","=","ka","=","ZERO_VALUE_NODES",";","jZ","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"kb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kb","=","kc","=","vec3","(","ZERO_VALUE_NODES",")",";","kd","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"ke",qualifier:["float"],is_optional:false},{type:"node_in",name:"kf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kg","=","kf",";"]},{type:"textline",tokens:["ke",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"kh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ki",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kj","=","ki",";"]},{type:"textline",tokens:["kh",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kk",qualifier:["float"],is_optional:false},{type:"node_out",name:"kl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"km",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kl","[","0","]","=","kl","[","1","]","=","kl","[","2","]","=","clamp","(","kk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","km","=","kl","[","0","]",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"kn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ko",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ko","=","kn",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["ko","=","(","MAPPING_TRS_MATRIX","*","vec4","(","ko",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["ko","=","ko","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["ko","=","ko","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["ko","=","max","(","ko",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["ko","=","min","(","ko",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["ko","=","normalize","(","ko",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"kp",qualifier:["float"],is_optional:false},{type:"node_in",name:"kq",qualifier:["float"],is_optional:false},{type:"node_out",name:"kr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kr","=","kp","+","kq",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kr","=","clamp","(","kr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"ks",qualifier:["float"],is_optional:false},{type:"node_in",name:"kt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ku",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ku","=","ks","-","kt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ku","=","clamp","(","ku",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"kv",qualifier:["float"],is_optional:false},{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_out",name:"kx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kx","=","kv","*","kw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kx","=","clamp","(","kx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"ky",qualifier:["float"],is_optional:false},{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_out",name:"kA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kA","=","(","kz","!=","ZERO_VALUE_NODES",")","?","ky","/","kz",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kA","=","clamp","(","kA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kB",qualifier:["float"],is_optional:false},{type:"node_in",name:"kC",qualifier:["float"],is_optional:false},{type:"node_out",name:"kD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kD","=","sin","(","kB",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kD","=","clamp","(","kD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kC",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kE",qualifier:["float"],is_optional:false},{type:"node_in",name:"kF",qualifier:["float"],is_optional:false},{type:"node_out",name:"kG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kG","=","cos","(","kE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kG","=","clamp","(","kG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kF",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kH",qualifier:["float"],is_optional:false},{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_out",name:"kJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kJ","=","tan","(","kH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kJ","=","clamp","(","kJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kI",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kK",qualifier:["float"],is_optional:false},{type:"node_in",name:"kL",qualifier:["float"],is_optional:false},{type:"node_out",name:"kM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kM","=","(","kK","<=","UNITY_VALUE_NODES","&&","kK",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kK",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kM","=","clamp","(","kM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kL",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kN",qualifier:["float"],is_optional:false},{type:"node_in",name:"kO",qualifier:["float"],is_optional:false},{type:"node_out",name:"kP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kP","=","(","kN","<=","UNITY_VALUE_NODES","&&","kN",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kN",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kP","=","clamp","(","kP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kO",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_out",name:"kS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kS","=","atan","(","kQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kS","=","clamp","(","kS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kR",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"kT",qualifier:["float"],is_optional:false},{type:"node_in",name:"kU",qualifier:["float"],is_optional:false},{type:"node_out",name:"kV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","kT","<","ZERO_VALUE_NODES","&&","kU","!=","floor","(","kU",")",")","kV","=","ZERO_VALUE_NODES",";","else","if","(","kU","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["kV","=","UNITY_VALUE_NODES",";","else","if","(","kT","<","ZERO_VALUE_NODES",")","kV","=","mix","(","1.0",",","-","1.0",",","sign","(","mod","(","-","kU",",","2.0",")",")",")","*","pow","(","-","kT",",","kU",")",";","else","if","(","kT","==","ZERO_VALUE_NODES",")","kV","=","ZERO_VALUE_NODES",";","else","kV","=","pow","(","kT",",","kU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kV","=","clamp","(","kV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"kW",qualifier:["float"],is_optional:false},{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_out",name:"kY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kY","=","(","kW",">","ZERO_VALUE_NODES","&&","kX",">","ZERO_VALUE_NODES",")","?","log2","(","kW",")","/","log2","(","kX",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kY","=","clamp","(","kY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"kZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"k_",qualifier:["float"],is_optional:false},{type:"node_out",name:"la",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["la","=","min","(","kZ",",","k_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["la","=","clamp","(","la",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_in",name:"lc",qualifier:["float"],is_optional:false},{type:"node_out",name:"ld",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","max","(","lb",",","lc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ld","=","clamp","(","ld",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"le",qualifier:["float"],is_optional:false},{type:"node_in",name:"lf",qualifier:["float"],is_optional:false},{type:"node_out",name:"lg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","floor","(","le","+","ed",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lg","=","clamp","(","lg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lf",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_in",name:"li",qualifier:["float"],is_optional:false},{type:"node_out",name:"lj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lj","=","(","lh","<","li",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lj","=","clamp","(","lj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_out",name:"lm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lm","=","(","lk",">","ll",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lm","=","clamp","(","lm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_out",name:"lp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lp","=","abs","(","lo",")",">","0.000001","?","mod","(","ln",",","lo",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lp","=","clamp","(","lp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lq",qualifier:["float"],is_optional:false},{type:"node_in",name:"lr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ls",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ls","=","abs","(","lq",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ls","=","clamp","(","ls",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lr",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"lt",qualifier:["float"],is_optional:false},{type:"node_in",name:"lu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lw","=","mix","(","lu",",","lv",",","eW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lw","=","clamp","(","lw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lx",qualifier:["float"],is_optional:false},{type:"node_in",name:"ly",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lA","=","mix","(","ly",",","ly","+","lz",",","eW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lA","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lB",qualifier:["float"],is_optional:false},{type:"node_in",name:"lC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lE","=","mix","(","lC",",","lC","*","lD",",","eW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lE","=","clamp","(","lE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lF",qualifier:["float"],is_optional:false},{type:"node_in",name:"lG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lI","=","mix","(","lG",",","lG","-","lH",",","eW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lI","=","clamp","(","lI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eV","=","UNITY_VALUE_NODES","-","eW",";","lM","=","ef","-","(","vec3","(","eV",")","+","eW","*","(","ef","-","lL",")",")","*","(","ef","-","lK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lM","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lN",qualifier:["float"],is_optional:false},{type:"node_in",name:"lO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eV","=","UNITY_VALUE_NODES","-","eW",";","lP","+=","step","(","lP",",","ee",")",";","lQ","=","eV","*","lO","+","eW","*","lO","/","lP",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lQ","=","clamp","(","lQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lR",qualifier:["float"],is_optional:false},{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lU","=","mix","(","lS",",","abs","(","lS","-","lT",")",",","eW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lU","=","clamp","(","lU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"lV",qualifier:["float"],is_optional:false},{type:"node_in",name:"lW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lY","=","min","(","lW",".","rgb",",","lX",".","rgb","*","eW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lY","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"lZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"l_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ma",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","lZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mb","=","max","(","l_",".","rgb",",","ma",".","rgb","*","eW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mb","=","clamp","(","mb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mc",qualifier:["float"],is_optional:false},{type:"node_in",name:"md",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"me",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fh","=","vec3","(","UNITY_VALUE_NODES","-","eW",")",";","mf","=","mix","(","md","*","(","fh","+","2.0","*","eW","*","me",")",",","ef","-","(","fh","+","2.0","*","eW","*","(","ef","-","me",")",")","*","(","ef","-","md",")",",","step","(","ed",",","md",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mf","=","clamp","(","mf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"mg",qualifier:["float"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fh","=","ef","-","eW","*","mi",";","fg","=","clamp","(","mh","/","fh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mj","=","mix","(","mix","(","fg",",","ef",",","step","(","fh",",","ee",")",")",",","mh",",","step","(","mh",",","ee",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mj","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fh","=","vec3","(","UNITY_VALUE_NODES","-","eW",")",";","fh","=","fh","+","eW","*","mm",";","fg","=","clamp","(","ef","-","(","ef","-","ml",")","/","fh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mn","=","mix","(","fg",",","ee",",","step","(","fh",",","ee",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mn","=","clamp","(","mn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mo",qualifier:["float"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mr","=","mp",";","fg","=","eo","(","mq",")",";","if","(","fg",".","y","!=","ZERO_VALUE_NODES",")","{","fh","=","eo","(","mr",")",";","fh",".","x","=","fg",".","x",";","fi","=","es","(","fh",")",";","mr","=","mix","(","mr",",","fi",",","eW",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mr","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"ms",qualifier:["float"],is_optional:false},{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","ms",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eV","=","UNITY_VALUE_NODES","-","eW",";","mv","=","mt",";","fi","=","eo","(","mv",")",";","if","(","fi",".","y","!=","ZERO_VALUE_NODES",")","{","fh","=","eo","(","mu",")",";","fi",".","y","=","eV","*","fi",".","y","+","eW","*","fh",".","y",";","mv","=","es","(","fi",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mv","=","clamp","(","mv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mw",qualifier:["float"],is_optional:false},{type:"node_in",name:"mx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"my",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eV","=","UNITY_VALUE_NODES","-","eW",";","fi","=","eo","(","mx",")",";","fh","=","eo","(","my",")",";","fi",".","z","=","eV","*","fi",".","z","+","eW","*","fh",".","z",";","mz","=","es","(","fi",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mz","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mA",qualifier:["float"],is_optional:false},{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mD","=","mB",";","fh","=","eo","(","mC",")",";","if","(","fh",".","y","!=","ZERO_VALUE_NODES",")","{","fi","=","eo","(","mD",")",";","fi",".","x","=","fh",".","x",";","fi",".","y","=","fh",".","y",";","fg","=","es","(","fi",")",";","mD","=","mix","(","mD",",","fg",",","eW",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mD","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mE",qualifier:["float"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eV","=","UNITY_VALUE_NODES","-","eW",";","fg","=","mG","+","mF","-","mG","*","mF",";","mH","=","mF","*","(","vec3","(","eV",")","+","vec3","(","eW",")","*","(","(","ef","-","mF",")","*","mG","+","fg",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mH","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mI",qualifier:["float"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eW","=","clamp","(","mI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mL","=","mJ","+","eW","*","(","2.0","*","mK","-","ef",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mL","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eL","=","mM",";","eP","=","mN",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mS",qualifier:["float"],is_optional:true},{type:"node_out",name:"mT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mY",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"mZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"m_",qualifier:["float"],is_optional:false},{type:"node_param",name:"eG",qualifier:["const","vec2"]},{type:"node_param",name:"eH",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["mV","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["mW","=","eH","[","0","]","*","clamp","(","mP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["mX","=","normalize","(","mR",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mX","=","ff",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1},"NODES_GLOW",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["mT","=","mS","*","mV",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mT","=","eS","*","mV",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["mV","*=","mQ",";"]}]}]},{type:"textline",tokens:["mU","=","eT","*","u_environment_energy","*","dO","(","mX",")",";","m_","=","dr","(","mV",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["mY","=","vec2","(","eG","[","0","]",",","eG","[","1","]",")",";"]},{type:"textline",tokens:["mZ","=","vec2","(","eH","[","1","]",",","eH","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eO","=","m_",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mT","=","ee",";","mU","=","ef",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"na",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"nb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nd",qualifier:["float"],is_optional:true},{type:"node_in",name:"ne",qualifier:["float"],is_optional:true},{type:"node_in",name:"nf",qualifier:["float"],is_optional:true},{type:"node_out",name:"ng",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nh",qualifier:["float"],is_optional:true},{type:"node_out",name:"ni",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nk",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eI",qualifier:["float"]},{type:"node_param",name:"eJ",qualifier:["float"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ng"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["ng","=","na",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["ng","=","ee",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["dL","(","ng",",","eK",",","nc",",","nd",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["ng","+=","nb",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ni"],statements:[{type:"textline",tokens:["ni","=","nc",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nj"],statements:[{type:"textline",tokens:["nj","=","na",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","nb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nh"],statements:[{type:"textline",tokens:["nh","=","clamp","(","nf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eW","=","max","(","max","(","nb",".","r",",","nb",".","g",")",",","nb",".","b",")","*","ne",";","nh","=","clamp","(","nf","*","(","UNITY_VALUE_NODES","-","eW",")","+","eW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nh"],statements:[{type:"textline",tokens:["nh","=","clamp","(","eI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eW","=","max","(","max","(","nb",".","r",",","nb",".","g",")",",","nb",".","b",")","*","eJ",";","nh","=","eI","*","(","UNITY_VALUE_NODES","-","eW",")","+","eW",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eM","=","nb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eM","=","ee",";"]}]}]},{type:"textline",tokens:["eN","=","nc",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"nl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"no",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"np",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["no","=","vec4","(","nl","+","nn","*","nm",",","ZERO_VALUE_NODES",")",";","np","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nq",qualifier:["float"],is_optional:false},{type:"node_out",name:"nr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ns",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nu",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1},"NUM_LIGHTS",0,{type:"g_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["ns","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nu","=","ed",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nu","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["nt","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","nt","*=","nq",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fg","=","u_light_positions","[","LAMP_IND","]",";","nr","=","fg","-","fe",";"]},{type:"textline",tokens:["eW","=","length","(","nr",")",";","nt","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","eW","*","eW",")",";","nr","=","normalize","(","nr",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fg","=","u_light_directions","[","LAMP_IND","]",";","eW","=","dot","(","nr",",","fg",")",";","eW","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eW","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","nt","*=","eW",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["nr","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"nv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nw",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ny",qualifier:["float"],is_optional:false},{type:"node_in",name:"nz",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nA","=","ZERO_VALUE_NODES",";","if","(","nw",".","r","!=","ZERO_VALUE_NODES",")","{","eW","=","(","UNITY_VALUE_NODES","-","ny",")","*","dot","(","nx",",","nv",")","+","ny",";","if","(","nz","[","0","]","==","ZERO_VALUE_NODES",")","{","nA","=","UNITY_VALUE_NODES",";","}","else","{","eW","=","UNITY_VALUE_NODES","+","abs","(","eW",")",";","eW","=","nz","[","1","]","+","(","UNITY_VALUE_NODES","-","nz","[","1","]",")","*","pow","(","eW",",","nz","[","0","]",")",";","nA","=","clamp","(","eW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nA","=","max","(","nA",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nE",qualifier:["float"],is_optional:false},{type:"node_out",name:"nF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nF","=","ZERO_VALUE_NODES",";","if","(","nC",".","r","!=","ZERO_VALUE_NODES",")","{","eW","=","(","UNITY_VALUE_NODES","-","nE",")","*","dot","(","nD",",","nB",")","+","nE",";","nF","=","max","(","eW",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nH",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nL","=","ZERO_VALUE_NODES",";","if","(","nH",".","r","!=","ZERO_VALUE_NODES",")","{","eW","=","(","UNITY_VALUE_NODES","-","nJ",")","*","dot","(","nI",",","nG",")","+","nJ",";","if","(","nK","[","0","]",">","ZERO_VALUE_NODES",")","{","eV","=","max","(","dot","(","nI",",","eK",")",",","ZERO_VALUE_NODES",")",";","eU","=","nK","[","0","]","*","nK","[","0","]",";","eX","=","UNITY_VALUE_NODES","-","ed","*","(","eU","/","(","eU","+","0.33",")",")",";","fg","=","nG","-","eW","*","nI",";","fi","=","eK","-","eV","*","nI",";"]},{type:"textline",tokens:["if","(","length","(","fg",")","==","ZERO_VALUE_NODES","||","length","(","fi",")","==","ZERO_VALUE_NODES","||","abs","(","eW",")",">","UNITY_VALUE_NODES","||","abs","(","eV",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nL","=","eW","*","eX",";","else","{","eY","=","acos","(","eW",")",";","eV","=","acos","(","eV",")",";","fg","=","normalize","(","fg",")",";","fi","=","normalize","(","fi",")",";","eZ","=","max","(","eY",",","eV",")",";","e_","=","min","(","eY",",","eV",")",";","e_","*=","0.95",";","eV","=","max","(","dot","(","fg",",","fi",")",",","ZERO_VALUE_NODES",")",";","eU","=","0.45","*","(","eU","/","(","eU","+","0.09",")",")",";","nL","=","eW","*","(","eX","+","(","eU","*","eV","*","sin","(","eZ",")","*","tan","(","e_",")",")",")",";","}","}","else","nL","=","eW",";","nL","=","max","(","nL",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nN",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nP",qualifier:["float"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nR","=","ZERO_VALUE_NODES",";","if","(","nN",".","r","!=","ZERO_VALUE_NODES",")","{","eW","=","(","UNITY_VALUE_NODES","-","nP",")","*","dot","(","nO",",","nM",")","+","nP",";","e_","=","max","(","dot","(","nO",",","eK",")",",","ZERO_VALUE_NODES",")",";","if","(","nQ","[","0","]","<=","UNITY_VALUE_NODES",")","nR","=","eW","*","pow","(","max","(","e_","*","eW",",","0.1",")",",","nQ","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nR","=","eW","*","pow","(","1.0001","-","e_",",","nQ","[","0","]","-","UNITY_VALUE_NODES",")",";","nR","=","max","(","nR",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nV",qualifier:["float"],is_optional:false},{type:"node_in",name:"nW",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nX","=","ZERO_VALUE_NODES",";","if","(","nT",".","r","!=","ZERO_VALUE_NODES",")","{","e_","=","(","UNITY_VALUE_NODES","-","nV",")","*","dot","(","nU",",","nS",")","+","nV",";","e_","=","acos","(","e_",")",";","if","(","e_","<","nW","[","0","]",")","nX","=","UNITY_VALUE_NODES",";","else","if","(","e_",">","(","nW","[","0","]","+","nW","[","1","]",")","||","nW","[","1","]","==","ZERO_VALUE_NODES",")","nX","=","ZERO_VALUE_NODES",";","else","nX","=","UNITY_VALUE_NODES","-","(","(","e_","-","nW","[","0","]",")","/","nW","[","1","]",")",";","nX","=","max","(","nX",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"nY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nZ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"n_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oa",qualifier:["float"],is_optional:false},{type:"node_in",name:"ob",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oc","=","ZERO_VALUE_NODES",";","if","(","nZ",".","g","==","UNITY_VALUE_NODES",")","{","fi","=","normalize","(","nY","+","eK",")",";","oc","=","(","UNITY_VALUE_NODES","-","oa",")","*","max","(","dot","(","n_",",","fi",")",",","ZERO_VALUE_NODES",")","+","oa",";","oc","=","pow","(","oc",",","ob","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"od",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"of",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"og",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oh","=","ZERO_VALUE_NODES",";","if","(","oe",".","g","==","UNITY_VALUE_NODES",")","{","fi","=","normalize","(","od","+","eK",")",";","e_","=","max","(","dot","(","of",",","fi",")",",","0.001",")",";"]},{type:"textline",tokens:["eW","=","max","(","dot","(","of",",","eK",")",",","0.01",")",";","eZ","=","max","(","dot","(","of",",","od",")",",","0.01",")",";","e_","=","tan","(","acos","(","e_",")",")",";","eV","=","max","(","og","[","0","]",",","0.001",")",";","oh","=","eZ","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","eV","*","eV",")",")","*","(","exp","(","-","(","e_","*","e_",")","/","(","eV","*","eV",")",")","/","(","sqrt","(","eW","*","eZ",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oj",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"ok",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ol",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"om",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["om","=","ZERO_VALUE_NODES",";","if","(","oj",".","g","==","UNITY_VALUE_NODES",")","{","fi","=","normalize","(","oi","+","eK",")",";","eZ","=","acos","(","dot","(","fi",",","ok",")",")",";","if","(","eZ","<","ol","[","0","]",")","om","=","UNITY_VALUE_NODES",";","else","if","(","eZ",">=","ol","[","0","]","+","ol","[","1","]","||","ol","[","1","]","==","ZERO_VALUE_NODES",")","om","=","ZERO_VALUE_NODES",";","else","om","=","UNITY_VALUE_NODES","-","(","eZ","-","ol","[","0","]",")","/","ol","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oo",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"op",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oq",qualifier:["float"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"os",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["os","=","ZERO_VALUE_NODES",";","if","(","oo",".","g","==","UNITY_VALUE_NODES",")","{","if","(","or","[","0","]","<","UNITY_VALUE_NODES","||","or","[","1","]","==","ZERO_VALUE_NODES",")","os","=","ZERO_VALUE_NODES",";","else","{","if","(","or","[","1","]","<","100.0",")","or","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","or","[","1","]",")",";","else","or","[","1","]","=","10.0","/","or","[","1","]",";","fi","=","normalize","(","eK","+","on",")",";","eZ","=","(","UNITY_VALUE_NODES","-","oq",")","*","max","(","dot","(","op",",","fi",")",",","ZERO_VALUE_NODES",")","+","oq",";","if","(","eZ","<","ZERO_VALUE_NODES",")","os","=","ZERO_VALUE_NODES",";","else","{","eW","=","max","(","dot","(","op",",","eK",")",",","0.01",")",";","eV","=","dot","(","op",",","on",")",";","if","(","eV","<=","0.01",")","os","=","ZERO_VALUE_NODES",";","else","{","e_","=","max","(","dot","(","eK",",","fi",")",",","0.01",")",";","eU","=","UNITY_VALUE_NODES",";","eW","=","(","2.0","*","eZ","*","eW",")","/","e_",";","eV","=","(","2.0","*","eZ","*","eV",")","/","e_",";","eV","=","min","(","min","(","eU",",","eW",")",",","eV",")",";","eW","=","sqrt","(","pow","(","or","[","0","]",",","2.0",")","+","pow","(","e_",",","2.0",")","-","UNITY_VALUE_NODES",")",";","e_","=","pow","(","eW","-","e_",",","2.0",")","/","pow","(","eW","+","e_",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","e_","*","(","eW","+","e_",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","e_","*","(","eW","-","e_",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","eZ","=","acos","(","eZ",")",";","os","=","max","(","e_","*","eV","*","exp","(","-","pow","(","eZ",",","2.0",")","/","(","2.0","*","pow","(","or","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"ot",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ov",qualifier:["float"],is_optional:false},{type:"node_in",name:"ow",qualifier:["float"],is_optional:false},{type:"node_in",name:"ox",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oz",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oD",qualifier:["float"],is_optional:false},{type:"node_out",name:"oE",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oF",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","ox",",","oy",")","*","dot","(","eK",",","oy",")","<","ZERO_VALUE_NODES",")","{","eZ","=","oz",".","x",";","eV","=","oz",".","y",";","e_","=","oz",".","z",";","eW","=","oz",".","w",";"]},{type:"textline",tokens:["eU","=","clamp","(","abs","(","dot","(","ox",",","oy",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eX","=","clamp","(","dot","(","eK",",","-","ox",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eV","=","pow","(","eX",",","eV",")",";"]},{type:"textline",tokens:["oE","=","ot","+","oD","*","vec4","(","oC","*","eU","*","pow","(","oA",",","vec3","(","eZ",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oE","+=","e_","*","mix","(","vec4","(","oA",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","eW",")","*","oD","*","vec4","(","oC","*","eU","*","vec3","(","eV",")",",","UNITY_VALUE_NODES",")",";","oF","=","ou",";","}","else","{"]},{type:"textline",tokens:["oF","=","ou","+","oC","*","oB","*","ow",";","oE","=","ot","+","vec4","(","oC","*","oA","*","ov",",","ow",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oF","=","ou","+","oC","*","oB","*","ow",";","oE","=","ot","+","vec4","(","oC","*","oA","*","ov",",","ow",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oG","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oI","=","dot","(","oH",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oK",qualifier:["float"],is_optional:true},{type:"node_out",name:"oL",qualifier:["float"],is_optional:true},{type:"node_out",name:"oM",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oK"],statements:[{type:"textline",tokens:["oK","=","oJ",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oL"],statements:[{type:"textline",tokens:["oL","=","oJ",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oM"],statements:[{type:"textline",tokens:["oM","=","oJ",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oO",qualifier:["float"],is_optional:true},{type:"node_out",name:"oP",qualifier:["float"],is_optional:true},{type:"node_out",name:"oQ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fi","=","eo","(","oN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oO"],statements:[{type:"textline",tokens:["oO","=","fi",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oP"],statements:[{type:"textline",tokens:["oP","=","fi",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oQ"],statements:[{type:"textline",tokens:["oQ","=","fi",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oR",qualifier:["float"],is_optional:false},{type:"node_in",name:"oS",qualifier:["float"],is_optional:false},{type:"node_in",name:"oT",qualifier:["float"],is_optional:false},{type:"node_out",name:"oU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oU","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","oR","-","oT",")","*","oS",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"oV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_out",name:"oX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oX","=","oV",";","if","(","oX",".","x",">","ZERO_VALUE_NODES",")","oX",".","x","=","pow","(","oV",".","x",",","oW",")",";","if","(","oX",".","y",">","ZERO_VALUE_NODES",")","oX",".","y","=","pow","(","oV",".","y",",","oW",")",";","if","(","oX",".","z",">","ZERO_VALUE_NODES",")","oX",".","z","=","pow","(","oV",".","z",",","oW",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oZ","=","max","(","ee",",","oY",")",";","oZ","=","pow","(","oZ",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"o_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pa",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pa","=","max","(","ee",",","o_",")",";","pa","=","pow","(","pa",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pd",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pd"],statements:[{type:"textline",tokens:["pb","[","2","]","=","pb","[","1","]","=","pb","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pd"],statements:[{type:"textline",tokens:["pc","[","2","]","=","pc","[","1","]","=","pc","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pd"],statements:[{type:"textline",tokens:["pd","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pg",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["fb","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","pe",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pf"],statements:[{type:"textline",tokens:["pf","=","fb",".","xyz",";","aE","(","pf",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pg","=","fb",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"ph",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pi",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pj",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pk",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pm",qualifier:["float"],is_optional:true},{type:"node_out",name:"pn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"po",qualifier:["float"],is_optional:true},{type:"node_out",name:"pp",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pq",qualifier:["float"],is_optional:true},{type:"node_out",name:"pr",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ps",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ew","(","ph",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pl"],statements:[{type:"textline",tokens:["pl","=","fb",".","xyz",";","aE","(","pl",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pm"],statements:[{type:"textline",tokens:["pm","=","fb",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ew","(","pi",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pn"],statements:[{type:"textline",tokens:["pn","=","fb",".","xyz",";","aE","(","pn",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_po"],statements:[{type:"textline",tokens:["po","=","fb",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ew","(","pj",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pp"],statements:[{type:"textline",tokens:["pp","=","fb",".","xyz",";","aE","(","pp",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pq"],statements:[{type:"textline",tokens:["pq","=","fb",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ew","(","pk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pr"],statements:[{type:"textline",tokens:["pr","=","fb",".","xyz",";","aE","(","pr",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fb",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"pt",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pv",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"px",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"py",qualifier:["float"],is_optional:true},{type:"node_out",name:"pz",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pA",qualifier:["float"],is_optional:true},{type:"node_out",name:"pB",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pC",qualifier:["float"],is_optional:true},{type:"node_out",name:"pD",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pE",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ew","(","pt",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_px"],statements:[{type:"textline",tokens:["px","=","normalize","(","fc","*","(","fb",".","xyz","-","ed",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_py"],statements:[{type:"textline",tokens:["py","=","fb",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ew","(","pu",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pz"],statements:[{type:"textline",tokens:["pz","=","normalize","(","fc","*","(","fb",".","xyz","-","ed",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pA"],statements:[{type:"textline",tokens:["pA","=","fb",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ew","(","pv",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pB"],statements:[{type:"textline",tokens:["pB","=","normalize","(","fc","*","(","fb",".","xyz","-","ed",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pC"],statements:[{type:"textline",tokens:["pC","=","fb",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fb","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ew","(","pw",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pD"],statements:[{type:"textline",tokens:["pD","=","normalize","(","fc","*","(","fb",".","xyz","-","ed",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","fb",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pF","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pJ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pI","=","pG","+","pH",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pJ"],statements:[{type:"textline",tokens:["pJ","=","(","abs","(","pI","[","0","]",")","+","abs","(","pI","[","1","]",")","+","abs","(","pI","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pN",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pM","=","pK","-","pL",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pN"],statements:[{type:"textline",tokens:["pN","=","(","abs","(","pM","[","0","]",")","+","abs","(","pM","[","1","]",")","+","abs","(","pM","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pR",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pQ","=","pO","+","pP",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pR"],statements:[{type:"textline",tokens:["pR","=","length","(","pQ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","normalize","(","pQ",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pV",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pU","=","ee",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pV"],statements:[{type:"textline",tokens:["pV","=","dot","(","pS",",","pT",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pZ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pY","=","cross","(","pW",",","pX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pZ"],statements:[{type:"textline",tokens:["pZ","=","length","(","pY",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qc",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qb","=","normalize","(","p_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qc"],statements:[{type:"textline",tokens:["qc","=","length","(","p_",")",";"]}]}]},{type:"textline",tokens:["qa",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qf","=","reflect","(","-","qd",",","qe",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["float"],is_optional:false},{type:"node_in",name:"qi",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qj",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qk",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["eV","=","length","(","fa",")",";","if","(","eV","<","qj",")","{","eQ","=","ew","(","qg",")",";","eV","=","clamp","(","ed","*","(","qj","-","eV",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eV","=","qh","*","eV",";"]},{type:"textline",tokens:["fi","=","normalize","(","eK","*","fc",")",";"]},{type:"textline",tokens:["eU","=","UNITY_VALUE_NODES","/","qi",";"]},{type:"textline",tokens:["eR","=","fi",".","xy","*","eV","/","(","qi","*","fi",".","z",")",";","eV","=","UNITY_VALUE_NODES",";","eW","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eQ",")",".","a",";"]},{type:"textline",tokens:["for","(","float","ql","=","1.0",";","ql","<=","qi",";","ql","++",")","{","if","(","eW","<","eV",")","{","eV","-=","eU",";","eQ","-=","eR",";","eW","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eQ",")",".","a",";","}","}"]},{type:"textline",tokens:["eR","=","eQ","+","eR",";","eU","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eR",")",".","a","-","(","eV","+","eU",")",";","eV","=","eW","-","eV",";","eU","=","eV","/","(","eV","-","eU",")",";"]},{type:"textline",tokens:["eQ","=","eU","*","eR","+","(","UNITY_VALUE_NODES","-","eU",")","*","eQ",";","qk","=","eu","(","eQ",")",";","}","else","qk","=","qg",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qn","=","clamp","(","qm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qp",qualifier:["float"],is_optional:false},{type:"node_out",name:"qq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qq","=","ej","(","qo",",","qp",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qr",qualifier:["float"],is_optional:false},{type:"node_in",name:"qs",qualifier:["float"],is_optional:false},{type:"node_in",name:"qt",qualifier:["float"],is_optional:false},{type:"node_in",name:"qu",qualifier:["float"],is_optional:false},{type:"node_in",name:"qv",qualifier:["float"],is_optional:false},{type:"node_out",name:"qw",qualifier:["float"],is_optional:true},{type:"node_out",name:"qx",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qw"],statements:[{type:"textline",tokens:["qw","=","qr",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qx"],statements:[{type:"textline",tokens:["qx","=","vec4","(","qs",",","qt",",","qu",",","qv",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qy","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qz",qualifier:["float"],is_optional:false},{type:"node_in",name:"qA",qualifier:["float"],is_optional:false},{type:"node_in",name:"qB",qualifier:["float"],is_optional:false},{type:"node_out",name:"qC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qC","=","smoothstep","(","qA",",","qB",",","qz",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eL","=","qD",";","eP","=","qE",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qG","=","(","qF",".","r","+","qF",".","g","+","qF",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qH",qualifier:["float"],is_optional:false},{type:"node_out",name:"qI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qI","[","0","]","=","qH",";","qI","[","1","]","=","qH",";","qI","[","2","]","=","qH",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qJ","(","in","vec3","eK",",","out","vec3","eL",",","out","vec3","eM",",","out","vec3","eN",",","out","float","eO",",","out","float","eP",")","{","vec2","eQ",",","eR",";","float","eS",",","eT",",","eU",",","eV",",","eW",",","eX",",","eY",",","eZ",",","e_",";","vec4","fa",",","fb",";","mat3","fc",";","vec3","fd",",","fe",",","ff",",","fg",",","fh",",","fi",";","eL","=","ee",";","eM","=","ee",";","eN","=","ee",";","eO","=","ZERO_VALUE_NODES",";","eP","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fd","=","normalize","(","bB",")",";","fe","=","fd",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","fe","=","fe",";","else","fe","=","-","fe",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["ff","=","fe",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ff","=","fd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["fd","=","fe",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","cross","(","fe",",","bC",".","xyz",")","*","bC",".","w",";","fc","=","mat3","(","bC",".","xyz",",","fg",",","fe",")",";","fc","=","fc",";"]}]}}]},{type:"textline",tokens:["fe","=","bz",";","fa","=","bA",";","eS","=","u_emit",";","eT","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qK","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qQ","(","vec3","qL",",","mat4","qM",")","{","vec3","qN",",","qO",",","qP",";","qN","=","vec3","(","qM","[","0","]","[","0","]",",","qM","[","1","]","[","0","]",",","qM","[","2","]","[","0","]",")",";","qO","=","vec3","(","qM","[","0","]","[","1","]",",","qM","[","1","]","[","1","]",",","qM","[","2","]","[","1","]",")",";","qP","=","vec3","(","qM","[","0","]","[","2","]",",","qM","[","1","]","[","2","]",",","qM","[","2","]","[","2","]",")",";","qO","=","cross","(","qP",",","qN",")",";","qN","=","normalize","(","qN",")",";","qO","=","normalize","(","qO",")",";","qP","=","normalize","(","qP",")",";","return","mat4","(","vec4","(","qN",",","0.0",")",",","vec4","(","qO",",","0.0",")",",","vec4","(","qP",",","0.0",")",",","vec4","(","qL",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","qW","(","vec3","qR",",","vec3","qS",")","{","vec3","qT",",","qU",",","qV",";","qT","=","qR","-","qS",";","qT",".","y","=","0.0",";","qU","=","cross","(","qK",",","qT",")",";","qV","=","cross","(","qT",",","qU",")",";","qU","=","normalize","(","qU",")",";","qV","=","normalize","(","qV",")",";","qT","=","normalize","(","qT",")",";","return","mat4","(","vec4","(","qU",",","0.0",")",",","vec4","(","qV",",","0.0",")",",","vec4","(","qT",",","0.0",")",",","vec4","(","qS",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rd","(","in","vec3","qX",",","float","qY",",","float","qZ",",","float","q_",",","vec3","ra",")","{","float","rb",",","rc",";","rb","=","fract","(","length","(","ra",")","/","0.17",")",";","rc","=","q_","+","rb","/","10.0",";","rb","=","rb",";","if","(","q_","!=","0.0",")","rb","/=","q_",";","qX","*=","1.0","+","0.5","*","sin","(","qY",")",";","rb","=","length","(","qX",")","*","qZ","*","sin","(","2.0","*","3.14","*","qY","*","rc","+","rb",")",";","return","bq","(","rb",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","rl","(","in","vec3","re",",","in","vec3","rf",",","in","mat4","rg",")","{","vec3","rh",";","float","ri",",","rj",";","mat4","rk",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rk","=","qQ","(","rf",",","rg",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["ri","=","fract","(","(","rf",".","x","*","1.43","+","rf",".","y","*","0.123","+","rf",".","z","*","6.1",")",")",";","ri","=","2.0","*","M_PI","*","ri",";","rh","=","normalize","(","vec3","(","rg","[","0","]","[","2","]",",","0.0",",","rg","[","2","]","[","2","]",")",")",";","rj","=","acos","(","rh","[","2","]",")",";","if","(","rh","[","0","]","<","0.0",")","rj","=","2.0","*","M_PI","-","rj",";","rj","=","rj","-","ri",";","if","(","rj","<","0.0",")","rj","=","2.0","*","M_PI","+","rj",";","ri","=","ri",";","if","(","rj","<=","MAX_BILLBOARD_ANGLE",")","ri","+=","rj",";","else","if","(","rj","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","ri","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rj","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","rj","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","ri","+=","rj","-","M_PI",";","else","if","(","rj","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","ri","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rj","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","ri","+=","rj","-","2.0","*","M_PI",";","rk","=","bo","(","ri",")",";","rk","[","3","]","=","vec4","(","rf",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rk","=","qW","(","re",",","rf",")",";"]}]}}]},{type:"textline",tokens:["return","rk",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rr","(","in","vec3","rm",",","in","vec3","rn",",","in","mat4","ro",",","mat4","rp",")","{","mat4","rq",";","rq","=","rl","(","rm",",","rn",",","ro",")",";","rp","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rq","=","rq","*","rp",";","return","rq",";","}"]}]}}]},{type:"textline",tokens:["aR","ry","(","in","vec3","rs",",","in","vec3","rt",",","in","vec3","ru",",","in","vec3","rv",",","in","vec3","rw",",","in","mat4","rx",")","{","rs","=","(","rx","*","vec4","(","rs",",","1.0",")",")",".","xyz",";","rt","=","(","rx","*","vec4","(","rt",",","1.0",")",")",".","xyz",";","ru","=","(","rx","*","vec4","(","ru",",","0.0",")",")",".","xyz",";","rv","=","(","rx","*","vec4","(","rv",",","0.0",")",")",".","xyz",";","rw","=","(","rx","*","vec4","(","rw",",","0.0",")",")",".","xyz",";","return","bs","(","aR","(","rs",",","rt",",","ru",",","rv",",","rw",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rB","(","vec2","rz",",","vec3","rA",")","{","return","(","rz","+","0.5",")","*","rA",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rI","(","in","vec4","rC",",","in","vec4","rD",",","in","float","rE",")","{","float","rF",",","rG",",","rH",";","rF","=","rC","[","0","]","*","rD","[","0","]","+","rC","[","1","]","*","rD","[","1","]","+","rC","[","2","]","*","rD","[","2","]","+","rC","[","3","]","*","rD","[","3","]",";","if","(","rF","<","0.0",")","{","rD","*=","-","1.0",";","rF","=","-","rF",";","}","if","(","abs","(","rF",")",">=","1.0",")","return","rC",";","rG","=","acos","(","rF",")",";","rF","=","sqrt","(","1.0","-","rF","*","rF",")",";","if","(","abs","(","rF",")","<","0.001",")","return","vec4","(","rC","*","0.5","+","rD","*","0.5",")",";","rH","=","sin","(","(","1.0","-","rE",")","*","rG",")","/","rF",";","rF","=","sin","(","rE","*","rG",")","/","rF",";","return","rC","*","rH","+","rD","*","rF",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rU","(","in","vec3","rJ",",","in","vec4","rK",",","in","vec4","rL",",","in","vec4","rM",",","in","vec4","rN",",","in","float","rO",")","{","vec4","rP",",","rQ",";","vec3","rR",",","rS",",","rT",";","rR","=","bd","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rJ",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rP","=","rI","(","rK",",","rL",",","rO",")",";","rQ","=","mix","(","rM",",","rN",",","rO",")",";","rS","=","aX","(","rP",",","rR",")",";","rS","=","rS","*","rQ",".","w","+","rQ",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rT","=","aX","(","rK",",","rR",")",";","rR","=","aX","(","rL",",","rR",")",";","rT","=","rT","*","rM",".","w","+","rM",".","xyz",";","rR","=","rR","*","rN",".","w","+","rN",".","xyz",";","rS","=","mix","(","rT",",","rR",",","rO",")",";"]}]}}]},{type:"textline",tokens:["return","bj","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rS",",","1.0",")",")",";","}","vec3","sc","(","in","vec3","rV",",","in","vec4","rW",",","in","vec4","rX",",","in","float","rY",")","{","vec4","rZ",";","vec3","r_",",","sa",",","sb",";","r_","=","bd","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rV",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rZ","=","rI","(","rW",",","rX",",","rY",")",";","sa","=","aX","(","rZ",",","r_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sb","=","aX","(","rW",",","r_",")",";","r_","=","aX","(","rX",",","r_",")",";","sa","=","mix","(","sb",",","r_",",","rY",")",";"]}]}}]},{type:"textline",tokens:["return","bj","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sa",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","rU","(","in","vec3","sd",",","in","vec4","se",",","in","vec4","sf",")","{","vec3","sg",";","sg","=","bd","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sd",",","1.0",")",")",";","sg","=","aX","(","se",",","sg",")",";","sg","=","sg","*","sf",".","w","+","sf",".","xyz",";","return","bj","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sg",",","1.0",")",")",";","}","vec3","sc","(","in","vec3","sh",",","in","vec4","si",")","{","vec3","sj",";","sj","=","bd","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sh",",","0.0",")",")",";","sj","=","aX","(","si",",","sj",")",";","return","bj","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sj",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sy","(","inout","vec3","sk",",","inout","vec3","sl",",","inout","vec3","sm",",","inout","vec3","sn",")","{","int","so",",","sp",";","vec4","sq",";","vec3","sr",",","ss",",","st",",","su",";","float","sv",",","sw",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sv","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","sr","=","vec3","(","0.0",",","0.0",",","0.0",")",";","ss","=","vec3","(","0.0",",","0.0",",","0.0",")",";","st","=","vec3","(","0.0",",","0.0",",","0.0",")",";","su","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sq","=","a_influence",";","for","(","int","sx","=","0",";","sx","<","4",";","sx","++",")","{","so","=","int","(","sq","[","sx","]",")",";","sw","=","fract","(","sq","[","sx","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sr","+=","sw","*","rU","(","sk",",","u_quatsb","[","so","]",",","u_quatsa","[","so","]",",","u_transb","[","so","]",",","u_transa","[","so","]",",","sv",")",";","ss","+=","sw","*","sc","(","sl",",","u_quatsb","[","so","]",",","u_quatsa","[","so","]",",","sv",")",";","st","+=","sw","*","sc","(","sm",",","u_quatsb","[","so","]",",","u_quatsa","[","so","]",",","sv",")",";","su","+=","sw","*","sc","(","sn",",","u_quatsb","[","so","]",",","u_quatsa","[","so","]",",","sv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sr","+=","sw","*","rU","(","sk",",","u_quatsb","[","so","]",",","u_transb","[","so","]",")",";","su","+=","sw","*","sc","(","sn",",","u_quatsb","[","so","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ss","+=","sw","*","sc","(","sl",",","u_quatsb","[","so","]",")",";","st","+=","sw","*","sc","(","sm",",","u_quatsb","[","so","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","sk","=","sr",";","sn","=","su",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sl","=","ss",";","sm","=","st",";"]}]}}]},{type:"textline",tokens:["}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","sp","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","sp",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sk","=","rU","(","sk",",","u_quatsb","[","sp","]",",","u_quatsa","[","sp","]",",","u_transb","[","sp","]",",","u_transa","[","sp","]",",","sv",")",";","sl","=","sc","(","sl",",","u_quatsb","[","sp","]",",","u_quatsa","[","sp","]",",","sv",")",";","sm","=","sc","(","sm",",","u_quatsb","[","sp","]",",","u_quatsa","[","sp","]",",","sv",")",";","sn","=","sc","(","sn",",","u_quatsb","[","sp","]",",","u_quatsa","[","sp","]",",","sv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sk","=","rU","(","sk",",","u_quatsb","[","sp","]",",","u_transb","[","sp","]",")",";","sn","=","sc","(","sn",",","u_quatsb","[","sp","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sl","=","sc","(","sl",",","u_quatsb","[","sp","]",")",";","sm","=","sc","(","sm",",","u_quatsb","[","sp","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sJ","(","inout","vec3","sz",",","in","vec3","sA",",","in","float","sB",",","in","float","sC",",","in","float","sD",",","in","vec3","sE",",","in","float","sF",")","{","vec3","sG",";","float","sH",",","sI",";","sH","=","length","(","sA",")",";","sI","=","sC","*","(","1.0","+","0.1","*","fract","(","sH",")",")",";","sH","=","sB","*","sF","*","(","1.0","+","sin","(","2.0","*","3.14","*","sD","*","sI","+","sH",")",")",";","sI","=","(","sz",".","y","-","sA",".","y",")","*","abs","(","sH",")",";","sI","+=","1.0",";","sI","*=","sI",";","sI","=","sI","*","sI","-","sI",";","sG","=","sz",";","sG",".","xz","+=","sE",".","xz","*","sI","*","sign","(","sH",")",";","sG","=","sG","-","sA",";","if","(","all","(","equal","(","sG",",","vec3","(","0.0",")",")",")",")","sz","=","sA",";","else","{","sH","=","length","(","sz","-","sA",")",";","sz","=","sA","+","normalize","(","sG",")","*","sH",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sL","(","vec4","sK",")","{","return","sK","*","sK","*","(","3.0","-","2.0","*","sK",")",";","}","vec4","sN","(","vec4","sM",")","{","return","abs","(","fract","(","sM","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sP","(","vec4","sO",")","{","return","sL","(","sN","(","sO",")",")",";","}","void","tf","(","inout","vec3","sQ",",","in","float","sR",",","in","vec3","sS",",","in","vec3","sT",",","in","vec3","sU",",","in","float","sV",",","in","float","sW",",","in","float","sX",",","in","vec3","sY",")","{","vec3","sZ",";","vec4","s_",";","vec2","ta",",","tb",";","float","tc",",","td",",","te",";","tc","=","dot","(","sU",",","vec3","(","1.0",")",")",";","td","=","tc","+","sY",".","g",";","te","=","dot","(","sQ",",","vec3","(","sY",".","g",")",")",";","ta","=","(","sR","+","vec2","(","te",",","td",")",")",";","s_","=","(","(","fract","(","(","ta",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","sT",")","*","sV",";","s_","=","sP","(","s_",")",";","tb","=","s_",".","xz","+","s_",".","yw",";","tb",".","y","=","0.5","-","tb",".","y",";","sZ","=","tb",".","xyx","*","sY",".","rbr","*","vec3","(","sW","*","sS",".","x",",","sX",",","sW","*","sS",".","z",")",";","sQ","+=","sZ",";","}"]}]}}]},{type:"textline",tokens:["void","tm","(","inout","vec3","tg",",","inout","vec3","th",",","in","vec3","ti",")","{","vec3","tj",",","tk",",","tl",";","tj","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tk","=","th",";","tl","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tk","=","tg",";","tl","=","th",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tf","(","tk",",","u_time",",","ti",",","tj",",","tl",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sJ","(","tk",",","tl",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tj",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sJ","(","tk",",","tl",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tj",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tg","+=","tk","-","th",";","th","=","tk",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tg","=","tk",";","th","=","tl",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","ec",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eE",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eE","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eD",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eD","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eF","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"ex",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ex","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"tn",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["tn","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"to",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["to","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"tp",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["tp","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"tq",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["tq","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tr","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","tw","(","vec3","ts",",","float","tt",",","vec2","tu",")","{","vec2","tv",";","tv","=","vec2","(","(","ts",".","x","-","tu",".","x",")","/","tt",",","-","(","ts",".","z","-","tu",".","y",")","/","tt",")",";","return","fract","(","tv",")",";","}","vec2","tA","(","vec2","tx",",","float","ty",",","vec2","tz",")","{","return","vec2","(","tx",".","x","*","ty",",","-","tx",".","y","*","ty",")","+","tz",";","}","aR","tB","(",")","{","return","aR","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","aR","tX","(","vec3","tC",",","vec3","tD",",","vec3","tE",",","vec3","tF",",","vec3","tG",",","PRECISION","sampler2D","tH",",","sampler2D","tI",",","vec3","tJ",",","float","tK",",","vec3","tL",",","vec4","tM",",","mat4","tN",")","{","mat4","tO",";","vec4","tP",";","vec2","tQ",",","tR",",","tS",";","float","tT",",","tU",";","vec3","tV",";","tV","=","aX","(","tM",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","tT","=","-","tV",".","x",";","tU","=","-","tV",".","z",";","tQ","=","vec2","(","tL",".","x","+","tK","*","(","-","1.0","-","tT",")","/","2.0",",","tL",".","z","+","tK","*","(","1.0","-","tU",")","/","2.0",")",";","tR","=","tw","(","tG",",","tK",",","tQ",")",";","tU","=","tK","/","2.0",";","tS","=","abs","(","tA","(","tR","-","vec2","(","0.5",")",",","tK",",","vec2","(","0.0",")",")",")",";","tU","=","tU","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","tS",")",">","tU",")","return","tB","(",")",";","tU","=","tK","/","tJ",".","z",";","tS","=","(","tR","-","vec2","(","0.5",")",")","*","tU","+","vec2","(","0.5",")",";","tV","=","tV","*","(","tK","/","tJ",".","z","-","1.0",")","/","2.0",";","tS",".","x","+=","tV",".","x",";","tS",".","y","-=","tV",".","z",";","tP","=","texture2D","(","tI",",","tS",")",";","tU","=","tP",".","r",";","if","(","tU","<","u_scale_threshold",")","return","tB","(",")",";","tT","=","tJ",".","y","-","tJ",".","x",";","tT","=","tJ",".","y","-","texture2D","(","tH",",","tS",")",".","r","*","tT",";","tS","=","tC",".","xz","-","tG",".","xz",";","tG",".","xz","=","tA","(","tR",",","tK",",","tQ",")",";","tG",".","y","=","tT",";","tC",".","xz","=","tG",".","xz","+","tS",";","tC",".","y","*=","tU",";","tC",".","y","+=","tT",";","tV","=","tP",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tC","-=","tG",";","tO","=","rl","(","tL",",","tG",",","tN",")",";","aR","tW","=","ry","(","tC",",","tG",",","tD",",","tE",",","tF",",","tO",")",";","tW",".","b","=","tG",";","tW",".","f","=","tV",";","return","bs","(","tW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","bs","(","aR","(","tC",",","tG",",","tD",",","tE",",","tF",",","tV",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","uc","(","mat4","tY",",","vec4","tZ",")","{","vec4","t_",";","float","ua",";","vec2","ub",";","ub","=","(","tY","*","u_v_light_matrix","[","3","]",")",".","xy",";","ua","=","SHADOW_TEX_RES","/","2.0",";","ub","=","floor","(","ub","*","ua","+","0.5",")","/","ua","-","ub",";","t_","=","tY","*","tZ",";","t_",".","xy","+=","ub",";","t_","=","u_b_light_matrix","*","t_",";","return","t_",";","}","void","ug","(","vec3","ud",",","vec3","ue",")","{","vec4","uf",";","uf","=","u_v_light_matrix","*","vec4","(","ud","+","u_normal_offset","*","ue",",","1.0",")",";","bF","=","uc","(","u_p_light_matrix0",",","uf",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","uc","(","u_p_light_matrix1",",","uf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","uc","(","u_p_light_matrix2",",","uf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bI","=","uc","(","u_p_light_matrix3",",","uf",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","uq","(","inout","vec3","uk",",","in","float","ul",",","in","float","um",",","in","vec4","un",")","{","float","uo",",","up",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","clamp","(","(","ul","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uo","*=","uo",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","sqrt","(","uo",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","um",">","u_fog_params",".","w",")","uo","=","0.0",";","else","if","(","um",">","0.0",")","{","up","=","(","u_fog_params",".","w","-","um",")","/","u_fog_params",".","w",";","uo","*=","up","*","up",";","}","}","uo","=","1.0","-","(","1.0","-","uo",")","*","(","1.0","-","u_fog_params",".","x",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uo","=","0.0",";"]}]}}]},{type:"textline",tokens:["uk","=","mix","(","uk",",","un",".","rgb",",","uo",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uw","(","in","mat4","ur",",","in","vec3","us",")","{","vec3","ut",",","uu",",","uv",";","ut","=","mix","(","ur","[","0","]",".","rgb",",","ur","[","1","]",".","rgb",",","max","(","sign","(","us",".","x",")",",","0.0",")",")",";","uu","=","mix","(","ur","[","2","]",".","rgb",",","ur","[","3","]",".","rgb",",","max","(","sign","(","us",".","z",")",",","0.0",")",")",";","uv","=","vec3","(","ur","[","0","]",".","a",",","ur","[","1","]",".","a",",","ur","[","2","]",".","a",")",";","uu","=","mix","(","ut",",","uu",",","abs","(","us",".","z",")",")",";","uu","=","mix","(","uu",",","uv",",","abs","(","us",".","y",")",")",";","aE","(","uu",")",";","return","uu",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uy","(","inout","float","ux",")","{","ux","-=","0.5",";","ux","=","4.0","*","(","ux","*","ux","*","ux",")","+","0.5",";","}","void","uL","(","inout","vec3","uz",",","in","float","uA",",","in","vec3","uB",",","in","float","uC",",","in","vec4","uD",",","in","vec4","uE",",","in","float","uF",")","{","vec3","uG",",","uH",";","float","uI",",","uJ",",","uK",";","uI","=","uE",".","w","*","uA",";","uI","=","exp","(","-","uI","*","uI",")",";","uI","=","clamp","(","uI",",","0.0",",","1.0",")",";","uJ","=","max","(","uB",".","y",",","0.0",")",";","uA","=","max","(","uA","-","max","(","uC","/","uJ",",","0.0",")",",","0.0",")",";","uK","=","uD",".","w","*","uA",";","uK","=","1.0","-","uK",";","uK","=","max","(","uK",",","0.0",")",";","uy","(","uK",")",";","uK","+=","max","(","uF","-","0.5",",","0.0",")",";","if","(","uK","<","uI",")","{","uG","=","vec3","(","0.0",",","0.02",",","0.05",")",";","uH","=","uD",".","rgb",";","uC","=","clamp","(","-","uC","*","0.03",",","0.0",",","0.8",")",";","uG","=","mix","(","uH",",","uG",",","min","(","uJ",",","1.0",")",")",";","uG","=","mix","(","uG",",","vec3","(","0.0",")",",","uC",")",";","uz","=","mix","(","uG",",","uz",",","uK",")",";","}","if","(","uK",">=","uI",")","{","uz","=","mix","(","uE",".","rgb",",","uz",",","uI",")",";","}","}","void","uR","(","inout","vec3","uM",",","in","float","uN",",","in","float","uO",")","{","vec3","uP",";","float","uQ",";","uQ","=","u_underwater_fog_color_density",".","w","*","uN",";","uQ","=","1.0","-","uQ",";","uQ","=","clamp","(","uQ",",","0.0",",","1.0",")",";","uy","(","uQ",")",";","uO","=","clamp","(","-","uO","*","0.03",",","0.0",",","0.8",")",";","uP","=","mix","(","u_underwater_fog_color_density",".","rgb",",","vec3","(","0.0",")",",","uO",")",";","uM","=","mix","(","uP",",","uM",",","uQ",")",";","}"]}]}}]},{type:"textline",tokens:["void","uY","(","inout","vec3","uS",",","float","uT",",","vec3","uU",",","float","uV",")","{","vec4","uW",";","vec3","uX",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uX","=","uw","(","u_cube_fog",",","uU",")",";","uW","=","vec4","(","uX",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uW","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uL","(","uS",",","uT",",","uU",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uW",",","uV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uq","(","uS",",","uT",",","bz",".","y",",","uW",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","va","=","0.5",";","vec3","vb","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"vz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vC",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vD",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vE",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vF",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vG",qualifier:["float"],is_optional:true},{type:"node_out",name:"vH",qualifier:["float"],is_optional:true},{type:"node_out",name:"vI",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["vz","=","vc",";","vA","=","vd",";","vB","=","ve",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vC"],statements:[{type:"textline",tokens:["vC","=","vf",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vD"],statements:[{type:"textline",tokens:["vD","=","vh",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vF"],statements:[{type:"textline",tokens:["vF","=","vj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vE"],statements:[{type:"textline",tokens:["vE","=","vk",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vG"],statements:[{type:"textline",tokens:["vG","=","vl",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vH"],statements:[{type:"textline",tokens:["vH","=","vm",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vI"],statements:[{type:"textline",tokens:["vI","=","vn",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"vJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vM",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"vN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vM","=","vec4","(","vJ","+","vL","*","vK",",","ZERO_VALUE_NODES",")",";","vN","=","vb",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"vO",qualifier:["float"],is_optional:false},{type:"node_out",name:"vP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vQ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"vR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vS",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1},"NUM_LIGHTS",0,{type:"g_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["vQ","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vS","=","va",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vS","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["vR","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","vR","*=","vO",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["vx","=","u_light_positions","[","LAMP_IND","]",";","vP","=","vx","-","vg",";"]},{type:"textline",tokens:["vq","=","length","(","vP",")",";","vR","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","vq","*","vq",")",";","vP","=","normalize","(","vP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vx","=","u_light_directions","[","LAMP_IND","]",";","vq","=","dot","(","vP",",","vx",")",";","vq","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","vq","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","vR","*=","vq",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["vP","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"vT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vU",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"vV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vW",qualifier:["float"],is_optional:false},{type:"node_in",name:"vX",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"vY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["vY","=","ZERO_VALUE_NODES",";","if","(","vU",".","r","!=","ZERO_VALUE_NODES",")","{","vq","=","(","UNITY_VALUE_NODES","-","vW",")","*","dot","(","vV",",","vT",")","+","vW",";","if","(","vX","[","0","]","==","ZERO_VALUE_NODES",")","{","vY","=","UNITY_VALUE_NODES",";","}","else","{","vq","=","UNITY_VALUE_NODES","+","abs","(","vq",")",";","vq","=","vX","[","1","]","+","(","UNITY_VALUE_NODES","-","vX","[","1","]",")","*","pow","(","vq",",","vX","[","0","]",")",";","vY","=","clamp","(","vq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","vY","=","max","(","vY",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"vZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"v_",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wb",qualifier:["float"],is_optional:false},{type:"node_out",name:"wc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wc","=","ZERO_VALUE_NODES",";","if","(","v_",".","r","!=","ZERO_VALUE_NODES",")","{","vq","=","(","UNITY_VALUE_NODES","-","wb",")","*","dot","(","wa",",","vZ",")","+","wb",";","wc","=","max","(","vq",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"we",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wg",qualifier:["float"],is_optional:false},{type:"node_in",name:"wh",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wi",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wi","=","ZERO_VALUE_NODES",";","if","(","we",".","r","!=","ZERO_VALUE_NODES",")","{","vq","=","(","UNITY_VALUE_NODES","-","wg",")","*","dot","(","wf",",","wd",")","+","wg",";","if","(","wh","[","0","]",">","ZERO_VALUE_NODES",")","{","vr","=","max","(","dot","(","wf",",","vi",")",",","ZERO_VALUE_NODES",")",";","vs","=","wh","[","0","]","*","wh","[","0","]",";","vt","=","UNITY_VALUE_NODES","-","va","*","(","vs","/","(","vs","+","0.33",")",")",";","vx","=","wd","-","vq","*","wf",";","vy","=","vi","-","vr","*","wf",";"]},{type:"textline",tokens:["if","(","length","(","vx",")","==","ZERO_VALUE_NODES","||","length","(","vy",")","==","ZERO_VALUE_NODES","||","abs","(","vq",")",">","UNITY_VALUE_NODES","||","abs","(","vr",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["wi","=","vq","*","vt",";","else","{","vu","=","acos","(","vq",")",";","vr","=","acos","(","vr",")",";","vx","=","normalize","(","vx",")",";","vy","=","normalize","(","vy",")",";","vv","=","max","(","vu",",","vr",")",";","vw","=","min","(","vu",",","vr",")",";","vw","*=","0.95",";","vr","=","max","(","dot","(","vx",",","vy",")",",","ZERO_VALUE_NODES",")",";","vs","=","0.45","*","(","vs","/","(","vs","+","0.09",")",")",";","wi","=","vq","*","(","vt","+","(","vs","*","vr","*","sin","(","vv",")","*","tan","(","vw",")",")",")",";","}","}","else","wi","=","vq",";","wi","=","max","(","wi",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wk",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wm",qualifier:["float"],is_optional:false},{type:"node_in",name:"wn",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wo","=","ZERO_VALUE_NODES",";","if","(","wk",".","r","!=","ZERO_VALUE_NODES",")","{","vq","=","(","UNITY_VALUE_NODES","-","wm",")","*","dot","(","wl",",","wj",")","+","wm",";","vw","=","max","(","dot","(","wl",",","vi",")",",","ZERO_VALUE_NODES",")",";","if","(","wn","[","0","]","<=","UNITY_VALUE_NODES",")","wo","=","vq","*","pow","(","max","(","vw","*","vq",",","0.1",")",",","wn","[","0","]","-","UNITY_VALUE_NODES",")",";","else","wo","=","vq","*","pow","(","1.0001","-","vw",",","wn","[","0","]","-","UNITY_VALUE_NODES",")",";","wo","=","max","(","wo",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"wp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wq",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ws",qualifier:["float"],is_optional:false},{type:"node_in",name:"wt",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wu","=","ZERO_VALUE_NODES",";","if","(","wq",".","r","!=","ZERO_VALUE_NODES",")","{","vw","=","(","UNITY_VALUE_NODES","-","ws",")","*","dot","(","wr",",","wp",")","+","ws",";","vw","=","acos","(","vw",")",";","if","(","vw","<","wt","[","0","]",")","wu","=","UNITY_VALUE_NODES",";","else","if","(","vw",">","(","wt","[","0","]","+","wt","[","1","]",")","||","wt","[","1","]","==","ZERO_VALUE_NODES",")","wu","=","ZERO_VALUE_NODES",";","else","wu","=","UNITY_VALUE_NODES","-","(","(","vw","-","wt","[","0","]",")","/","wt","[","1","]",")",";","wu","=","max","(","wu",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"wv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ww",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wy",qualifier:["float"],is_optional:false},{type:"node_in",name:"wz",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wA","=","ZERO_VALUE_NODES",";","if","(","ww",".","g","!=","ZERO_VALUE_NODES",")","{","vy","=","normalize","(","wv","+","vi",")",";","wA","=","(","UNITY_VALUE_NODES","-","wy",")","*","max","(","dot","(","wx",",","vy",")",",","ZERO_VALUE_NODES",")","+","wy",";","wA","=","pow","(","wA",",","wz","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"wB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wC",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wE",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wF","=","ZERO_VALUE_NODES",";","if","(","wC",".","g","!=","ZERO_VALUE_NODES",")","{","vy","=","normalize","(","wB","+","vi",")",";","vw","=","max","(","dot","(","wD",",","vy",")",",","0.001",")",";"]},{type:"textline",tokens:["vq","=","max","(","dot","(","wD",",","vi",")",",","0.01",")",";","vv","=","max","(","dot","(","wD",",","wB",")",",","0.01",")",";","vw","=","tan","(","acos","(","vw",")",")",";","vr","=","max","(","wE","[","0","]",",","0.001",")",";","wF","=","vv","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","vr","*","vr",")",")","*","(","exp","(","-","(","vw","*","vw",")","/","(","vr","*","vr",")",")","/","(","sqrt","(","vq","*","vv",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"wG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wH",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wJ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wK","=","ZERO_VALUE_NODES",";","if","(","wH",".","g","!=","ZERO_VALUE_NODES",")","{","vy","=","normalize","(","wG","+","vi",")",";","vv","=","acos","(","dot","(","vy",",","wI",")",")",";","if","(","vv","<","wJ","[","0","]",")","wK","=","UNITY_VALUE_NODES",";","else","if","(","vv",">=","wJ","[","0","]","+","wJ","[","1","]","||","wJ","[","1","]","==","ZERO_VALUE_NODES",")","wK","=","ZERO_VALUE_NODES",";","else","wK","=","UNITY_VALUE_NODES","-","(","vv","-","wJ","[","0","]",")","/","wJ","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"wL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wM",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wO",qualifier:["float"],is_optional:false},{type:"node_in",name:"wP",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wQ","=","ZERO_VALUE_NODES",";","if","(","wM",".","g","!=","ZERO_VALUE_NODES",")","{","if","(","wP","[","0","]","<","1.0","||","wP","[","1","]","==","ZERO_VALUE_NODES",")","wQ","=","ZERO_VALUE_NODES",";","else","{","if","(","wP","[","1","]","<","100.0",")","wP","[","1","]","=","sqrt","(","1.0","/","wP","[","1","]",")",";","else","wP","[","1","]","=","10.0","/","wP","[","1","]",";","vy","=","normalize","(","vi","+","wL",")",";","vv","=","(","UNITY_VALUE_NODES","-","wO",")","*","max","(","dot","(","wN",",","vy",")",",","ZERO_VALUE_NODES",")","+","wO",";","if","(","vv","<","ZERO_VALUE_NODES",")","wQ","=","ZERO_VALUE_NODES",";","else","{","vq","=","max","(","dot","(","wN",",","vi",")",",","0.01",")",";","vr","=","dot","(","wN",",","wL",")",";","if","(","vr","<=","0.01",")","wQ","=","ZERO_VALUE_NODES",";","else","{","vw","=","max","(","dot","(","vi",",","vy",")",",","0.01",")",";","vs","=","UNITY_VALUE_NODES",";","vq","=","(","2.0","*","vv","*","vq",")","/","vw",";","vr","=","(","2.0","*","vv","*","vr",")","/","vw",";","vr","=","min","(","min","(","vs",",","vq",")",",","vr",")",";","vq","=","sqrt","(","pow","(","wP","[","0","]",",","2.0",")","+","pow","(","vw",",","2.0",")","-","UNITY_VALUE_NODES",")",";","vw","=","pow","(","vq","-","vw",",","2.0",")","/","pow","(","vq","+","vw",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","vw","*","(","vq","+","vw",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","vw","*","(","vq","-","vw",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","vv","=","acos","(","vv",")",";","wQ","=","max","(","vw","*","vr","*","exp","(","-","pow","(","vv",",","2.0",")","/","(","2.0","*","pow","(","wP","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"wR",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"wS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wT",qualifier:["float"],is_optional:false},{type:"node_in",name:"wU",qualifier:["float"],is_optional:false},{type:"node_in",name:"wV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wX",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"wY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"w_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xa",qualifier:["float"],is_optional:false},{type:"node_out",name:"xb",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xc","=","wS","+","w_","*","wZ","*","wU",";","xb","=","wR","+","vec4","(","w_","*","wY","*","wT",",","wU",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xd",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xe",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vo","=","xd",".","rgb",";","vp","=","xe",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xf","(","vec3","vc",",","vec3","vd",",","vec3","ve",",","vec3","vf",",","vec3","vg",",","vec3","vh",",","vec3","vi",",","vec2","vj",",","vec2","vk",",","float","vl",",","float","vm",",","vec4","vn",",","out","vec3","vo",",","out","vec3","vp",")","{","float","vq",",","vr",",","vs",",","vt",",","vu",",","vv",",","vw",";","vec3","vx",",","vy",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","xi","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xo","(","inout","float","xj",",","float","xk",",","vec2","xl",",","vec2","xm",")","{","float","xn",";","xn","=","xm",".","x","-","xl",".","x",";","xn","=","(","xk","-","xl",".","x",")","/","xn",";","xj","=","mix","(","xj",",","xm",".","y",",","clamp","(","xn",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xu","(","inout","vec3","xp",",","float","xq",",","vec4","xr",",","vec4","xs",")","{","float","xt",";","xt","=","xs",".","x","-","xr",".","x",";","xt","=","(","xq","-","xr",".","x",")","/","xt",";","xp","=","mix","(","xp",",","xs",".","yzw",",","clamp","(","xt",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","xA","(","float","xv",",","float","xw",",","vec2","xx","[","SIZE_RAMP_LENGTH","]",")","{","float","xy",",","xz",";","xy","=","xv","/","xw",";","xz","=","xx","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xo","(","xz",",","xy",",","xx","[","0","]",",","xx","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xo","(","xz",",","xy",",","xx","[","1","]",",","xx","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xo","(","xz",",","xy",",","xx","[","2","]",",","xx","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xz",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xG","(","float","xB",",","float","xC",",","vec4","xD","[","COLOR_RAMP_LENGTH","]",")","{","vec3","xE",";","float","xF",";","xF","=","xB","/","xC",";","xE","=","xD","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xu","(","xE",",","xF",",","xD","[","0","]",",","xD","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xu","(","xE",",","xF",",","xD","[","1","]",",","xD","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xu","(","xE",",","xF",",","xD","[","2","]",",","xD","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xE",";","}"]}]}}]},{type:"textline",tokens:["float","xO","(","float","xH",",","float","xI",",","float","xJ",",","float","xK",")","{","float","xL",",","xM",",","xN",";","xL","=","max","(","0.01",",","min","(","xI",",","xJ",")",")",";","xM","=","max","(","0.01",",","min","(","xI",",","xK",")",")",";","xN","=","xI","-","xM",";","xM","=","clamp","(","xH","/","xL",",","0.0",",","1.0",")","-","step","(","xN",",","xH",")","*","(","xH","-","xN",")","/","xM",";","return","xM",";","}","xi","xU","(",")","{","vec3","xP",",","xQ",";","float","xR",",","xS",";","xi","xT",";","if","(","u_p_cyclic","==","1",")","{","xR","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","xR","<","0.0",")","xR","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","xR","=","u_p_time","-","a_p_delay",";","}","if","(","xR","<","0.0","||","xR",">=","a_p_lifetime",")","{","xT",".","a","=","0.0001",";","xT",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","xR","<","0.0","||","xR",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["xP","=","a_position",";","xQ","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xP","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xQ","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["xP","+=","u_p_nfactor","*","xR","*","xQ",";","xP","+=","a_p_vels",".","xyz","*","xR",";","xP",".","y","-=","u_p_gravity","*","xR","*","xR","/","2.0",";","xS","=","max","(","u_p_mass",",","EPSILON",")",";","xP","+=","(","u_p_wind_fac","*","u_wind","/","xS",")","*","xR","*","xR","/","2.0",";","xT",".","b","=","xP",";","xT",".","e","=","a_p_vels",".","w","*","xR",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xT",".","a","=","xA","(","xR",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xT",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xT",".","d","=","xG","(","xR",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xT",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["xT",".","c","=","xO","(","xR",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","xT",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","xW","=","0.0",";","float","xX","=","1.0",";","vec3","xY","=","vec3","(","xW",")",";","vec3","xZ","=","vec3","(","xX",")",";","vec3","yd","(","vec3","x_",")","{","float","ya",",","yb",";","vec4","yc",";","yc","=","vec4","(","xW",",","-","xX","/","3.0",",","2.0","/","3.0",",","-","xX",")",";","yc","=","mix","(","vec4","(","x_",".","bg",",","yc",".","wz",")",",","vec4","(","x_",".","gb",",","yc",".","xy",")",",","step","(","x_",".","b",",","x_",".","g",")",")",";","yc","=","mix","(","vec4","(","yc",".","xyw",",","x_",".","r",")",",","vec4","(","x_",".","r",",","yc",".","yzx",")",",","step","(","yc",".","x",",","x_",".","r",")",")",";","ya","=","yc",".","x","-","min","(","yc",".","w",",","yc",".","y",")",";","yb","=","1.0e-10",";","return","vec3","(","abs","(","yc",".","z","+","(","yc",".","w","-","yc",".","y",")","/","(","6.0","*","ya","+","yb",")",")",",","ya","/","(","yc",".","x","+","yb",")",",","yc",".","x",")",";","}","vec3","yh","(","vec3","ye",")","{","vec3","yf",";","vec4","yg",";","yg","=","vec4","(","xX",",","2.0","/","3.0",",","xX","/","3.0",",","3.0",")",";","yf","=","abs","(","fract","(","vec3","(","ye",".","r",",","ye",".","r",",","ye",".","r",")","+","yg",".","xyz",")","*","6.0","-","yg",".","www",")",";","return","ye",".","b","*","mix","(","yg",".","xxx",",","clamp","(","yf","-","yg",".","xxx",",","xW",",","xX",")",",","ye",".","g",")",";","}","vec3","yl","(","vec3","yi",",","vec3","yj",",","float","yk",")","{","return","mix","(","yi",",","yj",",","yk",")",";","}","vec3","yp","(","vec3","ym",",","vec3","yn",",","float","yo",")","{","return","yo","*","ym","+","yn",";","}","vec3","yt","(","vec3","yq",",","vec3","yr",",","float","ys",")","{","return","yr","-","ys","*","yq",";","}","vec3","yy","(","vec3","yu",",","vec3","yv",",","float","yw",")","{","float","yx",";","yx","=","xX","-","yw",";","return","(","vec3","(","yx",")","+","yw","*","yu",")","*","yv",";","}","vec3","yD","(","vec3","yz",",","vec3","yA",",","float","yB",")","{","vec3","yC",";","yC","=","vec3","(","xX","-","yB",")",";","return","xZ","-","(","yC","+","yB","*","(","xZ","-","yz",")",")","*","(","xZ","-","yA",")",";","}","vec3","yI","(","vec3","yE",",","vec3","yF",",","float","yG",")","{","vec3","yH",";","yH","=","vec3","(","xX","-","yG",")",";","return","mix","(","yF","*","(","yH","+","2.0","*","yG","*","yE",")",",","xZ","-","(","yH","+","2.0","*","yG","*","(","xZ","-","yE",")",")","*","(","xZ","-","yF",")",",","step","(","0.5",",","yF",")",")",";","}","vec3","yM","(","vec3","yJ",",","vec3","yK",",","float","yL",")","{","return","mix","(","yK",",","abs","(","yJ","-","yK",")",",","yL",")",";","}","vec3","yQ","(","vec3","yN",",","vec3","yO",",","float","yP",")","{","return","mix","(","yO",",","yO","/","(","yN","+","step","(","yN",",","xY",")",")",",","yP",")",";","}","vec3","yU","(","vec3","yR",",","vec3","yS",",","float","yT",")","{","return","mix","(","yS",",","min","(","yR",",","yS",")",",","yT",")",";","}","vec3","yY","(","vec3","yV",",","vec3","yW",",","float","yX",")","{","return","max","(","yX","*","yV",",","yW",")",";","}","vec3","zd","(","vec3","yZ",",","vec3","y_",",","float","za",")","{","vec3","zb",",","zc",";","zb","=","yd","(","y_",")",";","if","(","zb",".","y","!=","xW",")","{","zc","=","yd","(","yZ",")",";","zc","=","yh","(","vec3","(","zb",".","x",",","zc",".","yz",")",")",";","return","mix","(","yZ",",","zc",",","za",")",";","}","return","yZ",";","}","vec3","zj","(","vec3","ze",",","vec3","zf",",","float","zg",")","{","vec3","zh",",","zi",";","zh","=","yd","(","ze",")",";","if","(","zh",".","y","!=","xW",")","{","zi","=","yd","(","zf",")",";","return","yh","(","vec3","(","zh",".","x",",","mix","(","zh",".","y",",","zi",".","y",",","zg",")",",","zh",".","z",")",")",";","}","return","ze",";","}","vec3","zp","(","vec3","zk",",","vec3","zl",",","float","zm",")","{","vec3","zn",",","zo",";","zn","=","yd","(","zk",")",";","zo","=","yd","(","zl",")",";","return","yh","(","vec3","(","zn",".","xy",",","mix","(","zn",".","z",",","zo",".","z",",","zm",")",")",")",";","}","vec3","zv","(","vec3","zq",",","vec3","zr",",","float","zs",")","{","vec3","zt",",","zu",";","zt","=","yd","(","zr",")",";","if","(","zt",".","y","!=","xW",")","{","zu","=","yd","(","zq",")",";","zu","=","yh","(","vec3","(","zt",".","xy",",","zu",".","z",")",")",";","return","mix","(","zq",",","zu",",","zs",")",";","}","return","zq",";","}","vec3","zA","(","vec3","zw",",","vec3","zx",",","float","zy",")","{","vec3","zz",";","zz","=","xZ","-","(","xZ","-","zx",")","*","(","xZ","-","zw",")",";","return","mix","(","zw",",","(","(","xZ","-","zw",")","*","zx","*","zw",")","+","zw","*","zz",",","zy",")",";","}","vec3","zE","(","vec3","zB",",","vec3","zC",",","float","zD",")","{","return","zB","+","zD","*","(","2.0","*","zC","-","xX",")",";","}","float","zK","(","float","zF",",","float","zG",",","float","zH",",","float","zI",")","{","float","zJ",";","zJ","=","xX","-","zI",";","return","(","zJ","+","zH","*","zF",")","*","zG",";","}","float","zQ","(","float","zL",",","float","zM",",","float","zN",",","float","zO",")","{","float","zP",";","zP","=","xX","-","zO",";","return","xX","-","(","zP","+","zN","*","(","xX","-","zL",")",")","*","(","xX","-","zM",")",";","}","float","zW","(","float","zR",",","float","zS",",","float","zT",",","float","zU",")","{","float","zV",";","zV","=","xX","-","zU",";","return","mix","(","zS","*","(","zV","+","2.0","*","zT","*","zR",")",",","xX","-","(","zV","+","2.0","*","zT","*","(","xX","-","zR",")",")","*","(","xX","-","zS",")",",","step","(","0.5",",","zS",")",")",";","}"]}]},exports["include/fxaa.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"ifndef",name:"FXAA_PS3",group:{type:"group",parts:[{type:"define",name:"FXAA_PS3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360",group:{type:"group",parts:[{type:"define",name:"FXAA_360",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360_OPT",group:{type:"group",parts:[{type:"define",name:"FXAA_360_OPT",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC",group:{type:"group",parts:[{type:"define",name:"FXAA_PC",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC_CONSOLE",group:{type:"group",parts:[{type:"define",name:"FXAA_PC_CONSOLE",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_120",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_120",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_130",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_130",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_3",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_4",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_4",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_5",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_5",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GREEN_AS_LUMA",group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_EARLY_EXIT",group:{type:"group",parts:[{type:"define",name:"FXAA_EARLY_EXIT",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_DISCARD",group:{type:"group",parts:[{type:"define",name:"FXAA_DISCARD",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"condition",parts:[{type:"ifdef",name:"GL_EXT_gpu_shader4",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FXAA_HLSL_5",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["4.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["2.0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.125"]}]}},{type:"else",group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.25"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_QUALITY_PRESET",group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",10,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",11,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",12,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",13,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",14,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",15,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",20,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",21,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",22,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",23,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",24,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",25,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",26,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["9"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",27,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["10"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",28,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["11"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",29,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",39,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"var",name:"FXAA_QUALITY_P12",tokens:["0.0"]},{type:"textline",tokens:["float","As","(","float","Ar",")","{","return","clamp","(","Ar",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["FXAA_BLEND4WEB",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Av","(","sampler2D","At",",","vec2","Au",")","{","return","texture2D","(","At",",","Au",")",";","}","vec4","AA","(","sampler2D","Aw",",","vec2","Ax",",","vec2","Ay",",","vec2","Az",")","{","return","texture2D","(","Aw",",","Ax","+","(","Ay","*","Az",")",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","Bg","(","vec2","AB",",","sampler2D","AC",",","vec2","AD",",","float","AE",",","float","AF",",","float","AG",")","{","bool","AH",",","AI",",","AJ",",","AK",",","AL",";","float","AM",",","AN",",","AO",",","AP",",","AQ",",","AR",",","AS",",","AT",",","AU",",","AV",",","AW",",","AX",",","AY",",","AZ",",","A_",";","vec4","Ba",";","vec2","Bb",",","Bc",",","Bd",",","Be",",","Bf",";","Bb",".","x","=","AB",".","x",";","Bb",".","y","=","AB",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ba","=","Av","(","AC",",","Bb",")",";","AM","=","aO","(","Ba",")",";","AN","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","0",",","1",")",",","AD",".","xy",")",")",";","AO","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","1",",","0",")",",","AD",".","xy",")",")",";","AP","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","0",",","-","1",")",",","AD",".","xy",")",")",";","AQ","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","-","1",",","0",")",",","AD",".","xy",")",")",";"]}]}}]},{type:"textline",tokens:["AR","=","max","(","AN",",","AM",")",";","AS","=","min","(","AN",",","AM",")",";","AR","=","max","(","AO",",","AR",")",";","AS","=","min","(","AO",",","AS",")",";","AT","=","max","(","AP",",","AQ",")",";","AU","=","min","(","AP",",","AQ",")",";","AR","=","max","(","AT",",","AR",")",";","AS","=","min","(","AU",",","AS",")",";","AU","=","AR","*","AF",";","AS","=","AR","-","AS",";","AU","=","max","(","AG",",","AU",")",";","AH","=","AS","<","AU",";","if","(","AH",")","return","Ba",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","-","1",",","-","1",")",",","AD",".","xy",")",")",";","AR","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","1",",","1",")",",","AD",".","xy",")",")",";","AT","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","1",",","-","1",")",",","AD",".","xy",")",")",";","AV","=","aO","(","AA","(","AC",",","Bb",",","vec2","(","-","1",",","1",")",",","AD",".","xy",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["AW","=","AP","+","AN",";","AX","=","AQ","+","AO",";","AS","=","1.0","/","AS",";","AY","=","AW","+","AX",";","AW","=","(","-","2.0","*","AM",")","+","AW",";","AX","=","(","-","2.0","*","AM",")","+","AX",";","AZ","=","AT","+","AR",";","AT","=","AU","+","AT",";","A_","=","(","-","2.0","*","AO",")","+","AZ",";","AT","=","(","-","2.0","*","AP",")","+","AT",";","AU","=","AU","+","AV",";","AR","=","AV","+","AR",";","A_","=","(","abs","(","AW",")","*","2.0",")","+","abs","(","A_",")",";","AT","=","(","abs","(","AX",")","*","2.0",")","+","abs","(","AT",")",";","AX","=","(","-","2.0","*","AQ",")","+","AU",";","AR","=","(","-","2.0","*","AN",")","+","AR",";","A_","=","abs","(","AX",")","+","A_",";","AT","=","abs","(","AR",")","+","AT",";","AZ","=","AU","+","AZ",";","AU","=","AD",".","x",";","AH","=","A_",">=","AT",";","AZ","=","AY","*","2.0","+","AZ",";","if","(","!","AH",")","AP","=","AQ",";","if","(","!","AH",")","AN","=","AO",";","if","(","AH",")","AU","=","AD",".","y",";","AZ","=","(","AZ","*","(","1.0","/","12.0",")",")","-","AM",";","AO","=","AP","-","AM",";","AQ","=","AN","-","AM",";","AP","=","AP","+","AM",";","AN","=","AN","+","AM",";","AI","=","abs","(","AO",")",">=","abs","(","AQ",")",";","AQ","=","max","(","abs","(","AO",")",",","abs","(","AQ",")",")",";","if","(","AI",")","AU","=","-","AU",";","AS","=","As","(","abs","(","AZ",")","*","AS",")",";","Bc",".","x","=","Bb",".","x",";","Bc",".","y","=","Bb",".","y",";","Bd",".","x","=","(","!","AH",")","?","0.0",":","AD",".","x",";","Bd",".","y","=","(","AH",")","?","0.0",":","AD",".","y",";","if","(","!","AH",")","Bc",".","x","+=","AU","*","0.5",";","if","(","AH",")","Bc",".","y","+=","AU","*","0.5",";","Be",".","x","=","Bc",".","x","-","Bd",".","x","*","FXAA_QUALITY_P0",";","Be",".","y","=","Bc",".","y","-","Bd",".","y","*","FXAA_QUALITY_P0",";","Bf",".","x","=","Bc",".","x","+","Bd",".","x","*","FXAA_QUALITY_P0",";","Bf",".","y","=","Bc",".","y","+","Bd",".","y","*","FXAA_QUALITY_P0",";","AZ","=","(","(","-","2.0",")","*","AS",")","+","3.0",";","AO","=","aO","(","Av","(","AC",",","Be",")",")",";","AS","=","AS","*","AS",";","AY","=","aO","(","Av","(","AC",",","Bf",")",")",";","if","(","!","AI",")","AP","=","AN",";","AQ","=","AQ","*","1.0","/","4.0",";","AN","=","AM","-","AP","*","0.5",";","AS","=","AZ","*","AS",";","AI","=","AN","<","0.0",";","AO","-=","AP","*","0.5",";","AY","-=","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P1",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P1",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P1",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P1",";","if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P2",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P2",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P2",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P2",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P3",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P3",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P3",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P3",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",4,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P4",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P4",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P4",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P4",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",5,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P5",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P5",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P5",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P5",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",6,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P6",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P6",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P6",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P6",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",7,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P7",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P7",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P7",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P7",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",8,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P8",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P8",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P8",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P8",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",9,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P9",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P9",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P9",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P9",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",10,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P10",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P10",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P10",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P10",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",11,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P11",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P11",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P11",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P11",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",12,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AL",")","{","if","(","!","AJ",")","AO","=","aO","(","Av","(","AC",",","Be",".","xy",")",")",";","if","(","!","AK",")","AY","=","aO","(","Av","(","AC",",","Bf",".","xy",")",")",";","if","(","!","AJ",")","AO","=","AO","-","AP","*","0.5",";","if","(","!","AK",")","AY","=","AY","-","AP","*","0.5",";","AJ","=","abs","(","AO",")",">=","AQ",";","AK","=","abs","(","AY",")",">=","AQ",";","if","(","!","AJ",")","Be",".","x","-=","Bd",".","x","*","FXAA_QUALITY_P12",";","if","(","!","AJ",")","Be",".","y","-=","Bd",".","y","*","FXAA_QUALITY_P12",";","AL","=","(","!","AJ",")","||","(","!","AK",")",";","if","(","!","AK",")","Bf",".","x","+=","Bd",".","x","*","FXAA_QUALITY_P12",";","if","(","!","AK",")","Bf",".","y","+=","Bd",".","y","*","FXAA_QUALITY_P12",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}","AQ","=","Bb",".","x","-","Be",".","x",";","AP","=","Bf",".","x","-","Bb",".","x",";","if","(","!","AH",")","AQ","=","Bb",".","y","-","Be",".","y",";","if","(","!","AH",")","AP","=","Bf",".","y","-","Bb",".","y",";","AK","=","(","AO","<","0.0",")","!=","AI",";","AO","=","(","AP","+","AQ",")",";","AI","=","(","AY","<","0.0",")","!=","AI",";","AO","=","1.0","/","AO",";","AJ","=","AQ","<","AP",";","AP","=","min","(","AQ",",","AP",")",";","AI","=","AJ","?","AK",":","AI",";","AS","=","AS","*","AS",";","AO","=","(","AP","*","(","-","AO",")",")","+","0.5",";","AS","=","AS","*","AE",";","AO","=","AI","?","AO",":","0.0",";","AS","=","max","(","AO",",","AS",")",";","if","(","!","AH",")","Bb",".","x","+=","AS","*","AU",";","if","(","AH",")","Bb",".","y","+=","AS","*","AU",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_DISCARD",1,{type:"equal_expr",places:2},"FXAA_BLEND4WEB",1,{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Av","(","AC",",","Bb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","Av","(","AC",",","Bb",")",".","xyz",",","AM",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Bn","(","in","sampler2D","Bh",",","in","vec2","Bi",",","in","vec2","Bj",")","{","float","Bk",",","Bl",",","Bm",";","Bk","=","texture2D","(","Bh",",","Bi",")",".","r",";","Bl","=","Bj",".","x",";","Bm","=","Bj",".","y",";","Bl","=","2.0","*","Bl","/","(","Bl","+","Bm","-","(","2.0","*","Bk","-","1.0",")","*","(","Bm","-","Bl",")",")",";","return","Bl",";","}"]}]}}