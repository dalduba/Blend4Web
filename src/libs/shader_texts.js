/**
 * Copyright (C) 2014-2015 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","gl_Position","=","u_view_proj_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";","varying","vec4","bI",";","varying","vec4","bJ",";","varying","vec4","bK",";","varying","vec4","bL",";","uniform","float","u_perspective_cast_far_bound",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","qN",";","float","qO",",","qP",";","vec3","qQ",",","qR",",","qS",",","qT",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["qQ","=","u_camera_eye_frag","-","bC",";","qQ","=","normalize","(","qQ",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qN","=","O","(","u_view_tsr_frag",")",";","qM","(","qQ",",","qN",",","qR",",","qS",",","qT",",","qO",",","qP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","qQ",",","mat4","(","0.0",")",",","qR",",","qS",",","qT",",","qO",",","qP",")",";"]}]}}]},{type:"textline",tokens:["qP","=","qP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qP","=","(","texture2D","(","u_sampler",",","bM",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qP","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","qP","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tv",";","float","tw",",","tx",",","ty",";","vec3","tz",",","tA",",","tB",",","tC",",","tD",",","tE",";","mat4","tF",",","tG",",","tH",";","tF","=","O","(","u_view_tsr",")",";","tz","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","a_tangent",")",";","tC","=","a_tangent","[","3","]","*","cross","(","tA",",","tB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";","tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","mix","(","tz",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","mix","(","tA",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","vec3","(","a_tangent",")",";","tE","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tD",")",";","tB","=","mix","(","tB",",","tD",",","u_va_frame_factor",")",";","tC","=","mix","(","tC",",","tE",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","tz",",","tB",",","tC",",","tA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tG","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","(","tG","*","vec4","(","tC",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ru","(","u_camera_eye",",","tB",",","tF",",","tG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ro","(","u_camera_eye",",","tB",",","tF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","tH","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tB",")",";"]}]}}]},{type:"textline",tokens:["c","tI","=","rB","(","tz","-","tC",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tH",")",";","tI",".","b","=","tB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tI","=","rB","(","tz",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","tI",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","tI",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","(","dot","(","cross","(","tI",".","e",",","tI",".","c",")",",","tI",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","tI",".","c",",","tw",")",";"]}]}}]},{type:"textline",tokens:["bD","=","tF","*","vec4","(","tI",".","a",",","1.0",")",";","tv","=","u_proj_matrix","*","bD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["tv",".","xy","+=","u_subpixel_jitter","*","tv",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","tv",".","x",";","tx","=","tv",".","y",";","ty","=","tv",".","w",";","bG",".","x","=","(","tw","+","ty",")","/","2.0",";","bG",".","y","=","(","tx","+","ty",")","/","2.0",";","bG",".","z","=","ty",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","tF","*","vec4","(","tI",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","tv",";","float","tw",",","tx",";","vec3","ty",",","tz",",","tA",",","tB",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["ty","=","u_camera_eye_frag","-","bC",";","ty","=","normalize","(","ty",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tv","=","O","(","u_view_tsr_frag",")",";","qM","(","ty",",","tv",",","tz",",","tA",",","tB",",","tw",",","tx",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","ty",",","mat4","(","0.0",")",",","tz",",","tA",",","tB",",","tw",",","tx",")",";"]}]}}]},{type:"textline",tokens:["tx","=","tx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tx","=","(","texture2D","(","u_colormap0",",","bM",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tx","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","tx","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","dp","(","bD",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","+=","0.00001","*","bF",".","r",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat3","u_v_light_tsr",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","um",";","vec4","un",",","uo",";","float","up",";","vec3","uq",",","ur",",","us",",","ut",",","uu",",","uv",";","mat4","uw",",","ux",",","uy",",","uz",";","uw","=","O","(","u_view_tsr",")",";","uq","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ur","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["us","=","vec3","(","a_tangent",")",";","ut","=","a_tangent","[","3","]","*","cross","(","ur",",","us",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["us","=","vec3","(","0.0",")",";","ut","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uq","=","mix","(","uq",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","mix","(","ur",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uu","=","vec3","(","a_tangent",")",";","uv","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","uu",")",";","us","=","mix","(","us",",","uu",",","u_va_frame_factor",")",";","ut","=","mix","(","ut",",","uv",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","uq",",","us",",","ut",",","ur",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","uA","=","t_","(","uq",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",",","ut",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","uw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ux","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["us","=","(","ux","*","vec4","(","ut",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uy","=","O","(","u_shadow_cast_billboard_view_tsr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uy","=","uw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uz","=","ru","(","u_camera_eye",",","us",",","uy",",","ux",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uz","=","ro","(","u_camera_eye",",","us",",","uy",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uz","=","uz","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","us",")",";"]}]}}]},{type:"textline",tokens:["c","uA","=","rB","(","uq","-","ut",",","ut",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",",","uz",")",";","uA",".","b","=","us",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","uA","=","rB","(","uq",",","ut",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",",","ux",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ur","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","uA",".","a",",","uA",".","b",",","ur",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","uA",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","uA",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["up","=","(","dot","(","cross","(","uA",".","e",",","uA",".","c",")",",","uA",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","uA",".","c",",","up",")",";"]}]}}]}]}}]},{type:"textline",tokens:["un","=","uw","*","vec4","(","uA",".","a",",","1.0",")",";","uo","=","u_proj_matrix","*","un",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uo",".","xy","+=","u_subpixel_jitter","*","uo",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","uo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","uA",".","a",",","uA",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","un",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","=","(","u_proj_matrix","*","uw","[","3","]",")",".","xy",";","up","=","SHADOW_TEX_RES","/","2.0",";","um","=","floor","(","um","*","up","+","0.5",")","/","up","-","um",";","uo",".","xy","+=","um",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uo",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","um",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","um",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","um",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","um",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","um",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","um",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","un",";","vec3","uo",";","mat4","up",",","uq",",","ur",";","up","=","O","(","u_view_tsr",")",";","uq","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","(","uq","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","ur","=","ro","(","u_camera_eye",",","uo",",","up",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","ur","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","us","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ur",")",";","us",".","b","=","uo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","us","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uq",")",";"]}]}}]},{type:"textline",tokens:["un","=","u_proj_matrix","*","up","*","vec4","(","us",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","un",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","un",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","float","uo",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","up","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","up","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","ur","(","float","uq",")","{","return","uq","-","floor","(","uq","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uA","(","inout","float","us",",","in","float","ut","[","up","]",",","in","float","uu",")","{","float","uv",",","uw",",","ux",",","uy",";","for","(","int","uz","=","0",";","uz","<","NUM_RINGS",";","uz","++",")","{","uv","=","40.0","*","ut","[","uz","]",";","uw","=","300.0","*","(","ur","(","uv",")","-","0.005",")",";","ux","=","uv",";","uy","=","abs","(","ux","*","(","u_halo_size","*","uw","-","uu",")",")",";","us","+=","1.0","-","min","(","uy",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","uJ","(","inout","float","uB",",","in","float","uC","[","up","]",",","in","float","uD",")","{","float","uE",",","uF",",","uG",",","uH",";","for","(","int","uI","=","0",";","uI","<","NUM_LINES",";","uI","++",")","{","uE","=","uC","[","uI","]",";","uF","=","uE",";","uG","=","1000.0","*","(","ur","(","uE",")","-","0.005",")",";","uH","=","20.0","*","abs","(","uF","*","bM",".","x","+","uG","*","bM",".","y",")",";","uB","+=","1.0","-","min","(","uH",",","1.0",")",";","}","uB","*=","uD",";","}"]}]}}]},{type:"textline",tokens:["void","uQ","(","inout","float","uK",",","in","vec2","uL",")","{","float","uM",",","uN",",","uO",",","uP",";","uN","=","atan","(","uL",".","y",",","uL",".","x",")",";","uN","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","uO","=","cos","(","uN",")",";","uP","=","sin","(","uN",")",";","uN","=","(","uO","*","uL",".","x","+","uP","*","uL",".","y",")","*","(","uO","*","uL",".","y","-","uP","*","uL",".","x",")",";","uM","=","abs","(","uN",")",";","if","(","uM","<","1.0",")","{","uM","=","(","0.01","*","u_halo_size",")","/","(","uM",")",";","uK","*=","sqrt","(","min","(","uM",",","1.0",")",")",";","}","}","void","main","(",")","{","vec3","uR",";","float","uS",",","uT",",","uU",",","uV",";","uS","=","(","bM",".","x","*","bM",".","x","+","bM",".","y","*","bM",".","y",")",";","uT","=","sqrt","(","uS",")",";","uS","=","max","(","1.0","-","uS",",","0.0",")",";","uS","=","pow","(","uS",",","u_halo_hardness",")",";","uU","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","uW","[","up","]",";","for","(","int","uX","=","0",";","uX","<","up",";","uX","++",")","{","uW","[","uX","]","=","fract","(","uo","/","(","float","(","uX",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uV","=","0.0",";","uA","(","uV",",","uW",",","uT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uT","=","0.0",";","uJ","(","uT",",","uW",",","uS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","(","uS",",","bM",")",";"]}]}}]},{type:"textline",tokens:["uS","*=","uU",";","uR","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uV","*=","uS",";","uR","+=","u_halo_rings_color","*","uV",";","uS","+=","uV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uT","*=","uU",";","uR","+=","u_halo_lines_color","*","uT",";","uS","+=","uT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uS","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uT","=","u_halo_stars_blend","*","(","un",".","y","-","u_halo_stars_height",")",";","uS","*=","clamp","(","uT",",","0.0",",","1.0",")",";","uS","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","uR",")",";","bx","(","uR",",","uS",")",";","gl_FragColor","=","vec4","(","uR",",","uS",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bM",";","varying","float","uo",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","un",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","up",",","uq",";","vec3","ur",";","mat4","us",",","ut",",","uu",";","us","=","O","(","u_view_tsr",")",";","ut","=","O","(","u_model_tsr",")",";","ur","=","(","ut","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bM","=","a_halo_bb_vertex","*","2.0",";","uo","=","fract","(","ur",".","x","+","ur",".","y","+","ur",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","qT","(","ur",",","us",")",";","uu","=","us",";","uu","[","3","]","[","0","]","=","0.0",";","uu","[","3","]","[","1","]","=","0.0",";","uu","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","qT","(","ur",",","us",")",";"]}]}}]},{type:"textline",tokens:["up","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","up","=","ut","*","up",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_proj_matrix","*","uu","*","up",";","uq",".","z","=","0.99999","*","uq",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["un","=","up",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_proj_matrix","*","us","*","up",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uq",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","vec3","up",";","up","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_view_proj_matrix","*","vec4","(","up",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"textline",tokens:["varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","vd",";","mat4","ve",";","vec3","vf",",","vg",",","vh",",","vi",",","vj",";","float","vk",",","vl",",","vm",",","vn",";","vk","=","length","(","bD",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vl","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vf","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["vg","=","normalize","(","u_camera_eye_frag","-","bC",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","O","(","u_view_tsr_frag",")",";","qM","(","vg",",","ve",",","vh",",","vi",",","vj",",","vm",",","vn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","vg",",","mat4","(","0.0",")",",","vh",",","vi",",","vj",",","vm",",","vn",")",";"]}]}}]},{type:"textline",tokens:["vh","=","vh",";","vn","=","vn",";","vj","=","vj",";","vm","=","vm",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["vh","=","max","(","vh","-","sqrt","(","0.01","*","-","min","(","vl",",","0.0",")",")",",","0.5","*","vh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","vh",",","vl",",","u_time",",","vm",",","vj",",","u_sun_direction",",","vf",",","u_sun_quaternion",",","bC",",","vk",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","vn","<","0.5",")","discard",";","vn","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vn","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vc","(","vh",",","length","(","bD",")",",","vg",",","vl",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vc","(","vh",",","length","(","bD",")",",","vg",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vd","=","texture2DProj","(","u_shadow_mask",",","bG",")",".","rg",";","vl","=","vd",".","g",";","vh","=","vec3","(","vl",")",";"]}]}}]},{type:"textline",tokens:["bu","(","vh",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},"NODES_GLOW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","vh",",","vn",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","vh",",","vn",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat3","u_v_light_tsr",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vd",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ve",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vf",",","vg",";","float","vh",";","vec3","vi",",","vj",",","vk",",","vl",",","vm",",","vn",",","vo",";","mat4","vp",",","vq",",","vr",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vp","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vp","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["vq","=","O","(","u_model_tsr",")",";","vi","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vj","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vj","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","vec3","(","a_tangent",")",";","vl","=","a_tangent","[","3","]","*","cross","(","vj",",","vk",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vm","=","(","vq","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vn","=","normalize","(","(","vq","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vm","=","vm","-","u_camera_eye",";","vl","=","cross","(","vm",",","vn",")",";","vk","=","cross","(","vn",",","vl",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vk","=","vec3","(","0.0",")",";","vl","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vi","=","mix","(","vi",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vj","=","mix","(","vj",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vn","=","vec3","(","a_tangent",")",";","vm","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vn",")",";","vk","=","mix","(","vk",",","vn",",","u_va_frame_factor",")",";","vl","=","mix","(","vl",",","vm",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","vi",",","vk",",","vl",",","vj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vm","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","vs","=","t_","(","vi",",","vk",",","vl",",","vj",",","vm",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","vp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vn","=","(","vq","*","vec4","(","vm",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vr","=","ru","(","u_camera_eye",",","vn",",","vp",",","vq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vr","=","ro","(","u_camera_eye",",","vn",",","vp",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vo","=","(","vq","*","vec4","(","vm",",","1.0",")",")",".","xyz",";","vr","=","vr","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vo",")",";"]}]}}]},{type:"textline",tokens:["c","vs","=","rB","(","vi","-","vm",",","vm",",","vk",",","vl",",","vj",",","vr",")",";","vs",".","b","=","vn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","vs","=","rB","(","vi",",","vm",",","vk",",","vl",",","vj",",","vq",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vh","=","(","dot","(","cross","(","vs",".","e",",","vs",".","c",")",",","vs",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","vs",".","c",",","vh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","vs",".","a",",","vs",".","b",",","vj",")",";"]}]}}]},{type:"textline",tokens:["bC","=","vs",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","vs",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vd","=","u_camera_eye","-","vs",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","vs",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vf","=","vp","*","vec4","(","vs",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","vf",";"]}]}}]},{type:"textline",tokens:["vg","=","u_proj_matrix","*","vf",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vg",".","xy","+=","u_subpixel_jitter","*","vg",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","vg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","vs",".","a",",","vs",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","vf",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vg",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vd",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ve",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xk",",","xl",",","xm",",","xn",";","mat4","xo",";","mat3","xp",";","vec2","xq",",","xr",",","xs",",","xt",";","vec3","xu",",","xv",",","xw",",","xx",",","xy",",","xz",",","xA",",","xB",",","xC",";","float","xD",",","xE",",","xF",",","xG",",","xH",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xD","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["xE","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xu","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xq","=","bM",";"]}]}}]},{type:"textline",tokens:["xv","=","normalize","(","bE",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["xv","=","xv",";","else","xv","=","-","xv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","cross","(","xv",",","bF",".","xyz",")","*","bF",".","w",";","xp","=","mat3","(","bF",".","xyz",",","xw",",","xv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","O","(","u_view_tsr_frag",")",";","xr","=","normalize","(","xo","*","vec4","(","bE",",","0.0",")",")",".","st",";","xr","=","xr","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xD","<","PARALLAX_LOD_DIST",")","{","xF","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","xD",")",",","0.0",",","1.0",")",";","xF","=","u_parallax_scale","*","xF",";","xw","=","normalize","(","vd","*","xp",")",";","xG","=","1.0","/","PARALLAX_STEPS",";","xs","=","xw",".","xy","*","xF","/","(","PARALLAX_STEPS","*","xw",".","z",")",";","xF","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","xr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xt","=","xq",";"]}]}}]},{type:"textline",tokens:["xH","=","texture2D","(","u_normalmap0",",","xt",")",".","a",";","for","(","float","xI","=","1.0",";","xI","<=","PARALLAX_STEPS",";","xI","++",")","{","if","(","xH","<","xF",")","{","xF","-=","xG",";","xt","-=","xs",";","xH","=","texture2D","(","u_normalmap0",",","xt",")",".","a",";","}","}","xs","=","xt","+","xs",";","xG","=","texture2D","(","u_normalmap0",",","xs",")",".","a","-","(","xF","+","xG",")",";","xF","=","xH","-","xF",";","xG","=","xF","/","(","xF","-","xG",")",";","xt","=","xG","*","xs","+","(","1.0","-","xG",")","*","xt",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xq","+=","xt","-","xr",";"]}]}}]},{type:"textline",tokens:["xr","=","xt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xr","+=","xt","-","xq",";"]}]}}]},{type:"textline",tokens:["xq","=","xt",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xk","=","texture2D","(","u_normalmap0",",","xr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xk","=","texture2D","(","u_normalmap0",",","xq",")",";"]}]}}]},{type:"textline",tokens:["xw","=","xk",".","rgb","-","0.5",";","xw","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","xw",",","u_normal_factor",")",";","xw","=","xp","*","xw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xw","=","xv",";"]}]}}]},{type:"textline",tokens:["xw","=","normalize","(","xw",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xr","=","normalize","(","xo","*","vec4","(","xw",",","0.0",")",")",".","st",";","xr","=","xr","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["xv","=","normalize","(","vd",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xx","=","ve",";","br","(","xx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xk","=","vec4","(","xx",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xk","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["xG","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xl","=","texture2D","(","u_colormap0",",","xr",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xl","=","texture2D","(","u_colormap0",",","xq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["br","(","xl",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","texture2D","(","u_colormap1",",","xr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xm","=","texture2D","(","u_colormap1",",","xq",")",";"]}]}}]},{type:"textline",tokens:["br","(","xm",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xn","=","texture2D","(","u_stencil0",",","xr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xn","=","texture2D","(","u_stencil0",",","xq",")",";"]}]}}]},{type:"textline",tokens:["xl","=","mix","(","xl",",","xm",",","xn",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xk",".","rgb","=","mix","(","xk",".","rgb",",","xl",".","rgb",",","u_diffuse_color_factor",")",";","xF","=","u_alpha_factor","*","xl",".","a",";","xF","+=","(","1.0","-","step","(","0.0",",","xF",")",")",";","xk",".","a","=","mix","(","xF",",","1.0",",","u_diffuse_color",".","a",")",";","xG","=","xl",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xk",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xl",".","rgb",",","u_diffuse_color_factor",")",";","xk",".","a","=","xl",".","a",";","xG","=","xl",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["xx","=","u_diffuse_intensity","*","xk",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["xy","=","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xz","=","u_environment_energy","*","dS","(","xw",")",";","xz","=","u_ambient","*","xz",";","xF","=","du","(","xx",")",";","xA","=","u_emit","*","xk",".","rgb",";","xB","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["xC","=","vec3","(","xG",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xC","=","texture2D","(","u_specmap0",",","xr",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xC","=","texture2D","(","u_specmap0",",","xq",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["br","(","xC",".","rgb",")",";","xB","=","mix","(","xB",",","xC",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["xG","=","u_specular_params","[","0","]",";","xq","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","xB","=","xG","*","xB",";","xj","(","xA",",","xz",",","xx",",","xB",",","bC",",","xw",",","xv",",","xq",",","u_diffuse_params",",","xF",",","0.0",",","vec4","(","0.0",")",",","xy",",","xC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xy",",","xv",",","xw",",","u_reflect_factor",",","xo",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xy",",","xv",",","xw",",","u_reflect_factor",",","mat4","(","0.0",")",")",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xy",",","xv",",","xw",",","0.0",",","xo",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xy",",","xv",",","xw",",","0.0",",","mat4","(","0.0",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xy","+=","xC",";"]}]}}]},{type:"textline",tokens:["xG","=","xk",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["xy","=","max","(","xy","-","sqrt","(","0.01","*","-","min","(","xE",",","0.0",")",")",",","0.5","*","xy",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","xy",",","xE",",","u_time",",","xF",",","xw",",","u_sun_direction",",","xu",",","u_sun_quaternion",",","bC",",","xD",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xG","<","0.5",")","discard",";","xG","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xF","=","max","(","max","(","xC",".","r",",","xC",".","g",")",",","xC",".","b",")","*","u_specular_alpha",";","xG","=","xk",".","a","*","(","1.0","-","xF",")","+","xF",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xG","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["xy","=","mix","(","ef","(","bG",",","xw",".","xz","*","u_refr_bump",")",",","xy",",","xG",")",";","xG","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vc","(","xy",",","xD",",","xv",",","xE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vc","(","xy",",","xD",",","xv",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","xy",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","xy",",","xG",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xy",",","xG",")",";","}"]}]},exports["main_stack.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat3","u_v_light_tsr",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vd",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ve",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xk",",","xl",";","float","xm",";","vec3","xn",",","xo",",","xp",",","xq",",","xr",",","xs",",","xt",";","mat4","xu",",","xv",",","xw",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["xu","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xu","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["xv","=","O","(","u_model_tsr",")",";","xn","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","vec3","(","a_tangent",")",";","xq","=","a_tangent","[","3","]","*","cross","(","xo",",","xp",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xr","=","(","xv","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xs","=","normalize","(","(","xv","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","xr","=","xr","-","u_camera_eye",";","xq","=","cross","(","xr",",","xs",")",";","xp","=","cross","(","xs",",","xq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xp","=","vec3","(","0.0",")",";","xq","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["xn","=","mix","(","xn",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","mix","(","xo",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","vec3","(","a_tangent",")",";","xr","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","xs",")",";","xp","=","mix","(","xp",",","xs",",","u_va_frame_factor",")",";","xq","=","mix","(","xq",",","xr",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","xn",",","xp",",","xq",",","xo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xr","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xr","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","xx","=","t_","(","xn",",","xp",",","xq",",","xo",",","xr",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","xu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","(","xv","*","vec4","(","xr",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","ru","(","u_camera_eye",",","xs",",","xu",",","xv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xw","=","ro","(","u_camera_eye",",","xs",",","xu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","(","xv","*","vec4","(","xr",",","1.0",")",")",".","xyz",";","xw","=","xw","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","xt",")",";"]}]}}]},{type:"textline",tokens:["c","xx","=","rB","(","xn","-","xr",",","xr",",","xp",",","xq",",","xo",",","xw",")",";","xx",".","b","=","xs",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","xx","=","rB","(","xn",",","xr",",","xp",",","xq",",","xo",",","xv",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xm","=","(","dot","(","cross","(","xx",".","e",",","xx",".","c",")",",","xx",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","xx",".","c",",","xm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","xx",".","a",",","xx",".","b",",","xo",")",";"]}]}}]},{type:"textline",tokens:["bC","=","xx",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","xx",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vd","=","u_camera_eye","-","xx",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","xx",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["xk","=","xu","*","vec4","(","xx",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","xk",";"]}]}}]},{type:"textline",tokens:["xl","=","u_proj_matrix","*","xk",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["xl",".","xy","+=","u_subpixel_jitter","*","xl",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","xl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","xx",".","a",",","xx",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","xk",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","xl",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec2","u_texel_size",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","float","xk",";","varying","vec3","ve",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";","varying","vec3","bG",";","varying","float","xl",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xm",";","vec3","xn",";","float","xo",",","xp",",","xq",";","vec2","xr",",","xs",";","xr","=","gl_PointCoord","-","0.5",";","xo","=","2.0","*","length","(","xr",")",";","xo","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","xo",")",";","xo","=","u_diffuse_color",".","a","*","xk","*","(","1.0","-","xo",")",";","xn","=","ve","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","bG",".","xy","/","bG",".","z",";","xr","=","vec2","(","xr",".","x",",","-","xr",".","y",")","*","xl","*","u_texel_size",";","xr","=","vec2","(","xs","+","xr",")",";","xm","=","texture2D","(","u_scene_depth",",","xr",")",";","xp","=","Z","(","xm",")",";","xq","=","-","bD",".","z","/","u_view_max_depth",";","xq","=","xp","-","xq",";","xq","=","u_view_max_depth","/","SOFT_STRENGTH","*","xq",";","xo","=","xo","*","min","(","xq",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","xn",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","xn",",","xo",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xn",",","xo",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["varying","float","xk",";","varying","vec3","ve",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";","varying","vec3","bG",";","varying","float","xl",";"]}]}}]},{type:"include",file:"math.glslv"},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","x_",",","ya",",","yb",",","yc",";","vec4","yd",",","ye",";","mat4","yf",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["yf","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yf","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["xm","yg",";","yg","=","xZ","(",")",";","yd","=","yf","*","vec4","(","yg",".","b",",","1.0",")",";","ye","=","u_proj_matrix","*","yd",";","gl_Position","=","ye",";","xk","=","yg",".","c",";","ve","=","yg",".","d",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","yd",";"]}]}}]},{type:"textline",tokens:["x_","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","x_","=","yg",".","a","*","x_",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","ye",".","x",";","yb","=","ye",".","y",";","yc","=","ye",".","w",";","bG",".","x","=","(","ya","+","yc",")","/","2.0",";","bG",".","y","=","(","yb","+","yc",")","/","2.0",";","bG",".","z","=","yc",";","xl","=","x_",";"]}]}}]},{type:"textline",tokens:["gl_PointSize","=","x_",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","xk",";","varying","vec3","ve",";","varying","vec2","bM",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","x_",";","float","ya",",","yb",",","yc",";","vec3","yd",",","ye",",","yf",",","yg",",","yh",",","yi",",","yj",",","yk",";","vec4","yl",",","ym",";","yl","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ym","=","texture2D","(","u_sampler",",","bM",")",";","br","(","ym",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yl",".","rgb","=","mix","(","yl",".","rgb",",","ym",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yl",".","rgb","*=","mix","(","vec3","(","1.0",")",",","ym",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yl",".","a","=","ym",".","a",";"]}]}}]},{type:"textline",tokens:["yl",".","rgb","*=","ve",";","yd","=","u_diffuse_intensity","*","yl",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ye","=","normalize","(","vd",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yf","=","u_emit","*","yl",".","rgb",";","yg","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["yh","=","u_environment_energy","*","dS","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yh","=","u_environment_energy","*","dS","(","yg",")",";"]}]}}]},{type:"textline",tokens:["yh","=","u_ambient","*","yh",";","ya","=","u_specular_params","[","0","]",";","x_","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","yi","=","ya","*","u_specular_color",";","xj","(","yf",",","yh",",","yd",",","yi",",","bC",",","yg",",","ye",",","x_",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","yj",",","yk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yj","=","yd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vc","(","yj",",","length","(","bD",")",",","ye",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["ya","=","yl",".","a","*","xk",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["yb","=","-","bD",".","z","/","u_view_max_depth",";","yl","=","texture2DProj","(","u_scene_depth",",","bG",")",";","yc","=","Z","(","yl",")",";","yb","=","yc","-","yb",";","yb","=","u_view_max_depth","/","SOFT_STRENGTH","*","yb",";","ya","=","ya","*","min","(","yb",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","yj",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","yj",",","ya",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","yj",",","ya",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["varying","float","xk",";","varying","vec3","ve",";","varying","vec2","bM",";","varying","vec3","vd",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","yb","(","vec2","x_",",","vec2","ya",")","{","return","(","atan","(","ya",".","y",",","ya",".","x",")","-","atan","(","x_",".","y",",","x_",".","x",")",")",";","}","void","main","(",")","{","vec4","yc",",","yd",",","ye",";","float","yf",",","yg",",","yh",";","mat4","yi",",","yj",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["yi","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yi","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["xm","yk",";","yk","=","xZ","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","yf","=","yk",".","e",";","yj","=","qT","(","yk",".","b",",","yi",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","yf","=","yk",".","e",";","yj","=","w","(",")",";","yj","[","3","]","=","vec4","(","yk",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","yf","=","yk",".","e",";","yj","=","A","(","radians","(","90.0",")",")",";","yj","[","3","]","=","vec4","(","yk",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","yf","=","yb","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","yk",".","e",";","yj","=","y","(","radians","(","-","90.0",")",")",";","yj","[","3","]","=","vec4","(","yk",".","b",",","1.0",")",";","}","yc","=","vec4","(","a_p_bb_vertex","*","2.0","*","yk",".","a","*","u_p_size",",","0.0",",","1.0",")",";","yc","=","yj","*","C","(","yf",")","*","yc",";","yd","=","yi","*","yc",";","ye","=","u_proj_matrix","*","yd",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["yf","=","ye",".","x",";","yg","=","ye",".","y",";","yh","=","ye",".","w",";","bG",".","x","=","(","yf","+","yh",")","/","2.0",";","bG",".","y","=","(","yg","+","yh",")","/","2.0",";","bG",".","z","=","yh",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ye",";","xk","=","yk",".","c",";","ve","=","yk",".","d",";","bM","=","a_p_bb_vertex","+","0.5",";","bC","=","yc",".","xyz",";","vd","=","u_camera_eye","-","yc",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","yd",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","x_",";","const","float","ya","=","0.99",";","const","float","yb","=","1.8",";","const","int","yc","=","8",";","float","yi","(","vec3","yd",",","vec3","ye",")","{","float","yf",",","yg",",","yh",";","yf","=","dot","(","ye",",","ye",")",";","yg","=","2.0","*","dot","(","ye",",","yd",")",";","yh","=","dot","(","yd",",","yd",")","-","1.0",";","yf","=","yg","*","yg","-","4.0","*","yf","*","yh",";","yf","=","sqrt","(","yf",")",";","yf","=","(","-","yg","-","yf",")","/","2.0",";","yf","=","yh","/","yf",";","return","yf",";","}","float","yp","(","float","yj",",","float","yk",")","{","float","yl",",","ym",",","yn",",","yo",";","yl","=","3.0","*","(","1.0","-","yk","*","yk",")",";","ym","=","2.0","*","(","2.0","+","yk","*","yk",")",";","yn","=","1.0","+","yj","*","yj",";","yo","=","pow","(","1.0","+","yk","*","yk","-","2.0","*","yk","*","yj",",","1.5",")",";","yo","=","max","(","yo",",","0.00001",")",";","return","(","yl","/","ym",")","*","(","yn","/","yo",")",";","}","float","yv","(","vec3","yq",",","vec3","yr",",","float","ys",")","{","vec3","yt",";","float","yu",";","yu","=","dot","(","yr",",","-","yq",")",";","if","(","yu","<","0.0",")","{","return","1.0",";","}","yt","=","yq","+","yu","*","yr",";","if","(","length","(","yt",")","<","ys",")","{","return","0.0",";","}","else","if","(","length","(","yt",")",">=","ys",")","{","yt","=","normalize","(","yt",")","*","ys","-","yq",";","yu","=","acos","(","dot","(","normalize","(","yt",")",",","yr",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","yu","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","yz","(","float","yw",",","vec3","yx",",","float","yy",")","{","return","yx","-","yx","*","pow","(","u_sky_color",",","vec3","(","yy","/","yw",")",")",";","}","void","main","(",")","{","float","yA",",","yB",",","yC",",","yD",",","yE",",","yF",",","yG",",","yH",",","yI",";","vec3","yJ",",","yK",",","yL",",","yM",",","yN",",","yO",",","yP",";","yJ","=","normalize","(","x_",")",";","yK","=","u_sun_direction",";","yA","=","dot","(","yJ",",","yK",")",";","yB","=","yp","(","yA",",","-","0.01",")","*","u_rayleigh_brightness","*","yK",".","y",";","yC","=","yp","(","yA","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","yK",".","y",")",";","yA","=","smoothstep","(","0.0",",","100.0",",","yp","(","yA",",","0.9995",")",")","*","u_spot_brightness",";","yL","=","vec3","(","0.0",",","ya",",","0.0",")",";","yD","=","yi","(","yL",",","yJ",")",";","yE","=","yD","/","float","(","yc",")",";","yF","=","yv","(","yL",",","yJ",",","ya","-","0.3",")",";","yM","=","vec3","(","0.0",",","0.0",",","0.0",")",";","yN","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","yQ","=","0",";","yQ","<","yc",";","yQ","++",")","{","yG","=","yE","*","float","(","yQ",")",";","yO","=","yL","+","yJ","*","yG",";","yH","=","yv","(","yO",",","yK",",","ya","-","0.2",")",";","yI","=","yi","(","yO",",","yK",")",";","yP","=","yz","(","yI",",","vec3","(","yb",")",",","u_scatter_strength",")","*","yH",";","yM","+=","yz","(","sqrt","(","yG",")",",","u_sky_color","*","yP",",","u_rayleigh_strength",")",";","yN","+=","yz","(","yG",",","yP",",","u_mie_strength",")",";","}","yM","=","yM","*","yF","*","pow","(","yD",",","u_rayleigh_collection_power",")","/","float","(","yc",")",";","yN","=","(","yN","*","yF","*","pow","(","yD",",","u_mie_collection_power",")",")","/","float","(","yc",")",";","yM","=","vec3","(","yA","*","yN","+","yC","*","yN","+","yB","*","yM",")",";","bu","(","yM",")",";","gl_FragColor","=","vec4","(","yM",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","x_",";","void","main","(",")","{","vec4","ya",",","yb",";","ya","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","yb","=","u_cube_view_matrix","*","ya",";","x_","=","yb",".","xyz",";","gl_Position","=","ya",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bM",";","void","main","(",")","{","vec4","ya",";","ya","=","texture2D","(","u_sampler",",","bM",")",";","bu","(","ya",".","rgb",")",";","bx","(","ya",".","rgb",",","ya",".","a",")",";","gl_FragColor","=","ya",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bM",";","void","main","(",")","{","vec2","ya",";","float","yb",";","vec4","yc",";","vec3","yd",";","mat4","ye",";","ye","=","O","(","u_view_tsr",")",";","bM","=","a_texcoord",";","yd","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","yc","=","u_proj_matrix","*","ye","*","vec4","(","yd",",","0.0",")",";","yc",".","x","/=","yc",".","w",";","yc",".","y","/=","yc",".","w",";","yc","+=","99999.0","*","step","(","yc",".","z",",","0.0",")",";","yc","+=","100.0","*","(","step","(","1.0",",","abs","(","yc",".","x",")",")","+","step","(","1.0",",","abs","(","yc",".","y",")",")",")",";","yc",".","x","=","-","a_lf_dist","*","yc",".","x",";","yc",".","y","=","-","a_lf_dist","*","yc",".","y",";","yb","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","ya","=","vec2","(","a_lf_bb_vertex",".","x","/","yb",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","yf","=","1.9",";","ya","*=","(","1.0","+","yf","*","length","(","yc",".","xy",")",")",";","}","gl_Position","=","vec4","(","yc",".","xy","+","ya",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","Ae","(","vec3","z_",",","vec3","Aa",",","float","Ab",",","float","Ac",")","{","float","Ad",";","Ad","=","Ab","*","Ac",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yo","(","Aa",",","z_",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ys","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yw","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yB","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yG","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yL","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yP","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yT","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yX","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","za","(","z_",",","Aa",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zg","(","Aa",",","z_",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zm","(","Aa",",","z_",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zs","(","Aa",",","z_",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zy","(","Aa",",","z_",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zD","(","Aa",",","z_",",","Ad",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zH","(","Aa",",","z_",",","Ad",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Am","(","float","Af",",","float","Ag",",","float","Ah",",","float","Ai",")","{","float","Aj",";","vec3","Ak",",","Al",";","Ak","=","vec3","(","Af",")",",","Al","=","vec3","(","Ag",")",";","Aj","=","Ah","*","Ai",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yo","(","Al",",","Ak",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ys","(","Ak",",","Al",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yw","(","Ak",",","Al",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zN","(","Af",",","Ag",",","Aj",",","Ai",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zT","(","Af",",","Ag",",","Aj",",","Ai",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zZ","(","Af",",","Ag",",","Aj",",","Ai",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yP","(","Ak",",","Al",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yT","(","Ak",",","Al",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yX","(","Ak",",","Al",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","za","(","Ak",",","Al",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zD","(","Al",",","Ak",",","Aj",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zH","(","Al",",","Ak",",","Aj",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","x_",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","An",";","float","Ao",",","Ap",",","Aq",";","vec3","Ar",",","As",",","At",",","Au",",","Av",";","As","=","normalize","(","x_",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","textureCube","(","u_sky",",","As",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","u_horizon_color",";","bu","(","Ar",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["At","=","vec3","(","bM",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["At","=","vec3","(","x_",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["Ao","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","abs","(","bM",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","(","bM",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","acos","(","As",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","abs","(","Ap","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","1.0","-","Ap","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["Au","=","u_horizon_color",";","Av","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","1.0",";","An","=","textureCube","(","u_sky",",","As",")",";","br","(","An",".","rgb",")",";","Ap","=","An",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","bB","(","An",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["An","=","vec4","(","vec3","(","1.0",")","-","An",".","rgb",",","An",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","1.0","-","Ap",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","An",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","Ae","(","An",".","rgb",",","Au",",","Ap",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","At",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Aq","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Aq","!=","0.0",")","Av","=","Ae","(","An",".","rgb",",","Av",",","Ap",",","Aq",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","dot","(","An",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Ao","=","Am","(","u_sky_tex_dvar",",","Ao",",","Ap",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","mix","(","Au",",","Av",",","Ao",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","Au",";"]}]}}]},{type:"textline",tokens:["bu","(","Ar",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bu","(","Au",")",";","bu","(","Av",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","mix","(","Au",",","Av",",","Ao",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","Au",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["br","(","Ar",")",";","Ao","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","Ao","=","min","(","-","Ao","*","0.03",",","0.8",")",";","Ap","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","Au","=","vec3","(","0.0",")",";","An","=","u_underwater_fog_color_density",";","An",".","rgb","=","mix","(","An",".","rgb",",","Au",",","min","(","-","As",".","y","+","Ao",",","1.0",")",")","*","Ap",";","Ao","=","clamp","(","sign","(","As",".","y","-","0.05","*","Ao",")",",","0.0",",","1.0",")",";","Ar","=","mix","(","An",".","rgb",",","Ar",",","Ao",")",";","bu","(","Ar",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ar",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","x_",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","z_",",","Aa",";","z_","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","Aa","=","u_sky_vp_inverse","*","z_",";","x_","=","Aa",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","z_",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","z_","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vd",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","Aa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ab",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ad",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","Ap","(","in","vec2","Ae",",","in","vec3","Af",",","in","vec3","Ag",",","in","vec3","Ah",",","out","float","Ai",")","{","float","Aj",",","Ak",",","Al",";","vec2","Am",";","vec3","An",",","Ao",";","Ai","=","0.0",";","An","=","reflect","(","-","Ag",",","Af",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","Ae",".","xy","+","Af",".","xz","*","REFL_BUMP","/","bH",";","Ai","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ao","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","Ao","=","texture2D","(","u_plane_reflection",",","Am",")",".","rgb",";","br","(","Ao",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","u_mirror_factor",";","Ao","=","Ah","*","textureCube","(","u_mirrormap",",","An",")",".","rgb",";","br","(","Ao",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","u_reflect_factor",";","Ao","=","Ah","*","vec3","(","0.3",",","0.5",",","1.0",")",";","br","(","Ao",")",";"]}]}}]},{type:"textline",tokens:["An","=","normalize","(","An","+","Ag",")",";","Aj","=","1.0","-","dot","(","Ag",",","An",")",";","Ak","=","u_fresnel_params","[","3","]",";","Al","=","u_fresnel_params","[","2","]",";","Al","=","Ak","+","(","1.0","-","Ak",")","*","pow","(","Aj",",","Al",")",";","Ai","=","min","(","Ai","*","Al",",","1.0",")",";","return","Ao",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","Aq",";","vec2","Ar",",","As",",","At",";","float","Au",",","Av",",","Aw",",","Ax",",","Ay",",","Az",";","vec3","AA",",","AB",",","AC",",","AD",",","AE",",","AF",",","AG",",","AH",",","AI",";","mat3","AJ",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AJ","=","mat3","(","bF",",","Aa",",","bE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","normalize","(","bE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AA","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","vec2","(","Ab",".","x",",","-","Ab",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","vec2","(","bC",".","x",",","-","bC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AB","=","vec3","(","0.0",")",";","AC","=","texture2D","(","u_normalmap0",",","Ar","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AB","+=","AC",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AD","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["AD","+=","AC",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","texture2D","(","u_normalmap0",",","Ar","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AB","+=","AC",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["AD","+=","AC",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","texture2D","(","u_normalmap0",",","Ar","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AB","+=","AC",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["AD","+=","AC",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","texture2D","(","u_normalmap0",",","Ar","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AB","+=","AC",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["AD","+=","AC",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AD","=","AJ","*","AD",";","if","(","!","f","(","AD",",","vec3","(","0.0",")",")",")","AD","=","normalize","(","AD",")",";","AD","=","mix","(","AA",",","AD",",","0.2",")",";","AD","=","normalize","(","AD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","mix","(","AA",",","normalize","(","AJ","*","AB",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AA","=","mix","(","AA",",","normalize","(","AJ","*","AB",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["AA","=","normalize","(","AA",")",";"]}]}}]},{type:"textline",tokens:["AB","=","normalize","(","vd",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["As","=","bG",".","xy","/","bG",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","bH","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","u_diffuse_color",".","a",";","Aq","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Ax","=","Z","(","Aq",")",";","Ay","=","max","(","Ax","-","bH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["At","=","As","+","AA",".","xz","*","u_refr_bump","/","bH",";","Ax","=","dY","(","Ax",",","At",",","As",")",";","Ax","=","max","(","Ax","-","bH",",","0.0",")",";","Ax","=","u_view_max_depth","/","ABSORB","*","Ax",";","if","(","u_cam_water_depth","<","0.0",")","Az","=","0.0",";","else","Az","=","min","(","Aw","*","Ax",",","1.0",")",";","Ax","=","u_view_max_depth","/","ABSORB","*","Ay",";","Aw","=","min","(","15.0","*","Aw","*","u_view_max_depth","*","Ay",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","u_view_max_depth","/","ABSORB","*","Ay",";","if","(","u_cam_water_depth",">","0.0",")","Aw","=","min","(","Aw","*","Ax",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Aw","*=","min","(","5.0","*","Av",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","1.0","-","Aw",";","At","=","As","+","AA",".","xz","*","u_refr_bump","/","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","texture2D","(","u_refractmap",",","At",")",".","rgb",";","br","(","AC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","pow","(","min","(","Ac",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","AE","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","Ax",")",";","Ax","=","pow","(","min","(","Ac",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","AE","=","mix","(","u_shore_water_col",",","AE",",","Ax",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AE","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","max","(","1.0","-","u_view_max_depth","*","Ay",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","1.0","-","Aw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","max","(","Au","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AF","=","normalize","(","vec3","(","Ac",".","r",",","0.0",",","Ac",".","g",")",")",";","AF","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","AF",",","0.8",")",")",";","Ax","=","1.25","*","max","(","dot","(","AD",",","AF",")","-","0.2",",","0.0",")",";","Ax","+=","max","(","dot","(","AD",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","Ay","+=","Ax","*","(","1.0","-","Ac",".","b",")",";","Au","*=","(","1.0","-","0.95","*","pow","(","Ac",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["Ay","+=","Au",";","Ay","=","min","(","u_foam_factor","*","Ay",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Aq","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Ar","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["Au","=","u_specular_params","[","0","]",";","Ar","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","AD","=","Au","*","u_specular_color",";","AF","=","u_environment_energy","*","dS","(","AA",")",";","AF","=","u_ambient","*","AF",";","AF","=","AF","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","Ap","(","As",",","AA",",","AB",",","AF",",","Au",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AG","=","Ap","(","vec2","(","0.0",")",",","AA",",","AB",",","AF",",","Au",")",";"]}]}}]},{type:"textline",tokens:["AE","=","u_diffuse_intensity","*","AE",";","xj","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","AE",",","AD",",","bC",",","AA",",","AB",",","Ar",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","AH",",","AI",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","max","(","dot","(","u_sun_direction",",","-","bE",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","AB",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","Ax","=","clamp","(","SSS_STRENGTH","*","Ax",",","0.0",",","1.0",")",";","AH","=","mix","(","AH",",","u_shallow_water_col",",","Ax",")",";","AH","=","mix","(","AH",",","u_shore_water_col",",","Ax",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AH","=","mix","(","AC",",","AH",",","Az",")",";"]}]}}]},{type:"textline",tokens:["AH","=","mix","(","AH",",","AG",",","Au",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","mix","(","Aq",".","g",",","Aq",".","r",",","max","(","4.0","*","(","Ay","-","0.75",")",",","0.0",")",")",";","Au","=","mix","(","Aq",".","b",",","Au",",","max","(","2.0","*","Ay","-","1.0",",","0.0",")",")",";","Au","=","mix","(","0.0",",","Au",",","Ay",")",";","AH","=","mix","(","AH",",","AF",",","Au",")",";"]}]}}]},{type:"textline",tokens:["AH","+=","AI",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","uW","(","AH",",","Av",",","u_cam_water_depth",")",";","}","else","{","vc","(","AH",",","Av",",","AB",",","1.0",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vc","(","AH",",","Av",",","AB",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","AH",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","max","(","Aw",",","AI",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","+=","Au",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","AH",",","Aw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["AI","=","fwidth","(","Ad",")",";","AI","=","smoothstep","(","vec3","(","0.0",")",",","AI","*","z_",",","Ad",")",";","Au","=","min","(","min","(","AI",".","x",",","AI",".","y",")",",","AI",".","z",")",";","Au","=","clamp","(","Au",",","0.0",",","1.0",")",";","AH","=","mix","(","u_wireframe_edge_color",",","AH",",","Au",")",";","Aw","=","mix","(","1.0",",","Aw",",","Au",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","AH",",","Aw",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vd",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","Aa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ab",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ad",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ai","(","in","vec2","z_",")","{","float","Ae",";","vec4","Af",";","vec2","Ag",";","Ag","=","0.5","+","vec2","(","(","z_",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","z_",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","Af","=","texture2D","(","u_shore_dist_map",",","Ag",")",";","const","vec2","Ah","=","vec2","(","1.0","/","255.0",",","1.0",")",";","Ae","=","dot","(","Af",".","ba",",","Ah",")",";","Ag","=","normalize","(","Af",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Ag",",","Ae",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","Au","(","inout","vec3","Aj",",","in","float","Ak",",","in","vec3","Al",")","{","vec2","Am",",","An",",","Ao",";","float","Ap",",","Aq",",","Ar",",","As",",","At",";","Ap","=","aU","(","DST_NOISE_SCALE_0","*","(","Aj",".","xz","+","DST_NOISE_FREQ_0","*","Ak",")",")","*","aU","(","DST_NOISE_SCALE_1","*","(","Aj",".","zx","-","DST_NOISE_FREQ_1","*","Ak",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Ar","=","Al",".","b",";","As","=","sqrt","(","Ar",")",";","Aq","=","max","(","Ar",",","DIR_MIN_SHR_FAC",")","*","sin","(","As","/","Aq","+","DIR_FREQ","*","Ak",")",";","At","=","max","(","aU","(","DIR_NOISE_SCALE","*","(","Aj",".","xz","+","DIR_NOISE_FREQ","*","Ak",")",")",",","DIR_MIN_NOISE_FAC",")",";","Aq","*=","At",";","As","=","WAVES_HEIGHT","*","mix","(","Aq",",","Ap",",","max","(","As",",","DST_MIN_FAC",")",")",";","Am","=","Al",".","rg",";","Aq","=","WAVES_HOR_FAC","*","Aq","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Ar",")",",","0.0",")",";","Am","=","Aq","*","Am",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["As","=","WAVES_HEIGHT","*","Ap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["An","=","2.0","*","(","Aj",".","xz","-","0.1","*","Ak",")",";","Ao","=","1.3","*","(","Aj",".","zx","+","0.03","*","Ak",")",";","Ap","=","ay","(","0.5","*","An",")",".","x","+","ay","(","0.5","*","Ao",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Aj",".","xz","+=","Am",";","Ap","*=","Ar",";"]}]}}]},{type:"textline",tokens:["As","+=","SMALL_WAVES_FAC","*","Ap",";"]}]}}]},{type:"textline",tokens:["Aj",".","y","+=","As",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Av",",","Aw",";","vec2","Ax",";","float","Ay",",","Az",",","AA",";","vec3","AB",",","AC",",","AD",",","AE",";","mat4","AF",",","AG",";","AF","=","O","(","u_view_tsr",")",";","AG","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","Ad","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Ad","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Ad","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["AB","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","abs","(","AB",".","y",")",";","Ax","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","Ay",")",";","AB",".","y","=","WATER_LEVEL",";","AB",".","xz","+=","Ax",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","AH","=","rB","(","AB",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","AG",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ac","=","Ai","(","AH",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","length","(","u_wind",")",";","AA","=","u_time",";","AA","*=","Az",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","Ay",";","AB","=","AH",".","a","+","vec3","(","Ay",",","0.0",",","0.0",")",";","AC","=","AH",".","a","+","vec3","(","0.0",",","0.0",",","Ay",")",";","if","(","a_position",".","y","<","0.0",")","{","AH",".","a",".","y","=","WATER_LEVEL","-","1.0",";","AB",".","y","=","AH",".","a",".","y",";","AC",".","y","=","AH",".","a",".","y",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ab","=","AH",".","a",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AB","=","AH",".","a","+","vec3","(","0.05",",","0.0",",","0.0",")",";","AC","=","AH",".","a","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AD","=","Ai","(","AB",".","xz",")",";","AE","=","Ai","(","AC",".","xz",")",";","Au","(","AB",",","AA",",","AD",")",";","Au","(","AC",",","AA",",","AE",")",";","Au","(","AH",".","a",",","AA",",","Ac",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Au","(","AB",",","AA",",","vec3","(","0.0",")",")",";","Au","(","AC",",","AA",",","vec3","(","0.0",")",")",";","Au","(","AH",".","a",",","AA",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["AB","=","normalize","(","AB","-","AH",".","a",")",";","AC","=","normalize","(","AC","-","AH",".","a",")",";","bE","=","normalize","(","cross","(","AC",",","AB",")",")",";","AA","=","dot","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","AA","=","clamp","(","0.8","-","AA",",","0.0",",","1.0",")",";","bE","=","mix","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",",","AA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","a_tangent",";","bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bF","=","AC",";","Aa","=","cross","(","bE",",","bF",")",";"]}]}}]},{type:"textline",tokens:["bC","=","AH",".","a",";","vd","=","u_camera_eye","-","AH",".","a",";","Av","=","AF","*","vec4","(","AH",".","a",",","1.0",")",";","Aw","=","u_proj_matrix","*","Av",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","Aw",".","x",";","Ay","=","Aw",".","y",";","Az","=","Aw",".","w",";","bG",".","x","=","(","AA","+","Az",")","/","2.0",";","bG",".","y","=","(","Ay","+","Az",")","/","2.0",";","bG",".","z","=","Az",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","Av",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Aw",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_NONE",tokens:["0"]},{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"WM_DEBUG_SPHERES",tokens:["4"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Ad",";","const","float","z_","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ae","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ae","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Af","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","Ag","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","Ah","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Ai",",","Aj",";","vec3","Ak",",","Al",";","Ak","=","vec3","(","0.0",")",";","Ai","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","sign","(","Ad","-","vec3","(","0.02","*","z_",")",")",";","if","(","Al",".","x","<","0.0","||","Al",".","y","<","0.0","||","Al",".","z","<","0.0",")","{","Ak","=","Ae",";","Ai","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","sign","(","Ad","-","vec3","(","0.02","*","z_",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","Al",".","x","<","0.0","||","Al",".","y","<","0.0","||","Al",".","z","<","0.0",")","Ak","=","u_wireframe_edge_color",";","else","Ak","=","Ah",";","Ai","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","Al",".","x","<","0.0","||","Al",".","y","<","0.0","||","Al",".","z","<","0.0",")","Ai","=","1.0",";","else","Ai","=","0.0",";","Ak","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","Al",".","x","<","0.0","||","Al",".","y","<","0.0","||","Al",".","z","<","0.0",")","Ak","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","Ak","=","Af",";","else","Ak","=","Ag",";","Ai","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["Al","=","fwidth","(","Ad",")",";","Al","=","smoothstep","(","vec3","(","0.0",")",",","Al","*","z_",",","Ad",")",";","Aj","=","min","(","min","(","Al",".","x",",","Al",".","y",")",",","Al",".","z",")",";","Aj","=","clamp","(","Aj",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","Ak","=","vec3","(","mix","(","u_wireframe_edge_color",",","Ah",",","Aj",")",")",";","Ai","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","Ak","=","u_wireframe_edge_color",";","Ai","=","mix","(","1.0",",","0.0",",","Aj",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","Ak","=","mix","(","u_wireframe_edge_color",",","Af",",","Aj",")",";","else","Ak","=","mix","(","u_wireframe_edge_color",",","Ag",",","Aj",")",";","Ai","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["bu","(","Ak",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Ak",",","Ai",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ak",",","Ai",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","Ad",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","z_",",","Ae",",","Af",",","Ag",",","Ah",";","mat4","Ai",",","Aj",",","Ak",";","Ai","=","O","(","u_view_tsr",")",";","Aj","=","O","(","u_model_tsr",")",";","if","(","a_polyindex","==","0.0",")","Ad","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Ad","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Ad","=","vec3","(","0.0",",","0.0",",","1.0",")",";","z_","=","a_position",";","Ae","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","Al","=","rB","(","z_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Aj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","mix","(","z_",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","vec3","(","0.0",")",";","Ag","=","vec3","(","0.0",")",";","sB","(","z_",",","Af",",","Ag",",","Ae",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Al","=","t_","(","z_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ag",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","Ai",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","(","Aj","*","vec4","(","Ag",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ak","=","ru","(","u_camera_eye",",","Af",",","Ai",",","Aj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ak","=","ro","(","u_camera_eye",",","Af",",","Ai",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ah","=","(","Aj","*","vec4","(","Ag",",","1.0",")",")",".","xyz",";","Ak","=","Ak","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","Ah",")",";"]}]}}]},{type:"textline",tokens:["c","Al","=","rB","(","z_","-","Ag",",","Ag",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ak",")",";","Al",".","b","=","Af",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Al","=","rB","(","z_",",","Ag",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Aj",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","Al",".","a",",","Al",".","b",",","Ae",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","Ai","*","vec4","(","Al",".","a",",","1.0",")",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bM",";","void","main","(",")","{","vec4","z_",",","Ae",";","z_","=","texture2D","(","u_sampler_left",",","bM",")",";","Ae","=","texture2D","(","u_sampler_right",",","bM",")",";","gl_FragColor","=","vec4","(","z_","[","0","]",",","Ae","[","1","]",",","Ae","[","2","]",",","z_","[","3","]","+","Ae","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["2"]},{type:"define",name:"AA_QUALITY_LOW",tokens:["0"]},{type:"define",name:"AA_QUALITY_MEDIUM",tokens:["1"]},{type:"define",name:"AA_QUALITY_HIGH",tokens:["2"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["vec4","Ag","(","float","z_",",","float","Ae",")","{","vec2","Af",";","Af","=","bM","+","vec2","(","z_",",","Ae",")","*","u_texel_size",";","return","texture2D","(","u_color",",","Af",")",";","}","vec4","At","(",")","{","vec2","Ah",";","float","Ai",",","Aj",",","Ak",",","Al",",","Am",",","An",";","vec4","Ao",",","Ap",",","Aq",",","Ar",",","As",";","Ao","=","Ag","(","-","1.0",",","-","1.0",")",";","Ap","=","Ag","(","1.0",",","-","1.0",")",";","Aq","=","Ag","(","-","1.0",",","1.0",")",";","Ar","=","Ag","(","1.0",",","1.0",")",";","As","=","Ag","(","0.0",",","0.0",")",";","Ai","=","bB","(","As",")",";","Aj","=","bB","(","Ao",")",";","Ak","=","bB","(","Ap",")",";","Al","=","bB","(","Aq",")",";","Am","=","bB","(","Ar",")",";","An","=","min","(","Ai",",","min","(","min","(","Aj",",","Ak",")",",","min","(","Al",",","Am",")",")",")",";","Ai","=","max","(","Ai",",","max","(","max","(","Aj",",","Ak",")",",","max","(","Al",",","Am",")",")",")",";","Ah",".","x","=","-","(","(","Aj","+","Ak",")","-","(","Al","+","Am",")",")",";","Ah",".","y","=","(","(","Aj","+","Al",")","-","(","Ak","+","Am",")",")",";","Am","=","max","(","(","Aj","+","Ak","+","Al","+","Am",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","Am","=","1.0","/","(","min","(","abs","(","Ah",".","x",")",",","abs","(","Ah",".","y",")",")","+","Am",")",";","Ah","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Ah","*","Am",")",")","*","u_texel_size",";","Ar","=","0.5","*","(","texture2D","(","u_color",",","bM","+","Ah","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bM","+","Ah","*","(","2.0","/","3.0","-","0.5",")",")",")",";","Aq","=","Ar","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bM","+","Ah","*","-","0.5",")","+","texture2D","(","u_color",",","bM","+","Ah","*","0.5",")",")",";","Am","=","bB","(","Aq",")",";","if","(","(","Am","<","An",")","||","(","Am",">","Ai",")",")","return","Ar",";","else","return","Aq",";","}"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["1"]},{type:"define",name:"FXAA_BLEND4WEB",tokens:["1"]},{type:"include",file:"fxaa.glslf"},{type:"condition",parts:[{type:"if",expression:["AA_QUALITY","AA_QUALITY_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["39"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["1.00"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.063"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0312"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["20"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.65"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0625"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.50"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0833"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Bk",";"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","At","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Bk","=","u_texel_size",";","gl_FragColor","=","Bj","(","bM",",","u_color",",","Bk",",","FXAA_QUALITY_SUBPIX",",","FXAA_QUALITY_EDGE_THRESHOLD",",","FXAA_QUALITY_EDGE_THRESHOLD_MIN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","z_",";","vec2","Ae",",","Af",";","Ae","=","vec2","(","0.0",",","0.0",")",";","Af","=","u_texel_size",";","z_","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","z_","*","0.0875447373698",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0858112354248",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0808139781061",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0731235112908",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0635705267419",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0530985673112",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0426125984122",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0328565115809",";","Ae","+=","Af",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Ae",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Ae",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","z_",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bM",";","void","main","(",")","{","vec4","z_",",","Ae",";","z_","=","texture2D","(","u_main",",","bM",")",";","Ae","=","texture2D","(","u_bloom",",","bM",")",";","z_","=","z_",";","z_","+=","Ae",";","gl_FragColor","=","vec4","(","z_",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bM",";","void","main","(",")","{","float","z_",";","vec3","Ae",";","vec4","Af",";","Af","=","texture2D","(","u_color",",","bM",")",";","Ae","=","Af",".","rgb",";","if","(","u_brightness","<","0.0",")","Ae","=","Ae","*","(","1.0","+","u_brightness",")",";","else","Ae","=","Ae","+","(","(","1.0","-","Ae",")","*","u_brightness",")",";","Ae","=","(","Ae","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","Ae","*=","u_exposure",";","z_","=","bB","(","vec4","(","Ae",",","0.0",")",")",";","Ae","=","mix","(","vec3","(","z_",")",",","Ae",",","u_saturation",")",";","gl_FragColor","=","vec4","(","Ae",",","Af",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","gl_FragColor","=","V","(","clamp","(","Bq","(","u_depth",",","bM",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","float","z_",",","Ae",";","vec4","Af",",","Ag",";","Af","=","texture2D","(","u_sharp",",","bM",")",";","if","(","u_dof_dist",">","0.0",")","{","z_","=","Bq","(","u_depth",",","bM",",","u_camera_range",")",";","z_","*=","u_view_max_depth",";","if","(","z_","<","u_dof_dist",")","Ae","=","(","u_dof_dist","-","z_",")","/","u_dof_front",";","else","Ae","=","(","z_","-","u_dof_dist",")","/","u_dof_rear",";","Ae","=","clamp","(","Ae",",","0.0",",","1.0",")",";","Ag","=","texture2D","(","u_blurred",",","bM",")",";","gl_FragColor","=","mix","(","Af",",","Ag",",","Ae",")",";","}","else","gl_FragColor","=","Af",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bM",";","void","main","(",")","{","float","z_",";","vec4","Ae",",","Af",",","Ag",";","Ae","=","texture2D","(","u_src_color",",","bM",")",";","Af","=","texture2D","(","u_glow_mask_small",",","bM",")",";","Ag","=","texture2D","(","u_glow_mask_large",",","bM",")",";","gl_FragColor","=","Ae",";","if","(","Ag",".","a","!=","0.0",")","{","z_","=","u_glow_mask_large_coeff","*","Ag",".","a",";","z_","=","clamp","(","z_",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ag",".","rgb","/","Ag",".","a",",","z_",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","z_",")",";","}","if","(","Af",".","a","!=","0.0",")","{","z_","=","u_glow_mask_small_coeff","*","Af",".","a",";","z_","=","clamp","(","z_",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Af",".","rgb","/","Af",".","a",",","z_",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","z_",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Br",";","varying","vec2","Bs",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Bt",";","void","main","(",")","{","vec4","Bu",";","float","Bv",",","Bw",",","Bx",",","By",",","Bz",";","vec2","BA",",","BB",",","BC",";","BA","=","(","Bt",".","xy","-","bM",")",";","Bv","=","length","(","BA",")",";","BA","=","u_radial_blur_step","*","BA","/","Bv",";","Bw","=","Bv","/","u_radial_blur_step",";","BA","*=","min","(","Bw",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Bw","=","max","(","Bw",",","STEPS_PER_PASS",")",";","BB","=","bM",";","Bx","=","0.0",";","for","(","float","BD","=","0.0",";","BD","<","STEPS_PER_PASS",";","BD","+=","1.0",")","{","if","(","BD","<=","Bw",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["By","=","Bq","(","u_input",",","BB",",","u_camera_range",")",";","Bx","+=","max","(","(","1.0","-","pow","(","Bv",",","0.3",")",")","*","step","(","0.9",",","By",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Bu","=","texture2D","(","u_input",",","BB",")",";","Bx","+=","Z","(","Bu",")",";"]}]}}]},{type:"textline",tokens:["}","BB","+=","BA",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BC","=","bM","+","Bs",";","Bz","=","ay","(","vec2","(","2.5","*","(","BC",".","x",")",",","2.5","*","(","BC",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","ay","(","vec2","(","5.0","*","(","BC",".","x",")","-","0.66","*","u_time",",","5.0","*","(","BC",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","aU","(","vec2","(","7.5","*","(","BC",".","x",")","+","0.33","*","u_time",",","7.5","*","(","BC",".","y",")","-","0.33","*","u_time",")",")",";","Bz","*=","clamp","(","1.2","-","sqrt","(","0.2","*","Bv",")",",","0.0",",","1.0",")","*","Br",";","Bx","=","max","(","Bz",",","Bx",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","V","(","Bx","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Br",";","varying","vec2","Bs",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Bt",";","void","main","(",")","{","float","z_",",","Ae",";","vec3","Af",";","bM","=","a_bb_vertex","+","0.5",";","Af","=","normalize","(","u_sun_direction",")",";","Bt","=","u_view_proj_matrix","*","vec4","(","Af",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Br","=","1.0",";","Af","=","vec3","(","0.0",",","1.0",",","0.0",")",";","Af","=","i","(","u_camera_quat",",","Af",")",";","Af","=","normalize","(","Af",")",";","z_","=","dot","(","Af",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Ae","=","atan","(","Af",".","x",",","Af",".","z",")",";","Bs","=","vec2","(","-","Ae",",","acos","(","z_",")",")",";","}","else","{","Br","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Bt",".","xy","=","0.5","*","(","Bt",".","xy","/","Bt",".","w","+","1.0",")",";","Bt","+=","99999.0","*","step","(","Bt",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bM",";","void","main","(",")","{","float","z_",";","vec3","Ae",";","vec4","Af",";","Af","=","texture2D","(","u_main",",","bM",")",";","Ae","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","br","(","Af",".","rgb",")",";","z_","=","Z","(","texture2D","(","u_god_rays",",","bM",")",")",";","Ae","=","Af",".","rgb","+","u_god_rays_intensity","*","vec3","(","z_",")","*","Ae",";","bu","(","Ae",")",";"]},{type:"condition",parts:[{type:"if",expression:["SAFARI_CANVAS_ALPHA_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ae",",","max","(","0.01",",","Af",".","a",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ae",",","Af",".","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bM",";","void","main","(",")","{","float","z_",";","vec4","Ae",";","Ae","=","texture2D","(","u_input",",","bM",")",";","z_","=","dot","(","Ae",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","z_",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","z_",",","Ae",";","Ae","=","0.0",";","for","(","float","Af","=","0.025",";","Af","<","1.0",";","Af","+=","0.05",")","for","(","float","Ag","=","0.025",";","Ag","<","1.0",";","Ag","+=","0.05",")","{","z_","=","max","(","texture2D","(","u_input",",","vec2","(","Af",",","Ag",")",")",".","r",",","0.01",")",";","Ae","+=","log","(","z_",")",";","}","Ae","=","exp","(","Ae","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","Ae",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bM",";","varying","float","Bu",";","void","main","(",")","{","vec4","Bv",";","float","Bw",",","Bx",";","Bw","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","Bx","=","texture2D","(","u_luminance",",","bM",")",".","r",";","Bv","=","texture2D","(","u_main",",","bM",")",";","Bw","=","Bx","/","Bw",";","Bx","=","u_bloom_edge_lum",";","gl_FragColor","=","Bv","*","max","(","Bw","-","Bx",",","0.0",")","*","Bu",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bM",";","varying","float","Bu",";","const","vec3","z_","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Al","(","in","vec4","Ae",",","in","vec3","Af",",","out","vec3","Ag",")","{","float","Ah",",","Ai",",","Aj",",","Ak",";","Ah","=","Ae",".","w","*","Af",".","x","+","Ae",".","y","*","Af",".","z","-","Ae",".","z","*","Af",".","y",";","Ai","=","Ae",".","w","*","Af",".","y","+","Ae",".","z","*","Af",".","x","-","Ae",".","x","*","Af",".","z",";","Aj","=","Ae",".","w","*","Af",".","z","+","Ae",".","x","*","Af",".","y","-","Ae",".","y","*","Af",".","x",";","Ak","=","-","Ae",".","x","*","Af",".","x","-","Ae",".","y","*","Af",".","y","-","Ae",".","z","*","Af",".","z",";","Ag",".","x","=","Ah","*","Ae",".","w","-","Ak","*","Ae",".","x","-","Ai","*","Ae",".","z","+","Aj","*","Ae",".","y",";","Ag",".","y","=","Ai","*","Ae",".","w","-","Ak","*","Ae",".","y","-","Aj","*","Ae",".","x","+","Ah","*","Ae",".","z",";","Ag",".","z","=","Aj","*","Ae",".","w","-","Ak","*","Ae",".","z","-","Ah","*","Ae",".","y","+","Ai","*","Ae",".","x",";","}","void","main","(",")","{","vec3","Am",";","bM","=","2.0","*","a_position",";","Al","(","u_camera_quat",",","z_",",","Am",")",";","Bu","=","dot","(","-","Am",",","u_sun_direction",")","*","u_bloom_key",";","Bu","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bM",";","float","z_","=","0.0042",";","void","main","(",")","{","vec4","Ae",",","Af",",","Ag",",","Ah",";","Ae","=","texture2D","(","u_mb_tex_curr",",","bM",")",";","Af","=","texture2D","(","u_mb_tex_accum",",","bM",")",";","if","(","length","(","Ae","-","Af",")",">","u_motion_blur_decay_threshold",")","{","Ag","=","(","1.0","-","u_motion_blur_exp",")","*","Ae","+","u_motion_blur_exp","*","Af",";","Ag","=","Ag","-","Af",";","Ah","=","Ae","-","Af",";","Ag","=","min","(","max","(","abs","(","Ag",")",",","vec4","(","z_",")",")",",","abs","(","Ah",")",")","*","sign","(","Ag",")",";","gl_FragColor","=","Af","+","Ag",";","}","else","{","gl_FragColor","=","Ae",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bM",";","void","main","(",")","{","vec3","z_",";","float","Ae",";","vec4","Af",",","Ag",",","Ah",";","Af","=","texture2D","(","u_outline_src",",","bM",")",";","gl_FragColor","=","Af",";","if","(","u_draw_outline","!=","0.0",")","{","Ag","=","texture2D","(","u_outline_mask",",","bM",")",";","Ah","=","texture2D","(","u_outline_mask_blurred",",","bM",")",";","Ae","=","Ah",".","a","-","Ag",".","a",";","if","(","Ae","!=","0.0",")","{","Ae","=","smoothstep","(","0.0",",","1.0",",","Ah",".","a",")",";","if","(","Ag",".","a","==","0.0",")","{","z_","=","u_outline_color",";","bu","(","z_",")",";","Ag","=","vec4","(","clamp","(","z_",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","Af",",","Ag",",","Ae",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"define",name:"FLIP_CUBEMAP_COORDS",tokens:["7"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_tex_number",";","uniform","vec2","u_delta",";"]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","void","main","(",")","{","float","z_",",","Ae",",","Af",",","Ag",";","vec2","Ah",",","Ai",";","vec4","Aj",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bM",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Aj",".","r","+","Aj",".","g","+","Aj",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ah","=","vec2","(","0.0",",","0.0",")",";","Ai","=","u_texel_size",";","Aj","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Aj","*","0.2270270270",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","0.1945945946",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","0.1945945946",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","0.1216216216",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","0.1216216216",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","0.0540540541",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","0.0540540541",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","0.0162162162",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ah","=","vec2","(","0.0",",","0.0",")",";","Ai","=","u_texel_size",";","Aj","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.152507",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.141763",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.141763",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.113861",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.113861",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.079019",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.079019",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.047383",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.047383",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.024549",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.024549",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.01099",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.01099",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.00425",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.00425",";","Ah","+=","Ai",";","Aj","=","texture2D","(","u_color",",","bM","+","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.00142",";","Aj","=","texture2D","(","u_color",",","bM","-","Ah",")",";","gl_FragColor","+=","Aj","*","(","1.0","-","step","(","0.0",",","-","Aj",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","u_texel_size",";","Aj","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Aj",";","if","(","Aj",".","a","==","0.0",")","{","Aj","=","texture2D","(","u_color",",","bM","+","Ai",")",";","if","(","Aj",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Aj",".","a",")",";","else","{","Aj","=","texture2D","(","u_color",",","bM","-","Ai",")",";","if","(","Aj",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Aj",".","a",")",";","}","}"]}]}},{type:"elif",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["z_","=","u_delta","[","0","]",";","Ae","=","u_delta","[","1","]",";","Af","=","1.0","/","3.0",";","Ag","=","0.5",";","Ai","=","vec2","(","Af",",","Ag",")",";","if","(","u_tex_number","==","0",")","{","Ah","=","bM","*","Ai","+","vec2","(","2.0","*","Af",",","0.0",")",";","Ah","[","0","]","=","min","(","Ah","[","0","]",",","1.0","-","z_",")",";","Ah","[","1","]","=","min","(","Ah","[","1","]",",","0.5","-","Ae",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Af","-","Ah","[","0","]",",","Ah","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","1",")","{","Ah","=","bM","*","Ai",";","Ah","[","0","]","=","max","(","Ah","[","0","]",",","z_",")",";","Ah","[","1","]","=","min","(","Ah","[","1","]",",","0.5","-","Ae",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Af","-","Ah","[","0","]",",","Ah","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","2",")","{","Ah","=","bM","*","Ai","+","vec2","(","Af",",","Ag",")",";","Ah","[","0","]","=","max","(","Ah","[","0","]",",","Af","+","z_",")",";","Ah","[","0","]","=","min","(","Ah","[","0","]",",","2.0","*","Af","-","z_",")",";","Ah","[","1","]","=","min","(","Ah","[","1","]",",","1.0","-","Ae",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Ah","[","0","]",",","3.0","*","Ag","-","Ah","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","3",")","{","Ah","=","bM","*","Ai","+","vec2","(","0.0",",","Ag",")",";","Ah","[","0","]","=","min","(","Ah","[","0","]",",","Af","-","z_",")",";","Ah","[","1","]","=","min","(","Ah","[","1","]",",","1.0","-","Ae",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Ah","[","0","]",",","3.0","*","Ag","-","Ah","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","4",")","{","Ah","=","bM","*","Ai","+","vec2","(","Af",",","0.0",")",";","Ah","[","0","]","=","max","(","Ah","[","0","]",",","Af","+","z_",")",";","Ah","[","0","]","=","min","(","Ah","[","0","]",",","2.0","*","Af","-","z_",")",";","Ah","[","1","]","=","min","(","Ah","[","1","]",",","0.5","-","Ae",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","1.0","-","Ah","[","0","]",",","Ah","[","1","]",")",")",";","}","else","{","Ai","=","bM","*","Ai","+","vec2","(","2.0","*","Af",",","Ag",")",";","Ai","[","0","]","=","min","(","Ai","[","0","]",",","1.0","-","z_",")",";","Ai","[","1","]","=","max","(","Ai","[","1","]",",","0.5","+","Ae",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Af","-","Ai","[","0","]",",","Ai","[","1","]",")",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bM",";","void","main","(",")","{","bM","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bw",";","varying","vec4","Bx",";","varying","vec4","By",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Bz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BF","(","vec2","BA",",","sampler2D","BB",")","{","float","BC",",","BD",",","BE",";","BC","=","texture2D","(","BB",",","BA",")",".","r",";","BD","=","texture2D","(","BB",",","Bw",".","xy",")",".","r",";","BE","=","texture2D","(","BB",",","Bw",".","zw",")",".","r",";","return","vec3","(","BC",",","BD",",","BE",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","BK","(","vec2","BG",",","sampler2D","BH",")","{","vec2","BI",";","vec3","BJ",";","BJ","=","BF","(","BG",",","BH",")",";","BI","=","abs","(","BJ",".","xx","-","BJ",".","yz",")",";","BI","=","step","(","SMAA_PREDICATION_THRESHOLD",",","BI",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","BI",")",";","}"]}]}}]},{type:"textline",tokens:["void","BO","(","bvec2","BL",",","inout","vec2","BM",",","vec2","BN",")","{","if","(","BL",".","x",")","BM",".","x","=","BN",".","x",";","if","(","BL",".","y",")","BM",".","y","=","BN",".","y",";","}","void","BO","(","bvec4","BP",",","inout","vec4","BQ",",","vec4","BR",")","{","BO","(","BP",".","xy",",","BQ",".","xy",",","BR",".","xy",")",";","BO","(","BP",".","zw",",","BQ",".","zw",",","BR",".","zw",")",";","}","vec2","BT","(","vec2","BS",")","{","return","sign","(","BS",")","*","floor","(","abs","(","BS",")","+",".5",")",";","}","vec4","BT","(","vec4","BU",")","{","return","sign","(","BU",")","*","floor","(","abs","(","BU",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cg","(","vec2","BV",",","sampler2D","BW"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","BX"]}]}}]},{type:"textline",tokens:[")","{","vec4","BY",";","float","BZ",",","B_",",","Ca",",","Cb",",","Cc",";","vec3","Cd",";","vec2","Ce",",","Cf",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["Ce","=","BK","(","BV",",","BX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ce","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["Cd","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","BZ","=","dot","(","texture2D","(","BW",",","BV",")",".","rgb",",","Cd",")",";","B_","=","dot","(","texture2D","(","BW",",","Bw",".","xy",")",".","rgb",",","Cd",")",";","Ca","=","dot","(","texture2D","(","BW",",","Bw",".","zw",")",".","rgb",",","Cd",")",";","BY",".","xy","=","abs","(","BZ","-","vec2","(","B_",",","Ca",")",")",";","Ce","=","step","(","Ce",",","BY",".","xy",")",";","if","(","dot","(","Ce",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","Cb","=","dot","(","texture2D","(","BW",",","Bx",".","xy",")",".","rgb",",","Cd",")",";","Cc","=","dot","(","texture2D","(","BW",",","Bx",".","zw",")",".","rgb",",","Cd",")",";","BY",".","zw","=","abs","(","BZ","-","vec2","(","Cb",",","Cc",")",")",";","Cf","=","max","(","BY",".","xy",",","BY",".","zw",")",";","Cc","=","dot","(","texture2D","(","BW",",","By",".","xy",")",".","rgb",",","Cd",")",";","Cb","=","dot","(","texture2D","(","BW",",","By",".","zw",")",".","rgb",",","Cd",")",";","BY",".","zw","=","abs","(","vec2","(","B_",",","Ca",")","-","vec2","(","Cc",",","Cb",")",")",";","Cf","=","max","(","Cf",".","xy",",","BY",".","zw",")",";","Cb","=","max","(","Cf",".","x",",","Cf",".","y",")",";","Ce",".","xy","*=","step","(","Cb",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","BY",".","xy",")",";","return","Ce",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ci","(","vec2","Ch",")","{","Ch",".","r","=","Ch",".","r","*","abs","(","5.0","*","Ch",".","r","-","5.0","*","0.75",")",";","return","BT","(","Ch",")",";","}","vec4","Ci","(","vec4","Cj",")","{","Cj",".","rb","=","Cj",".","rb","*","abs","(","5.0","*","Cj",".","rb","-","5.0","*","0.75",")",";","return","BT","(","Cj",")",";","}","vec2","Cr","(","sampler2D","Ck",",","vec2","Cl",",","vec2","Cm",",","out","vec2","Cn",")","{","vec3","Co",";","vec4","Cp",";","Cp","=","vec4","(","Cl",",","-","1.0",",","1.0",")",";","Co","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Cq","=","0",";","Cq","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Cq","++",")","{","if","(","Cp",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Cp",".","w",">","0.9",")","{","Cp",".","xyz","+=","Co","*","vec3","(","Cm",",","1.0",")",";","Cn","=","texture2D","(","Ck",",","Cp",".","xy",",","0.0",")",".","rg",";","Cp",".","w","=","dot","(","Cn",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Cp",".","zw",";","}","vec2","Cz","(","sampler2D","Cs",",","vec2","Ct",",","vec2","Cu",",","out","vec2","Cv",")","{","vec3","Cw",";","vec4","Cx",";","Cx","=","vec4","(","Ct",",","-","1.0",",","1.0",")",";","Cx",".","x","+=","0.25","*","u_texel_size",".","x",";","Cw","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Cy","=","0",";","Cy","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Cy","++",")","{","if","(","Cx",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Cx",".","w",">","0.9",")","{","Cx",".","xyz","=","Cw","*","vec3","(","Cu",",","1.0",")","+","Cx",".","xyz",";","Cv","=","texture2D","(","Cs",",","Cx",".","xy",",","0.0",")",".","rg",";","Cv","=","Ci","(","Cv",")",";","Cx",".","w","=","dot","(","Cv",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Cx",".","zw",";","}","vec2","CF","(","sampler2D","CA",",","vec2","CB",",","vec2","CC",",","float","CD",")","{","vec2","CE",";","CE","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","CC","+","CB",";","CE","=","SMAA_AREATEX_PIXEL_SIZE","*","CE","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","CE",".","x","+=","0.5",";","CE",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","CD",";","return","texture2D","(","CA",",","CE",",","0.0",")",".","rg",";","}","vec2","CR","(","sampler2D","CG",",","sampler2D","CH",",","vec2","CI",",","vec2","CJ",",","vec4","CK",")","{","vec4","CL",",","CM",",","CN",";","vec2","CO",",","CP",",","CQ",";","CO","=","vec2","(","0.0",",","0.0",")",";","if","(","CJ",".","r",">","0.0",")","{","CL",".","xz","=","Cr","(","CG",",","CI",",","vec2","(","-","1.0",",","1.0",")",",","CP",")",";","CL",".","x","+=","float","(","CP",".","y",">","0.9",")",";","}","else","CL",".","xz","=","vec2","(","0.0",",","0.0",")",";","CL",".","yw","=","Cr","(","CG",",","CI",",","vec2","(","1.0",",","-","1.0",")",",","CP",")",";","if","(","CL",".","x","+","CL",".","y",">","2.0",")","{","CM","=","vec4","(","-","CL",".","x","+","0.25",",","CL",".","x",",","CL",".","y",",","-","CL",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","CI",".","xyxy",";","CN",".","xy","=","texture2D","(","CG",",","CM",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","CN",".","zw","=","texture2D","(","CG",",","CM",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","CN",".","yxwz","=","Ci","(","CN",".","xyzw",")",";","CQ","=","vec2","(","2.0",",","2.0",")","*","CN",".","xz","+","CN",".","yw",";","BO","(","bvec2","(","step","(","0.9",",","CL",".","zw",")",")",",","CQ",",","vec2","(","0.0",",","0.0",")",")",";","CO","+=","CF","(","CH",",","CL",".","xy",",","CQ",",","CK",".","z",")",";","}","CL",".","xz","=","Cz","(","CG",",","CI",",","vec2","(","-","1",",","-","1",")",",","CP",")",";","if","(","texture2D","(","CG",",","CI","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","CL",".","yw","=","Cz","(","CG",",","CI",",","vec2","(","1",",","1",")",",","CP",")",";","CL",".","y","+=","float","(","CP",".","y",">","0.9",")",";","}","else","CL",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","CL",".","x","+","CL",".","y",">","2.0",")","{","CN","=","vec4","(","-","CL",".","x",",","-","CL",".","x",",","CL",".","y",",","CL",".","y",")","*","u_texel_size",".","xyxy","+","CI",".","xyxy",";","CM",".","x","=","texture2D","(","CG",",","CN",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","CM",".","y","=","texture2D","(","CG",",","CN",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","CM",".","zw","=","texture2D","(","CG",",","CN",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","CP","=","vec2","(","2.0",",","2.0",")","*","CM",".","xz","+","CM",".","yw",";","BO","(","bvec2","(","step","(","0.9",",","CL",".","zw",")",")",",","CP",",","vec2","(","0",",","0",")",")",";","CO","+=","CF","(","CH",",","CL",".","xy",",","CP",",","CK",".","w",")",".","gr",";","}","return","CO",";","}"]}]}}]},{type:"textline",tokens:["float","CX","(","sampler2D","CS",",","vec2","CT",",","float","CU",")","{","vec2","CV",",","CW",";","CV","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","CW","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","CU",",","1.0",")",";","CV","+=","vec2","(","-","1.0",",","1.0",")",";","CW","+=","vec2","(","0.5",",","-","0.5",")",";","CV","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","CW","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","CS",",","CV","*","CT","+","CW",",","0.0",")",".","r",";","}","float","De","(","sampler2D","CY",",","sampler2D","CZ",",","vec2","C_",",","float","Da",")","{","float","Db",";","vec2","Dc",";","Dc","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Dd","=","0",";","Dd","<","SMAA_MAX_SEARCH_STEPS",";","Dd","++",")","{","if","(","C_",".","x",">","Da","&&","Dc",".","g",">","0.8281","&&","Dc",".","r","==","0.0",")","{","Dc","=","texture2D","(","CY",",","C_",",","0.0",")",".","rg",";","C_","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","C_",";","}","}","Db","=","-","(","255.0","/","127.0",")","*","CX","(","CZ",",","Dc",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","Db","+","C_",".","x",";","}","float","Dm","(","sampler2D","Df",",","sampler2D","Dg",",","vec2","Dh",",","float","Di",")","{","float","Dj",";","vec2","Dk",";","Dk","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Dl","=","0",";","Dl","<","SMAA_MAX_SEARCH_STEPS",";","Dl","++",")","{","if","(","Dh",".","x","<","Di","&&","Dk",".","g",">","0.8281","&&","Dk",".","r","==","0.0",")","{","Dk","=","texture2D","(","Df",",","Dh",",","0.0",")",".","rg",";","Dh","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Dh",";","}","}","Dj","=","-","(","255.0","/","127.0",")","*","CX","(","Dg",",","Dk",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Dj","+","Dh",".","x",";","}","float","Du","(","sampler2D","Dn",",","sampler2D","Do",",","vec2","Dp",",","float","Dq",")","{","float","Dr",";","vec2","Ds",";","Ds","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Dt","=","0",";","Dt","<","SMAA_MAX_SEARCH_STEPS",";","Dt","++",")","{","if","(","Dp",".","y",">","Dq","&&","Ds",".","r",">","0.8281","&&","Ds",".","g","==","0.0",")","{","Ds","=","texture2D","(","Dn",",","Dp",",","0.0",")",".","rg",";","Dp","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Dp",";","}","}","Dr","=","-","(","255.0","/","127.0",")","*","CX","(","Do",",","Ds",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Dr","+","Dp",".","y",";","}","float","DC","(","sampler2D","Dv",",","sampler2D","Dw",",","vec2","Dx",",","float","Dy",")","{","float","Dz",";","vec2","DA",";","DA","=","vec2","(","1.0",",","0.0",")",";","for","(","int","DB","=","0",";","DB","<","SMAA_MAX_SEARCH_STEPS",";","DB","++",")","{","if","(","Dx",".","y","<","Dy","&&","DA",".","r",">","0.8281","&&","DA",".","g","==","0.0",")","{","DA","=","texture2D","(","Dv",",","Dx",",","0.0",")",".","rg",";","Dx","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Dx",";","}","}","Dz","=","-","(","255.0","/","127.0",")","*","CX","(","Dw",",","DA",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","Dz","+","Dx",".","y",";","}","vec2","DJ","(","sampler2D","DD",",","vec2","DE",",","float","DF",",","float","DG",",","float","DH",")","{","vec2","DI",";","DI","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","BT","(","4.0","*","vec2","(","DF",",","DG",")",")","+","DE",";","DI","=","SMAA_AREATEX_PIXEL_SIZE","*","DI","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","DI",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","DH","+","DI",".","y",";","return","texture2D","(","DD",",","DI",",","0.0",")",".","rg",";","}","void","DQ","(","sampler2D","DK",",","inout","vec2","DL",",","vec4","DM",",","vec2","DN",")","{","vec2","DO",",","DP",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["DO","=","step","(","DN",".","xy",",","DN",".","yx",")",";","DP","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","DO",";","DP","/=","DO",".","x","+","DO",".","y",";","DO","=","vec2","(","1.0",",","1.0",")",";","DO",".","x","-=","DP",".","x","*","texture2D","(","DK",",","DM",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","DO",".","x","-=","DP",".","y","*","texture2D","(","DK",",","DM",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","DO",".","y","-=","DP",".","x","*","texture2D","(","DK",",","DM",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","DO",".","y","-=","DP",".","y","*","texture2D","(","DK",",","DM",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","DL","*=","clamp","(","DO",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","DX","(","sampler2D","DR",",","inout","vec2","DS",",","vec4","DT",",","vec2","DU",")","{","vec2","DV",",","DW",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["DV","=","step","(","DU",".","xy",",","DU",".","yx",")",";","DW","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","DV",";","DW","/=","DV",".","x","+","DV",".","y",";","DV","=","vec2","(","1.0",",","1.0",")",";","DV",".","x","-=","DW",".","x","*","texture2D","(","DR",",","DT",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","DV",".","x","-=","DW",".","y","*","texture2D","(","DR",",","DT",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","DV",".","y","-=","DW",".","x","*","texture2D","(","DR",",","DT",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","DV",".","y","-=","DW",".","y","*","texture2D","(","DR",",","DT",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","DS","*=","clamp","(","DV",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ek","(","vec2","DY",",","vec2","DZ",",","sampler2D","D_",",","sampler2D","Ea",",","sampler2D","Eb",",","vec4","Ec",")","{","float","Ed",",","Ee",";","vec3","Ef",";","vec2","Eg",",","Eh",",","Ei",";","vec4","Ej",";","Ej","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","Eg","=","texture2D","(","D_",",","DY",")",".","rg",";","if","(","Eg",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ej",".","rg","=","CR","(","D_",",","Ea",",","DY",",","Eg",",","Ec",")",";","if","(","Ej",".","r","==","-","Ej",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Ef",".","x","=","De","(","D_",",","Eb",",","Bw",".","xy",",","By",".","x",")",";","Ef",".","y","=","Bx",".","y",";","Eh",".","x","=","Ef",".","x",";","Ed","=","texture2D","(","D_",",","Ef",".","xy",",","0.0",")",".","r",";","Ef",".","z","=","Dm","(","D_",",","Eb",",","Bw",".","zw",",","By",".","y",")",";","Eh",".","y","=","Ef",".","z",";","Eh","=","abs","(","BT","(","Eh","/","u_texel_size",".","xx","-","DZ",".","xx",")",")",";","Ei","=","sqrt","(","Eh",")",";","Ee","=","texture2D","(","D_",",","Ef",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Ej",".","rg","=","DJ","(","Ea",",","Ei",",","Ed",",","Ee",",","Ec",".","y",")",";","Ef",".","y","=","DY",".","y",";","DQ","(","D_",",","Ej",".","rg",",","Ef",".","xyzy",",","Eh",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Eg",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Eg",".","r",">","0.0",")","{",";","Ef",".","y","=","Du","(","D_",",","Eb",",","Bx",".","xy",",","By",".","z",")",";","Ef",".","x","=","Bw",".","x",";","Eg",".","x","=","Ef",".","y",";","Ee","=","texture2D","(","D_",",","Ef",".","xy",",","0.0",")",".","g",";","Ef",".","z","=","DC","(","D_",",","Eb",",","Bx",".","zw",",","By",".","w",")",";","Eg",".","y","=","Ef",".","z",";","Eg","=","abs","(","BT","(","Eg","/","u_texel_size",".","yy","-","DZ",".","yy",")",")",";","Eh","=","sqrt","(","Eg",")",";","Ed","=","texture2D","(","D_",",","Ef",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Ej",".","ba","=","DJ","(","Ea",",","Eh",",","Ee",",","Ed",",","Ec",".","x",")",";","Ef",".","x","=","DY",".","x",";","DX","(","D_",",","Ej",".","ba",",","Ef",".","xyxz",",","Eg",")",";","}","return","Ej",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ew","(","vec2","El",",","sampler2D","Em",",","sampler2D","En"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Eo"]}]}}]},{type:"textline",tokens:[")","{","bool","Ep",";","vec2","Eq",",","Er",",","Es",";","vec4","Et",",","Eu",",","Ev",";","Et",".","x","=","texture2D","(","En",",","Bv",".","xy",")",".","a",";","Et",".","y","=","texture2D","(","En",",","Bv",".","zw",")",".","g",";","Et",".","wz","=","texture2D","(","En",",","El",")",".","xz",";","if","(","dot","(","Et",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","Eu","=","texture2D","(","Em",",","El",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Ev","=","texture2D","(","Eo",",","bM",")",";","Eq","=","2.0","*","ag","(","Ev",")","-","1.0",";","Eu",".","a","=","sqrt","(","2.0","*","length","(","Eq",")",")",";"]}]}}]},{type:"textline",tokens:["return","Eu",";","}","else","{","Ep","=","max","(","Et",".","x",",","Et",".","z",")",">","max","(","Et",".","y",",","Et",".","w",")",";","Eu","=","vec4","(","0.0",",","Et",".","y",",","0.0",",","Et",".","w",")",";","Eq","=","Et",".","yw",";","BO","(","bvec4","(","Ep",",","Ep",",","Ep",",","Ep",")",",","Eu",",","vec4","(","Et",".","x",",","0.0",",","Et",".","z",",","0.0",")",")",";","BO","(","bvec2","(","Ep",",","Ep",")",",","Eq",",","Et",".","xz",")",";","Eq","/=","dot","(","Eq",",","vec2","(","1.0",",","1.0",")",")",";","Eu","=","Eu","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","El",".","xyxy",";","Et","=","Eq",".","x","*","texture2D","(","Em",",","Eu",".","xy",",","0.0",")",";","Et","+=","Eq",".","y","*","texture2D","(","Em",",","Eu",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Ev","=","texture2D","(","Eo",",","Eu",".","xy",")",";","Er","=","2.0","*","ag","(","Ev",")","-","1.0",";","Es","=","Eq",".","x","*","Er",";","Ev","=","texture2D","(","Eo",",","Eu",".","zw",")",";","Er","=","2.0","*","ag","(","Ev",")","-","1.0",";","Es","+=","Eq",".","y","*","Er",";","Et",".","a","=","sqrt","(","2.0","*","length","(","Es",")",")",";"]}]}}]},{type:"textline",tokens:["return","Et",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","EG","(","vec2","Ex",",","sampler2D","Ey",",","sampler2D","Ez"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","EA"]}]}}]},{type:"textline",tokens:[")","{","float","EB",";","vec2","EC",";","vec4","ED",",","EE",",","EF",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ED","=","texture2D","(","EA",",","bM",")",";","EC","=","2.0","*","ag","(","ED",")","-","1.0",";","ED","=","texture2D","(","Ey",",","Ex",")",";","EE","=","texture2D","(","Ez",",","Ex","-","EC",")",";","EB","=","abs","(","ED",".","a","*","ED",".","a","-","EE",".","a","*","EE",".","a",")","/","2.0",";","EB","=","0.5","*","clamp","(","1.0","-","sqrt","(","EB",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","EF","=","mix","(","ED",",","EE",",","EB",")",";","EF",".","a","=","1.0",";","return","EF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ED","=","texture2D","(","Ey",",","Ex",")",";","EE","=","texture2D","(","Ez",",","Ex",")",";","return","mix","(","ED",",","EE",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","EH",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EH","=","vec4","(","Cg","(","bM",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EH","=","Ek","(","bM",",","Bz",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EH","=","Ew","(","bM",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EH","=","vec4","(","EG","(","bM",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EH","=","texture2D","(","u_color",",","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","EH",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Bw",";","varying","vec4","Bx",";","varying","vec4","By",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Bz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ae","(","vec2","z_",")","{","Bw","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","z_",".","xyxy",";","Bx","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","z_",".","xyxy",";","By","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","z_",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ah","(","vec2","Af",",","out","vec2","Ag",")","{","Ag","=","Af","/","u_texel_size",";","Bw","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","Af",".","xyxy",";","Bx","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","Af",".","xyxy",";","By","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Bw",".","xz",",","Bx",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Aj","(","vec2","Ai",")","{","Bv","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Ai",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bM","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ae","(","bM",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ah","(","bM",",","Bz",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aj","(","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","Ae","(","in","vec2","z_",")","{","return","Bq","(","u_depth",",","z_",",","u_camera_range",")",";","}","void","main","(",")","{","vec3","Af",",","Ag",",","Ah",";","float","Ai",",","Aj",",","Ak",",","Al",",","Am",",","An",",","Ao",";","Ai","=","texture2D","(","u_color",",","bM",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ai",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["Af","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bM","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","Aj","=","Ae","(","bM",")",";","Ak","=","Aj","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ap","=","8.0",";","const","int","Aq","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ap","=","16.0",";","const","int","Aq","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ap","=","24.0",";","const","int","Aq","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ap","=","32.0",";","const","int","Aq","=","4",";"]}]}}]},{type:"textline",tokens:["Al","=","u_ssao_radius_increase","*","0.001",";","const","float","Ar","=","1.0","+","2.4","/","Ap",";","Am","=","0.0",";","for","(","int","As","=","0",";","As","<","Aq",";","As","++",")","for","(","int","At","=","-","1",";","At","<=","1",";","At","+=","2",")","for","(","int","BA","=","-","1",";","BA","<=","1",";","BA","+=","2",")","for","(","int","BB","=","-","1",";","BB","<=","1",";","BB","+=","2",")","{","Ag","=","reflect","(","normalize","(","vec3","(","At",",","BA",",","BB",")",")",",","Af",")","*","(","Al","*=","Ar",")",";","Ah","=","vec3","(","bM",",","Ak",")",";","Ah","+=","vec3","(","Ag",".","xy",",","Ag",".","z","*","Ak","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Ah",".","z","-=","1.4","*","(","Ah",".","z","-","Ak",")","*","step","(","Ak",",","Ah",".","z",")",";"]}]}}]},{type:"textline",tokens:["An","=","Ae","(","Ah",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","Ao","=","clamp","(","(","Ak","-","An",")","/","An",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Am","+=","mix","(","1.0",",","Ao",",","step","(","An",",","Ah",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","+=","mix","(","step","(","Ah",".","z",",","An",")",",","0.5",",","Ao",")",";"]}]}}]},{type:"textline",tokens:["}","Am","=","Am","/","Ap",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","clamp","(","Am","*","Am","+","0.6","*","Am",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","clamp","(","Am","*","Am","+","Am",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Aj","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","Aj",")",";","Am","=","mix","(","1.0",",","Am",",","Aj",")",";","gl_FragColor","=","vec4","(","Ai",",","Am",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","Ae","(","in","vec2","z_",")","{","return","Bq","(","u_depth",",","z_",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Af",",","Ag",";","float","Ah",",","Ai",",","Aj",",","Ak",",","Al",",","Am",",","An",";","Ah","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","Ae","(","bM",")",";","Aj","=","0.0",";","Ak","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["Af","=","vec2","(","-","2.0",")",";","for","(","int","Ao","=","0",";","Ao","<","4",";","++","Ao",")","{","for","(","int","Ap","=","0",";","Ap","<","4",";","++","Ap",")","{","Ag","=","(","Af","+","vec2","(","float","(","Ao",")",",","float","(","Ap",")",")",")","*","u_texel_size",";","Al","=","texture2D","(","u_ssao_mask",",","bM","+","Ag",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","Ae","(","bM","+","Ag",")",";","An","=","1.0","-","clamp","(","abs","(","Am","-","Ai",")","*","Ak",",","0.0",",","1.0",")",";","Ah","+=","Al","*","An",";","Aj","+=","An",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ah","+=","Al",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","r",",","Ah","/","Aj",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","r",",","Ah","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bM",";","void","main","(",")","{","vec2","z_",";","vec4","Ae",",","Af",";","float","Ag",";","Ag","=","texture2D","(","u_depth",",","bM",")",".","x",";","Ae","=","vec4","(","bM","*","2.0","-","1.0",",","2.0","*","Ag","-","1.0",",","1.0",")",";","Af","=","u_view_proj_inverse","*","Ae",";","Af","=","Af","/","Af",".","w",";","Af","=","u_view_proj_prev","*","Af",";","Af","/=","Af",".","w",";","z_","=","(","Ae",".","xy","-","Af",".","xy",")","/","4.0","+","0.5",";","z_","=","clamp","(","z_",",","0.0",",","1.0",")",";","gl_FragColor","=","V","(","z_",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","a","=","0.0",";","float","b","=","1.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","vec4","k","(","in","vec4","j",")","{","return","vec4","(","-","j",".","xyz",",","j",".","w",")","/","dot","(","j",",","j",")",";","}","vec3","p","(","vec4","l",",","vec4","m",",","vec4","n",")","{","vec3","o",";","o","=","n",".","xyz","*","l",".","w",";","o","=","i","(","m",",","o",")",";","o","+=","l",".","xyz","*","n",".","w",";","return","o",";","}","vec3","v","(","vec4","q",",","vec4","r",",","vec4","s",")","{","vec4","t",";","vec3","u",";","u","=","s",".","xyz","-","q",".","xyz","*","s",".","w",";","t","=","k","(","r",")",";","u","=","i","(","t",",","u",")",";","u","/=","q",".","w",";","return","u",";","}","mat4","w","(",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","y","(","float","x",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","cos","(","x",")",",","sin","(","x",")",",","a",",","a",",","-","sin","(","x",")",",","cos","(","x",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","A","(","float","z",")","{","return","mat4","(","cos","(","z",")",",","a",",","-","sin","(","z",")",",","a",",","a",",","b",",","a",",","a",",","sin","(","z",")",",","a",",","cos","(","z",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","C","(","float","B",")","{","return","mat4","(","cos","(","B",")",",","sin","(","B",")",",","a",",","a",",","-","sin","(","B",")",",","cos","(","B",")",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","c","E","(","in","c","D",")","{","return","c","(","D",".","a",",","D",".","b",",","normalize","(","D",".","c",")",",","normalize","(","D",".","d",")",",","normalize","(","D",".","e",")",",","D",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","L","(","vec4","F",")","{","vec3","G",";","float","H",",","I",",","J",";","H","=","F",".","x",";","I","=","F",".","y",";","J","=","F",".","w",";","G",".","x","=","(","H","+","J",")","/","2.0",";","G",".","y","=","(","I","+","J",")","/","2.0",";","G",".","z","=","J",";","return","G",";","}"]}]}}]},{type:"textline",tokens:["mat4","O","(","mat3","M",")","{","mat4","N",";","N","[","0","]","[","0","]","=","(","b","-","(","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","1","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","2","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","3","]","=","a",";","N","[","1","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","-","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","1","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","2","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","3","]","=","a",";","N","[","2","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","1","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","2","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","3","]","=","a",";","N","[","3","]","[","0","]","=","M","[","0","]","[","0","]",";","N","[","3","]","[","1","]","=","M","[","0","]","[","1","]",";","N","[","3","]","[","2","]","=","M","[","0","]","[","2","]",";","N","[","3","]","[","3","]","=","b",";","return","N",";","}"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","P","=","255.0",";","float","Q","=","0.0",";","float","R","=","1.0",";","vec4","V","(","const","in","float","S",")","{","vec4","T",",","U",";","T","=","vec4","(","P","*","P","*","P",",","P","*","P",",","P",",","R",")",";","U","=","vec4","(","Q",",","R","/","P",",","R","/","P",",","R","/","P",")",";","T","=","fract","(","S","*","T",")",";","T","-=","T",".","xxyz","*","U",";","return","T",";","}","float","Z","(","const","in","vec4","W",")","{","vec4","X",";","float","Y",";","X","=","vec4","(","R","/","(","P","*","P","*","P",")",",","R","/","(","P","*","P",")",",","R","/","P",",","R",")",";","Y","=","dot","(","W",",","X",")",";","return","Y",";","}","vec4","V","(","const","in","vec2","_",")","{","vec4","aa",";","vec2","ab",",","ac",";","ab","=","vec2","(","P",",","R",")",";","ac","=","vec2","(","Q",",","R","/","P",")",";","aa","=","fract","(","_",".","xxyy","*","ab",".","xyxy",")",";","aa","-=","aa",".","xxzz","*","ac",".","xyxy",";","if","(","_",".","r","==","R",")","aa",".","rg","=","vec2","(","Q",",","R",")",";","if","(","_",".","g","==","R",")","aa",".","ba","=","vec2","(","Q",",","R",")",";","return","aa",";","}","vec2","ag","(","const","in","vec4","ad",")","{","vec2","ae",",","af",";","af","=","vec2","(","R","/","P",",","R",")",";","ae",".","r","=","dot","(","ad",".","rg",",","af",")",";","ae",".","g","=","dot","(","ad",".","ba",",","af",")",";","return","ae",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ah","=","0.0",";","float","ai","=","1.0",";","vec4","ak","(","vec4","aj",")","{","return","aj","-","floor","(","aj","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec3","ak","(","vec3","al",")","{","return","al","-","floor","(","al","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec2","ak","(","vec2","am",")","{","return","am","-","floor","(","am","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec4","ao","(","vec4","an",")","{","return","an","-","floor","(","an","*","(","ai","/","7.0",")",")","*","7.0",";","}","vec4","aq","(","vec4","ap",")","{","return","ak","(","(","34.0","*","ap","+","5.0",")","*","ap",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","ay","(","vec2","ar",")","{","vec4","as",",","at",",","au",",","av",";","vec2","aw",",","ax",";","aw","=","ak","(","floor","(","ar",")",")",";","ax","=","fract","(","ar",")",";","as","=","ax",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","at","=","ax",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","au","=","aq","(","aw",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","au","=","aq","(","au","+","aw",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","av","=","ao","(","au",")","*","K","+","K2",";","au","=","ao","(","floor","(","au","*","K",")",")","*","K","+","K2",";","av","=","as","+","JITTER","*","av",";","au","=","at","+","JITTER","*","au",";","au","=","av","*","av","+","au","*","au",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","min","(","au",".","xy",",","au",".","zw",")",";","au",".","x","=","min","(","au",".","x",",","au",".","y",")",";","return","au",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","(","au",".","x","<","au",".","y",")","?","au",".","xy",":","au",".","yx",";","au",".","xz","=","(","au",".","x","<","au",".","z",")","?","au",".","xz",":","au",".","zx",";","au",".","xw","=","(","au",".","x","<","au",".","w",")","?","au",".","xw",":","au",".","wx",";","au",".","y","=","min","(","au",".","y",",","au",".","z",")",";","au",".","y","=","min","(","au",".","y",",","au",".","w",")",";","return","sqrt","(","au",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aH","(","vec2","az",",","float","aA",")","{","vec4","aB",",","aC",",","aD",",","aE",";","vec2","aF",",","aG",";","aF","=","ak","(","floor","(","az",")",")",";","aG","=","fract","(","az",")",";","aB","=","aG",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","aC","=","aG",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","aD","=","aq","(","aF",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","aD","=","aq","(","aD","+","aF",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","aE","=","ao","(","aD",")","*","K","+","K2",";","aD","=","ao","(","floor","(","aD","*","K",")",")","*","K","+","K2",";","aE","=","aB","+","JITTER","*","aE",";","aD","=","aC","+","JITTER","*","aD",";","aC","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aB","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aD","=","aE","*","aE","+","aD","*","aD",";","aC",".","xy","=","min","(","aC",".","xy",",","aC",".","zw",")",";","aC",".","x","=","min","(","aC",".","x",",","aC",".","y",")",";","aB",".","xy","=","min","(","aB",".","xy",",","aB",".","zw",")",";","aB",".","x","=","min","(","aB",".","x",",","aB",".","y",")",";","aD",".","xy","=","min","(","aD",".","xy",",","aD",".","zw",")",";","aD",".","x","=","min","(","aD",".","x",",","aD",".","y",")",";","return","vec3","(","aC",".","x",",","aB",".","x",",","aD",".","x",")",";","}","vec3","aJ","(","vec3","aI",")","{","return","ak","(","(","(","aI","*","34.0",")","+","ai",")","*","aI",")",";","}","float","aU","(","vec2","aK",")","{","vec3","aL",",","aM",",","aN",",","aO",";","vec4","aP",";","vec2","aQ",",","aR",",","aS",";","const","vec4","aT","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","aQ","=","floor","(","aK","+","dot","(","aK",",","aT",".","yy",")",")",";","aR","=","aK","-","aQ","+","dot","(","aQ",",","aT",".","xx",")",";","aS","=","(","aR",".","x",">","aR",".","y",")","?","vec2","(","ai",",","ah",")",":","vec2","(","ah",",","ai",")",";","aP","=","aR",".","xyxy","+","aT",".","xxzz",";","aP",".","xy","-=","aS",";","aQ","=","ak","(","aQ",")",";","aL","=","aJ","(","aJ","(","aQ",".","y","+","vec3","(","ah",",","aS",".","y",",","ai",")",")","+","aQ",".","x","+","vec3","(","ah",",","aS",".","x",",","ai",")",")",";","aM","=","max","(","0.5","-","vec3","(","dot","(","aR",",","aR",")",",","dot","(","aP",".","xy",",","aP",".","xy",")",",","dot","(","aP",".","zw",",","aP",".","zw",")",")",",","ah",")",";","aM","=","aM","*","aM",";","aM","=","aM","*","aM",";","aL","=","2.0","*","fract","(","aL","*","aT",".","www",")","-","ai",";","aN","=","abs","(","aL",")","-","0.5",";","aO","=","floor","(","aL","+","0.5",")",";","aO","=","aL","-","aO",";","aM","*=","1.79284291400159","-","0.85373472095314","*","(","aO","*","aO","+","aN","*","aN",")",";","aL",".","x","=","aO",".","x","*","aR",".","x","+","aN",".","x","*","aR",".","y",";","aL",".","yz","=","aO",".","yz","*","aP",".","xz","+","aN",".","yz","*","aP",".","yw",";","return","130.0","*","dot","(","aM",",","aL",")",";","}","vec2","aY","(","vec2","aV",")","{","float","aW",",","aX",";","aW","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")",")",";","aX","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","aW","=","fract","(","sin","(","aW",")","*","43758.5453",")","*","2.0","-","ai",";","aX","=","fract","(","sin","(","aX",")","*","43758.5453",")","*","2.0","-","ai",";","return","vec2","(","aW",",","aX",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","bp","(","inout","vec3","aZ",",","float","a_",",","float","ba",",","float","bb",",","vec3","bc",",","vec3","bd",",","vec3","be",",","vec4","bf",",","vec3","bg",",","float","bh",")","{","float","bi",",","bj",",","bk",";","vec2","bl",",","bm",";","vec3","bn",";","vec4","bo",";","if","(","bh",">","CAUSTICS_VIEW_DISTANCE",")","return",";","bo","=","bf",";","bn","=","bg","+","bc",";","bn",".","xz","=","10.0","*","sin","(","0.1","*","bn",".","xz",")",";","bn","=","bn","+","2.0","*","cross","(","-","bo",".","xyz",",","cross","(","-","bo",".","xyz",",","bn",")","+","bo",".","w","*","bn",")",";","bl","=","bn",".","xz",";","bn","=","bd",";","bi","=","max","(","dot","(","bc",",","bn",")",",","0.0",")",";","bj","=","0.025",";","bm","=","CAUST_SPEED","*","ba",";","bl",".","s","+=","0.25","*","sin","(","dot","(","bg","+","ba",",","vec3","(","1.0",")",")",")",";","bl",".","t","+=","0.35","*","(","-","sin","(","dot","(","bg","-","ba",",","vec3","(","-","0.7",")",")",")",")",";","bl",".","st","+=","0.15","*","cos","(","4.0","*","a_","-","bm",".","x",")","+","1.5","*","sin","(","a_","-","0.3","*","bm",".","y",")",";","bk","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","a_",",","0.0",")",")",";","bn","=","aH","(","(","bl","/","bk",")",",","bj",")",";","bn","*=","CAUST_BRIGHT",";","bn","*=","bn",";","bj","=","min","(","0.25","*","a_",",","-","a_",")","+","1.0",";","bj","=","max","(","bj",",","0.0",")",";","bi","=","bb","*","bi",";","bk","=","max","(","sign","(","a_",")",",","0.0",")",";","bi","=","bi","+","max","(","0.5","*","sign","(","-","bc",".","y",")","*","bk",",","0.0",")",";","bi","=","min","(","bi",",","1.0",")",";","aZ","+=","be","*","bn","*","bj","*","bi",";","}"]}]},exports["include/color_util.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","br","(","inout","vec3","bq",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bq","=","max","(","vec3","(","0.0",")",",","bq",")",";","bq","=","pow","(","bq",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","br","(","inout","float","bs",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","pow","(","max","(","0.0",",","bs",")",",","2.2",")",";"]}]}}]},{type:"textline",tokens:["}","void","bu","(","inout","vec3","bt",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bt","=","max","(","vec3","(","0.0",")",",","bt",")",";","bt","=","pow","(","bt",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","bx","(","inout","vec3","bv",",","in","float","bw",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","bv","*","bw",";"]}]}}]},{type:"textline",tokens:["}","float","bB","(","vec4","by",")","{","float","bz",";","vec3","bA",";","bA","=","vec3","(","0.299",",","0.587",",","0.114",")",";","bz","=","dot","(","by",".","rgb",",","bA",")",";","return","bz",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bO","=","0.1",";","const","float","bP","=","0.1",";","const","float","bQ","=","-","0.01",";","const","float","bR","=","0.05",";","vec4","bS","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bT","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bU","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bV","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bW","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bX","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bY","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bZ","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","cb","(","vec2","b_",",","float","ca",")","{","return","all","(","lessThanEqual","(","b_",",","vec2","(","1.0","+","ca",")",")",")","&&","all","(","greaterThanEqual","(","b_",",","vec2","(","0.0","-","ca",")",")",")",";","}","float","ck","(","float","cc",",","float","cd",",","mat2","ce",",","vec3","cf",",","float","cg",",","PRECISION","sampler2D","ch",")","{","vec2","ci",",","cj",";","cj",".","x","=","cc",";","cj",".","y","=","cd",";","cj","=","ce","*","cj",";","ci","=","cf",".","xy","+","cj","*","cg","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","cb","(","ci",",","bQ",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","cf",".","z",",","texture2D","(","ch",",","ci",")",".","r",")",";","}","float","ct","(","vec3","cl",",","PRECISION","sampler2D","cm",",","float","cn",")","{","mat2","co",";","float","cp",",","cq",",","cr",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","cl",".","z",">","u_perspective_cast_far_bound",")","return","1.0",";","else","{"]}]}}]},{type:"textline",tokens:["cl",".","z","=","clamp","(","cl",".","z",",","0.0",",","1.0",")",";","cp","=","0.0",";","cq","=","aY","(","cl",".","xy",")",".","x","*","M_PI",";","cr","=","cos","(","cq",")",";","cq","=","sin","(","cq",")",";","co","=","mat2","(","cr",",","cq",",","-","cq",",","cr",")",";","for","(","int","cs","=","0",";","cs","<","4",";","cs","++",")","{","cp","+=","ck","(","bS","[","cs","]",",","bW","[","cs","]",",","co",",","cl",",","cn",",","cm",")",";","cp","+=","ck","(","bT","[","cs","]",",","bX","[","cs","]",",","co",",","cl",",","cn",",","cm",")",";","cp","+=","ck","(","bU","[","cs","]",",","bY","[","cs","]",",","co",",","cl",",","cn",",","cm",")",";","cp","+=","ck","(","bV","[","cs","]",",","bZ","[","cs","]",",","co",",","cl",",","cn",",","cm",")",";","}","cp","/=","16.0",";","return","clamp","(","cp",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","1.0",";","}","float","cI","(","vec3","cu",",","PRECISION","sampler2D","cv",",","vec3","cw",",","PRECISION","sampler2D","cx",",","float","cy",",","float","cz",",","float","cA",")","{","mat2","cB",";","float","cC",",","cD",",","cE",",","cF",";","cu",".","z","=","clamp","(","cu",".","z",",","0.0",",","1.0",")",";","cw",".","z","=","clamp","(","cw",".","z",",","0.0",",","1.0",")",";","cC","=","0.0",";","cD","=","0.0",";","cE","=","aY","(","cu",".","xy",")",".","x","*","M_PI",";","cF","=","cos","(","cE",")",";","cE","=","sin","(","cE",")",";","cB","=","mat2","(","cF",",","cE",",","-","cE",",","cF",")",";","for","(","int","cG","=","0",";","cG","<","4",";","cG","++",")","{","cC","+=","ck","(","bS","[","cG","]",",","bW","[","cG","]",",","cB",",","cu",",","cy",",","cv",")",";","cC","+=","ck","(","bT","[","cG","]",",","bX","[","cG","]",",","cB",",","cu",",","cy",",","cv",")",";","cC","+=","ck","(","bU","[","cG","]",",","bY","[","cG","]",",","cB",",","cu",",","cy",",","cv",")",";","cC","+=","ck","(","bV","[","cG","]",",","bZ","[","cG","]",",","cB",",","cu",",","cy",",","cv",")",";","}","for","(","int","cH","=","0",";","cH","<","4",";","cH","++",")","{","cD","+=","ck","(","bS","[","cH","]",",","bW","[","cH","]",",","cB",",","cw",",","cz",",","cx",")",";","cD","+=","ck","(","bT","[","cH","]",",","bX","[","cH","]",",","cB",",","cw",",","cz",",","cx",")",";","cD","+=","ck","(","bU","[","cH","]",",","bY","[","cH","]",",","cB",",","cw",",","cz",",","cx",")",";","cD","+=","ck","(","bV","[","cH","]",",","bZ","[","cH","]",",","cB",",","cw",",","cz",",","cx",")",";","}","cC","=","mix","(","cC",",","cD",",","cA",")",";","cC","/=","16.0",";","return","clamp","(","cC",",","0.0",",","1.0",")",";","}","float","cM","(","vec2","cJ",")","{","float","cK",",","cL",";","cK","=","min","(","cJ",".","x",",","cJ",".","y",")",";","cL","=","min","(","1.0","-","cJ",".","x",",","1.0","-","cJ",".","y",")",";","return","min","(","cK",",","cL",")",";","}","float","cP","(","float","cN",",","float","cO",")","{","if","(","cO",">=","0.0","&&","cO","<=","bP",")","cN","=","(","cN","-","1.0",")","/","bP","*","cO","+","1.0",";","return","cN",";","}","float","c_","(","vec3","cQ",",","vec3","cR",",","PRECISION","sampler2D","cS",",","PRECISION","sampler2D","cT",",","float","cU",",","float","cV",",","float","cW",",","float","cX",")","{","float","cY",",","cZ",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["cZ","=","cM","(","cQ",".","xy",")",";","if","(","-","cX",">","cW","&&","cZ",">=","0.0","&&","cZ","<=","bO","&&","cb","(","cR",".","xy",",","0.0",")",")","{","cZ","=","1.0","-","cZ","/","bO",";","cY","=","cI","(","cQ",",","cS",",","cR",",","cT",",","cU",",","cV",",","cZ",")",";","}","else"]}]}}]},{type:"textline",tokens:["cY","=","ct","(","cQ",",","cS",",","cU",")",";","return","cY",";","}","float","dh","(","vec3","da",",","PRECISION","sampler2D","db",",","float","dc",",","float","dd",",","float","de",")","{","float","df",",","dg",";","df","=","ct","(","da",",","db",",","dc",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","de",">","dd",")","{","dg","=","cM","(","da",".","xy",")",";","df","=","cP","(","df",",","dg",")",";","}"]}]}}]},{type:"textline",tokens:["return","df",";","}","float","dp","(","float","di",")","{","vec3","dj",",","dk",",","dl",",","dm",";","float","dn",";","dn","=","1.0",";","dj","=","bI",".","xyz","/","bI",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","bJ",".","xyz","/","bJ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dl","=","bK",".","xyz","/","bK",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","bL",".","xyz","/","bL",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","cb","(","dj",".","xy",",","0.0",")",")","{","dn","=","c_","(","dj",",","dk",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","di",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","cb","(","dj",".","xy",",","bR",")",")","{","dn","=","dh","(","dj",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","di",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","cb","(","dk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dn","=","c_","(","dk",",","dl",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","di",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dn","=","dh","(","dk",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","di",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","cb","(","dl",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dn","=","c_","(","dl",",","dm",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","di",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dn","=","dh","(","dl",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","di",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","cb","(","dm",".","xy",",","0.0",")",")","dn","=","dh","(","dm",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","di",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","dn",";","}"]}]}}]},{type:"textline",tokens:["float","du","(","inout","vec3","dq",")","{","float","dr",";","vec3","ds",";","vec2","dt",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","texture2DProj","(","u_shadow_mask",",","bG",")",".","rg",";","ds","=","vec3","(","dt",".","r",")",";","dr","=","dt",".","g",";","bN","=","vec4","(","ds",",","dr",")",";","dq","*=","bN",".","a",";","return","bN",".","r",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","dp","(","bD",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dB","(","in","vec3","dv",",","vec3","dw",",","float","dx",",","float","dy",")","{","float","dz",";","vec3","dA",";","dA","=","normalize","(","dw","+","dv",")",";","dz","=","1.0","-","dot","(","dv",",","dA",")",";","dz","=","dy","+","(","1.0","-","dy",")","*","pow","(","dz",",","dx",")",";","return","dz",";","}","void","dP","(","inout","vec3","dC",",","vec3","dD",",","vec3","dE",",","float","dF",",","mat4","dG",")","{","vec2","dH",",","dI",";","float","dJ",",","dK",",","dL",";","vec3","dM",",","dN",",","dO",";","dM","=","reflect","(","-","dD",",","dE",")",";","dJ","=","u_fresnel_params","[","2","]",";","dK","=","u_fresnel_params","[","3","]",";","dL","=","1.0",";","if","(","dJ","!=","0.0",")","dL","=","dB","(","dD",",","dM",",","dJ",",","dK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_cube_reflection",",","dM",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","u_refl_plane",".","xyz","*","dot","(","dE",",","u_refl_plane",".","xyz",")",";","dO","=","dE","-","dO",";","dH","=","(","dG","*","vec4","(","dO",",","0.0",")",")",".","xy",";","dI","=","bG",".","xy","/","bG",".","z",";","dI","+=","dH","*","REFL_BUMP",";","dN","=","texture2D","(","u_plane_reflection",",","dI",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_mirrormap",",","dM",")",".","xyz",";","dF","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["br","(","dN",".","rgb",")",";","dC","=","mix","(","dC",",","dN",",","dF","*","dL",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dS","(","vec3","dQ",")","{","float","dR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dQ",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","0.5","*","dQ",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","dY","(","in","float","dT",",","inout","vec2","dU",",","in","vec2","dV",")","{","float","dW",";","vec4","dX",";","dX","=","texture2D","(","u_scene_depth",",","dU",")",";","dW","=","Z","(","dX",")",";","if","(","dW","<","bH",")","{","dU","=","dV",";","return","dT",";","}","else","{","return","dW",";","}","return","dT",";","}"]}]}}]},{type:"textline",tokens:["vec3","ef","(","in","vec3","dZ",",","in","vec2","d_",")","{","vec3","ea",";","float","eb",";","vec4","ec",";","vec2","ed",",","ee",";","ed","=","dZ",".","xy","/","dZ",".","z",";","ee","=","ed","+","d_",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","texture2DProj","(","u_scene_depth",",","dZ",")",";","eb","=","Z","(","ec",")",";","dY","(","eb",",","ee",",","ed",")",";"]}]}}]},{type:"textline",tokens:["ea","=","texture2D","(","u_refractmap",",","ee",")",".","rgb",";","br","(","ea",")",";","return","ea",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eg",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","eh","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","(","in","vec3","ei",",","in","float","ej",")","{","vec3","ek",";","ek","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","ef","(","bG",",","ei",".","xz","*","ej",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ek","=","texture2D","(","u_refractmap",",","bG",".","xy","/","bG",".","z",")",".","rgb",";","br","(","ek",")",";"]}]}}]},{type:"textline",tokens:["return","ek",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","(","vec3","em",")","{","float","en",",","eo",";","vec4","ep",";","ep","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","ep","=","mix","(","vec4","(","em",".","bg",",","ep",".","wz",")",",","vec4","(","em",".","gb",",","ep",".","xy",")",",","step","(","em",".","b",",","em",".","g",")",")",";","ep","=","mix","(","vec4","(","ep",".","xyw",",","em",".","r",")",",","vec4","(","em",".","r",",","ep",".","yzx",")",",","step","(","ep",".","x",",","em",".","r",")",")",";","en","=","ep",".","x","-","min","(","ep",".","w",",","ep",".","y",")",";","eo","=","1.0e-10",";","return","vec3","(","abs","(","ep",".","z","+","(","ep",".","w","-","ep",".","y",")","/","(","6.0","*","en","+","eo",")",")",",","en","/","(","ep",".","x","+","eo",")",",","ep",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eu","(","vec3","er",")","{","vec3","es",";","vec4","et",";","et","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","es","=","abs","(","fract","(","vec3","(","er",".","r",",","er",".","r",",","er",".","r",")","+","et",".","xyz",")","*","6.0","-","et",".","www",")",";","return","er",".","b","*","mix","(","et",".","xxx",",","clamp","(","es","-","et",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","er",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec2","ev",")","{","return","vec3","(","ev","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ey","(","vec3","ex",")","{","return","vec2","(","ex",".","xy","*","eh","+","vec2","(","eh",",","eh",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fn",qualifier:["float"],is_optional:true},{type:"node_out",name:"fo",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fm"],statements:[{type:"textline",tokens:["fm","=","normalize","(","fd",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fn"],statements:[{type:"textline",tokens:["fn","=","abs","(","fd",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fo"],statements:[{type:"textline",tokens:["fo","=","length","(","fd",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"fp",qualifier:["float"],is_optional:false},{type:"node_in",name:"fq",qualifier:["float"],is_optional:false},{type:"node_in",name:"fr",qualifier:["float"],is_optional:false},{type:"node_out",name:"fs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fs","=","vec3","(","fp",",","fq",",","fr",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"fv",qualifier:["float"],is_optional:false},{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fw","=","eu","(","vec3","(","ft",",","fu",",","fv",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fx","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fy","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fz",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fz","=","ew","(","ez",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fA","=","2.0","*","eg","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fB",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eA",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fB","=","eA",";","br","(","fB",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fC",qualifier:["float"],is_optional:false},{type:"node_param",name:"eB",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["fC","=","eB",";","br","(","fC",")",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fD",qualifier:["float"],is_optional:false},{type:"node_out",name:"fE",qualifier:["float"],is_optional:false},{type:"node_param",name:"eC",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fD","=","eC","[","0","]",";","fE","=","eC","[","1","]",";","br","(","fD",")",";","br","(","fE",")",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fF",qualifier:["float"],is_optional:false},{type:"node_out",name:"fG",qualifier:["float"],is_optional:false},{type:"node_out",name:"fH",qualifier:["float"],is_optional:false},{type:"node_param",name:"eD",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fF","=","eD","[","0","]",";","fG","=","eD","[","1","]",";","fH","=","eD","[","2","]",";","br","(","fF",")",";","br","(","fG",")",";","br","(","fH",")",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fI","=","fg",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fJ",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fK","=","eM",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fL","[","0","]","=","fd","[","0","]",";","fL","[","1","]","=","fd","[","1","]",";","fL","[","2","]","=","fd","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fM","=","vec3","(","fh",".","r",",","-","fh",".","b",",","fh",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fT",qualifier:["float"],is_optional:false},{type:"node_out",name:"fU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fN","=","vec3","(","ZERO_VALUE_NODES",")",";","fO","=","vec3","(","ZERO_VALUE_NODES",")",";","fP","=","vec3","(","ZERO_VALUE_NODES",")",";","fQ","=","vec3","(","ZERO_VALUE_NODES",")",";","fR","=","vec3","(","ZERO_VALUE_NODES",")",";","fS","=","vec3","(","ZERO_VALUE_NODES",")",";","fT","=","ZERO_VALUE_NODES",";","fU","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fV",qualifier:["float"],is_optional:false},{type:"node_in",name:"fW",qualifier:["float"],is_optional:false},{type:"node_in",name:"fX",qualifier:["float"],is_optional:false},{type:"node_in",name:"fY",qualifier:["float"],is_optional:false},{type:"node_in",name:"fZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"f_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fj","=","eq","(","fZ",")",";","fj","[","0","]","+=","(","fV","-","eh",")",";","if","(","fj","[","0","]",">","UNITY_VALUE_NODES",")","fj","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fj","[","0","]","<","ZERO_VALUE_NODES",")","fj","[","0","]","+=","UNITY_VALUE_NODES",";","fj","*=","vec3","(","UNITY_VALUE_NODES",",","fW",",","fX",")",";","fj","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",")",")",",","step","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","f_","=","mix","(","fZ",",","eu","(","fj",")",",","fY",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"ga",qualifier:["float"],is_optional:false},{type:"node_in",name:"gb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gc","=","mix","(","gb",",","vec3","(","UNITY_VALUE_NODES",")","-","gb",",","ga",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gd",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ge",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gf",qualifier:["float"],is_optional:false},{type:"node_out",name:"gg",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gd"],statements:[{type:"textline",tokens:["gd","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fe","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fj","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fk","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","eX","=","fe",".","z",";","if","(","eX","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["ge","=","fk","-","bC",";","gf","=","length","(","ge",")",";","ge","=","normalize","(","ge",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","eX","/","(","eX","+","gf","*","gf",")",";","eX","=","fe",".","x",";","eY","=","fe",".","y",";","if","(","eX",">","-","UNITY_VALUE_NODES",")","{","eZ","=","dot","(","ge",",","fj",")",";","eZ","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eZ","-","eX",")","/","eY",")",";","gg","*=","eZ",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ge"],statements:[{type:"textline",tokens:["ge","=","fj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gf"],statements:[{type:"textline",tokens:["gf","=","length","(","fk","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gj",qualifier:["float"],is_optional:true},{type:"node_param",name:"eE",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","eE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gj"],statements:[{type:"textline",tokens:["gj","=","-","dot","(","gh",",","eE",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"gk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gl","=","-","(","eN","*","vec4","(","gk",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gn",qualifier:["float"],is_optional:false},{type:"node_in",name:"go",qualifier:["float"],is_optional:false},{type:"node_in",name:"gp",qualifier:["float"],is_optional:false},{type:"node_in",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gs","=","gm",";"]},{type:"textline",tokens:["gn",";","go",";","gp",";","gq",";","gr",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gu",qualifier:["float"],is_optional:false},{type:"node_in",name:"gv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gw","=","gt",";"]},{type:"textline",tokens:["gu",";","gv",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gy",qualifier:["float"],is_optional:false},{type:"node_in",name:"gz",qualifier:["float"],is_optional:false},{type:"node_in",name:"gA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gB","=","gx",";"]},{type:"textline",tokens:["gy",";","gz",";","gA",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gD",qualifier:["float"],is_optional:false},{type:"node_in",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gF","=","gC",";"]},{type:"textline",tokens:["gD",";","gE",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gH",qualifier:["float"],is_optional:false},{type:"node_in",name:"gI",qualifier:["float"],is_optional:false},{type:"node_in",name:"gJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"gK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gK","=","gG",";"]},{type:"textline",tokens:["gH",";","gI",";","gJ",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gM","=","gL",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gP","=","gN",";"]},{type:"textline",tokens:["gO",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gR",qualifier:["float"],is_optional:false},{type:"node_in",name:"gS",qualifier:["float"],is_optional:false},{type:"node_in",name:"gT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gU","[","0","]","=","gU","[","1","]","=","gU","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gQ",";","gR",";","gS",";","gT",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gW",qualifier:["float"],is_optional:false},{type:"node_in",name:"gX",qualifier:["float"],is_optional:false},{type:"node_in",name:"gY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gZ","=","gV",";"]},{type:"textline",tokens:["gW",";","gX",";","gY",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"g_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ha",qualifier:["float"],is_optional:false},{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hc","=","g_",";"]},{type:"textline",tokens:["ha",";","hb",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hg",qualifier:["float"],is_optional:false},{type:"node_in",name:"hh",qualifier:["float"],is_optional:false},{type:"node_in",name:"hi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hj","[","0","]","=","hj","[","1","]","=","hj","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hd",";","hf",";","hg",";","hh",";","hi",";","he",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"hk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hl",qualifier:["float"],is_optional:false},{type:"node_out",name:"hm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hm","=","hk",";"]},{type:"textline",tokens:["hl",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ho",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ho","[","0","]","=","ho","[","1","]","=","ho","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hn",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"hp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hp","[","0","]","=","hp","[","1","]","=","hp","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hr",qualifier:["float"],is_optional:false},{type:"node_out",name:"hs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hs","[","0","]","=","hs","[","1","]","=","hs","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hq",";","hr",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"ht",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hu",qualifier:["float"],is_optional:false},{type:"node_in",name:"hv",qualifier:["float"],is_optional:false},{type:"node_out",name:"hw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hw","[","0","]","=","hw","[","1","]","=","hw","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ht",";","hu",";","hv",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hx",qualifier:["float"],is_optional:false},{type:"node_in",name:"hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_in",name:"hA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hB","=","hA",";"]},{type:"textline",tokens:["hx",";","hy",";","hz",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hC",qualifier:["float"],is_optional:false},{type:"node_in",name:"hD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hE","=","hD",";"]},{type:"textline",tokens:["hC",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hG","[","0","]","=","hG","[","1","]","=","hG","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hF",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hH",qualifier:["float"],is_optional:false},{type:"node_out",name:"hI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hI","[","0","]","=","hI","[","1","]","=","hI","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hH",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hK","[","0","]","=","hK","[","1","]","=","hK","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hJ",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hM",qualifier:["float"],is_optional:false},{type:"node_out",name:"hN",qualifier:["float"],is_optional:false},{type:"node_out",name:"hO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hM","=","hL","[","0","]",";","hN","=","hL","[","1","]",";","hO","=","hL","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hP",qualifier:["float"],is_optional:false},{type:"node_in",name:"hQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"hR",qualifier:["float"],is_optional:false},{type:"node_out",name:"hS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hS","[","0","]","=","hP",";","hS","[","1","]","=","hQ",";","hS","[","2","]","=","hR",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hU",qualifier:["float"],is_optional:false},{type:"node_in",name:"hV",qualifier:["float"],is_optional:false},{type:"node_out",name:"hW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","hU","-","hV","*","eh",";","hW","=","max","(","(","UNITY_VALUE_NODES","+","hV",")","*","hT","+","eZ",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"hX",qualifier:["float"],is_optional:false},{type:"node_in",name:"hY",qualifier:["float"],is_optional:false},{type:"node_out",name:"hZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"h_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ia",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hZ","=","h_","=","ia","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hX",";","hY",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"ib",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ic",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"id",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ic","[","0","]","=","ic","[","1","]","=","ic","[","2","]","=","ZERO_VALUE_NODES",";","id","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ib",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ie",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ig",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ig","[","0","]","=","ig","[","1","]","=","ig","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ie",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ii","[","0","]","=","ii","[","1","]","=","ii","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ih",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"ij",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ik",qualifier:["float"],is_optional:false},{type:"node_in",name:"il",qualifier:["float"],is_optional:false},{type:"node_in",name:"im",qualifier:["float"],is_optional:false},{type:"node_out",name:"io",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ip",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["io","[","0","]","=","io","[","1","]","=","io","[","2","]","=","ZERO_VALUE_NODES",";","ip","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ij",";","ik",";","il",";","im",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"iq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_in",name:"is",qualifier:["float"],is_optional:false},{type:"node_in",name:"it",qualifier:["float"],is_optional:false},{type:"node_in",name:"iu",qualifier:["float"],is_optional:false},{type:"node_out",name:"iv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iv","[","0","]","=","iv","[","1","]","=","iv","[","2","]","=","ZERO_VALUE_NODES",";","iw","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iq",";","ir",";","is",";","it",";","iu",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"ix",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iy",qualifier:["float"],is_optional:false},{type:"node_out",name:"iz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iz","[","0","]","=","iz","[","1","]","=","iz","[","2","]","=","ZERO_VALUE_NODES",";","iA","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ix",";","iy",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_in",name:"iD",qualifier:["float"],is_optional:false},{type:"node_in",name:"iE",qualifier:["float"],is_optional:false},{type:"node_in",name:"iF",qualifier:["float"],is_optional:false},{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_out",name:"iI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iI","[","0","]","=","iI","[","1","]","=","iI","[","2","]","=","ZERO_VALUE_NODES",";","iJ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iB",";","iC",";","iD",";","iE",";","iF",";","iG",";","iH",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iL","[","0","]","=","iL","[","1","]","=","iL","[","2","]","=","ZERO_VALUE_NODES",";","iM","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iK",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iO",qualifier:["float"],is_optional:false},{type:"node_in",name:"iP",qualifier:["float"],is_optional:false},{type:"node_out",name:"iQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iQ","[","0","]","=","iQ","[","1","]","=","iQ","[","2","]","=","ZERO_VALUE_NODES",";","iR","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iN",";","iO",";","iP",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iV",qualifier:["float"],is_optional:false},{type:"node_out",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iW","[","0","]","=","iW","[","1","]","=","iW","[","2","]","=","ZERO_VALUE_NODES",";","iX","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iS",";","iT",";","iU",";","iV",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"i_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ja",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jb",qualifier:["float"],is_optional:false},{type:"node_in",name:"jc",qualifier:["float"],is_optional:false},{type:"node_in",name:"jd",qualifier:["float"],is_optional:false},{type:"node_in",name:"je",qualifier:["float"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_out",name:"jg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jg","[","0","]","=","jg","[","1","]","=","jg","[","2","]","=","ZERO_VALUE_NODES",";","jh","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iY",";","iZ",";","i_",";","ja",";","jb",";","jc",";","jd",";","je",";","jf",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"ji",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jk","=","clamp","(","ji","+","jj",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jl",qualifier:["float"],is_optional:false},{type:"node_in",name:"jm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","jl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","jo","=","eZ","*","jm","+","(","UNITY_VALUE_NODES","-","eZ",")","*","jn",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jq",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jp"],statements:[{type:"textline",tokens:["jp","=","ew","(","eF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jq"],statements:[{type:"textline",tokens:["jq","=","vec3","(","eF",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jr","=","vec3","(","eG",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["js","=","fi",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jt","=","eg",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ju","[","0","]","=","ju","[","1","]","=","ju","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jv","[","0","]","=","fd","[","0","]",";","jv","[","1","]","=","fd","[","1","]",";","jv","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","[","0","]","=","jw","[","1","]","=","jw","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jx","[","0","]","=","jx","[","1","]","=","jx","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jy","=","vec3","(","eH",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jz",qualifier:["float"],is_optional:false},{type:"node_out",name:"jA",qualifier:["float"],is_optional:false},{type:"node_out",name:"jB",qualifier:["float"],is_optional:false},{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jz","=","ZERO_VALUE_NODES",";","jA","=","ZERO_VALUE_NODES",";","jB","=","ZERO_VALUE_NODES",";","jC","=","vec3","(","ZERO_VALUE_NODES",")",";","jD","=","ZERO_VALUE_NODES",";","jE","=","jC",";","jF","=","jC",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jG",qualifier:["float"],is_optional:false},{type:"node_out",name:"jH",qualifier:["float"],is_optional:false},{type:"node_out",name:"jI",qualifier:["float"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jG","=","ZERO_VALUE_NODES",";","jH","=","ZERO_VALUE_NODES",";","jI","=","ZERO_VALUE_NODES",";","jJ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jL",qualifier:["float"],is_optional:false},{type:"node_out",name:"jM",qualifier:["float"],is_optional:false},{type:"node_out",name:"jN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jL","=","ZERO_VALUE_NODES",";","jM","=","ZERO_VALUE_NODES",";","jN","=","ZERO_VALUE_NODES",";","jK","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jO",qualifier:["float"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jP","=","jO",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jQ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jR",qualifier:["float"],is_optional:false},{type:"node_in",name:"jS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jT",qualifier:["float"],is_optional:false},{type:"node_out",name:"jU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jT","=","jU","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jS",";","jR",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jV",qualifier:["float"],is_optional:false},{type:"node_out",name:"jW",qualifier:["float"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"kb",qualifier:["float"],is_optional:false},{type:"node_out",name:"kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jV","=","jW","=","jX","=","ZERO_VALUE_NODES",";","jY","=","jZ","=","j_","=","ZERO_VALUE_NODES",";","ka","=","ka","=","kc","=","kd","=","ZERO_VALUE_NODES",";","kb","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"ke",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ke","=","kf","=","vec3","(","ZERO_VALUE_NODES",")",";","kg","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ki",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kj","=","ki",";"]},{type:"textline",tokens:["kh",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"kk",qualifier:["float"],is_optional:false},{type:"node_in",name:"kl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"km",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["km","=","kl",";"]},{type:"textline",tokens:["kk",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kn",qualifier:["float"],is_optional:false},{type:"node_out",name:"ko",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ko","[","0","]","=","ko","[","1","]","=","ko","[","2","]","=","clamp","(","kn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","kp","=","ko","[","0","]",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"kq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kr","=","kq",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["kr","=","(","MAPPING_TRS_MATRIX","*","vec4","(","kr",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["kr","=","kr","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["kr","=","kr","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["kr","=","max","(","kr",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["kr","=","min","(","kr",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["kr","=","normalize","(","kr",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"ks",qualifier:["float"],is_optional:false},{type:"node_in",name:"kt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ku",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ku","=","ks","+","kt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ku","=","clamp","(","ku",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"kv",qualifier:["float"],is_optional:false},{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_out",name:"kx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kx","=","kv","-","kw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kx","=","clamp","(","kx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"ky",qualifier:["float"],is_optional:false},{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_out",name:"kA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kA","=","ky","*","kz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kA","=","clamp","(","kA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"kB",qualifier:["float"],is_optional:false},{type:"node_in",name:"kC",qualifier:["float"],is_optional:false},{type:"node_out",name:"kD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kD","=","(","kC","!=","ZERO_VALUE_NODES",")","?","kB","/","kC",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kD","=","clamp","(","kD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kE",qualifier:["float"],is_optional:false},{type:"node_in",name:"kF",qualifier:["float"],is_optional:false},{type:"node_out",name:"kG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kG","=","sin","(","kE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kG","=","clamp","(","kG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kF",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kH",qualifier:["float"],is_optional:false},{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_out",name:"kJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kJ","=","cos","(","kH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kJ","=","clamp","(","kJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kI",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kK",qualifier:["float"],is_optional:false},{type:"node_in",name:"kL",qualifier:["float"],is_optional:false},{type:"node_out",name:"kM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kM","=","tan","(","kK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kM","=","clamp","(","kM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kL",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kN",qualifier:["float"],is_optional:false},{type:"node_in",name:"kO",qualifier:["float"],is_optional:false},{type:"node_out",name:"kP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kP","=","(","kN","<=","UNITY_VALUE_NODES","&&","kN",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kN",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kP","=","clamp","(","kP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kO",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_out",name:"kS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kS","=","(","kQ","<=","UNITY_VALUE_NODES","&&","kQ",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kQ",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kS","=","clamp","(","kS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kR",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kT",qualifier:["float"],is_optional:false},{type:"node_in",name:"kU",qualifier:["float"],is_optional:false},{type:"node_out",name:"kV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kV","=","atan","(","kT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kV","=","clamp","(","kV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kU",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"kW",qualifier:["float"],is_optional:false},{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_out",name:"kY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","kW","<","ZERO_VALUE_NODES","&&","kX","!=","floor","(","kX",")",")","kY","=","ZERO_VALUE_NODES",";","else","if","(","kX","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["kY","=","UNITY_VALUE_NODES",";","else","if","(","kW","<","ZERO_VALUE_NODES",")","kY","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","kX",",","2.0",")",")",")","*","pow","(","-","kW",",","kX",")",";","else","if","(","kW","==","ZERO_VALUE_NODES",")","kY","=","ZERO_VALUE_NODES",";","else","kY","=","pow","(","kW",",","kX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kY","=","clamp","(","kY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"kZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"k_",qualifier:["float"],is_optional:false},{type:"node_out",name:"la",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["la","=","(","kZ",">","ZERO_VALUE_NODES","&&","k_",">","ZERO_VALUE_NODES",")","?","log2","(","kZ",")","/","log2","(","k_",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["la","=","clamp","(","la",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_in",name:"lc",qualifier:["float"],is_optional:false},{type:"node_out",name:"ld",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","min","(","lb",",","lc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ld","=","clamp","(","ld",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"le",qualifier:["float"],is_optional:false},{type:"node_in",name:"lf",qualifier:["float"],is_optional:false},{type:"node_out",name:"lg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","max","(","le",",","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lg","=","clamp","(","lg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_in",name:"li",qualifier:["float"],is_optional:false},{type:"node_out",name:"lj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lj","=","floor","(","lh","+","eh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lj","=","clamp","(","lj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["li",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_out",name:"lm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lm","=","(","lk","<","ll",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lm","=","clamp","(","lm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_out",name:"lp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lp","=","(","ln",">","lo",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lp","=","clamp","(","lp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"lq",qualifier:["float"],is_optional:false},{type:"node_in",name:"lr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ls",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ls","=","abs","(","lr",")",">","0.000001","?","mod","(","lq",",","lr",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ls","=","clamp","(","ls",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lt",qualifier:["float"],is_optional:false},{type:"node_in",name:"lu",qualifier:["float"],is_optional:false},{type:"node_out",name:"lv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lv","=","abs","(","lt",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lv","=","clamp","(","lv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lu",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"lw",qualifier:["float"],is_optional:false},{type:"node_in",name:"lx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ly",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lz","=","mix","(","lx",",","ly",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lz","=","clamp","(","lz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lA",qualifier:["float"],is_optional:false},{type:"node_in",name:"lB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lD","=","mix","(","lB",",","lB","+","lC",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lD","=","clamp","(","lD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lE",qualifier:["float"],is_optional:false},{type:"node_in",name:"lF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lH","=","mix","(","lF",",","lF","*","lG",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lH","=","clamp","(","lH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lI",qualifier:["float"],is_optional:false},{type:"node_in",name:"lJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lL","=","mix","(","lJ",",","lJ","-","lK",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lL","=","clamp","(","lL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_in",name:"lN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","lP","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","eY",")","+","eZ","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lO",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lP","=","clamp","(","lP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","lS","+=","step","(","lS",",","vec3","(","ZERO_VALUE_NODES",")",")",";","lT","=","eY","*","lR","+","eZ","*","lR","/","lS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lT","=","clamp","(","lT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lU",qualifier:["float"],is_optional:false},{type:"node_in",name:"lV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lX","=","mix","(","lV",",","abs","(","lV","-","lW",")",",","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lX","=","clamp","(","lX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"lY",qualifier:["float"],is_optional:false},{type:"node_in",name:"lZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"l_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ma",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ma","=","min","(","lZ",".","rgb",",","l_",".","rgb","*","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ma","=","clamp","(","ma",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_in",name:"mc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"md",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"me",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","me","=","max","(","mc",".","rgb",",","md",".","rgb","*","eZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["me","=","clamp","(","me",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eZ",")",";","mi","=","mix","(","mg","*","(","fk","+","2.0","*","eZ","*","mh",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","fk","+","2.0","*","eZ","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mh",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mg",")",",","step","(","eh",",","mg",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mi","=","clamp","(","mi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES",")","-","eZ","*","ml",";","fj","=","clamp","(","mk","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mm","=","mix","(","mix","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","mk",",","step","(","mk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mm","=","clamp","(","mm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mn",qualifier:["float"],is_optional:false},{type:"node_in",name:"mo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eZ",")",";","fk","=","fk","+","eZ","*","mp",";","fj","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","mo",")","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mq","=","mix","(","fj",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mq","=","clamp","(","mq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ms",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mu","=","ms",";","fj","=","eq","(","mt",")",";","if","(","fj",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mu",")",";","fk",".","x","=","fj",".","x",";","fl","=","eu","(","fk",")",";","mu","=","mix","(","mu",",","fl",",","eZ",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mu","=","clamp","(","mu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"mv",qualifier:["float"],is_optional:false},{type:"node_in",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"my",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","my","=","mw",";","fl","=","eq","(","my",")",";","if","(","fl",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mx",")",";","fl",".","y","=","eY","*","fl",".","y","+","eZ","*","fk",".","y",";","my","=","eu","(","fl",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["my","=","clamp","(","my",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mz",qualifier:["float"],is_optional:false},{type:"node_in",name:"mA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","fl","=","eq","(","mA",")",";","fk","=","eq","(","mB",")",";","fl",".","z","=","eY","*","fl",".","z","+","eZ","*","fk",".","z",";","mC","=","eu","(","fl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mC","=","clamp","(","mC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mG","=","mE",";","fk","=","eq","(","mF",")",";","if","(","fk",".","y","!=","ZERO_VALUE_NODES",")","{","fl","=","eq","(","mG",")",";","fl",".","x","=","fk",".","x",";","fl",".","y","=","fk",".","y",";","fj","=","eu","(","fl",")",";","mG","=","mix","(","mG",",","fj",",","eZ",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mG","=","clamp","(","mG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eZ",";","fj","=","mJ","+","mI","-","mJ","*","mI",";","mK","=","mI","*","(","vec3","(","eY",")","+","vec3","(","eZ",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","mI",")","*","mJ","+","fj",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mK","=","clamp","(","mK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mL",qualifier:["float"],is_optional:false},{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mO","=","mM","+","eZ","*","(","2.0","*","mN","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mO","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","mP",";","eS","=","mQ",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mT",qualifier:["float"],is_optional:false},{type:"node_in",name:"mU",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mV",qualifier:["float"],is_optional:true},{type:"node_out",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nc",qualifier:["float"],is_optional:false},{type:"node_param",name:"eI",qualifier:["const","vec2"]},{type:"node_param",name:"eJ",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["mY","=","clamp","(","mR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["mZ","=","eJ","[","0","]","*","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["m_","=","normalize","(","mU",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","fi",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["mW","=","mV","*","mY",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","eV","*","mY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["mY","*=","mT",";"]}]}]},{type:"textline",tokens:["mX","=","eW","*","u_environment_energy","*","dS","(","m_",")",";","nc","=","du","(","mY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["na","=","vec2","(","eI","[","0","]",",","eI","[","1","]",")",";"]},{type:"textline",tokens:["nb","=","vec2","(","eJ","[","1","]",",","eJ","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eR","=","nc",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","vec3","(","ZERO_VALUE_NODES",")",";","mX","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"nd",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ne",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ng",qualifier:["float"],is_optional:true},{type:"node_in",name:"nh",qualifier:["float"],is_optional:true},{type:"node_in",name:"ni",qualifier:["float"],is_optional:true},{type:"node_out",name:"nj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nk",qualifier:["float"],is_optional:true},{type:"node_out",name:"nl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nn",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eK",qualifier:["float"]},{type:"node_param",name:"eL",qualifier:["float"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nj"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nj","=","nd",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nj","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","eN",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","mat4","(","ZERO_VALUE_NODES",")",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nj","+=","ne",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nl"],statements:[{type:"textline",tokens:["nl","=","nf",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nm"],statements:[{type:"textline",tokens:["nm","=","nd",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nn"],statements:[{type:"textline",tokens:["nn","=","ne",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","ni",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eZ","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","nh",";","nk","=","clamp","(","ni","*","(","UNITY_VALUE_NODES","-","eZ",")","+","eZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","eK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eZ","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","eL",";","nk","=","eK","*","(","UNITY_VALUE_NODES","-","eZ",")","+","eZ",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eP","=","ne",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eP","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["eQ","=","nf",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"no",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"np",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nr",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"ns",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nr","=","vec4","(","no","+","nq","*","np",",","ZERO_VALUE_NODES",")",";","ns","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nt",qualifier:["float"],is_optional:false},{type:"node_out",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nv",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nx","=","eh",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nx","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["nw","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","nw","*=","nt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_positions","[","LAMP_IND","]",";","nu","=","fj","-","fh",";"]},{type:"textline",tokens:["eZ","=","length","(","nu",")",";","nw","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","eZ","*","eZ",")",";","nu","=","normalize","(","nu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_directions","[","LAMP_IND","]",";","eZ","=","dot","(","nu",",","fj",")",";","eZ","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eZ","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","nw","*=","eZ",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["nu","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nz",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nD","=","ZERO_VALUE_NODES",";","if","(","nz",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nB",")","*","dot","(","nA",",","ny",")","+","nB",";","if","(","nC","[","0","]","==","ZERO_VALUE_NODES",")","{","nD","=","UNITY_VALUE_NODES",";","}","else","{","eZ","=","UNITY_VALUE_NODES","+","abs","(","eZ",")",";","eZ","=","nC","[","1","]","+","(","UNITY_VALUE_NODES","-","nC","[","1","]",")","*","pow","(","eZ",",","nC","[","0","]",")",";","nD","=","clamp","(","eZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nD","=","max","(","nD",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nF",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nH",qualifier:["float"],is_optional:false},{type:"node_out",name:"nI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nI","=","ZERO_VALUE_NODES",";","if","(","nF",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nH",")","*","dot","(","nG",",","nE",")","+","nH",";","nI","=","max","(","eZ",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nM",qualifier:["float"],is_optional:false},{type:"node_in",name:"nN",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nO","=","ZERO_VALUE_NODES",";","if","(","nK",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nM",")","*","dot","(","nL",",","nJ",")","+","nM",";","if","(","nN","[","0","]",">","ZERO_VALUE_NODES",")","{","eY","=","max","(","dot","(","nL",",","eM",")",",","ZERO_VALUE_NODES",")",";","eX","=","nN","[","0","]","*","nN","[","0","]",";","e_","=","UNITY_VALUE_NODES","-","eh","*","(","eX","/","(","eX","+","0.33",")",")",";","fj","=","nJ","-","eZ","*","nL",";","fl","=","eM","-","eY","*","nL",";"]},{type:"textline",tokens:["if","(","length","(","fj",")","==","ZERO_VALUE_NODES","||","length","(","fl",")","==","ZERO_VALUE_NODES","||","abs","(","eZ",")",">","UNITY_VALUE_NODES","||","abs","(","eY",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nO","=","eZ","*","e_",";","else","{","fa","=","acos","(","eZ",")",";","eY","=","acos","(","eY",")",";","fj","=","normalize","(","fj",")",";","fl","=","normalize","(","fl",")",";","fb","=","max","(","fa",",","eY",")",";","fc","=","min","(","fa",",","eY",")",";","fc","*=","0.95",";","eY","=","max","(","dot","(","fj",",","fl",")",",","ZERO_VALUE_NODES",")",";","eX","=","0.45","*","(","eX","/","(","eX","+","0.09",")",")",";","nO","=","eZ","*","(","e_","+","(","eX","*","eY","*","sin","(","fb",")","*","tan","(","fc",")",")",")",";","}","}","else","nO","=","eZ",";","nO","=","max","(","nO",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nS",qualifier:["float"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nU","=","ZERO_VALUE_NODES",";","if","(","nQ",".","r","!=","ZERO_VALUE_NODES",")","{","eZ","=","(","UNITY_VALUE_NODES","-","nS",")","*","dot","(","nR",",","nP",")","+","nS",";","fc","=","max","(","dot","(","nR",",","eM",")",",","ZERO_VALUE_NODES",")",";","if","(","nT","[","0","]","<=","UNITY_VALUE_NODES",")","nU","=","eZ","*","pow","(","max","(","fc","*","eZ",",","0.1",")",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nU","=","eZ","*","pow","(","1.0001","-","fc",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","nU","=","max","(","nU",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nY",qualifier:["float"],is_optional:false},{type:"node_in",name:"nZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"n_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["n_","=","ZERO_VALUE_NODES",";","if","(","nW",".","r","!=","ZERO_VALUE_NODES",")","{","fc","=","(","UNITY_VALUE_NODES","-","nY",")","*","dot","(","nX",",","nV",")","+","nY",";","fc","=","acos","(","fc",")",";","if","(","fc","<","nZ","[","0","]",")","n_","=","UNITY_VALUE_NODES",";","else","if","(","fc",">","(","nZ","[","0","]","+","nZ","[","1","]",")","||","nZ","[","1","]","==","ZERO_VALUE_NODES",")","n_","=","ZERO_VALUE_NODES",";","else","n_","=","UNITY_VALUE_NODES","-","(","(","fc","-","nZ","[","0","]",")","/","nZ","[","1","]",")",";","n_","=","max","(","n_",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ob",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"od",qualifier:["float"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"of",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["of","=","ZERO_VALUE_NODES",";","if","(","ob",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","oa","+","eM",")",";","of","=","(","UNITY_VALUE_NODES","-","od",")","*","max","(","dot","(","oc",",","fl",")",",","ZERO_VALUE_NODES",")","+","od",";","of","=","pow","(","of",",","oe","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"og",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oh",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oj",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ok",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ok","=","ZERO_VALUE_NODES",";","if","(","oh",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","og","+","eM",")",";","fc","=","max","(","dot","(","oi",",","fl",")",",","0.001",")",";"]},{type:"textline",tokens:["eZ","=","max","(","dot","(","oi",",","eM",")",",","0.01",")",";","fb","=","max","(","dot","(","oi",",","og",")",",","0.01",")",";","fc","=","tan","(","acos","(","fc",")",")",";","eY","=","max","(","oj","[","0","]",",","0.001",")",";","ok","=","fb","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","eY","*","eY",")",")","*","(","exp","(","-","(","fc","*","fc",")","/","(","eY","*","eY",")",")","/","(","sqrt","(","eZ","*","fb",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"ol",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oo",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"op",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["op","=","ZERO_VALUE_NODES",";","if","(","om",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","ol","+","eM",")",";","fb","=","acos","(","dot","(","fl",",","on",")",")",";","if","(","fb","<","oo","[","0","]",")","op","=","UNITY_VALUE_NODES",";","else","if","(","fb",">=","oo","[","0","]","+","oo","[","1","]","||","oo","[","1","]","==","ZERO_VALUE_NODES",")","op","=","ZERO_VALUE_NODES",";","else","op","=","UNITY_VALUE_NODES","-","(","fb","-","oo","[","0","]",")","/","oo","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"oq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"os",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ov",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ov","=","ZERO_VALUE_NODES",";","if","(","or",".","g","==","UNITY_VALUE_NODES",")","{","if","(","ou","[","0","]","<","UNITY_VALUE_NODES","||","ou","[","1","]","==","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","if","(","ou","[","1","]","<","100.0",")","ou","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","ou","[","1","]",")",";","else","ou","[","1","]","=","10.0","/","ou","[","1","]",";","fl","=","normalize","(","eM","+","oq",")",";","fb","=","(","UNITY_VALUE_NODES","-","ot",")","*","max","(","dot","(","os",",","fl",")",",","ZERO_VALUE_NODES",")","+","ot",";","if","(","fb","<","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","eZ","=","max","(","dot","(","os",",","eM",")",",","0.01",")",";","eY","=","dot","(","os",",","oq",")",";","if","(","eY","<=","0.01",")","ov","=","ZERO_VALUE_NODES",";","else","{","fc","=","max","(","dot","(","eM",",","fl",")",",","0.01",")",";","eX","=","UNITY_VALUE_NODES",";","eZ","=","(","2.0","*","fb","*","eZ",")","/","fc",";","eY","=","(","2.0","*","fb","*","eY",")","/","fc",";","eY","=","min","(","min","(","eX",",","eZ",")",",","eY",")",";","eZ","=","sqrt","(","pow","(","ou","[","0","]",",","2.0",")","+","pow","(","fc",",","2.0",")","-","UNITY_VALUE_NODES",")",";","fc","=","pow","(","eZ","-","fc",",","2.0",")","/","pow","(","eZ","+","fc",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","fc","*","(","eZ","+","fc",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","fc","*","(","eZ","-","fc",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","fb","=","acos","(","fb",")",";","ov","=","max","(","fc","*","eY","*","exp","(","-","pow","(","fb",",","2.0",")","/","(","2.0","*","pow","(","ou","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"ow",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ox",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oy",qualifier:["float"],is_optional:false},{type:"node_in",name:"oz",qualifier:["float"],is_optional:false},{type:"node_in",name:"oA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["float"],is_optional:false},{type:"node_out",name:"oH",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oI",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","oA",",","oB",")","*","dot","(","eM",",","oB",")","<","ZERO_VALUE_NODES",")","{","fb","=","oC",".","x",";","eY","=","oC",".","y",";","fc","=","oC",".","z",";","eZ","=","oC",".","w",";"]},{type:"textline",tokens:["eX","=","clamp","(","abs","(","dot","(","oA",",","oB",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","e_","=","clamp","(","dot","(","eM",",","-","oA",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","pow","(","e_",",","eY",")",";"]},{type:"textline",tokens:["oH","=","ow","+","oG","*","vec4","(","oF","*","eX","*","pow","(","oD",",","vec3","(","fb",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oH","+=","fc","*","mix","(","vec4","(","oD",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","eZ",")","*","oG","*","vec4","(","oF","*","eX","*","vec3","(","eY",")",",","UNITY_VALUE_NODES",")",";","oI","=","ox",";","}","else","{"]},{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oJ","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oL","=","dot","(","oK",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oN",qualifier:["float"],is_optional:true},{type:"node_out",name:"oO",qualifier:["float"],is_optional:true},{type:"node_out",name:"oP",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oN"],statements:[{type:"textline",tokens:["oN","=","oM",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oO"],statements:[{type:"textline",tokens:["oO","=","oM",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oP"],statements:[{type:"textline",tokens:["oP","=","oM",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oR",qualifier:["float"],is_optional:true},{type:"node_out",name:"oS",qualifier:["float"],is_optional:true},{type:"node_out",name:"oT",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fl","=","eq","(","oQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oR"],statements:[{type:"textline",tokens:["oR","=","fl",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oS"],statements:[{type:"textline",tokens:["oS","=","fl",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oT"],statements:[{type:"textline",tokens:["oT","=","fl",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oU",qualifier:["float"],is_optional:false},{type:"node_in",name:"oV",qualifier:["float"],is_optional:false},{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_out",name:"oX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oX","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","oU","-","oW",")","*","oV",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"o_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["o_","=","oY",";","if","(","o_",".","x",">","ZERO_VALUE_NODES",")","o_",".","x","=","pow","(","oY",".","x",",","oZ",")",";","if","(","o_",".","y",">","ZERO_VALUE_NODES",")","o_",".","y","=","pow","(","oY",".","y",",","oZ",")",";","if","(","o_",".","z",">","ZERO_VALUE_NODES",")","o_",".","z","=","pow","(","oY",".","z",",","oZ",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pb","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pa",")",";","pb","=","pow","(","pb",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pc",")",";","pd","=","pow","(","pd",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pg",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pe","[","2","]","=","pe","[","1","]","=","pe","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pf","[","2","]","=","pf","[","1","]","=","pf","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pg","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"ph",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pj",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["fe","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","ph",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pi","=","fe",".","xyz",";","br","(","pi",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pj"],statements:[{type:"textline",tokens:["pj","=","fe",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"pk",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pp",qualifier:["float"],is_optional:true},{type:"node_out",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pr",qualifier:["float"],is_optional:true},{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pt",qualifier:["float"],is_optional:true},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_po"],statements:[{type:"textline",tokens:["po","=","fe",".","xyz",";","br","(","po",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pp"],statements:[{type:"textline",tokens:["pp","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pl",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pq"],statements:[{type:"textline",tokens:["pq","=","fe",".","xyz",";","br","(","pq",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pr"],statements:[{type:"textline",tokens:["pr","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pm",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fe",".","xyz",";","br","(","ps",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pt"],statements:[{type:"textline",tokens:["pt","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","fe",".","xyz",";","br","(","pu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"px",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"py",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pz",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pA",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pB",qualifier:["float"],is_optional:true},{type:"node_out",name:"pC",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pD",qualifier:["float"],is_optional:true},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pF",qualifier:["float"],is_optional:true},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pH",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pw",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pA"],statements:[{type:"textline",tokens:["pA","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pB"],statements:[{type:"textline",tokens:["pB","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","px",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pC"],statements:[{type:"textline",tokens:["pC","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pD"],statements:[{type:"textline",tokens:["pD","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","py",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pF"],statements:[{type:"textline",tokens:["pF","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pG"],statements:[{type:"textline",tokens:["pG","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pH"],statements:[{type:"textline",tokens:["pH","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pI","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pM",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pL","=","pJ","+","pK",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pM"],statements:[{type:"textline",tokens:["pM","=","(","abs","(","pL","[","0","]",")","+","abs","(","pL","[","1","]",")","+","abs","(","pL","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pP","=","pN","-","pO",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","(","abs","(","pP","[","0","]",")","+","abs","(","pP","[","1","]",")","+","abs","(","pP","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pT","=","pR","+","pS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pU"],statements:[{type:"textline",tokens:["pU","=","length","(","pT",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pT"],statements:[{type:"textline",tokens:["pT","=","normalize","(","pT",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pY",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pX","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","dot","(","pV",",","pW",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qa","=","cross","(","pZ",",","p_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","length","(","qa",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qf",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qe","=","normalize","(","qc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qf"],statements:[{type:"textline",tokens:["qf","=","length","(","qc",")",";"]}]}]},{type:"textline",tokens:["qd",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qi","=","reflect","(","-","qg",",","qh",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ql",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qm",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qn",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["eY","=","length","(","fd",")",";","if","(","eY","<","qm",")","{","eT","=","ey","(","qj",")",";","eY","=","clamp","(","eh","*","(","qm","-","eY",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","qk","*","eY",";"]},{type:"textline",tokens:["fl","=","normalize","(","eM","*","ff",")",";"]},{type:"textline",tokens:["eX","=","UNITY_VALUE_NODES","/","ql",";"]},{type:"textline",tokens:["eU","=","fl",".","xy","*","eY","/","(","ql","*","fl",".","z",")",";","eY","=","UNITY_VALUE_NODES",";","eZ","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";"]},{type:"textline",tokens:["for","(","float","qo","=","1.0",";","qo","<=","ql",";","qo","++",")","{","if","(","eZ","<","eY",")","{","eY","-=","eX",";","eT","-=","eU",";","eZ","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";","}","}"]},{type:"textline",tokens:["eU","=","eT","+","eU",";","eX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eU",")",".","a","-","(","eY","+","eX",")",";","eY","=","eZ","-","eY",";","eX","=","eY","/","(","eY","-","eX",")",";"]},{type:"textline",tokens:["eT","=","eX","*","eU","+","(","UNITY_VALUE_NODES","-","eX",")","*","eT",";","qn","=","ew","(","eT",")",";","}","else","qn","=","qj",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qq","=","clamp","(","qp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qs",qualifier:["float"],is_optional:false},{type:"node_out",name:"qt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qt","=","el","(","qr",",","qs",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qu",qualifier:["float"],is_optional:false},{type:"node_in",name:"qv",qualifier:["float"],is_optional:false},{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_in",name:"qx",qualifier:["float"],is_optional:false},{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_out",name:"qz",qualifier:["float"],is_optional:true},{type:"node_out",name:"qA",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qz"],statements:[{type:"textline",tokens:["qz","=","qu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qA"],statements:[{type:"textline",tokens:["qA","=","vec4","(","qv",",","qw",",","qx",",","qy",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qB","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qC",qualifier:["float"],is_optional:false},{type:"node_in",name:"qD",qualifier:["float"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false},{type:"node_out",name:"qF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qF","=","smoothstep","(","qD",",","qE",",","qC",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","qG",";","eS","=","qH",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qJ","=","(","qI",".","r","+","qI",".","g","+","qI",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qK",qualifier:["float"],is_optional:false},{type:"node_out",name:"qL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qL","[","0","]","=","qK",";","qL","[","1","]","=","qK",";","qL","[","2","]","=","qK",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qM","(","in","vec3","eM",",","in","mat4","eN",",","out","vec3","eO",",","out","vec3","eP",",","out","vec3","eQ",",","out","float","eR",",","out","float","eS",")","{","vec2","eT",",","eU",";","float","eV",",","eW",",","eX",",","eY",",","eZ",",","e_",",","fa",",","fb",",","fc",";","vec4","fd",",","fe",";","mat3","ff",";","vec3","fg",",","fh",",","fi",",","fj",",","fk",",","fl",";","eO","=","vec3","(","ZERO_VALUE_NODES",")",";","eP","=","vec3","(","ZERO_VALUE_NODES",")",";","eQ","=","vec3","(","ZERO_VALUE_NODES",")",";","eR","=","ZERO_VALUE_NODES",";","eS","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","normalize","(","bE",")",";","fh","=","fg",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["fh","=","fh",";","else","fh","=","-","fh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","fh",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fj","=","cross","(","fh",",","bF",".","xyz",")","*","bF",".","w",";","ff","=","mat3","(","bF",".","xyz",",","fj",",","fh",")",";","ff","=","ff",";"]}]}}]},{type:"textline",tokens:["fh","=","bC",";","fd","=","bD",";","eV","=","u_emit",";","eW","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qN","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qT","(","vec3","qO",",","mat4","qP",")","{","vec3","qQ",",","qR",",","qS",";","qQ","=","vec3","(","qP","[","0","]","[","0","]",",","qP","[","1","]","[","0","]",",","qP","[","2","]","[","0","]",")",";","qR","=","vec3","(","qP","[","0","]","[","1","]",",","qP","[","1","]","[","1","]",",","qP","[","2","]","[","1","]",")",";","qS","=","vec3","(","qP","[","0","]","[","2","]",",","qP","[","1","]","[","2","]",",","qP","[","2","]","[","2","]",")",";","qR","=","cross","(","qS",",","qQ",")",";","qQ","=","normalize","(","qQ",")",";","qR","=","normalize","(","qR",")",";","qS","=","normalize","(","qS",")",";","return","mat4","(","vec4","(","qQ",",","0.0",")",",","vec4","(","qR",",","0.0",")",",","vec4","(","qS",",","0.0",")",",","vec4","(","qO",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","qZ","(","vec3","qU",",","vec3","qV",")","{","vec3","qW",",","qX",",","qY",";","qW","=","qU","-","qV",";","qW",".","y","=","0.0",";","qX","=","cross","(","qN",",","qW",")",";","qY","=","cross","(","qW",",","qX",")",";","qX","=","normalize","(","qX",")",";","qY","=","normalize","(","qY",")",";","qW","=","normalize","(","qW",")",";","return","mat4","(","vec4","(","qX",",","0.0",")",",","vec4","(","qY",",","0.0",")",",","vec4","(","qW",",","0.0",")",",","vec4","(","qV",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rg","(","in","vec3","q_",",","float","ra",",","float","rb",",","float","rc",",","vec3","rd",")","{","float","re",",","rf",";","re","=","fract","(","length","(","rd",")","/","0.17",")",";","rf","=","rc","+","re","/","10.0",";","re","=","re",";","if","(","rc","!=","0.0",")","re","/=","rc",";","q_","*=","1.0","+","0.5","*","sin","(","ra",")",";","re","=","length","(","q_",")","*","rb","*","sin","(","2.0","*","3.14","*","ra","*","rf","+","re",")",";","return","C","(","re",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ro","(","in","vec3","rh",",","in","vec3","ri",",","in","mat4","rj",")","{","vec3","rk",";","float","rl",",","rm",";","mat4","rn",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qT","(","ri",",","rj",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["rl","=","fract","(","(","ri",".","x","*","1.43","+","ri",".","y","*","0.123","+","ri",".","z","*","6.1",")",")",";","rl","=","2.0","*","M_PI","*","rl",";","rk","=","normalize","(","vec3","(","rj","[","0","]","[","2","]",",","0.0",",","rj","[","2","]","[","2","]",")",")",";","rm","=","acos","(","rk","[","2","]",")",";","if","(","rk","[","0","]","<","0.0",")","rm","=","2.0","*","M_PI","-","rm",";","rm","=","rm","-","rl",";","if","(","rm","<","0.0",")","rm","=","2.0","*","M_PI","+","rm",";","rl","=","rl",";","if","(","rm","<=","MAX_BILLBOARD_ANGLE",")","rl","+=","rm",";","else","if","(","rm","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","rm","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","rl","+=","rm","-","M_PI",";","else","if","(","rm","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","rl","+=","rm","-","2.0","*","M_PI",";","rn","=","A","(","rl",")",";","rn","[","3","]","=","vec4","(","ri",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qZ","(","rh",",","ri",")",";"]}]}}]},{type:"textline",tokens:["return","rn",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ru","(","in","vec3","rp",",","in","vec3","rq",",","in","mat4","rr",",","mat4","rs",")","{","mat4","rt",";","rt","=","ro","(","rp",",","rq",",","rr",")",";","rs","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rt","=","rt","*","rs",";","return","rt",";","}"]}]}}]},{type:"textline",tokens:["c","rB","(","in","vec3","rv",",","in","vec3","rw",",","in","vec3","rx",",","in","vec3","ry",",","in","vec3","rz",",","in","mat4","rA",")","{","rv","=","(","rA","*","vec4","(","rv",",","1.0",")",")",".","xyz",";","rw","=","(","rA","*","vec4","(","rw",",","1.0",")",")",".","xyz",";","rx","=","(","rA","*","vec4","(","rx",",","0.0",")",")",".","xyz",";","ry","=","(","rA","*","vec4","(","ry",",","0.0",")",")",".","xyz",";","rz","=","(","rA","*","vec4","(","rz",",","0.0",")",")",".","xyz",";","return","E","(","c","(","rv",",","rw",",","rx",",","ry",",","rz",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rE","(","vec2","rC",",","vec3","rD",")","{","return","(","rC","+","0.5",")","*","rD",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rL","(","in","vec4","rF",",","in","vec4","rG",",","in","float","rH",")","{","float","rI",",","rJ",",","rK",";","rI","=","rF","[","0","]","*","rG","[","0","]","+","rF","[","1","]","*","rG","[","1","]","+","rF","[","2","]","*","rG","[","2","]","+","rF","[","3","]","*","rG","[","3","]",";","if","(","rI","<","0.0",")","{","rG","*=","-","1.0",";","rI","=","-","rI",";","}","if","(","abs","(","rI",")",">=","1.0",")","return","rF",";","rJ","=","acos","(","rI",")",";","rI","=","sqrt","(","1.0","-","rI","*","rI",")",";","if","(","abs","(","rI",")","<","0.001",")","return","vec4","(","rF","*","0.5","+","rG","*","0.5",")",";","rK","=","sin","(","(","1.0","-","rH",")","*","rJ",")","/","rI",";","rI","=","sin","(","rH","*","rJ",")","/","rI",";","return","rF","*","rK","+","rG","*","rI",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","rM",",","in","vec4","rN",",","in","vec4","rO",",","in","vec4","rP",",","in","vec4","rQ",",","in","float","rR",")","{","vec4","rS",",","rT",";","vec3","rU",",","rV",",","rW",";","rU","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rM",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rS","=","rL","(","rN",",","rO",",","rR",")",";","rT","=","mix","(","rP",",","rQ",",","rR",")",";","rV","=","i","(","rS",",","rU",")",";","rV","=","rV","*","rT",".","w","+","rT",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rW","=","i","(","rN",",","rU",")",";","rU","=","i","(","rO",",","rU",")",";","rW","=","rW","*","rP",".","w","+","rP",".","xyz",";","rU","=","rU","*","rQ",".","w","+","rQ",".","xyz",";","rV","=","mix","(","rW",",","rU",",","rR",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rV",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","rY",",","in","vec4","rZ",",","in","vec4","r_",",","in","float","sa",")","{","vec4","sb",";","vec3","sc",",","sd",",","se",";","sc","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rY",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["sb","=","rL","(","rZ",",","r_",",","sa",")",";","sd","=","i","(","sb",",","sc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["se","=","i","(","rZ",",","sc",")",";","sc","=","i","(","r_",",","sc",")",";","sd","=","mix","(","se",",","sc",",","sa",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sd",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","sg",",","in","vec4","sh",",","in","vec4","si",")","{","vec3","sj",";","sj","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sg",",","1.0",")",")",";","sj","=","i","(","sh",",","sj",")",";","sj","=","sj","*","si",".","w","+","si",".","xyz",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sj",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","sk",",","in","vec4","sl",")","{","vec3","sm",";","sm","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sk",",","0.0",")",")",";","sm","=","i","(","sl",",","sm",")",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sm",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sB","(","inout","vec3","sn",",","inout","vec3","so",",","inout","vec3","sp",",","inout","vec3","sq",")","{","int","sr",",","ss",";","vec4","st",";","vec3","su",",","sv",",","sw",",","sx",";","float","sy",",","sz",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sy","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","su","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sv","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sw","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sx","=","vec3","(","0.0",",","0.0",",","0.0",")",";","st","=","a_influence",";","for","(","int","sA","=","0",";","sA","<","4",";","sA","++",")","{","sr","=","int","(","st","[","sA","]",")",";","sz","=","fract","(","st","[","sA","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","u_transb","[","sr","]",",","u_transa","[","sr","]",",","sy",")",";","sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_transb","[","sr","]",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","sn","=","su",";","sq","=","sx",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sv",";","sp","=","sw",";"]}]}}]},{type:"textline",tokens:["}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","ss","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","ss",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","u_transb","[","ss","]",",","u_transa","[","ss","]",",","sy",")",";","so","=","sf","(","so",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_transb","[","ss","]",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sf","(","so",",","u_quatsb","[","ss","]",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sM","(","inout","vec3","sC",",","in","vec3","sD",",","in","float","sE",",","in","float","sF",",","in","float","sG",",","in","vec3","sH",",","in","float","sI",")","{","vec3","sJ",";","float","sK",",","sL",";","sK","=","length","(","sD",")",";","sL","=","sF","*","(","1.0","+","0.1","*","fract","(","sK",")",")",";","sK","=","sE","*","sI","*","(","1.0","+","sin","(","2.0","*","3.14","*","sG","*","sL","+","sK",")",")",";","sL","=","(","sC",".","y","-","sD",".","y",")","*","abs","(","sK",")",";","sL","+=","1.0",";","sL","*=","sL",";","sL","=","sL","*","sL","-","sL",";","sJ","=","sC",";","sJ",".","xz","+=","sH",".","xz","*","sL","*","sign","(","sK",")",";","sJ","=","sJ","-","sD",";","if","(","all","(","equal","(","sJ",",","vec3","(","0.0",")",")",")",")","sC","=","sD",";","else","{","sK","=","length","(","sC","-","sD",")",";","sC","=","sD","+","normalize","(","sJ",")","*","sK",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sO","(","vec4","sN",")","{","return","sN","*","sN","*","(","3.0","-","2.0","*","sN",")",";","}","vec4","sQ","(","vec4","sP",")","{","return","abs","(","fract","(","sP","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sS","(","vec4","sR",")","{","return","sO","(","sQ","(","sR",")",")",";","}","void","ti","(","inout","vec3","sT",",","in","float","sU",",","in","vec3","sV",",","in","vec3","sW",",","in","vec3","sX",",","in","float","sY",",","in","float","sZ",",","in","float","s_",",","in","vec3","ta",")","{","vec3","tb",";","vec4","tc",";","vec2","td",",","te",";","float","tf",",","tg",",","th",";","tf","=","dot","(","sX",",","vec3","(","1.0",")",")",";","tg","=","tf","+","ta",".","g",";","th","=","dot","(","sT",",","vec3","(","ta",".","g",")",")",";","td","=","(","sU","+","vec2","(","th",",","tg",")",")",";","tc","=","(","(","fract","(","(","td",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","sW",")","*","sY",";","tc","=","sS","(","tc",")",";","te","=","tc",".","xz","+","tc",".","yw",";","te",".","y","=","0.5","-","te",".","y",";","tb","=","te",".","xyx","*","ta",".","rbr","*","vec3","(","sZ","*","sV",".","x",",","s_",",","sZ","*","sV",".","z",")",";","sT","+=","tb",";","}"]}]}}]},{type:"textline",tokens:["void","tp","(","inout","vec3","tj",",","inout","vec3","tk",",","in","vec3","tl",")","{","vec3","tm",",","tn",",","to",";","tm","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tk",";","to","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tj",";","to","=","tk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ti","(","tn",",","u_time",",","tl",",","tm",",","to",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tj","+=","tn","-","tk",";","tk","=","tn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tj","=","tn",";","tk","=","to",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","eg",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eG",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eG","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eF","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eH",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eH","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"ez",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ez","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"tq",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["tq","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"tr",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["tr","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"ts",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ts","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"tt",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["tt","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tu","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","tz","(","vec3","tv",",","float","tw",",","vec2","tx",")","{","vec2","ty",";","ty","=","vec2","(","(","tv",".","x","-","tx",".","x",")","/","tw",",","-","(","tv",".","z","-","tx",".","y",")","/","tw",")",";","return","fract","(","ty",")",";","}","vec2","tD","(","vec2","tA",",","float","tB",",","vec2","tC",")","{","return","vec2","(","tA",".","x","*","tB",",","-","tA",".","y","*","tB",")","+","tC",";","}","c","tE","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","t_","(","vec3","tF",",","vec3","tG",",","vec3","tH",",","vec3","tI",",","vec3","tJ",",","PRECISION","sampler2D","tK",",","sampler2D","tL",",","vec3","tM",",","float","tN",",","vec3","tO",",","vec4","tP",",","mat4","tQ",")","{","mat4","tR",";","vec4","tS",";","vec2","tT",",","tU",",","tV",";","float","tW",",","tX",";","vec3","tY",";","tY","=","i","(","tP",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","tW","=","-","tY",".","x",";","tX","=","-","tY",".","z",";","tT","=","vec2","(","tO",".","x","+","tN","*","(","-","1.0","-","tW",")","/","2.0",",","tO",".","z","+","tN","*","(","1.0","-","tX",")","/","2.0",")",";","tU","=","tz","(","tJ",",","tN",",","tT",")",";","tX","=","tN","/","2.0",";","tV","=","abs","(","tD","(","tU","-","vec2","(","0.5",")",",","tN",",","vec2","(","0.0",")",")",")",";","tX","=","tX","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","tV",")",">","tX",")","return","tE","(",")",";","tX","=","tN","/","tM",".","z",";","tV","=","(","tU","-","vec2","(","0.5",")",")","*","tX","+","vec2","(","0.5",")",";","tY","=","tY","*","(","tN","/","tM",".","z","-","1.0",")","/","2.0",";","tV",".","x","+=","tY",".","x",";","tV",".","y","-=","tY",".","z",";","tS","=","texture2D","(","tL",",","tV",")",";","tX","=","tS",".","r",";","if","(","tX","<","u_scale_threshold",")","return","tE","(",")",";","tW","=","tM",".","y","-","tM",".","x",";","tW","=","tM",".","y","-","texture2D","(","tK",",","tV",")",".","r","*","tW",";","tV","=","tF",".","xz","-","tJ",".","xz",";","tJ",".","xz","=","tD","(","tU",",","tN",",","tT",")",";","tJ",".","y","=","tW",";","tF",".","xz","=","tJ",".","xz","+","tV",";","tF",".","y","*=","tX",";","tF",".","y","+=","tW",";","tY","=","tS",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tF","-=","tJ",";","tR","=","ro","(","tO",",","tJ",",","tQ",")",";","c","tZ","=","rB","(","tF",",","tJ",",","tG",",","tH",",","tI",",","tR",")",";","tZ",".","b","=","tJ",";","tZ",".","f","=","tY",";","return","E","(","tZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","E","(","c","(","tF",",","tJ",",","tG",",","tH",",","tI",",","tY",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ug","(","mat4","ua",",","vec4","ub",",","mat4","uc",")","{","vec4","ud",";","float","ue",";","vec2","uf",";","uf","=","(","ua","*","uc","[","3","]",")",".","xy",";","ue","=","SHADOW_TEX_RES","/","2.0",";","uf","=","floor","(","uf","*","ue","+","0.5",")","/","ue","-","uf",";","ud","=","ua","*","ub",";","ud",".","xy","+=","uf",";","ud",".","xyz","=","0.5","*","(","ud",".","xyz","+","ud",".","w",")",";","return","ud",";","}","void","ul","(","vec3","uh",",","vec3","ui",")","{","vec4","uj",";","mat4","uk",";","uk","=","O","(","u_v_light_tsr",")",";","uj","=","uk","*","vec4","(","uh","+","u_normal_offset","*","ui",",","1.0",")",";","bI","=","ug","(","u_p_light_matrix0",",","uj",",","uk",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","ug","(","u_p_light_matrix1",",","uj",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bK","=","ug","(","u_p_light_matrix2",",","uj",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bL","=","ug","(","u_p_light_matrix3",",","uj",",","uk",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","uv","(","inout","vec3","up",",","in","float","uq",",","in","float","ur",",","in","vec4","us",")","{","float","ut",",","uu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","clamp","(","(","uq","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ut","*=","ut",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","sqrt","(","ut",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","ur",">","u_fog_params",".","w",")","ut","=","0.0",";","else","if","(","ur",">","0.0",")","{","uu","=","(","u_fog_params",".","w","-","ur",")","/","u_fog_params",".","w",";","ut","*=","uu","*","uu",";","}","}","ut","=","1.0","-","(","1.0","-","ut",")","*","(","1.0","-","u_fog_params",".","x",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","0.0",";"]}]}}]},{type:"textline",tokens:["up","=","mix","(","up",",","us",".","rgb",",","ut",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uB","(","in","mat4","uw",",","in","vec3","ux",")","{","vec3","uy",",","uz",",","uA",";","uy","=","mix","(","uw","[","0","]",".","rgb",",","uw","[","1","]",".","rgb",",","max","(","sign","(","ux",".","x",")",",","0.0",")",")",";","uz","=","mix","(","uw","[","2","]",".","rgb",",","uw","[","3","]",".","rgb",",","max","(","sign","(","ux",".","z",")",",","0.0",")",")",";","uA","=","vec3","(","uw","[","0","]",".","a",",","uw","[","1","]",".","a",",","uw","[","2","]",".","a",")",";","uz","=","mix","(","uy",",","uz",",","abs","(","ux",".","z",")",")",";","uz","=","mix","(","uz",",","uA",",","abs","(","ux",".","y",")",")",";","br","(","uz",")",";","return","uz",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uD","(","inout","float","uC",")","{","uC","-=","0.5",";","uC","=","4.0","*","(","uC","*","uC","*","uC",")","+","0.5",";","}","void","uQ","(","inout","vec3","uE",",","in","float","uF",",","in","vec3","uG",",","in","float","uH",",","in","vec4","uI",",","in","vec4","uJ",",","in","float","uK",")","{","vec3","uL",",","uM",";","float","uN",",","uO",",","uP",";","uN","=","uJ",".","w","*","uF",";","uN","=","exp","(","-","uN","*","uN",")",";","uN","=","clamp","(","uN",",","0.0",",","1.0",")",";","uO","=","max","(","uG",".","y",",","0.0",")",";","uF","=","max","(","uF","-","max","(","uH","/","uO",",","0.0",")",",","0.0",")",";","uP","=","uI",".","w","*","uF",";","uP","=","1.0","-","uP",";","uP","=","max","(","uP",",","0.0",")",";","uD","(","uP",")",";","uP","+=","max","(","uK","-","0.5",",","0.0",")",";","if","(","uP","<","uN",")","{","uL","=","vec3","(","0.0",",","0.02",",","0.05",")",";","uM","=","uI",".","rgb",";","uH","=","clamp","(","-","uH","*","0.03",",","0.0",",","0.8",")",";","uL","=","mix","(","uM",",","uL",",","min","(","uO",",","1.0",")",")",";","uL","=","mix","(","uL",",","vec3","(","0.0",")",",","uH",")",";","uE","=","mix","(","uL",",","uE",",","uP",")",";","}","if","(","uP",">=","uN",")","{","uE","=","mix","(","uJ",".","rgb",",","uE",",","uN",")",";","}","}","void","uW","(","inout","vec3","uR",",","in","float","uS",",","in","float","uT",")","{","vec3","uU",";","float","uV",";","uV","=","u_underwater_fog_color_density",".","w","*","uS",";","uV","=","1.0","-","uV",";","uV","=","clamp","(","uV",",","0.0",",","1.0",")",";","uD","(","uV",")",";","uT","=","clamp","(","-","uT","*","0.03",",","0.0",",","0.8",")",";","uU","=","mix","(","u_underwater_fog_color_density",".","rgb",",","vec3","(","0.0",")",",","uT",")",";","uR","=","mix","(","uU",",","uR",",","uV",")",";","}"]}]}}]},{type:"textline",tokens:["void","vc","(","inout","vec3","uX",",","float","uY",",","vec3","uZ",",","float","u_",")","{","vec4","va",";","vec3","vb",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vb","=","uB","(","u_cube_fog",",","uZ",")",";","va","=","vec4","(","vb",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["va","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","(","uX",",","uY",",","uZ",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","va",",","u_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uv","(","uX",",","uY",",","bC",".","y",",","va",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","vf","=","0.5",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"vD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vH",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vI",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vJ",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vK",qualifier:["float"],is_optional:true},{type:"node_out",name:"vL",qualifier:["float"],is_optional:true},{type:"node_out",name:"vM",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["vD","=","vg",";","vE","=","vh",";","vF","=","vi",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vG"],statements:[{type:"textline",tokens:["vG","=","vj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vH"],statements:[{type:"textline",tokens:["vH","=","vl",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vJ"],statements:[{type:"textline",tokens:["vJ","=","vn",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vI"],statements:[{type:"textline",tokens:["vI","=","vo",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vK"],statements:[{type:"textline",tokens:["vK","=","vp",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vL"],statements:[{type:"textline",tokens:["vL","=","vq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vM"],statements:[{type:"textline",tokens:["vM","=","vr",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"vN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vQ",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"vR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vQ","=","vec4","(","vN","+","vP","*","vO",",","ZERO_VALUE_NODES",")",";","vR","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"vS",qualifier:["float"],is_optional:false},{type:"node_out",name:"vT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vU",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"vV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["vU","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vW","=","vf",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vW","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["vV","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","vV","*=","vS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["vB","=","u_light_positions","[","LAMP_IND","]",";","vT","=","vB","-","vk",";"]},{type:"textline",tokens:["vu","=","length","(","vT",")",";","vV","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","vu","*","vu",")",";","vT","=","normalize","(","vT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vB","=","u_light_directions","[","LAMP_IND","]",";","vu","=","dot","(","vT",",","vB",")",";","vu","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","vu","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","vV","*=","vu",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["vT","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"vX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vY",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"vZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"v_",qualifier:["float"],is_optional:false},{type:"node_in",name:"wa",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wb","=","ZERO_VALUE_NODES",";","if","(","vY",".","r","!=","ZERO_VALUE_NODES",")","{","vu","=","(","UNITY_VALUE_NODES","-","v_",")","*","dot","(","vZ",",","vX",")","+","v_",";","if","(","wa","[","0","]","==","ZERO_VALUE_NODES",")","{","wb","=","UNITY_VALUE_NODES",";","}","else","{","vu","=","UNITY_VALUE_NODES","+","abs","(","vu",")",";","vu","=","wa","[","1","]","+","(","UNITY_VALUE_NODES","-","wa","[","1","]",")","*","pow","(","vu",",","wa","[","0","]",")",";","wb","=","clamp","(","vu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","wb","=","max","(","wb",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"wc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wd",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"we",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wf",qualifier:["float"],is_optional:false},{type:"node_out",name:"wg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wg","=","ZERO_VALUE_NODES",";","if","(","wd",".","r","!=","ZERO_VALUE_NODES",")","{","vu","=","(","UNITY_VALUE_NODES","-","wf",")","*","dot","(","we",",","wc",")","+","wf",";","wg","=","max","(","vu",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wi",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wk",qualifier:["float"],is_optional:false},{type:"node_in",name:"wl",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wm","=","ZERO_VALUE_NODES",";","if","(","wi",".","r","!=","ZERO_VALUE_NODES",")","{","vu","=","(","UNITY_VALUE_NODES","-","wk",")","*","dot","(","wj",",","wh",")","+","wk",";","if","(","wl","[","0","]",">","ZERO_VALUE_NODES",")","{","vv","=","max","(","dot","(","wj",",","vm",")",",","ZERO_VALUE_NODES",")",";","vw","=","wl","[","0","]","*","wl","[","0","]",";","vx","=","UNITY_VALUE_NODES","-","vf","*","(","vw","/","(","vw","+","0.33",")",")",";","vB","=","wh","-","vu","*","wj",";","vC","=","vm","-","vv","*","wj",";"]},{type:"textline",tokens:["if","(","length","(","vB",")","==","ZERO_VALUE_NODES","||","length","(","vC",")","==","ZERO_VALUE_NODES","||","abs","(","vu",")",">","UNITY_VALUE_NODES","||","abs","(","vv",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["wm","=","vu","*","vx",";","else","{","vy","=","acos","(","vu",")",";","vv","=","acos","(","vv",")",";","vB","=","normalize","(","vB",")",";","vC","=","normalize","(","vC",")",";","vz","=","max","(","vy",",","vv",")",";","vA","=","min","(","vy",",","vv",")",";","vA","*=","0.95",";","vv","=","max","(","dot","(","vB",",","vC",")",",","ZERO_VALUE_NODES",")",";","vw","=","0.45","*","(","vw","/","(","vw","+","0.09",")",")",";","wm","=","vu","*","(","vx","+","(","vw","*","vv","*","sin","(","vz",")","*","tan","(","vA",")",")",")",";","}","}","else","wm","=","vu",";","wm","=","max","(","wm",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wo",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wq",qualifier:["float"],is_optional:false},{type:"node_in",name:"wr",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ws",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ws","=","ZERO_VALUE_NODES",";","if","(","wo",".","r","!=","ZERO_VALUE_NODES",")","{","vu","=","(","UNITY_VALUE_NODES","-","wq",")","*","dot","(","wp",",","wn",")","+","wq",";","vA","=","max","(","dot","(","wp",",","vm",")",",","ZERO_VALUE_NODES",")",";","if","(","wr","[","0","]","<=","UNITY_VALUE_NODES",")","ws","=","vu","*","pow","(","max","(","vA","*","vu",",","0.1",")",",","wr","[","0","]","-","UNITY_VALUE_NODES",")",";","else","ws","=","vu","*","pow","(","1.0001","-","vA",",","wr","[","0","]","-","UNITY_VALUE_NODES",")",";","ws","=","max","(","ws",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"wt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wu",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ww",qualifier:["float"],is_optional:false},{type:"node_in",name:"wx",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wy","=","ZERO_VALUE_NODES",";","if","(","wu",".","r","!=","ZERO_VALUE_NODES",")","{","vA","=","(","UNITY_VALUE_NODES","-","ww",")","*","dot","(","wv",",","wt",")","+","ww",";","vA","=","acos","(","vA",")",";","if","(","vA","<","wx","[","0","]",")","wy","=","UNITY_VALUE_NODES",";","else","if","(","vA",">","(","wx","[","0","]","+","wx","[","1","]",")","||","wx","[","1","]","==","ZERO_VALUE_NODES",")","wy","=","ZERO_VALUE_NODES",";","else","wy","=","UNITY_VALUE_NODES","-","(","(","vA","-","wx","[","0","]",")","/","wx","[","1","]",")",";","wy","=","max","(","wy",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"wz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wA",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wC",qualifier:["float"],is_optional:false},{type:"node_in",name:"wD",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wE","=","ZERO_VALUE_NODES",";","if","(","wA",".","g","!=","ZERO_VALUE_NODES",")","{","vC","=","normalize","(","wz","+","vm",")",";","wE","=","(","UNITY_VALUE_NODES","-","wC",")","*","max","(","dot","(","wB",",","vC",")",",","ZERO_VALUE_NODES",")","+","wC",";","wE","=","pow","(","wE",",","wD","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"wF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wG",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wI",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wJ","=","ZERO_VALUE_NODES",";","if","(","wG",".","g","!=","ZERO_VALUE_NODES",")","{","vC","=","normalize","(","wF","+","vm",")",";","vA","=","max","(","dot","(","wH",",","vC",")",",","0.001",")",";"]},{type:"textline",tokens:["vu","=","max","(","dot","(","wH",",","vm",")",",","0.01",")",";","vz","=","max","(","dot","(","wH",",","wF",")",",","0.01",")",";","vA","=","tan","(","acos","(","vA",")",")",";","vv","=","max","(","wI","[","0","]",",","0.001",")",";","wJ","=","vz","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","vv","*","vv",")",")","*","(","exp","(","-","(","vA","*","vA",")","/","(","vv","*","vv",")",")","/","(","sqrt","(","vu","*","vz",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"wK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wL",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wN",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wO","=","ZERO_VALUE_NODES",";","if","(","wL",".","g","!=","ZERO_VALUE_NODES",")","{","vC","=","normalize","(","wK","+","vm",")",";","vz","=","acos","(","dot","(","vC",",","wM",")",")",";","if","(","vz","<","wN","[","0","]",")","wO","=","UNITY_VALUE_NODES",";","else","if","(","vz",">=","wN","[","0","]","+","wN","[","1","]","||","wN","[","1","]","==","ZERO_VALUE_NODES",")","wO","=","ZERO_VALUE_NODES",";","else","wO","=","UNITY_VALUE_NODES","-","(","vz","-","wN","[","0","]",")","/","wN","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"wP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wQ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wS",qualifier:["float"],is_optional:false},{type:"node_in",name:"wT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wU","=","ZERO_VALUE_NODES",";","if","(","wQ",".","g","!=","ZERO_VALUE_NODES",")","{","if","(","wT","[","0","]","<","1.0","||","wT","[","1","]","==","ZERO_VALUE_NODES",")","wU","=","ZERO_VALUE_NODES",";","else","{","if","(","wT","[","1","]","<","100.0",")","wT","[","1","]","=","sqrt","(","1.0","/","wT","[","1","]",")",";","else","wT","[","1","]","=","10.0","/","wT","[","1","]",";","vC","=","normalize","(","vm","+","wP",")",";","vz","=","(","UNITY_VALUE_NODES","-","wS",")","*","max","(","dot","(","wR",",","vC",")",",","ZERO_VALUE_NODES",")","+","wS",";","if","(","vz","<","ZERO_VALUE_NODES",")","wU","=","ZERO_VALUE_NODES",";","else","{","vu","=","max","(","dot","(","wR",",","vm",")",",","0.01",")",";","vv","=","dot","(","wR",",","wP",")",";","if","(","vv","<=","0.01",")","wU","=","ZERO_VALUE_NODES",";","else","{","vA","=","max","(","dot","(","vm",",","vC",")",",","0.01",")",";","vw","=","UNITY_VALUE_NODES",";","vu","=","(","2.0","*","vz","*","vu",")","/","vA",";","vv","=","(","2.0","*","vz","*","vv",")","/","vA",";","vv","=","min","(","min","(","vw",",","vu",")",",","vv",")",";","vu","=","sqrt","(","pow","(","wT","[","0","]",",","2.0",")","+","pow","(","vA",",","2.0",")","-","UNITY_VALUE_NODES",")",";","vA","=","pow","(","vu","-","vA",",","2.0",")","/","pow","(","vu","+","vA",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","vA","*","(","vu","+","vA",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","vA","*","(","vu","-","vA",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","vz","=","acos","(","vz",")",";","wU","=","max","(","vA","*","vv","*","exp","(","-","pow","(","vz",",","2.0",")","/","(","2.0","*","pow","(","wT","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"wV",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"wW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wX",qualifier:["float"],is_optional:false},{type:"node_in",name:"wY",qualifier:["float"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"w_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xa",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xe",qualifier:["float"],is_optional:false},{type:"node_out",name:"xf",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xg","=","wW","+","xd","*","xc","*","wY",";","xf","=","wV","+","vec4","(","xd","*","xb","*","wX",",","wY",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xh",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vs","=","xh",".","rgb",";","vt","=","xi",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xj","(","vec3","vg",",","vec3","vh",",","vec3","vi",",","vec3","vj",",","vec3","vk",",","vec3","vl",",","vec3","vm",",","vec2","vn",",","vec2","vo",",","float","vp",",","float","vq",",","vec4","vr",",","out","vec3","vs",",","out","vec3","vt",")","{","float","vu",",","vv",",","vw",",","vx",",","vy",",","vz",",","vA",";","vec3","vB",",","vC",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","xm","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xs","(","inout","float","xn",",","float","xo",",","vec2","xp",",","vec2","xq",")","{","float","xr",";","xr","=","xq",".","x","-","xp",".","x",";","xr","=","(","xo","-","xp",".","x",")","/","xr",";","xn","=","mix","(","xn",",","xq",".","y",",","clamp","(","xr",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xy","(","inout","vec3","xt",",","float","xu",",","vec4","xv",",","vec4","xw",")","{","float","xx",";","xx","=","xw",".","x","-","xv",".","x",";","xx","=","(","xu","-","xv",".","x",")","/","xx",";","xt","=","mix","(","xt",",","xw",".","yzw",",","clamp","(","xx",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","xE","(","float","xz",",","float","xA",",","vec2","xB","[","SIZE_RAMP_LENGTH","]",")","{","float","xC",",","xD",";","xC","=","xz","/","xA",";","xD","=","xB","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xs","(","xD",",","xC",",","xB","[","0","]",",","xB","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xs","(","xD",",","xC",",","xB","[","1","]",",","xB","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xs","(","xD",",","xC",",","xB","[","2","]",",","xB","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xD",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xK","(","float","xF",",","float","xG",",","vec4","xH","[","COLOR_RAMP_LENGTH","]",")","{","vec3","xI",";","float","xJ",";","xJ","=","xF","/","xG",";","xI","=","xH","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xy","(","xI",",","xJ",",","xH","[","0","]",",","xH","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xy","(","xI",",","xJ",",","xH","[","1","]",",","xH","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xy","(","xI",",","xJ",",","xH","[","2","]",",","xH","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xI",";","}"]}]}}]},{type:"textline",tokens:["float","xS","(","float","xL",",","float","xM",",","float","xN",",","float","xO",")","{","float","xP",",","xQ",",","xR",";","xP","=","max","(","0.01",",","min","(","xM",",","xN",")",")",";","xQ","=","max","(","0.01",",","min","(","xM",",","xO",")",")",";","xR","=","xM","-","xQ",";","xQ","=","clamp","(","xL","/","xP",",","0.0",",","1.0",")","-","step","(","xR",",","xL",")","*","(","xL","-","xR",")","/","xQ",";","return","xQ",";","}","xm","xZ","(",")","{","mat4","xT",";","vec3","xU",",","xV",";","float","xW",",","xX",";","xm","xY",";","if","(","u_p_cyclic","==","1",")","{","xW","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","xW","<","0.0",")","xW","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","xW","=","u_p_time","-","a_p_delay",";","}","if","(","xW","<","0.0","||","xW",">=","a_p_lifetime",")","{","xY",".","a","=","0.0001",";","xY",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","xW","<","0.0","||","xW",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["xU","=","a_position",";","xV","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xT","=","O","(","u_model_tsr",")",";","xU","=","(","xT","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xV","=","(","xT","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["xU","+=","u_p_nfactor","*","xW","*","xV",";","xU","+=","a_p_vels",".","xyz","*","xW",";","xU",".","y","-=","u_p_gravity","*","xW","*","xW","/","2.0",";","xX","=","max","(","u_p_mass",",","EPSILON",")",";","xU","+=","(","u_p_wind_fac","*","u_wind","/","xX",")","*","xW","*","xW","/","2.0",";","xY",".","b","=","xU",";","xY",".","e","=","a_p_vels",".","w","*","xW",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xY",".","a","=","xE","(","xW",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xY",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xY",".","d","=","xK","(","xW",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xY",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["xY",".","c","=","xS","(","xW",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","xY",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ya","=","0.0",";","float","yb","=","1.0",";","vec3","yg","(","vec3","yc",")","{","float","yd",",","ye",";","vec4","yf",";","yf","=","vec4","(","ya",",","-","yb","/","3.0",",","2.0","/","3.0",",","-","yb",")",";","yf","=","mix","(","vec4","(","yc",".","bg",",","yf",".","wz",")",",","vec4","(","yc",".","gb",",","yf",".","xy",")",",","step","(","yc",".","b",",","yc",".","g",")",")",";","yf","=","mix","(","vec4","(","yf",".","xyw",",","yc",".","r",")",",","vec4","(","yc",".","r",",","yf",".","yzx",")",",","step","(","yf",".","x",",","yc",".","r",")",")",";","yd","=","yf",".","x","-","min","(","yf",".","w",",","yf",".","y",")",";","ye","=","1.0e-10",";","return","vec3","(","abs","(","yf",".","z","+","(","yf",".","w","-","yf",".","y",")","/","(","6.0","*","yd","+","ye",")",")",",","yd","/","(","yf",".","x","+","ye",")",",","yf",".","x",")",";","}","vec3","yk","(","vec3","yh",")","{","vec3","yi",";","vec4","yj",";","yj","=","vec4","(","yb",",","2.0","/","3.0",",","yb","/","3.0",",","3.0",")",";","yi","=","abs","(","fract","(","vec3","(","yh",".","r",",","yh",".","r",",","yh",".","r",")","+","yj",".","xyz",")","*","6.0","-","yj",".","www",")",";","return","yh",".","b","*","mix","(","yj",".","xxx",",","clamp","(","yi","-","yj",".","xxx",",","ya",",","yb",")",",","yh",".","g",")",";","}","vec3","yo","(","vec3","yl",",","vec3","ym",",","float","yn",")","{","return","mix","(","yl",",","ym",",","yn",")",";","}","vec3","ys","(","vec3","yp",",","vec3","yq",",","float","yr",")","{","return","yr","*","yp","+","yq",";","}","vec3","yw","(","vec3","yt",",","vec3","yu",",","float","yv",")","{","return","yu","-","yv","*","yt",";","}","vec3","yB","(","vec3","yx",",","vec3","yy",",","float","yz",")","{","float","yA",";","yA","=","yb","-","yz",";","return","(","vec3","(","yA",")","+","yz","*","yx",")","*","yy",";","}","vec3","yG","(","vec3","yC",",","vec3","yD",",","float","yE",")","{","vec3","yF",";","yF","=","vec3","(","yb","-","yE",")",";","return","vec3","(","yb",")","-","(","yF","+","yE","*","(","vec3","(","yb",")","-","yC",")",")","*","(","vec3","(","yb",")","-","yD",")",";","}","vec3","yL","(","vec3","yH",",","vec3","yI",",","float","yJ",")","{","vec3","yK",";","yK","=","vec3","(","yb","-","yJ",")",";","return","mix","(","yI","*","(","yK","+","2.0","*","yJ","*","yH",")",",","vec3","(","yb",")","-","(","yK","+","2.0","*","yJ","*","(","vec3","(","yb",")","-","yH",")",")","*","(","vec3","(","yb",")","-","yI",")",",","step","(","0.5",",","yI",")",")",";","}","vec3","yP","(","vec3","yM",",","vec3","yN",",","float","yO",")","{","return","mix","(","yN",",","abs","(","yM","-","yN",")",",","yO",")",";","}","vec3","yT","(","vec3","yQ",",","vec3","yR",",","float","yS",")","{","return","mix","(","yR",",","yR","/","(","yQ","+","step","(","yQ",",","vec3","(","ya",")",")",")",",","yS",")",";","}","vec3","yX","(","vec3","yU",",","vec3","yV",",","float","yW",")","{","return","mix","(","yV",",","min","(","yU",",","yV",")",",","yW",")",";","}","vec3","za","(","vec3","yY",",","vec3","yZ",",","float","y_",")","{","return","max","(","y_","*","yY",",","yZ",")",";","}","vec3","zg","(","vec3","zb",",","vec3","zc",",","float","zd",")","{","vec3","ze",",","zf",";","ze","=","yg","(","zc",")",";","if","(","ze",".","y","!=","ya",")","{","zf","=","yg","(","zb",")",";","zf","=","yk","(","vec3","(","ze",".","x",",","zf",".","yz",")",")",";","return","mix","(","zb",",","zf",",","zd",")",";","}","return","zb",";","}","vec3","zm","(","vec3","zh",",","vec3","zi",",","float","zj",")","{","vec3","zk",",","zl",";","zk","=","yg","(","zh",")",";","if","(","zk",".","y","!=","ya",")","{","zl","=","yg","(","zi",")",";","return","yk","(","vec3","(","zk",".","x",",","mix","(","zk",".","y",",","zl",".","y",",","zj",")",",","zk",".","z",")",")",";","}","return","zh",";","}","vec3","zs","(","vec3","zn",",","vec3","zo",",","float","zp",")","{","vec3","zq",",","zr",";","zq","=","yg","(","zn",")",";","zr","=","yg","(","zo",")",";","return","yk","(","vec3","(","zq",".","xy",",","mix","(","zq",".","z",",","zr",".","z",",","zp",")",")",")",";","}","vec3","zy","(","vec3","zt",",","vec3","zu",",","float","zv",")","{","vec3","zw",",","zx",";","zw","=","yg","(","zu",")",";","if","(","zw",".","y","!=","ya",")","{","zx","=","yg","(","zt",")",";","zx","=","yk","(","vec3","(","zw",".","xy",",","zx",".","z",")",")",";","return","mix","(","zt",",","zx",",","zv",")",";","}","return","zt",";","}","vec3","zD","(","vec3","zz",",","vec3","zA",",","float","zB",")","{","vec3","zC",";","zC","=","vec3","(","yb",")","-","(","vec3","(","yb",")","-","zA",")","*","(","vec3","(","yb",")","-","zz",")",";","return","mix","(","zz",",","(","(","vec3","(","yb",")","-","zz",")","*","zA","*","zz",")","+","zz","*","zC",",","zB",")",";","}","vec3","zH","(","vec3","zE",",","vec3","zF",",","float","zG",")","{","return","zE","+","zG","*","(","2.0","*","zF","-","yb",")",";","}","float","zN","(","float","zI",",","float","zJ",",","float","zK",",","float","zL",")","{","float","zM",";","zM","=","yb","-","zL",";","return","(","zM","+","zK","*","zI",")","*","zJ",";","}","float","zT","(","float","zO",",","float","zP",",","float","zQ",",","float","zR",")","{","float","zS",";","zS","=","yb","-","zR",";","return","yb","-","(","zS","+","zQ","*","(","yb","-","zO",")",")","*","(","yb","-","zP",")",";","}","float","zZ","(","float","zU",",","float","zV",",","float","zW",",","float","zX",")","{","float","zY",";","zY","=","yb","-","zX",";","return","mix","(","zV","*","(","zY","+","2.0","*","zW","*","zU",")",",","yb","-","(","zY","+","2.0","*","zW","*","(","yb","-","zU",")",")","*","(","yb","-","zV",")",",","step","(","0.5",",","zV",")",")",";","}"]}]},exports["include/fxaa.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"ifndef",name:"FXAA_PS3",group:{type:"group",parts:[{type:"define",name:"FXAA_PS3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360",group:{type:"group",parts:[{type:"define",name:"FXAA_360",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360_OPT",group:{type:"group",parts:[{type:"define",name:"FXAA_360_OPT",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC",group:{type:"group",parts:[{type:"define",name:"FXAA_PC",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC_CONSOLE",group:{type:"group",parts:[{type:"define",name:"FXAA_PC_CONSOLE",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_120",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_120",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_130",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_130",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_3",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_4",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_4",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_5",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_5",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GREEN_AS_LUMA",group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_EARLY_EXIT",group:{type:"group",parts:[{type:"define",name:"FXAA_EARLY_EXIT",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_DISCARD",group:{type:"group",parts:[{type:"define",name:"FXAA_DISCARD",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"condition",parts:[{type:"ifdef",name:"GL_EXT_gpu_shader4",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FXAA_HLSL_5",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["4.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["2.0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.125"]}]}},{type:"else",group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.25"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_QUALITY_PRESET",group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",10,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",11,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",12,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",13,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",14,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",15,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",20,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",21,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",22,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",23,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",24,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",25,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",26,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["9"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",27,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["10"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",28,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["11"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",29,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",39,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"var",name:"FXAA_QUALITY_P12",tokens:["0.0"]},{type:"textline",tokens:["float","Av","(","float","Au",")","{","return","clamp","(","Au",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["FXAA_BLEND4WEB",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ay","(","sampler2D","Aw",",","vec2","Ax",")","{","return","texture2D","(","Aw",",","Ax",")",";","}","vec4","AD","(","sampler2D","Az",",","vec2","AA",",","vec2","AB",",","vec2","AC",")","{","return","texture2D","(","Az",",","AA","+","(","AB","*","AC",")",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","Bj","(","vec2","AE",",","sampler2D","AF",",","vec2","AG",",","float","AH",",","float","AI",",","float","AJ",")","{","bool","AK",",","AL",",","AM",",","AN",",","AO",";","float","AP",",","AQ",",","AR",",","AS",",","AT",",","AU",",","AV",",","AW",",","AX",",","AY",",","AZ",",","A_",",","Ba",",","Bb",",","Bc",";","vec4","Bd",";","vec2","Be",",","Bf",",","Bg",",","Bh",",","Bi",";","Be",".","x","=","AE",".","x",";","Be",".","y","=","AE",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Bd","=","Ay","(","AF",",","Be",")",";","AP","=","bB","(","Bd",")",";","AQ","=","bB","(","AD","(","AF",",","Be",",","vec2","(","0",",","1",")",",","AG",".","xy",")",")",";","AR","=","bB","(","AD","(","AF",",","Be",",","vec2","(","1",",","0",")",",","AG",".","xy",")",")",";","AS","=","bB","(","AD","(","AF",",","Be",",","vec2","(","0",",","-","1",")",",","AG",".","xy",")",")",";","AT","=","bB","(","AD","(","AF",",","Be",",","vec2","(","-","1",",","0",")",",","AG",".","xy",")",")",";"]}]}}]},{type:"textline",tokens:["AU","=","max","(","AQ",",","AP",")",";","AV","=","min","(","AQ",",","AP",")",";","AU","=","max","(","AR",",","AU",")",";","AV","=","min","(","AR",",","AV",")",";","AW","=","max","(","AS",",","AT",")",";","AX","=","min","(","AS",",","AT",")",";","AU","=","max","(","AW",",","AU",")",";","AV","=","min","(","AX",",","AV",")",";","AX","=","AU","*","AI",";","AV","=","AU","-","AV",";","AX","=","max","(","AJ",",","AX",")",";","AK","=","AV","<","AX",";","if","(","AK",")","return","Bd",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AX","=","bB","(","AD","(","AF",",","Be",",","vec2","(","-","1",",","-","1",")",",","AG",".","xy",")",")",";","AU","=","bB","(","AD","(","AF",",","Be",",","vec2","(","1",",","1",")",",","AG",".","xy",")",")",";","AW","=","bB","(","AD","(","AF",",","Be",",","vec2","(","1",",","-","1",")",",","AG",".","xy",")",")",";","AY","=","bB","(","AD","(","AF",",","Be",",","vec2","(","-","1",",","1",")",",","AG",".","xy",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["AZ","=","AS","+","AQ",";","A_","=","AT","+","AR",";","AV","=","1.0","/","AV",";","Ba","=","AZ","+","A_",";","AZ","=","(","-","2.0","*","AP",")","+","AZ",";","A_","=","(","-","2.0","*","AP",")","+","A_",";","Bb","=","AW","+","AU",";","AW","=","AX","+","AW",";","Bc","=","(","-","2.0","*","AR",")","+","Bb",";","AW","=","(","-","2.0","*","AS",")","+","AW",";","AX","=","AX","+","AY",";","AU","=","AY","+","AU",";","Bc","=","(","abs","(","AZ",")","*","2.0",")","+","abs","(","Bc",")",";","AW","=","(","abs","(","A_",")","*","2.0",")","+","abs","(","AW",")",";","A_","=","(","-","2.0","*","AT",")","+","AX",";","AU","=","(","-","2.0","*","AQ",")","+","AU",";","Bc","=","abs","(","A_",")","+","Bc",";","AW","=","abs","(","AU",")","+","AW",";","Bb","=","AX","+","Bb",";","AX","=","AG",".","x",";","AK","=","Bc",">=","AW",";","Bb","=","Ba","*","2.0","+","Bb",";","if","(","!","AK",")","AS","=","AT",";","if","(","!","AK",")","AQ","=","AR",";","if","(","AK",")","AX","=","AG",".","y",";","Bb","=","(","Bb","*","(","1.0","/","12.0",")",")","-","AP",";","AR","=","AS","-","AP",";","AT","=","AQ","-","AP",";","AS","=","AS","+","AP",";","AQ","=","AQ","+","AP",";","AL","=","abs","(","AR",")",">=","abs","(","AT",")",";","AT","=","max","(","abs","(","AR",")",",","abs","(","AT",")",")",";","if","(","AL",")","AX","=","-","AX",";","AV","=","Av","(","abs","(","Bb",")","*","AV",")",";","Bf",".","x","=","Be",".","x",";","Bf",".","y","=","Be",".","y",";","Bg",".","x","=","(","!","AK",")","?","0.0",":","AG",".","x",";","Bg",".","y","=","(","AK",")","?","0.0",":","AG",".","y",";","if","(","!","AK",")","Bf",".","x","+=","AX","*","0.5",";","if","(","AK",")","Bf",".","y","+=","AX","*","0.5",";","Bh",".","x","=","Bf",".","x","-","Bg",".","x","*","FXAA_QUALITY_P0",";","Bh",".","y","=","Bf",".","y","-","Bg",".","y","*","FXAA_QUALITY_P0",";","Bi",".","x","=","Bf",".","x","+","Bg",".","x","*","FXAA_QUALITY_P0",";","Bi",".","y","=","Bf",".","y","+","Bg",".","y","*","FXAA_QUALITY_P0",";","Bb","=","(","(","-","2.0",")","*","AV",")","+","3.0",";","AR","=","bB","(","Ay","(","AF",",","Bh",")",")",";","AV","=","AV","*","AV",";","Ba","=","bB","(","Ay","(","AF",",","Bi",")",")",";","if","(","!","AL",")","AS","=","AQ",";","AT","=","AT","*","1.0","/","4.0",";","AQ","=","AP","-","AS","*","0.5",";","AV","=","Bb","*","AV",";","AL","=","AQ","<","0.0",";","AR","-=","AS","*","0.5",";","Ba","-=","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P1",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P1",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P1",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P1",";","if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P2",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P2",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P2",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P2",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P3",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P3",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P3",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P3",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",4,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P4",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P4",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P4",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P4",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",5,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P5",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P5",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P5",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P5",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",6,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P6",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P6",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P6",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P6",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",7,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P7",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P7",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P7",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P7",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",8,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P8",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P8",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P8",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P8",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",9,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P9",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P9",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P9",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P9",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",10,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P10",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P10",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P10",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P10",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",11,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P11",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P11",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P11",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P11",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",12,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","AO",")","{","if","(","!","AM",")","AR","=","bB","(","Ay","(","AF",",","Bh",".","xy",")",")",";","if","(","!","AN",")","Ba","=","bB","(","Ay","(","AF",",","Bi",".","xy",")",")",";","if","(","!","AM",")","AR","=","AR","-","AS","*","0.5",";","if","(","!","AN",")","Ba","=","Ba","-","AS","*","0.5",";","AM","=","abs","(","AR",")",">=","AT",";","AN","=","abs","(","Ba",")",">=","AT",";","if","(","!","AM",")","Bh",".","x","-=","Bg",".","x","*","FXAA_QUALITY_P12",";","if","(","!","AM",")","Bh",".","y","-=","Bg",".","y","*","FXAA_QUALITY_P12",";","AO","=","(","!","AM",")","||","(","!","AN",")",";","if","(","!","AN",")","Bi",".","x","+=","Bg",".","x","*","FXAA_QUALITY_P12",";","if","(","!","AN",")","Bi",".","y","+=","Bg",".","y","*","FXAA_QUALITY_P12",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}","AT","=","Be",".","x","-","Bh",".","x",";","AS","=","Bi",".","x","-","Be",".","x",";","if","(","!","AK",")","AT","=","Be",".","y","-","Bh",".","y",";","if","(","!","AK",")","AS","=","Bi",".","y","-","Be",".","y",";","AN","=","(","AR","<","0.0",")","!=","AL",";","AR","=","(","AS","+","AT",")",";","AL","=","(","Ba","<","0.0",")","!=","AL",";","AR","=","1.0","/","AR",";","AM","=","AT","<","AS",";","AS","=","min","(","AT",",","AS",")",";","AL","=","AM","?","AN",":","AL",";","AV","=","AV","*","AV",";","AR","=","(","AS","*","(","-","AR",")",")","+","0.5",";","AV","=","AV","*","AH",";","AR","=","AL","?","AR",":","0.0",";","AV","=","max","(","AR",",","AV",")",";","if","(","!","AK",")","Be",".","x","+=","AV","*","AX",";","if","(","AK",")","Be",".","y","+=","AV","*","AX",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_DISCARD",1,{type:"equal_expr",places:2},"FXAA_BLEND4WEB",1,{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ay","(","AF",",","Be",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","Ay","(","AF",",","Be",")",".","xyz",",","AP",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Bq","(","in","sampler2D","Bk",",","in","vec2","Bl",",","in","vec2","Bm",")","{","float","Bn",",","Bo",",","Bp",";","Bn","=","texture2D","(","Bk",",","Bl",")",".","r",";","Bo","=","Bm",".","x",";","Bp","=","Bm",".","y",";","Bo","=","2.0","*","Bo","/","(","Bo","+","Bp","-","(","2.0","*","Bn","-","1.0",")","*","(","Bp","-","Bo",")",")",";","return","Bo",";","}"]}]}}