b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cD","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","mix","(","cD",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cE","=","vec3","(","0.0",")",";","vec3","cF","=","vec3","(","0.0",")",";","vec3","cG","=","vec3","(","0.0",")",";","bK","(","cD",",","cE",",","cF",",","cG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cH","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cH","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cI","=","(","u_model_matrix","*","vec4","(","cH",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","&&","!","STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","cJ","=","at","(","u_camera_eye",",","cI",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","cJ","=","an","(","u_camera_eye",",","cI",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cK","=","(","u_model_matrix","*","vec4","(","cH",",","1.0",")",")",".","xyz",";","cJ","=","cJ","*","ac","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cK",")",";"]}]}}]},{type:"textline",tokens:["d","cL","=","aA","(","cD","-","cH",",","cH",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cJ",")",";","cL",".","b","=","cI",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","cL","=","aA","(","cD",",","cH",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cM","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cM","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cC","(","cL",".","a",",","cL",".","b",",","cM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aD","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cL",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";","varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fq","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","fq","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","fq","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","NO_SHADOWS","||","SHADOW_USAGE","==","SHADOW_CASTING"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fk","(","cD",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","SHADOW_USAGE","==","SHADOW_CASTING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";","varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","gt","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["gt","=","mix","(","gt",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gu","=","vec3","(","0.0",")",";","vec3","gv","=","vec3","(","0.0",")",";","vec3","gw","=","vec3","(","0.0",")",";","bK","(","gt",",","gu",",","gv",",","gw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gx","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gx","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gy","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gy","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","gz","=","ge","(","gt",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gx",",","gy",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gA","=","(","u_model_matrix","*","vec4","(","gy",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","HAIR_BILLBOARD","&&","SHADOW_USAGE","==","SHADOW_CASTING"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gB","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gB","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","&&","!","STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gC","=","at","(","u_camera_eye",",","gA",",","gB",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gC","=","an","(","u_camera_eye",",","gA",",","gB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gD","=","(","u_model_matrix","*","vec4","(","gy",",","1.0",")",")",".","xyz",";","gC","=","gC","*","ac","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gD",")",";"]}]}}]},{type:"textline",tokens:["d","gz","=","aA","(","gt","-","gy",",","gy",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gx",",","gC",")",";","gz",".","b","=","gA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gz","=","aA","(","gt",",","gy",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gx",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gE","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gE","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cC","(","gz",".","a",",","gz",".","b",",","gE",")",";"]}]}}]},{type:"textline",tokens:["vec4","gF","=","u_view_matrix","*","vec4","(","gz",".","a",",","1.0",")",";","vec4","gG","=","u_proj_matrix","*","gF",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gG",".","xy","+=","u_subpixel_jitter","*","gG",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aD","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION"],group:{type:"group",parts:[{type:"textline",tokens:["go","(","gz",".","a",",","gz",".","e",")",";","cD","=","gF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_CASTING"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","gH","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","float","gI","=","SHADOW_TEX_RES","/","2.0",";","gH","=","floor","(","gH","*","gI","+","0.5",")","/","gI","-","gH",";","gG",".","xy","+=","gH",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gG",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gt",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gt",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","gt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","gt",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","gt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gt",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gt",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gu","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","gv","=","an","(","u_camera_eye",",","gu",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["gv","=","gv","*","ac","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["d","gw","=","aA","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gv",")",";","gw",".","b","=","gu",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gw","=","aA","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gx","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gw",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gt","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gt","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gt","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","gx",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","gB",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gD","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gD","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","gF","(","float","gE",")","{","return","gE","-","floor","(","gE","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gO","(","inout","float","gG",",","in","float","gH","[","gD","]",",","in","float","gI",")","{","for","(","int","gJ","=","0",";","gJ","<","NUM_RINGS",";","gJ","++",")","{","float","gK","=","40.0","*","gH","[","gJ","]",";","float","gL","=","300.0","*","(","gF","(","gK",")","-","0.005",")",";","float","gM","=","gK",";","float","gN","=","abs","(","gM","*","(","u_halo_size","*","gL","-","gI",")",")",";","gG","+=","1.0","-","min","(","gN",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","gX","(","inout","float","gP",",","in","float","gQ","[","gD","]",",","in","float","gR",")","{","for","(","int","gS","=","0",";","gS","<","NUM_LINES",";","gS","++",")","{","float","gT","=","gQ","[","gS","]",";","float","gU","=","gT",";","float","gV","=","1000.0","*","(","gF","(","gT",")","-","0.005",")",";","float","gW","=","20.0","*","abs","(","gU","*","a",".","x","+","gV","*","a",".","y",")",";","gP","+=","1.0","-","min","(","gW",",","1.0",")",";","}","gP","*=","gR",";","}"]}]}}]},{type:"textline",tokens:["void","hd","(","inout","float","gY",",","in","vec2","gZ",")","{","float","g_",",","ha",";","ha","=","atan","(","gZ",".","y",",","gZ",".","x",")",";","ha","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","hb","=","cos","(","ha",")",";","float","hc","=","sin","(","ha",")",";","ha","=","(","hb","*","gZ",".","x","+","hc","*","gZ",".","y",")","*","(","hb","*","gZ",".","y","-","hc","*","gZ",".","x",")",";","g_","=","abs","(","ha",")",";","if","(","g_","<","1.0",")","{","g_","=","(","0.01","*","u_halo_size",")","/","(","g_",")",";","gY","*=","sqrt","(","min","(","g_",",","1.0",")",")",";","}","}","void","main","(",")","{","float","he","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","hf","=","sqrt","(","he",")",";","he","=","max","(","1.0","-","he",",","0.0",")",";","he","=","pow","(","he",",","u_halo_hardness",")",";","float","hg","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hh","[","gD","]",";","for","(","int","hi","=","0",";","hi","<","gD",";","hi","++",")","{","hh","[","hi","]","=","fract","(","gC","/","(","float","(","hi",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","hj","=","0.0",";","gO","(","hj",",","hh",",","hf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hk","=","0.0",";","gX","(","hk",",","hh",",","he",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["hd","(","he",",","a",")",";"]}]}}]},{type:"textline",tokens:["he","*=","hg",";","vec3","hl","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["hj","*=","he",";","hl","+=","u_halo_rings_color","*","hj",";","he","+=","hj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["hk","*=","hg",";","hl","+=","u_halo_lines_color","*","hk",";","he","+=","hk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["he","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","hm","=","u_halo_stars_blend","*","(","gB",".","y","-","u_halo_stars_height",")",";","he","*=","clamp","(","hm",",","0.0",",","1.0",")",";","he","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gx","(","hl",")",";","gA","(","hl",",","he",")",";","gl_FragColor","=","vec4","(","hl",",","he",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gC",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gB",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","gD","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gC","=","fract","(","gD",".","x","+","gD",".","y","+","gD",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gE","=","N","(","gD",",","u_view_matrix",")",";","mat4","gF","=","u_view_matrix",";","gF","[","3","]","[","0","]","=","0.0",";","gF","[","3","]","[","1","]","=","0.0",";","gF","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gE","=","N","(","gD",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gG","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","gH","=","gE","*","gG",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gI","=","u_proj_matrix","*","gF","*","gH",";","gI",".","z","=","0.99999","*","gI",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gB","=","gH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","gI","=","u_proj_matrix","*","u_view_matrix","*","gH",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gI",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gD","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gD",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","||","REFLECTION_TYPE","==","REFL_PLANE","||","USE_NODE_B4W_VECTOR_VIEW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["(","!","NODES","||","USE_NODE_B4W_REFRACTION","&&","USE_REFRACTION","&&","NODES",")","&&","REFRACTIVE","&&","USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","lA",";"]},{type:"condition",parts:[{type:"if",expression:["!","NODES","||","USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE","||","USE_NODE_TEX_COORD_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","||","!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","NODES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lD",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE","||","REFRACTIVE","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","(","!","NODES","||","USE_NODE_B4W_REFRACTION",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","lF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","!","NODES","||","USE_NODE_B4W_REFRACTION","&&","USE_REFRACTION","&&","NODES"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["NODES","||","!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","yM","=","length","(","cD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","yN","=","lA",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yO","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yP","=","normalize","(","u_camera_eye_frag","-","lA",")",";","vec3","yQ",";","vec3","yR",";","vec3","yS",";","float","yT",";","float","yU",";","yL","(","yP",",","yQ",",","yR",",","yS",",","yT",",","yU",")",";","vec3","yV","=","yQ",";","float","yW","=","yU",";","vec3","yX","=","yS",";","float","yY","=","yT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","yZ","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","y_","=","lB",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","y_","=","y_",";","else","y_","=","-","y_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","za","=","cross","(","y_",",","lC",".","xyz",")","*","lC",".","w",";","mat3","zb","=","mat3","(","lC",".","xyz",",","za",",","y_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","zc","=","normalize","(","u_view_matrix_frag","*","vec4","(","lB",",","0.0",")",")",".","st",";","zc","=","zc","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yM","<","PARALLAX_LOD_DIST",")","{","float","zd","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","yM",")",",","0.0",",","1.0",")",";","float","ze","=","u_parallax_scale","*","zd",";","vec3","zf","=","normalize","(","lD","*","zb",")",";","float","zg","=","1.0","/","PARALLAX_STEPS",";","vec2","zh","=","zf",".","xy","*","ze","/","(","PARALLAX_STEPS","*","zf",".","z",")",";","float","zi","=","1.0",";","float","zj",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","zk","=","zc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","zk","=","yZ",";"]}]}}]},{type:"textline",tokens:["zj","=","texture2D","(","u_normalmap0",",","zk",")",".","a",";","for","(","float","zl","=","1.0",";","zl","<=","PARALLAX_STEPS",";","zl","++",")","{","if","(","zj","<","zi",")","{","zi","-=","zg",";","zk","-=","zh",";","zj","=","texture2D","(","u_normalmap0",",","zk",")",".","a",";","}","}","vec2","zm","=","zk","+","zh",";","float","zn","=","texture2D","(","u_normalmap0",",","zm",")",".","a","-","(","zi","+","zg",")",";","float","zo","=","zj","-","zi",";","float","zp","=","zo","/","(","zo","-","zn",")",";","zk","=","zp","*","zm","+","(","1.0","-","zp",")","*","zk",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["yZ","+=","zk","-","zc",";"]}]}}]},{type:"textline",tokens:["zc","=","zk",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["zc","+=","zk","-","yZ",";"]}]}}]},{type:"textline",tokens:["yZ","=","zk",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","zq",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["zq","=","texture2D","(","u_normalmap0",",","zc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zq","=","texture2D","(","u_normalmap0",",","yZ",")",";"]}]}}]},{type:"textline",tokens:["vec3","zr","=","zq",".","rgb","-","0.5",";","zr","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","zr",",","u_normal_factor",")",";","vec3","yX","=","zb","*","zr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","yX","=","y_",";"]}]}}]},{type:"textline",tokens:["yX","=","normalize","(","yX",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["zc","=","normalize","(","u_view_matrix_frag","*","vec4","(","yX",",","0.0",")",")",".","st",";","zc","=","zc","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["vec3","yP","=","normalize","(","lD",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zs","=","lE",";","gv","(","zs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","zt","=","vec4","(","zs",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","zt","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","zu","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","zv","=","texture2D","(","u_colormap0",",","zc",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","zv","=","texture2D","(","u_colormap0",",","yZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["gv","(","zv",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","zw",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["zw","=","texture2D","(","u_colormap1",",","zc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zw","=","texture2D","(","u_colormap1",",","yZ",")",";"]}]}}]},{type:"textline",tokens:["gv","(","zw",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","zx","=","texture2D","(","u_stencil0",",","zc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","zx","=","texture2D","(","u_stencil0",",","yZ",")",";"]}]}}]},{type:"textline",tokens:["zv","=","mix","(","zv",",","zw",",","zx",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["zt",".","rgb","=","mix","(","zt",".","rgb",",","zv",".","rgb",",","u_diffuse_color_factor",")",";","float","zy","=","u_alpha_factor","*","zv",".","a",";","zy","+=","(","1.0","-","step","(","0.0",",","zy",")",")",";","zt",".","a","=","mix","(","zy",",","1.0",",","u_diffuse_color",".","a",")",";","zu","=","zv",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["zt",".","rgb","*=","mix","(","vec3","(","1.0",")",",","zv",".","rgb",",","u_diffuse_color_factor",")",";","zt",".","a","=","zv",".","a",";","zu","=","zv",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","zz","=","u_diffuse_intensity","*","zt",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yV","=","zz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","zA","=","u_environment_energy","*","mr","(","yX",")",";","vec3","zB","=","u_ambient","*","zA",";","float","yY","=","fp","(","zz",")",";","vec3","zC","=","u_emit","*","zt",".","rgb",";","vec3","zD","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zE","=","vec3","(","zu",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zE","=","texture2D","(","u_specmap0",",","zc",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","zE","=","texture2D","(","u_specmap0",",","yZ",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["gv","(","zE",".","rgb",")",";","zD","=","mix","(","zD",",","zE",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","zF","=","u_specular_params","[","0","]",";","vec2","zG","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","zH","=","zF","*","zD",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["hO","zI","=","kZ","(","zC",",","zB",",","zz",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hO","zI","=","kU","(","zC",",","zB",",","zz",",","zH",",","lA",",","yX",",","yP",",","zG",",","u_diffuse_params",",","yY",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vec3","yV","=","zI",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["ma","(","yV",",","yP",",","yX",",","u_reflect_factor",")",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["ma","(","yV",",","yP",",","yX",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["yV","+=","zI",".","b",";"]}]}}]},{type:"textline",tokens:["float","yW","=","zt",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["yV","=","max","(","yV","-","sqrt","(","0.01","*","-","min","(","yN",",","0.0",")",")",",","0.5","*","yV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["lz","(","yV",",","yN",",","u_time",",","yY",",","yX",",","u_sun_direction",",","yO",",","u_sun_quaternion",",","lA",",","yM",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yW","<=","0.5",")","discard",";","yW","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["!","SHADELESS","&&","!","NODES"],group:{type:"group",parts:[{type:"textline",tokens:["yW","+=","zI",".","a",".","a","*","zH",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["!","NODES_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["yW","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["yV","=","mix","(","mo","(","cI",",","yX",".","xz","*","u_refr_bump",")",",","yV",",","yW",")",";","yW","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","zJ","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zK","=","hi","(","u_cube_fog",",","yP",")",";","vec4","zL","=","vec4","(","zK",",","u_fog_color_density",".","a",")",";","gv","(","zL",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","zL","=","u_fog_color_density",";","zL",".","rgb","*=","zJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["hB","(","yV",",","yM",",","yP",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","zL",",","yN",",","zJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hb","(","yV",",","yM",",","zL",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","zM","=","texture2DProj","(","u_shadow_mask",",","cI",")",".","rg",";","float","zN","=","zM",".","g",";","yV","=","vec3","(","zN",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["yV","=","vec3","(","dQ",".","a",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gx","(","yV",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP","||","NODES_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gA","(","yV",",","yW",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","yV",",","yW",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","NODES","||","USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE","||","WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","USE_NODE_TEX_COORD_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["!","NODES","||","USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE","||","USE_NODE_TEX_COORD_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","NODES","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","NODES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lA",";"]},{type:"condition",parts:[{type:"if",expression:["!","NODES","||","USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE","||","USE_NODE_TEX_COORD_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","||","!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","NODES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lD",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE","||","REFRACTIVE","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","(","!","NODES","||","USE_NODE_B4W_REFRACTION",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","lF",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","yR","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","||","USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","!","NODES"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yS","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","yS","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","||","!","NODES","&&","TEXTURE_NORM_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yT","=","vec3","(","a_tangent",")",";","vec3","yU","=","a_tangent","[","3","]","*","cross","(","yS",",","yT",")",";"]}]}},{type:"elif",expression:["!","NODES","&&","TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yV","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","yW","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vec3","yX","=","yV","-","u_camera_eye",";","vec3","yU","=","cross","(","yX",",","yW",")",";","vec3","yT","=","cross","(","yW",",","yU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","yT","=","vec3","(","0.0",")",";","vec3","yU","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["yR","=","mix","(","yR",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","NODES","||","USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["yS","=","mix","(","yS",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yY","=","vec3","(","a_tangent",")",";","vec3","yZ","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","yY",")",";","yT","=","mix","(","yT",",","yY",",","u_va_frame_factor",")",";","yU","=","mix","(","yU",",","yZ",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bK","(","yR",",","yT",",","yU",",","yS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","y_","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","y_","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","za","=","ge","(","yR",",","yT",",","yU",",","yS",",","y_",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zb","=","(","u_model_matrix","*","vec4","(","y_",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","&&","!","STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","zc","=","at","(","u_camera_eye",",","zb",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","zc","=","an","(","u_camera_eye",",","zb",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zd","=","(","u_model_matrix","*","vec4","(","y_",",","1.0",")",")",".","xyz",";","zc","=","zc","*","ac","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","zd",")",";"]}]}}]},{type:"textline",tokens:["d","za","=","aA","(","yR","-","y_",",","y_",",","yT",",","yU",",","yS",",","zc",")",";","za",".","b","=","zb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","za","=","aA","(","yR",",","y_",",","yT",",","yU",",","yS",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","ze","=","(","dot","(","cross","(","za",".","e",",","za",".","c",")",",","za",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","lC","=","vec4","(","za",".","c",",","ze",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cC","(","za",".","a",",","za",".","b",",","yS",")",";"]}]}}]},{type:"textline",tokens:["lA","=","za",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","NODES","||","USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE","||","WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["lB","=","za",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","NODES"],group:{type:"group",parts:[{type:"textline",tokens:["lD","=","u_camera_eye","-","za",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aD","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["lE","=","za",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["lE","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","zf","=","u_view_matrix","*","vec4","(","za",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","||","!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","zf",";"]}]}}]},{type:"textline",tokens:["vec4","zg","=","u_proj_matrix","*","zf",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["zg",".","xy","+=","u_subpixel_jitter","*","zg",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["go","(","zg",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["go","(","za",".","a",",","za",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE","||","REFRACTIVE","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","zh","=","zg",".","x",";","float","zi","=","zg",".","y",";","float","zj","=","zg",".","w",";","cI",".","x","=","(","zh","+","zj",")","/","2.0",";","cI",".","y","=","(","zi","+","zj",")","/","2.0",";","cI",".","z","=","zj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","(","!","NODES","||","USE_NODE_B4W_REFRACTION",")"],group:{type:"group",parts:[{type:"textline",tokens:["lF","=","-","zf",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["yQ","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","zg",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","yR",";","varying","vec3","lE",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","yS","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","yT","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","yS",")",";","float","yU","=","u_diffuse_color",".","a","*","yR","*","(","1.0","-","clamp","(","yT",",","0.0",",","1.0",")",")",";","vec3","yV","=","lE","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["hb","(","yV",",","length","(","cD",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["gx","(","yV",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gA","(","yV",",","yU",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","yV",",","yU",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","yR",";","varying","vec3","lE",";","varying","vec3","cD",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","yS","zH",";","zH","=","zG","(",")",";","vec4","zI","=","u_view_matrix","*","vec4","(","zH",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","zI",";","yR","=","zH",".","c",";","lE","=","zH",".","d",";","cD","=","zI",".","xyz",";","float","zJ","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","zH",".","a","*","zJ",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","yR",";","varying","vec3","lE",";","varying","vec2","a",";","varying","vec3","lD",";","varying","vec3","lA",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","zH","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","zI","=","texture2D","(","u_sampler",",","a",")",";","gv","(","zI",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["zH",".","rgb","=","mix","(","zH",".","rgb",",","zI",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["zH",".","rgb","*=","mix","(","vec3","(","1.0",")",",","zI",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["zH",".","a","=","zI",".","a",";"]}]}}]},{type:"textline",tokens:["zH",".","rgb","*=","lE",";","vec3","zJ","=","u_diffuse_intensity","*","zH",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zK","=","u_emit","*","zH",".","rgb",";","vec3","zL","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","!","SKY_TEXTURE","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zM","=","u_environment_energy","*","mr","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","zM","=","u_environment_energy","*","mr","(","zL",")",";"]}]}}]},{type:"textline",tokens:["vec3","zN","=","u_ambient","*","zM",";","float","zO","=","u_specular_params","[","0","]",";","vec2","zP","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","zQ","=","zO","*","u_specular_color",";","vec3","zR","=","normalize","(","lD",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hO","zS","=","kU","(","zK",",","zN",",","zJ",",","zQ",",","lA",",","zL",",","zR",",","zP",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hO","zS","=","kZ","(","zK",",","zN",",","zJ",")",";"]}]}}]},{type:"textline",tokens:["vec3","zT","=","zS",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","zT","=","zJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["hb","(","zT",",","length","(","cD",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","zU","=","zH",".","a","*","yR",";","gx","(","zT",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gA","(","zT",",","zU",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","zT",",","zU",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","yR",";","varying","vec3","lE",";","varying","vec2","a",";","varying","vec3","lD",";","varying","vec3","lA",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","zJ","(","vec2","zH",",","vec2","zI",")","{","return","(","atan","(","zI",".","y",",","zI",".","x",")","-","atan","(","zH",".","y",",","zH",".","x",")",")",";","}","void","main","(",")","{","yS","zK",";","zK","=","zG","(",")",";","float","zL",";","mat4","zM",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","zL","=","zK",".","e",";","zM","=","N","(","zK",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","zL","=","zK",".","e",";","zM","=","x","(",")",";","zM","[","3","]","=","vec4","(","zK",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","zL","=","zK",".","e",";","zM","=","B","(","radians","(","90.0",")",")",";","zM","[","3","]","=","vec4","(","zK",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","zL","=","zJ","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","zK",".","e",";","zM","=","z","(","radians","(","-","90.0",")",")",";","zM","[","3","]","=","vec4","(","zK",".","b",",","1.0",")",";","}","vec4","zN","=","vec4","(","a_p_bb_vertex","*","2.0","*","zK",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","zO","=","zM","*","D","(","zL",")","*","zN",";","vec4","zP","=","u_view_matrix","*","zO",";","vec4","zQ","=","u_proj_matrix","*","zP",";","gl_Position","=","zQ",";","yR","=","zK",".","c",";","lE","=","zK",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","lA","=","zO",".","xyz",";","lD","=","u_camera_eye","-","zO",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","zP",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","zH",";","const","float","zI","=","0.99",";","const","float","zJ","=","1.8",";","const","int","zK","=","8",";","float","zU","(","vec3","zL",",","vec3","zM",")","{","float","zN","=","dot","(","zM",",","zM",")",";","float","zO","=","2.0","*","dot","(","zM",",","zL",")",";","float","zP","=","dot","(","zL",",","zL",")","-","1.0",";","float","zQ","=","zO","*","zO","-","4.0","*","zN","*","zP",";","float","zR","=","sqrt","(","zQ",")",";","float","zS","=","(","-","zO","-","zR",")","/","2.0",";","float","zT","=","zP","/","zS",";","return","zT",";","}","float","Aa","(","float","zV",",","float","zW",")","{","float","zX","=","3.0","*","(","1.0","-","zW","*","zW",")",";","float","zY","=","2.0","*","(","2.0","+","zW","*","zW",")",";","float","zZ","=","1.0","+","zV","*","zV",";","float","z_","=","pow","(","1.0","+","zW","*","zW","-","2.0","*","zW","*","zV",",","1.5",")",";","z_","=","max","(","z_",",","0.00001",")",";","return","(","zX","/","zY",")","*","(","zZ","/","z_",")",";","}","float","Ai","(","vec3","Ab",",","vec3","Ac",",","float","Ad",")","{","float","Ae","=","dot","(","Ac",",","-","Ab",")",";","if","(","Ae","<","0.0",")","{","return","1.0",";","}","vec3","Af","=","Ab","+","Ae","*","Ac",";","if","(","length","(","Af",")","<","Ad",")","{","return","0.0",";","}","else","if","(","length","(","Af",")",">=","Ad",")","{","vec3","Ag","=","normalize","(","Af",")","*","Ad","-","Ab",";","float","Ah","=","acos","(","dot","(","normalize","(","Ag",")",",","Ac",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","Ah","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","Am","(","float","Aj",",","vec3","Ak",",","float","Al",")","{","return","Ak","-","Ak","*","pow","(","u_sky_color",",","vec3","(","Al","/","Aj",")",")",";","}","void","main","(",")","{","vec3","An","=","normalize","(","zH",")",";","vec3","Ao","=","u_sun_direction",";","float","Ap","=","dot","(","An",",","Ao",")",";","float","Aq","=","Aa","(","Ap",",","-","0.01",")","*","u_rayleigh_brightness","*","Ao",".","y",";","float","Ar","=","Aa","(","Ap","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","Ao",".","y",")",";","float","As","=","smoothstep","(","0.0",",","100.0",",","Aa","(","Ap",",","0.9995",")",")","*","u_spot_brightness",";","vec3","At","=","vec3","(","0.0",",","zI",",","0.0",")",";","float","Au","=","zU","(","At",",","An",")",";","float","Av","=","Au","/","float","(","zK",")",";","float","Aw","=","Ai","(","At",",","An",",","zI","-","0.3",")",";","vec3","Ax","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","Ay","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","Az","=","0",";","Az","<","zK",";","Az","++",")","{","float","AA","=","Av","*","float","(","Az",")",";","vec3","AB","=","At","+","An","*","AA",";","float","AC","=","Ai","(","AB",",","Ao",",","zI","-","0.2",")",";","float","AD","=","zU","(","AB",",","Ao",")",";","vec3","AE","=","Am","(","AD",",","vec3","(","zJ",")",",","u_scatter_strength",")","*","AC",";","Ax","+=","Am","(","sqrt","(","AA",")",",","u_sky_color","*","AE",",","u_rayleigh_strength",")",";","Ay","+=","Am","(","AA",",","AE",",","u_mie_strength",")",";","}","Ax","=","Ax","*","Aw","*","pow","(","Au",",","u_rayleigh_collection_power",")","/","float","(","zK",")",";","Ay","=","(","Ay","*","Aw","*","pow","(","Au",",","u_mie_collection_power",")",")","/","float","(","zK",")",";","vec3","AF","=","vec3","(","As","*","Ay","+","Ar","*","Ay","+","Aq","*","Ax",")",";","gx","(","AF",")",";","gl_FragColor","=","vec4","(","AF",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","zH",";","void","main","(",")","{","vec4","zI","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","zJ","=","u_cube_view_matrix","*","zI",";","zH","=","zJ",".","xyz",";","gl_Position","=","zI",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","zI","=","texture2D","(","u_sampler",",","a",")",";","gx","(","zI",".","rgb",")",";","gA","(","zI",".","rgb",",","zI",".","a",")",";","gl_FragColor","=","zI",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","zI","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","zJ","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","zI",",","0.0",")",";","zJ",".","x","/=","zJ",".","w",";","zJ",".","y","/=","zJ",".","w",";","zJ","+=","99999.0","*","step","(","zJ",".","z",",","0.0",")",";","zJ","+=","100.0","*","(","step","(","1.0",",","abs","(","zJ",".","x",")",")","+","step","(","1.0",",","abs","(","zJ",".","y",")",")",")",";","zJ",".","x","=","-","a_lf_dist","*","zJ",".","x",";","zJ",".","y","=","-","a_lf_dist","*","zJ",".","y",";","float","zK","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","zL","=","vec2","(","a_lf_bb_vertex",".","x","/","zK",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","zM","=","1.9",";","zL","*=","(","1.0","+","zM","*","length","(","zJ",".","xy",")",")",";","}","gl_Position","=","vec4","(","zJ",".","xy","+","zL",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","||","PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","WO_SKYTEX"],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","BS","(","vec3","BN",",","vec3","BO",",","float","BP",",","float","BQ",")","{","float","BR","=","BP","*","BQ",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","==","MTEX_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["return","z_","(","BO",",","BN",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_ADD"],group:{type:"group",parts:[{type:"textline",tokens:["return","Ad","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SUB"],group:{type:"group",parts:[{type:"textline",tokens:["return","Ah","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_MUL"],group:{type:"group",parts:[{type:"textline",tokens:["return","Am","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SCREEN"],group:{type:"group",parts:[{type:"textline",tokens:["return","Ar","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_OVERLAY"],group:{type:"group",parts:[{type:"textline",tokens:["return","Aw","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIFF"],group:{type:"group",parts:[{type:"textline",tokens:["return","AA","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIV"],group:{type:"group",parts:[{type:"textline",tokens:["return","AE","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DARK"],group:{type:"group",parts:[{type:"textline",tokens:["return","AI","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","AM","(","BN",",","BO",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_HUE"],group:{type:"group",parts:[{type:"textline",tokens:["return","AT","(","BO",",","BN",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_SAT"],group:{type:"group",parts:[{type:"textline",tokens:["return","AZ","(","BO",",","BN",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_VAL"],group:{type:"group",parts:[{type:"textline",tokens:["return","Be","(","BO",",","BN",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["return","Bl","(","BO",",","BN",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SOFT_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","Bq","(","BO",",","BN",",","BR",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIN_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","Bu","(","BO",",","BN",",","BR",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","B_","(","float","BT",",","float","BU",",","float","BV",",","float","BW",")","{","vec3","BX","=","vec3","(","BT",")",",","BY","=","vec3","(","BU",")",";","float","BZ","=","BV","*","BW",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","==","MTEX_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["return","z_","(","BY",",","BX",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_ADD"],group:{type:"group",parts:[{type:"textline",tokens:["return","Ad","(","BX",",","BY",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SUB"],group:{type:"group",parts:[{type:"textline",tokens:["return","Ah","(","BX",",","BY",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_MUL"],group:{type:"group",parts:[{type:"textline",tokens:["return","BA","(","BT",",","BU",",","BZ",",","BW",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SCREEN"],group:{type:"group",parts:[{type:"textline",tokens:["return","BG","(","BT",",","BU",",","BZ",",","BW",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_OVERLAY"],group:{type:"group",parts:[{type:"textline",tokens:["return","BM","(","BT",",","BU",",","BZ",",","BW",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIFF"],group:{type:"group",parts:[{type:"textline",tokens:["return","AA","(","BX",",","BY",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIV"],group:{type:"group",parts:[{type:"textline",tokens:["return","AE","(","BX",",","BY",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DARK"],group:{type:"group",parts:[{type:"textline",tokens:["return","AI","(","BX",",","BY",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","AM","(","BX",",","BY",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SOFT_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","Bq","(","BY",",","BX",",","BZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIN_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","Bu","(","BY",",","BX",",","BZ",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","zH",";"]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","Ca",";","vec3","Cb","=","normalize","(","zH",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Ca","=","textureCube","(","u_sky",",","Cb",")",".","rgb",";"]}]}},{type:"elif",expression:["!","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["Ca","=","u_horizon_color",";","gx","(","Ca",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cc",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["Cc","=","vec3","(","a",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cc","=","vec3","(","zH",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["float","Cd",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Cd","=","abs","(","a",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cd","=","(","a",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","Ce","=","acos","(","Cb",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Cd","=","abs","(","Ce","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cd","=","1.0","-","Ce","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["vec3","Cf","=","u_horizon_color",";","vec3","Cg","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["float","Ch","=","1.0",";","vec4","Ci","=","textureCube","(","u_sky",",","Cb",")",";","gv","(","Ci",".","rgb",")",";","Ch","=","Ci",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ch","=","dot","(","Ci",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["!","MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ci","=","vec4","(","vec3","(","1.0",")","-","Ci",".","rgb",",","Ci",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ch","=","1.0","-","Ch",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","||","WOMAP_ZENUP","||","WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ci","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ch","=","Ci",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["Cf","=","BS","(","Ci",".","rgb",",","Cf",",","Ch",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","||","WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cj","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","Cc",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Cj","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Cj","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Cj","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Cj","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Cj","!=","0.0",")","Cg","=","BS","(","Ci",".","rgb",",","Cg",",","Ch",",","Cj",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["!","MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ch","=","dot","(","Ci",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Cd","=","B_","(","u_sky_tex_dvar",",","Cd",",","Ch",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ca","=","mix","(","Cf",",","Cg",",","Cd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ca","=","Cf",";"]}]}}]},{type:"textline",tokens:["gx","(","Ca",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gx","(","Cf",")",";","gx","(","Cg",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ca","=","mix","(","Cf",",","Cg",",","Cd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ca","=","Cf",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gv","(","Ca",")",";","float","Ck","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","Ck","=","min","(","-","Ck","*","0.03",",","0.8",")",";","float","Cl","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","vec3","Cm","=","vec3","(","0.0",")",";","vec4","Cn","=","u_underwater_fog_color_density",";","Cn",".","rgb","=","mix","(","Cn",".","rgb",",","Cm",",","min","(","-","Cb",".","y","+","Ck",",","1.0",")",")","*","Cl",";","float","Co","=","clamp","(","sign","(","Cb",".","y","-","0.05","*","Ck",")",",","0.0",",","1.0",")",";","Ca","=","mix","(","Cn",".","rgb",",","Ca",",","Co",")",";","gx","(","Ca",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ca",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","zH",";"]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","BN","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","BO","=","u_sky_vp_inverse","*","BN",";","zH","=","BO",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","BN",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","BN","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lD",";","varying","vec3","lA",";"]},{type:"condition",parts:[{type:"if",expression:["(","NUM_NORMALMAPS",">","0","||","FOAM",")","&&","!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lB",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lC",";","varying","vec3","BO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","BP",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","BQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","lF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","BR",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING","&&","USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","Cf","(","in","vec2","BS",",","in","vec3","BT",",","in","vec3","BU",",","in","vec3","BV",",","out","float","BW",")","{","BW","=","0.0",";","vec3","BX","=","reflect","(","-","BU",",","BT",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","BY","=","BS",".","xy","+","BT",".","xz","*","REFL_BUMP","/","lF",";","BW","=","u_reflect_factor",";","vec3","BZ",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["BZ","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["BZ","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","B_","=","dot","(","BU",",","BT",")",";","BW","*=","max","(","1.0","-","1.0","/","B_",",","1.0",")",";","}","else","{","BZ","=","texture2D","(","u_plane_reflection",",","BY",")",".","rgb",";","gv","(","BZ",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["BW","=","u_mirror_factor",";","vec3","BZ","=","BV","*","textureCube","(","u_mirrormap",",","BX",")",".","rgb",";","gv","(","BZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["BW","=","u_reflect_factor",";","vec3","BZ","=","BV","*","vec3","(","0.3",",","0.5",",","1.0",")",";","gv","(","BZ",")",";"]}]}}]},{type:"textline",tokens:["vec3","Ca","=","normalize","(","BX","+","BU",")",";","float","Cb","=","1.0","-","dot","(","BU",",","Ca",")",";","float","Cc","=","u_fresnel_params","[","3","]",";","float","Cd","=","u_fresnel_params","[","2","]",";","float","Ce","=","Cc","+","(","1.0","-","Cc",")","*","pow","(","Cb",",","Cd",")",";","BW","=","min","(","BW","*","Ce",",","1.0",")",";","return","BZ",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","Cg","=","mat3","(","lC",",","BO",",","lB",")",";"]}]}}]},{type:"textline",tokens:["vec3","Ch","=","normalize","(","lB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","Cg","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","Ch","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","Ci","=","lA",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0","||","FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cj","=","vec2","(","BP",".","x",",","-","BP",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cj","=","vec2","(","lA",".","x",",","-","lA",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cj","=","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ck","=","vec3","(","0.0",")",";","vec3","Cl","=","texture2D","(","u_normalmap0",",","Cj","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ck","+=","Cl",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cm","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["Cm","+=","Cl",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["Cl","=","texture2D","(","u_normalmap0",",","Cj","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ck","+=","Cl",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["Cm","+=","Cl",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["Cl","=","texture2D","(","u_normalmap0",",","Cj","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ck","+=","Cl",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["Cm","+=","Cl",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["Cl","=","texture2D","(","u_normalmap0",",","Cj","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Ck","+=","Cl",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["Cm","+=","Cl",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cn","=","Cg","*","Cm",";","if","(","!","g","(","Cn",",","vec3","(","0.0",")",")",")","Cn","=","normalize","(","Cn",")",";","vec3","Co","=","mix","(","Ch",",","Cn",",","0.2",")",";","Co","=","normalize","(","Co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ch","=","mix","(","Ch",",","normalize","(","Cg","*","Ck",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ch","=","mix","(","Ch",",","normalize","(","Cg","*","Ck",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["Ch","=","normalize","(","Ch",")",";"]}]}}]},{type:"textline",tokens:["vec3","Cp","=","normalize","(","lD",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cq","=","cI",".","xy","/","cI",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cr","=","lF","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cs","=","u_diffuse_color",".","a",";","vec4","Ct","=","texture2DProj","(","u_scene_depth",",","cI",")",";","float","Cu","=","gO","(","Ct",")",";","float","Cv","=","max","(","Cu","-","lF",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cw","=","Cq","+","Ch",".","xz","*","u_refr_bump","/","lF",";","float","Cx","=","mg","(","Cu",",","Cw",",","Cq",")",";","float","Cy","=","max","(","Cx","-","lF",",","0.0",")",";","float","Cz","=","u_view_max_depth","/","ABSORB","*","Cy",";","float","CA",";","if","(","u_cam_water_depth","<","0.0",")","CA","=","0.0",";","else","CA","=","min","(","Cs","*","Cz",",","1.0",")",";","float","CB","=","u_view_max_depth","/","ABSORB","*","Cv",";","Cs","=","min","(","15.0","*","Cs","*","u_view_max_depth","*","Cv",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","CB","=","u_view_max_depth","/","ABSORB","*","Cv",";","if","(","u_cam_water_depth",">","0.0",")","Cs","=","min","(","Cs","*","CB",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Cs","*=","min","(","5.0","*","Cr",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","Cs","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","CA","=","1.0","-","Cs",";","vec2","Cw","=","Cq","+","Ch",".","xz","*","u_refr_bump","/","lF",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","CC","=","texture2D","(","u_refractmap",",","Cw",")",".","rgb",";","gv","(","CC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","CD","=","pow","(","min","(","BQ",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","CE","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","CD",")",";","CD","=","pow","(","min","(","BQ",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","CE","=","mix","(","u_shore_water_col",",","CE",",","CD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","CE","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","CF","=","max","(","1.0","-","u_view_max_depth","*","Cv",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","CF","=","1.0","-","Cs",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","CG","=","max","(","Ci","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","CH","=","normalize","(","vec3","(","BQ",".","r",",","0.0",",","BQ",".","g",")",")",";","vec3","CI","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","CH",",","0.8",")",")",";","float","CJ","=","1.25","*","max","(","dot","(","Co",",","CI",")","-","0.2",",","0.0",")",";","CJ","+=","max","(","dot","(","Co",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","CF","+=","CJ","*","(","1.0","-","BQ",".","b",")",";","CG","*=","(","1.0","-","0.95","*","pow","(","BQ",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["CF","+=","CG",";","CF","=","min","(","u_foam_factor","*","CF",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","CK","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Cj","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","CL","=","u_specular_params","[","0","]",";","vec2","CM","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","CN","=","CL","*","u_specular_color",";","vec3","CO","=","u_environment_energy","*","mr","(","Ch",")",";","vec3","CP","=","u_ambient","*","CO",";","vec3","CQ","=","CP","+","u_sun_intensity",";","float","CR",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","CS","=","Cf","(","Cq",",","Ch",",","Cp",",","CQ",",","CR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","CS","=","Cf","(","vec2","(","0.0",")",",","Ch",",","Cp",",","CQ",",","CR",")",";"]}]}}]},{type:"textline",tokens:["vec3","CT","=","u_diffuse_intensity","*","CE",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hO","CU","=","kU","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","CT",",","CN",",","lA",",","Ch",",","Cp",",","CM",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hO","CU","=","kZ","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","CT",")",";"]}]}}]},{type:"textline",tokens:["CT","=","CU",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","CV","=","max","(","dot","(","u_sun_direction",",","-","lB",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","Cp",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","CV","=","clamp","(","SSS_STRENGTH","*","CV",",","0.0",",","1.0",")",";","CT","=","mix","(","CT",",","u_shallow_water_col",",","CV",")",";","CT","=","mix","(","CT",",","u_shore_water_col",",","CV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["CT","=","mix","(","CC",",","CT",",","CA",")",";"]}]}}]},{type:"textline",tokens:["CT","=","mix","(","CT",",","CS",",","CR",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","CW","=","mix","(","CK",".","g",",","CK",".","r",",","max","(","4.0","*","(","CF","-","0.75",")",",","0.0",")",")",";","CW","=","mix","(","CK",".","b",",","CW",",","max","(","2.0","*","CF","-","1.0",",","0.0",")",")",";","CW","=","mix","(","0.0",",","CW",",","CF",")",";","CT","=","mix","(","CT",",","CQ",",","CW",")",";"]}]}}]},{type:"textline",tokens:["CT","+=","CU",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","CX","=","hi","(","u_cube_fog",",","Cp",")",";","vec4","CY","=","vec4","(","CX",",","u_fog_color_density",".","a",")",";","gv","(","CY",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","CY","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","hK","(","CT",",","Cr",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","hb","(","CT",",","Cr",",","CY",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hb","(","CT",",","Cr",",","CY",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gx","(","CT",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Cs","=","max","(","Cs",",","CU",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Cs","+=","CW",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gA","(","CT",",","Cs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","CZ","=","fwidth","(","BR",")",";","vec3","C_","=","smoothstep","(","vec3","(","0.0",")",",","CZ","*","BN",",","BR",")",";","float","Da","=","min","(","min","(","C_",".","x",",","C_",".","y",")",",","C_",".","z",")",";","Da","=","clamp","(","Da",",","0.0",",","1.0",")",";","CT","=","mix","(","u_wireframe_edge_color",",","CT",",","Da",")",";","Cs","=","mix","(","1.0",",","Cs",",","Da",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","CT",",","Cs",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lD",";","varying","vec3","lA",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH","&&","(","NUM_NORMALMAPS",">","0","||","FOAM",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lB",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lC",";","varying","vec3","BO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","BP",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","BQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","lF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","BR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BX","(","in","vec2","BN",")","{","vec2","BS","=","0.5","+","vec2","(","(","BN",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","BN",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","vec4","BT","=","texture2D","(","u_shore_dist_map",",","BS",")",";","const","vec2","BU","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","BV","=","dot","(","BT",".","ba",",","BU",")",";","vec2","BW","=","normalize","(","BT",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","BW",",","BV",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","Cn","(","inout","vec3","BY",",","in","float","BZ",",","in","vec3","B_",")","{","float","Ca","=","dJ","(","DST_NOISE_SCALE_0","*","(","BY",".","xz","+","DST_NOISE_FREQ_0","*","BZ",")",")","*","dJ","(","DST_NOISE_SCALE_1","*","(","BY",".","zx","-","DST_NOISE_FREQ_1","*","BZ",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cb","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","Cc","=","B_",".","b",";","float","Cd","=","sqrt","(","Cc",")",";","float","Ce","=","max","(","Cc",",","DIR_MIN_SHR_FAC",")","*","sin","(","Cd","/","Cb","+","DIR_FREQ","*","BZ",")",";","float","Cf","=","max","(","dJ","(","DIR_NOISE_SCALE","*","(","BY",".","xz","+","DIR_NOISE_FREQ","*","BZ",")",")",",","DIR_MIN_NOISE_FAC",")",";","Ce","*=","Cf",";","float","Cg","=","WAVES_HEIGHT","*","mix","(","Ce",",","Ca",",","max","(","Cd",",","DST_MIN_FAC",")",")",";","vec2","Ch","=","B_",".","rg",";","float","Ci","=","WAVES_HOR_FAC","*","Ce","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Cc",")",",","0.0",")",";","vec2","Cj","=","Ci","*","Ch",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","Cg","=","WAVES_HEIGHT","*","Ca",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ck","=","2.0","*","(","BY",".","xz","-","0.1","*","BZ",")",";","vec2","Cl","=","1.3","*","(","BY",".","zx","+","0.03","*","BZ",")",";","float","Cm","=","dd","(","0.5","*","Ck",")",".","x","+","dd","(","0.5","*","Cl",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["BY",".","xz","+=","Cj",";","Cm","*=","Cc",";"]}]}}]},{type:"textline",tokens:["Cg","+=","SMALL_WAVES_FAC","*","Cm",";"]}]}}]},{type:"textline",tokens:["BY",".","y","+=","Cg",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","BR","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","BR","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","BR","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","Co","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cp","=","abs","(","Co",".","y",")",";","vec2","Cq","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","Cp",")",";","Co",".","y","=","WATER_LEVEL",";","Co",".","xz","+=","Cq",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",">","0","||","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["d","Cr","=","aA","(","Co",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["BP","=","Cr",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["BQ","=","BX","(","Cr",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cs","=","length","(","u_wind",")",";","float","Ct","=","u_time",";","Ct","*=","Cs",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cu","=","Cp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","Cu","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","Cv","=","Cr",".","a","+","vec3","(","Cu",",","0.0",",","0.0",")",";","vec3","Cw","=","Cr",".","a","+","vec3","(","0.0",",","0.0",",","Cu",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cx","=","BX","(","Cv",".","xz",")",";","vec3","Cy","=","BX","(","Cw",".","xz",")",";","Cn","(","Cv",",","Ct",",","Cx",")",";","Cn","(","Cw",",","Ct",",","Cy",")",";","Cn","(","Cr",".","a",",","Ct",",","BQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cn","(","Cv",",","Ct",",","vec3","(","0.0",")",")",";","Cn","(","Cw",",","Ct",",","vec3","(","0.0",")",")",";","Cn","(","Cr",".","a",",","Ct",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","Cr",".","a",".","y","=","WATER_LEVEL","-","1.0",";","Cv",".","y","=","Cr",".","a",".","y",";","Cw",".","y","=","Cr",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","Cz","=","normalize","(","Cv","-","Cr",".","a",")",";","vec3","CA","=","normalize","(","Cw","-","Cr",".","a",")",";","lB","=","normalize","(","cross","(","CA",",","Cz",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["lC","=","CA",";","BO","=","cross","(","lB",",","lC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","CB","=","dot","(","lB",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","CC","=","clamp","(","0.8","-","CB",",","0.0",",","1.0",")",";","lB","=","mix","(","lB",",","vec3","(","0.0",",","1.0",",","0.0",")",",","CC",")",";"]}]}}]}]}}]},{type:"textline",tokens:["lA","=","Cr",".","a",";","lD","=","u_camera_eye","-","Cr",".","a",";","vec4","CD","=","u_view_matrix","*","vec4","(","Cr",".","a",",","1.0",")",";","vec4","CE","=","u_proj_matrix","*","CD",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","CF","=","CE",".","x",";","float","CG","=","CE",".","y",";","float","CH","=","CE",".","w",";","cI",".","x","=","(","CF","+","CH",")","/","2.0",";","cI",".","y","=","(","CG","+","CH",")","/","2.0",";","cI",".","z","=","CH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["lF","=","-","CD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","CE",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","BR",";","const","float","BN","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","BS","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","BS","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","BT","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","BU","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","BV","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","BW","=","vec3","(","0.0",")",";","float","BX","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BY","=","sign","(","BR","-","vec3","(","0.02","*","BN",")",")",";","if","(","BY",".","x","<","0.0","||","BY",".","y","<","0.0","||","BY",".","z","<","0.0",")","{","BW","=","BS",";","BX","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BY","=","sign","(","BR","-","vec3","(","0.02","*","BN",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","BY",".","x","<","0.0","||","BY",".","y","<","0.0","||","BY",".","z","<","0.0",")","BW","=","u_wireframe_edge_color",";","else","BW","=","BV",";","BX","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","BY",".","x","<","0.0","||","BY",".","y","<","0.0","||","BY",".","z","<","0.0",")","BX","=","1.0",";","else","BX","=","0.0",";","BW","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","BY",".","x","<","0.0","||","BY",".","y","<","0.0","||","BY",".","z","<","0.0",")","BW","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","BW","=","BT",";","else","BW","=","BU",";","BX","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","BZ","=","fwidth","(","BR",")",";","vec3","B_","=","smoothstep","(","vec3","(","0.0",")",",","BZ","*","BN",",","BR",")",";","float","Ca","=","min","(","min","(","B_",".","x",",","B_",".","y",")",",","B_",".","z",")",";","Ca","=","clamp","(","Ca",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","BW","=","vec3","(","mix","(","u_wireframe_edge_color",",","BV",",","Ca",")",")",";","BX","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","BW","=","u_wireframe_edge_color",";","BX","=","mix","(","1.0",",","0.0",",","Ca",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","BW","=","mix","(","u_wireframe_edge_color",",","BT",",","Ca",")",";","else","BW","=","mix","(","u_wireframe_edge_color",",","BU",",","Ca",")",";","BX","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["gx","(","BW",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gA","(","BW",",","BX",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","BW",",","BX",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","BR",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","BR","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","BR","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","BR","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","BN","=","a_position",";","vec3","BS","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["d","BT","=","aA","(","BN",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["BN","=","mix","(","BN",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BU","=","vec3","(","0.0",")",";","vec3","BV","=","vec3","(","0.0",")",";","bK","(","BN",",","BU",",","BV",",","BS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BW","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","BW","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","BT","=","ge","(","BN",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","BW",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BX","=","(","u_model_matrix","*","vec4","(","BW",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","&&","!","STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","BY","=","at","(","u_camera_eye",",","BX",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","BY","=","an","(","u_camera_eye",",","BX",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BZ","=","(","u_model_matrix","*","vec4","(","BW",",","1.0",")",")",".","xyz",";","BY","=","BY","*","ac","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","BZ",")",";"]}]}}]},{type:"textline",tokens:["d","BT","=","aA","(","BN","-","BW",",","BW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","BY",")",";","BT",".","b","=","BX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","BT","=","aA","(","BN",",","BW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cC","(","BT",".","a",",","BT",".","b",",","BS",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","B_","=","u_view_matrix","*","vec4","(","BT",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","B_",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","BN","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","BS","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","BN","[","0","]",",","BS","[","1","]",",","BS","[","2","]",",","BN","[","3","]","+","BS","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","BU","(","float","BN",",","float","BS",")","{","vec2","BT","=","a","+","vec2","(","BN",",","BS",")","*","u_texel_size",";","return","texture2D","(","u_color",",","BT",")",";","}","float","BY","(","vec4","BV",")","{","vec3","BW","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","BX","=","dot","(","BV",".","rgb",",","BW",")",";","return","BX",";","}","vec4","Cq","(",")","{","vec4","BZ","=","BU","(","-","1.0",",","-","1.0",")",";","vec4","B_","=","BU","(","1.0",",","-","1.0",")",";","vec4","Ca","=","BU","(","-","1.0",",","1.0",")",";","vec4","Cb","=","BU","(","1.0",",","1.0",")",";","vec4","Cc","=","BU","(","0.0",",","0.0",")",";","float","Cd","=","BY","(","BZ",")",";","float","Ce","=","BY","(","B_",")",";","float","Cf","=","BY","(","Ca",")",";","float","Cg","=","BY","(","Cb",")",";","float","Ch","=","BY","(","Cc",")",";","float","Ci","=","min","(","Ch",",","min","(","min","(","Cd",",","Ce",")",",","min","(","Cf",",","Cg",")",")",")",";","float","Cj","=","max","(","Ch",",","max","(","max","(","Cd",",","Ce",")",",","max","(","Cf",",","Cg",")",")",")",";","vec2","Ck",";","Ck",".","x","=","-","(","(","Cd","+","Ce",")","-","(","Cf","+","Cg",")",")",";","Ck",".","y","=","(","(","Cd","+","Cf",")","-","(","Ce","+","Cg",")",")",";","float","Cl","=","max","(","(","Cd","+","Ce","+","Cf","+","Cg",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","Cm","=","1.0","/","(","min","(","abs","(","Ck",".","x",")",",","abs","(","Ck",".","y",")",")","+","Cl",")",";","Ck","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Ck","*","Cm",")",")","*","u_texel_size",";","vec4","Cn","=","0.5","*","(","texture2D","(","u_color",",","a","+","Ck","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","Ck","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","Co","=","Cn","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","Ck","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","Ck","*","0.5",")",")",";","float","Cp","=","BY","(","Co",")",";","if","(","(","Cp","<","Ci",")","||","(","Cp",">","Cj",")",")","return","Cn",";","else","return","Co",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","Eb","(",")","{","vec2","Cr",";","Cr",".","x","=","a",".","x",";","Cr",".","y","=","a",".","y",";","vec4","Cs","=","texture2D","(","u_color",",","Cr",")",";","vec4","Ct","=","BU","(","0.0",",","1.0",")",";","vec4","Cu","=","BU","(","1.0",",","0.0",")",";","vec4","Cv","=","BU","(","0.0",",","-","1.0",")",";","vec4","Cw","=","BU","(","-","1.0",",","0.0",")",";","float","Cx","=","BY","(","Ct",")",";","float","Cy","=","BY","(","Cu",")",";","float","Cz","=","BY","(","Cv",")",";","float","CA","=","BY","(","Cw",")",";","float","CB","=","BY","(","Cs",")",";","float","CC","=","max","(","Cx",",","CB",")",";","float","CD","=","min","(","Cx",",","CB",")",";","float","CE","=","max","(","Cy",",","CC",")",";","float","CF","=","min","(","Cy",",","CD",")",";","float","CG","=","max","(","Cz",",","CA",")",";","float","CH","=","min","(","Cz",",","CA",")",";","float","CI","=","max","(","CG",",","CE",")",";","float","CJ","=","min","(","CH",",","CF",")",";","float","CK","=","CI","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","CL","=","CI","-","CJ",";","float","CM","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","CK",")",";","bool","CN","=","CL","<","CM",";","if","(","CN",")","return","Cs",";","vec4","CO","=","BU","(","-","1.0",",","-","1.0",")",";","vec4","CP","=","BU","(","1.0",",","1.0",")",";","vec4","CQ","=","BU","(","1.0",",","-","1.0",")",";","vec4","CR","=","BU","(","-","1.0",",","1.0",")",";","float","CS","=","BY","(","CO",")",";","float","CT","=","BY","(","CP",")",";","float","CU","=","BY","(","CQ",")",";","float","CV","=","BY","(","CR",")",";","float","CW","=","Cz","+","Cx",";","float","CX","=","CA","+","Cy",";","float","CY","=","1.0","/","CL",";","float","CZ","=","CW","+","CX",";","float","C_","=","(","-","2.0","*","CB",")","+","CW",";","float","Da","=","(","-","2.0","*","CB",")","+","CX",";","float","Db","=","CU","+","CT",";","float","Dc","=","CS","+","CU",";","float","Dd","=","(","-","2.0","*","Cy",")","+","Db",";","float","De","=","(","-","2.0","*","Cz",")","+","Dc",";","float","Df","=","CS","+","CV",";","float","Dg","=","CV","+","CT",";","float","Dh","=","(","abs","(","C_",")","*","2.0",")","+","abs","(","Dd",")",";","float","Di","=","(","abs","(","Da",")","*","2.0",")","+","abs","(","De",")",";","float","Dj","=","(","-","2.0","*","CA",")","+","Df",";","float","Dk","=","(","-","2.0","*","Cx",")","+","Dg",";","float","Dl","=","abs","(","Dj",")","+","Dh",";","float","Dm","=","abs","(","Dk",")","+","Di",";","float","Dn","=","Df","+","Db",";","float","Do","=","u_texel_size",".","x",";","bool","Dp","=","Dl",">=","Dm",";","float","Dq","=","CZ","*","2.0","+","Dn",";","if","(","!","Dp",")","Cz","=","CA",";","if","(","!","Dp",")","Cx","=","Cy",";","if","(","Dp",")","Do","=","u_texel_size",".","y",";","float","Dr","=","(","Dq","*","(","1.0","/","12.0",")",")","-","CB",";","float","Ds","=","Cz","-","CB",";","float","Dt","=","Cx","-","CB",";","float","Du","=","Cz","+","CB",";","float","Dv","=","Cx","+","CB",";","bool","Dw","=","abs","(","Ds",")",">=","abs","(","Dt",")",";","float","Dx","=","max","(","abs","(","Ds",")",",","abs","(","Dt",")",")",";","if","(","Dw",")","Do","=","-","Do",";","float","Dy","=","clamp","(","abs","(","Dr",")","*","CY",",","0.0",",","1.0",")",";","vec2","Dz",";","Dz",".","x","=","Cr",".","x",";","Dz",".","y","=","Cr",".","y",";","vec2","DA",";","DA",".","x","=","(","!","Dp",")","?","0.0",":","u_texel_size",".","x",";","DA",".","y","=","(","Dp",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","Dp",")","Dz",".","x","+=","Do","*","0.5",";","if","(","Dp",")","Dz",".","y","+=","Do","*","0.5",";","vec2","DB",";","DB",".","x","=","Dz",".","x","-","DA",".","x",";","DB",".","y","=","Dz",".","y","-","DA",".","y",";","vec2","DC",";","DC",".","x","=","Dz",".","x","+","DA",".","x",";","DC",".","y","=","Dz",".","y","+","DA",".","y",";","float","DD","=","(","(","-","2.0",")","*","Dy",")","+","3.0",";","float","DE","=","BY","(","texture2D","(","u_color",",","DB",")",")",";","float","DF","=","Dy","*","Dy",";","float","DG","=","BY","(","texture2D","(","u_color",",","DC",")",")",";","if","(","!","Dw",")","Du","=","Dv",";","float","DH","=","Dx","*","1.0","/","4.0",";","float","DI","=","CB","-","Du","*","0.5",";","float","DJ","=","DD","*","DF",";","bool","DK","=","DI","<","0.0",";","DE","-=","Du","*","0.5",";","DG","-=","Du","*","0.5",";","bool","DL","=","abs","(","DE",")",">=","DH",";","bool","DM","=","abs","(","DG",")",">=","DH",";","if","(","!","DL",")","DB",".","x","-=","DA",".","x","*","1.5",";","if","(","!","DL",")","DB",".","y","-=","DA",".","y","*","1.5",";","bool","DN","=","(","!","DL",")","||","(","!","DM",")",";","if","(","!","DM",")","DC",".","x","+=","DA",".","x","*","1.5",";","if","(","!","DM",")","DC",".","y","+=","DA",".","y","*","1.5",";","if","(","DN",")","{","if","(","!","DL",")","DE","=","BY","(","texture2D","(","u_color",",","DB",".","xy",")",")",";","if","(","!","DM",")","DG","=","BY","(","texture2D","(","u_color",",","DC",".","xy",")",")",";","if","(","!","DL",")","DE","=","DE","-","Du","*","0.5",";","if","(","!","DM",")","DG","=","DG","-","Du","*","0.5",";","DL","=","abs","(","DE",")",">=","DH",";","DM","=","abs","(","DG",")",">=","DH",";","if","(","!","DL",")","DB",".","x","-=","DA",".","x","*","2.0",";","if","(","!","DL",")","DB",".","y","-=","DA",".","y","*","2.0",";","DN","=","(","!","DL",")","||","(","!","DM",")",";","if","(","!","DM",")","DC",".","x","+=","DA",".","x","*","2.0",";","if","(","!","DM",")","DC",".","y","+=","DA",".","y","*","2.0",";","if","(","DN",")","{","if","(","!","DL",")","DE","=","BY","(","texture2D","(","u_color",",","DB",".","xy",")",")",";","if","(","!","DM",")","DG","=","BY","(","texture2D","(","u_color",",","DC",".","xy",")",")",";","if","(","!","DL",")","DE","=","DE","-","Du","*","0.5",";","if","(","!","DM",")","DG","=","DG","-","Du","*","0.5",";","DL","=","abs","(","DE",")",">=","DH",";","DM","=","abs","(","DG",")",">=","DH",";","if","(","!","DL",")","DB",".","x","-=","DA",".","x","*","2.0",";","if","(","!","DL",")","DB",".","y","-=","DA",".","y","*","2.0",";","DN","=","(","!","DL",")","||","(","!","DM",")",";","if","(","!","DM",")","DC",".","x","+=","DA",".","x","*","2.0",";","if","(","!","DM",")","DC",".","y","+=","DA",".","y","*","2.0",";","if","(","DN",")","{","if","(","!","DL",")","DE","=","BY","(","texture2D","(","u_color",",","DB",".","xy",")",")",";","if","(","!","DM",")","DG","=","BY","(","texture2D","(","u_color",",","DC",".","xy",")",")",";","if","(","!","DL",")","DE","=","DE","-","Du","*","0.5",";","if","(","!","DM",")","DG","=","DG","-","Du","*","0.5",";","DL","=","abs","(","DE",")",">=","DH",";","DM","=","abs","(","DG",")",">=","DH",";","if","(","!","DL",")","DB",".","x","-=","DA",".","x","*","4.0",";","if","(","!","DL",")","DB",".","y","-=","DA",".","y","*","4.0",";","DN","=","(","!","DL",")","||","(","!","DM",")",";","if","(","!","DM",")","DC",".","x","+=","DA",".","x","*","4.0",";","if","(","!","DM",")","DC",".","y","+=","DA",".","y","*","4.0",";","if","(","DN",")","{","if","(","!","DL",")","DE","=","BY","(","texture2D","(","u_color",",","DB",".","xy",")",")",";","if","(","!","DM",")","DG","=","BY","(","texture2D","(","u_color",",","DC",".","xy",")",")",";","if","(","!","DL",")","DE","=","DE","-","Du","*","0.5",";","if","(","!","DM",")","DG","=","DG","-","Du","*","0.5",";","DL","=","abs","(","DE",")",">=","DH",";","DM","=","abs","(","DG",")",">=","DH",";","if","(","!","DL",")","DB",".","x","-=","DA",".","x","*","2.0",";","if","(","!","DL",")","DB",".","y","-=","DA",".","y","*","2.0",";","if","(","!","DM",")","DC",".","x","+=","DA",".","x","*","2.0",";","if","(","!","DM",")","DC",".","y","+=","DA",".","y","*","2.0",";","}","}","}","}","float","DO","=","Cr",".","x","-","DB",".","x",";","float","DP","=","DC",".","x","-","Cr",".","x",";","if","(","!","Dp",")","DO","=","Cr",".","y","-","DB",".","y",";","if","(","!","Dp",")","DP","=","DC",".","y","-","Cr",".","y",";","bool","DQ","=","(","DE","<","0.0",")","!=","DK",";","float","DR","=","(","DP","+","DO",")",";","bool","DS","=","(","DG","<","0.0",")","!=","DK",";","float","DT","=","1.0","/","DR",";","bool","DU","=","DO","<","DP",";","float","DV","=","min","(","DO",",","DP",")",";","bool","DW","=","DU","?","DQ",":","DS",";","float","DX","=","DJ","*","DJ",";","float","DY","=","(","DV","*","(","-","DT",")",")","+","0.5",";","float","DZ","=","DX","*","FXAA_QUALITY_SUBPIX",";","float","D_","=","DW","?","DY",":","0.0",";","float","Ea","=","max","(","D_",",","DZ",")",";","if","(","!","Dp",")","Cr",".","x","+=","Ea","*","Do",";","if","(","Dp",")","Cr",".","y","+=","Ea","*","Do",";","return","texture2D","(","u_color",",","Cr",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Cq","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Eb","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","BN","=","vec2","(","0.0",",","0.0",")",";","vec2","BS","=","u_texel_size",";","vec4","BT","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","BT","*","0.0875447373698",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0858112354248",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0808139781061",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0731235112908",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0635705267419",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0530985673112",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0426125984122",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0328565115809",";","BN","+=","BS",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","BN",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","BN",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","BT",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","BN","=","texture2D","(","u_main",",","a",")",";","vec4","BS","=","texture2D","(","u_bloom",",","a",")",";","vec4","BT","=","BN",";","BT","+=","BS",";","gl_FragColor","=","vec4","(","BT",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","BN","=","texture2D","(","u_color",",","a",")",";","vec3","BS","=","BN",".","rgb",";","if","(","u_brightness","<","0.0",")","BS","=","BS","*","(","1.0","+","u_brightness",")",";","else","BS","=","BS","+","(","(","1.0","-","BS",")","*","u_brightness",")",";","BS","=","(","BS","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","BS","*=","u_exposure",";","vec3","BT","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","BU","=","dot","(","BS",",","BT",")",";","BS","=","mix","(","vec3","(","BU",")",",","BS",",","u_saturation",")",";","gl_FragColor","=","vec4","(","BS",",","BN",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","gK","(","clamp","(","BZ","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","B_","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","Ca","=","BZ","(","u_depth",",","a",",","u_camera_range",")",";","Ca","*=","u_view_max_depth",";","float","Cb",";","if","(","Ca","<","u_dof_dist",")","Cb","=","(","u_dof_dist","-","Ca",")","/","u_dof_front",";","else","Cb","=","(","Ca","-","u_dof_dist",")","/","u_dof_rear",";","Cb","=","clamp","(","Cb",",","0.0",",","1.0",")",";","vec4","Cc","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","B_",",","Cc",",","Cb",")",";","}","else","gl_FragColor","=","B_",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","a",";","void","main","(",")","{","vec4","BN","=","texture2D","(","u_src_color",",","a",")",";","vec4","B_","=","texture2D","(","u_glow_mask_small",",","a",")",";","vec4","Ca","=","texture2D","(","u_glow_mask_large",",","a",")",";","gl_FragColor","=","BN",";","if","(","Ca",".","a","!=","0.0",")","{","float","Cb","=","u_glow_mask_large_coeff","*","Ca",".","a",";","Cb","=","clamp","(","Cb",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ca",".","rgb","/","Ca",".","a",",","Cb",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Cb",")",";","}","if","(","B_",".","a","!=","0.0",")","{","float","Cc","=","u_glow_mask_small_coeff","*","B_",".","a",";","Cc","=","clamp","(","Cc",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","B_",".","rgb","/","B_",".","a",",","Cc",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Cc",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","B_",";","varying","vec2","Ca",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","Cb",";","void","main","(",")","{","vec2","Cc","=","(","Cb",".","xy","-","a",")",";","float","Cd","=","length","(","Cc",")",";","vec2","Ce","=","u_radial_blur_step","*","Cc","/","Cd",";","float","Cf","=","Cd","/","u_radial_blur_step",";","Ce","*=","min","(","Cf",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Cf","=","max","(","Cf",",","STEPS_PER_PASS",")",";","vec2","Cg","=","a",";","float","Ch","=","0.0",";","for","(","float","Ci","=","0.0",";","Ci","<","STEPS_PER_PASS",";","Ci","+=","1.0",")","{","if","(","Ci","<=","Cf",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cj","=","BZ","(","u_input",",","Cg",",","u_camera_range",")",";","Ch","+=","max","(","(","1.0","-","pow","(","Cd",",","0.3",")",")","*","step","(","0.9",",","Cj",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ck","=","texture2D","(","u_input",",","Cg",")",";","Ch","+=","gO","(","Ck",")",";"]}]}}]},{type:"textline",tokens:["}","Cg","+=","Ce",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cl","=","a","+","Ca",";","float","Cm","=","dd","(","vec2","(","2.5","*","(","Cl",".","x",")",",","2.5","*","(","Cl",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","dd","(","vec2","(","5.0","*","(","Cl",".","x",")","-","0.66","*","u_time",",","5.0","*","(","Cl",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dJ","(","vec2","(","7.5","*","(","Cl",".","x",")","+","0.33","*","u_time",",","7.5","*","(","Cl",".","y",")","-","0.33","*","u_time",")",")",";","Cm","*=","clamp","(","1.2","-","sqrt","(","0.2","*","Cd",")",",","0.0",",","1.0",")","*","B_",";","Ch","=","max","(","Cm",",","Ch",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","gK","(","Ch","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","B_",";","varying","vec2","Ca",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","Cb",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","BN","=","normalize","(","u_sun_direction",")",";","Cb","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","BN",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","B_","=","1.0",";","vec3","Cc","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","Cd","=","j","(","u_camera_quat",",","Cc",")",";","Cd","=","normalize","(","Cd",")",";","float","Ce","=","dot","(","Cd",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","Cf","=","atan","(","Cd",".","x",",","Cd",".","z",")",";","Ca","=","vec2","(","-","Cf",",","acos","(","Ce",")",")",";","}","else","{","B_","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Cb",".","xy","=","0.5","*","(","Cb",".","xy","/","Cb",".","w","+","1.0",")",";","Cb","+=","99999.0","*","step","(","Cb",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","BN","=","texture2D","(","u_main",",","a",")",";","vec3","Cc","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","gv","(","BN",".","rgb",")",";","float","Cd","=","gO","(","texture2D","(","u_god_rays",",","a",")",")",";","vec3","Ce","=","BN",".","rgb","+","u_god_rays_intensity","*","vec3","(","Cd",")","*","Cc",";","gx","(","Ce",")",";","gl_FragColor",".","rgb","=","Ce",";","gl_FragColor",".","a","=","BN",".","a",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","BN","=","texture2D","(","u_input",",","a",")",";","float","Cc","=","dot","(","BN",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","Cc",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","BN",";","float","Cc","=","0.0",";","for","(","float","Cd","=","0.025",";","Cd","<","1.0",";","Cd","+=","0.05",")","for","(","float","Ce","=","0.025",";","Ce","<","1.0",";","Ce","+=","0.05",")","{","BN","=","max","(","texture2D","(","u_input",",","vec2","(","Cd",",","Ce",")",")",".","r",",","0.01",")",";","Cc","+=","log","(","BN",")",";","}","float","Cf","=","exp","(","Cc","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","Cf",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","Cc",";","void","main","(",")","{","float","Cd","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","Ce","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","Cf","=","texture2D","(","u_main",",","a",")",";","float","Cg","=","Ce","/","Cd",";","float","Ch","=","u_bloom_edge_lum",";","gl_FragColor","=","Cf","*","max","(","Cg","-","Ch",",","0.0",")","*","Cc",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","Cc",";","const","vec3","BN","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Ck","(","in","vec4","Cd",",","in","vec3","Ce",",","out","vec3","Cf",")","{","float","Cg","=","Cd",".","w","*","Ce",".","x","+","Cd",".","y","*","Ce",".","z","-","Cd",".","z","*","Ce",".","y",";","float","Ch","=","Cd",".","w","*","Ce",".","y","+","Cd",".","z","*","Ce",".","x","-","Cd",".","x","*","Ce",".","z",";","float","Ci","=","Cd",".","w","*","Ce",".","z","+","Cd",".","x","*","Ce",".","y","-","Cd",".","y","*","Ce",".","x",";","float","Cj","=","-","Cd",".","x","*","Ce",".","x","-","Cd",".","y","*","Ce",".","y","-","Cd",".","z","*","Ce",".","z",";","Cf",".","x","=","Cg","*","Cd",".","w","-","Cj","*","Cd",".","x","-","Ch","*","Cd",".","z","+","Ci","*","Cd",".","y",";","Cf",".","y","=","Ch","*","Cd",".","w","-","Cj","*","Cd",".","y","-","Ci","*","Cd",".","x","+","Cg","*","Cd",".","z",";","Cf",".","z","=","Ci","*","Cd",".","w","-","Cj","*","Cd",".","z","-","Cg","*","Cd",".","y","+","Ch","*","Cd",".","x",";","}","void","main","(",")","{","a","=","2.0","*","a_position",";","vec3","Cl",";","Ck","(","u_camera_quat",",","BN",",","Cl",")",";","Cc","=","dot","(","-","Cl",",","u_sun_direction",")","*","u_bloom_key",";","Cc","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","a",";","float","BN","=","0.0042",";","void","main","(",")","{","vec4","Cd","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","Ce","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","Cd","-","Ce",")",">","u_motion_blur_decay_threshold",")","{","vec4","Cf","=","(","1.0","-","u_motion_blur_exp",")","*","Cd","+","u_motion_blur_exp","*","Ce",";","vec4","Cg","=","Cf","-","Ce",";","vec4","Ch","=","Cd","-","Ce",";","vec4","Ci","=","min","(","max","(","abs","(","Cg",")",",","vec4","(","BN",")",")",",","abs","(","Ch",")",")","*","sign","(","Cg",")",";","gl_FragColor","=","Ce","+","Ci",";","}","else","{","gl_FragColor","=","Cd",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","a",";","void","main","(",")","{","vec4","BN","=","texture2D","(","u_outline_src",",","a",")",";","gl_FragColor","=","BN",";","if","(","u_draw_outline","!=","0.0",")","{","vec4","Cd","=","texture2D","(","u_outline_mask",",","a",")",";","vec4","Ce","=","texture2D","(","u_outline_mask_blurred",",","a",")",";","float","Cf","=","Ce",".","a","-","Cd",".","a",";","if","(","Cf","!=","0.0",")","{","float","Cg","=","smoothstep","(","0.0",",","1.0",",","Ce",".","a",")",";","if","(","Cd",".","a","==","0.0",")","{","vec3","Ch","=","u_outline_color",";","gx","(","Ch",")",";","vec4","Ci","=","vec4","(","clamp","(","Ch",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","BN",",","Ci",",","Cg",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","BN","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","BN",".","r","+","BN",".","g","+","BN",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cd","=","vec2","(","0.0",",","0.0",")",";","vec2","Ce","=","u_texel_size",";","vec4","Cf",";","Cf","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","Cf","*","0.2270270270",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","0.1945945946",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","0.1945945946",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","0.1216216216",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","0.1216216216",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","0.0540540541",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","0.0540540541",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","0.0162162162",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_GLOW_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_GLOW_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Cd","=","vec2","(","0.0",",","0.0",")",";","vec2","Ce","=","u_texel_size",";","vec4","Cf",";","Cf","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.152507",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.141763",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.141763",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.113861",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.113861",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.079019",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.079019",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.047383",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.047383",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.024549",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.024549",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.01099",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.01099",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.00425",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.00425",";","Cd","+=","Ce",";","Cf","=","texture2D","(","u_color",",","a","+","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.00142",";","Cf","=","texture2D","(","u_color",",","a","-","Cd",")",";","gl_FragColor","+=","Cf","*","(","1.0","-","step","(","0.0",",","-","Cf",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ce","=","u_texel_size",";","vec4","Cf","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","Cf",";","if","(","Cf",".","a","==","0.0",")","{","Cf","=","texture2D","(","u_color",",","a","+","Ce",")",";","if","(","Cf",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Cf",".","a",")",";","else","{","Cf","=","texture2D","(","u_color",",","a","-","Ce",")",";","if","(","Cf",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Cf",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","a",";","void","main","(",")","{","a","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Cd",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ce",";","varying","vec4","Cf",";","varying","vec4","Cg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Ch",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cn","(","vec2","Ci",",","sampler2D","Cj",")","{","float","Ck","=","texture2D","(","Cj",",","Ci",")",".","r",";","float","Cl","=","texture2D","(","Cj",",","Ce",".","xy",")",".","r",";","float","Cm","=","texture2D","(","Cj",",","Ce",".","zw",")",".","r",";","return","vec3","(","Ck",",","Cl",",","Cm",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ct","(","vec2","Co",",","sampler2D","Cp",")","{","vec3","Cq","=","Cn","(","Co",",","Cp",")",";","vec2","Cr","=","abs","(","Cq",".","xx","-","Cq",".","yz",")",";","vec2","Cs","=","step","(","SMAA_PREDICATION_THRESHOLD",",","Cr",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","Cs",")",";","}"]}]}}]},{type:"textline",tokens:["void","Cx","(","bvec2","Cu",",","inout","vec2","Cv",",","vec2","Cw",")","{","if","(","Cu",".","x",")","Cv",".","x","=","Cw",".","x",";","if","(","Cu",".","y",")","Cv",".","y","=","Cw",".","y",";","}","void","Cx","(","bvec4","Cy",",","inout","vec4","Cz",",","vec4","CA",")","{","Cx","(","Cy",".","xy",",","Cz",".","xy",",","CA",".","xy",")",";","Cx","(","Cy",".","zw",",","Cz",".","zw",",","CA",".","zw",")",";","}","vec2","CC","(","vec2","CB",")","{","return","sign","(","CB",")","*","floor","(","abs","(","CB",")","+",".5",")",";","}","vec4","CC","(","vec4","CD",")","{","return","sign","(","CD",")","*","floor","(","abs","(","CD",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","CU","(","vec2","CE",",","sampler2D","CF"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","CG"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","CH","=","Ct","(","CE",",","CG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","CH","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","CI","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","CJ","=","dot","(","texture2D","(","CF",",","CE",")",".","rgb",",","CI",")",";","float","CK","=","dot","(","texture2D","(","CF",",","Ce",".","xy",")",".","rgb",",","CI",")",";","float","CL","=","dot","(","texture2D","(","CF",",","Ce",".","zw",")",".","rgb",",","CI",")",";","vec4","CM",";","CM",".","xy","=","abs","(","CJ","-","vec2","(","CK",",","CL",")",")",";","vec2","CN","=","step","(","CH",",","CM",".","xy",")",";","if","(","dot","(","CN",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","CO","=","dot","(","texture2D","(","CF",",","Cf",".","xy",")",".","rgb",",","CI",")",";","float","CP","=","dot","(","texture2D","(","CF",",","Cf",".","zw",")",".","rgb",",","CI",")",";","CM",".","zw","=","abs","(","CJ","-","vec2","(","CO",",","CP",")",")",";","vec2","CQ","=","max","(","CM",".","xy",",","CM",".","zw",")",";","float","CR","=","dot","(","texture2D","(","CF",",","Cg",".","xy",")",".","rgb",",","CI",")",";","float","CS","=","dot","(","texture2D","(","CF",",","Cg",".","zw",")",".","rgb",",","CI",")",";","CM",".","zw","=","abs","(","vec2","(","CK",",","CL",")","-","vec2","(","CR",",","CS",")",")",";","CQ","=","max","(","CQ",".","xy",",","CM",".","zw",")",";","float","CT","=","max","(","CQ",".","x",",","CQ",".","y",")",";","CN",".","xy","*=","step","(","CT",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","CM",".","xy",")",";","return","CN",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","CW","(","vec2","CV",")","{","CV",".","r","=","CV",".","r","*","abs","(","5.0","*","CV",".","r","-","5.0","*","0.75",")",";","return","CC","(","CV",")",";","}","vec4","CW","(","vec4","CX",")","{","CX",".","rb","=","CX",".","rb","*","abs","(","5.0","*","CX",".","rb","-","5.0","*","0.75",")",";","return","CC","(","CX",")",";","}","vec2","De","(","sampler2D","CY",",","vec2","CZ",",","vec2","C_",",","out","vec2","Da",")","{","vec4","Db","=","vec4","(","CZ",",","-","1.0",",","1.0",")",";","vec3","Dc","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Dd","=","0",";","Dd","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Dd","++",")","{","if","(","Db",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Db",".","w",">","0.9",")","{","Db",".","xyz","+=","Dc","*","vec3","(","C_",",","1.0",")",";","Da","=","texture2D","(","CY",",","Db",".","xy",",","0.0",")",".","rg",";","Db",".","w","=","dot","(","Da",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Db",".","zw",";","}","vec2","Dm","(","sampler2D","Df",",","vec2","Dg",",","vec2","Dh",",","out","vec2","Di",")","{","vec4","Dj","=","vec4","(","Dg",",","-","1.0",",","1.0",")",";","Dj",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","Dk","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Dl","=","0",";","Dl","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Dl","++",")","{","if","(","Dj",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Dj",".","w",">","0.9",")","{","Dj",".","xyz","=","Dk","*","vec3","(","Dh",",","1.0",")","+","Dj",".","xyz",";","Di","=","texture2D","(","Df",",","Dj",".","xy",",","0.0",")",".","rg",";","Di","=","CW","(","Di",")",";","Dj",".","w","=","dot","(","Di",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Dj",".","zw",";","}","vec2","Ds","(","sampler2D","Dn",",","vec2","Do",",","vec2","Dp",",","float","Dq",")","{","vec2","Dr","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","Dp","+","Do",";","Dr","=","SMAA_AREATEX_PIXEL_SIZE","*","Dr","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","Dr",".","x","+=","0.5",";","Dr",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","Dq",";","return","texture2D","(","Dn",",","Dr",",","0.0",")",".","rg",";","}","vec2","DH","(","sampler2D","Dt",",","sampler2D","Du",",","vec2","Dv",",","vec2","Dw",",","vec4","Dx",")","{","vec2","Dy","=","vec2","(","0.0",",","0.0",")",";","vec4","Dz",";","vec2","DA",";","if","(","Dw",".","r",">","0.0",")","{","Dz",".","xz","=","De","(","Dt",",","Dv",",","vec2","(","-","1.0",",","1.0",")",",","DA",")",";","Dz",".","x","+=","float","(","DA",".","y",">","0.9",")",";","}","else","Dz",".","xz","=","vec2","(","0.0",",","0.0",")",";","Dz",".","yw","=","De","(","Dt",",","Dv",",","vec2","(","1.0",",","-","1.0",")",",","DA",")",";","if","(","Dz",".","x","+","Dz",".","y",">","2.0",")","{","vec4","DB","=","vec4","(","-","Dz",".","x","+","0.25",",","Dz",".","x",",","Dz",".","y",",","-","Dz",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","Dv",".","xyxy",";","vec4","DC",";","DC",".","xy","=","texture2D","(","Dt",",","DB",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","DC",".","zw","=","texture2D","(","Dt",",","DB",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","DC",".","yxwz","=","CW","(","DC",".","xyzw",")",";","vec2","DD","=","vec2","(","2.0",",","2.0",")","*","DC",".","xz","+","DC",".","yw",";","Cx","(","bvec2","(","step","(","0.9",",","Dz",".","zw",")",")",",","DD",",","vec2","(","0.0",",","0.0",")",")",";","Dy","+=","Ds","(","Du",",","Dz",".","xy",",","DD",",","Dx",".","z",")",";","}","Dz",".","xz","=","Dm","(","Dt",",","Dv",",","vec2","(","-","1",",","-","1",")",",","DA",")",";","if","(","texture2D","(","Dt",",","Dv","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","Dz",".","yw","=","Dm","(","Dt",",","Dv",",","vec2","(","1",",","1",")",",","DA",")",";","Dz",".","y","+=","float","(","DA",".","y",">","0.9",")",";","}","else","Dz",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","Dz",".","x","+","Dz",".","y",">","2.0",")","{","vec4","DE","=","vec4","(","-","Dz",".","x",",","-","Dz",".","x",",","Dz",".","y",",","Dz",".","y",")","*","u_texel_size",".","xyxy","+","Dv",".","xyxy",";","vec4","DF",";","DF",".","x","=","texture2D","(","Dt",",","DE",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","DF",".","y","=","texture2D","(","Dt",",","DE",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","DF",".","zw","=","texture2D","(","Dt",",","DE",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","DG","=","vec2","(","2.0",",","2.0",")","*","DF",".","xz","+","DF",".","yw",";","Cx","(","bvec2","(","step","(","0.9",",","Dz",".","zw",")",")",",","DG",",","vec2","(","0",",","0",")",")",";","Dy","+=","Ds","(","Du",",","Dz",".","xy",",","DG",",","Dx",".","w",")",".","gr",";","}","return","Dy",";","}"]}]}}]},{type:"textline",tokens:["float","DN","(","sampler2D","DI",",","vec2","DJ",",","float","DK",")","{","vec2","DL","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","DM","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","DK",",","1.0",")",";","DL","+=","vec2","(","-","1.0",",","1.0",")",";","DM","+=","vec2","(","0.5",",","-","0.5",")",";","DL","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","DM","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","DI",",","DL","*","DJ","+","DM",",","0.0",")",".","r",";","}","float","DV","(","sampler2D","DO",",","sampler2D","DP",",","vec2","DQ",",","float","DR",")","{","vec2","DS","=","vec2","(","0.0",",","1.0",")",";","for","(","int","DT","=","0",";","DT","<","SMAA_MAX_SEARCH_STEPS",";","DT","++",")","{","if","(","DQ",".","x",">","DR","&&","DS",".","g",">","0.8281","&&","DS",".","r","==","0.0",")","{","DS","=","texture2D","(","DO",",","DQ",",","0.0",")",".","rg",";","DQ","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","DQ",";","}","}","float","DU","=","-","(","255.0","/","127.0",")","*","DN","(","DP",",","DS",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","DU","+","DQ",".","x",";","}","float","Ec","(","sampler2D","DW",",","sampler2D","DX",",","vec2","DY",",","float","DZ",")","{","vec2","D_","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Ea","=","0",";","Ea","<","SMAA_MAX_SEARCH_STEPS",";","Ea","++",")","{","if","(","DY",".","x","<","DZ","&&","D_",".","g",">","0.8281","&&","D_",".","r","==","0.0",")","{","D_","=","texture2D","(","DW",",","DY",",","0.0",")",".","rg",";","DY","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","DY",";","}","}","float","Eb","=","-","(","255.0","/","127.0",")","*","DN","(","DX",",","D_",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Eb","+","DY",".","x",";","}","float","Ek","(","sampler2D","Ed",",","sampler2D","Ee",",","vec2","Ef",",","float","Eg",")","{","vec2","Eh","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Ei","=","0",";","Ei","<","SMAA_MAX_SEARCH_STEPS",";","Ei","++",")","{","if","(","Ef",".","y",">","Eg","&&","Eh",".","r",">","0.8281","&&","Eh",".","g","==","0.0",")","{","Eh","=","texture2D","(","Ed",",","Ef",",","0.0",")",".","rg",";","Ef","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Ef",";","}","}","float","Ej","=","-","(","255.0","/","127.0",")","*","DN","(","Ee",",","Eh",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Ej","+","Ef",".","y",";","}","float","Es","(","sampler2D","El",",","sampler2D","Em",",","vec2","En",",","float","Eo",")","{","vec2","Ep","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Eq","=","0",";","Eq","<","SMAA_MAX_SEARCH_STEPS",";","Eq","++",")","{","if","(","En",".","y","<","Eo","&&","Ep",".","r",">","0.8281","&&","Ep",".","g","==","0.0",")","{","Ep","=","texture2D","(","El",",","En",",","0.0",")",".","rg",";","En","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","En",";","}","}","float","Er","=","-","(","255.0","/","127.0",")","*","DN","(","Em",",","Ep",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","Er","+","En",".","y",";","}","vec2","Ez","(","sampler2D","Et",",","vec2","Eu",",","float","Ev",",","float","Ew",",","float","Ex",")","{","vec2","Ey","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","CC","(","4.0","*","vec2","(","Ev",",","Ew",")",")","+","Eu",";","Ey","=","SMAA_AREATEX_PIXEL_SIZE","*","Ey","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","Ey",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","Ex","+","Ey",".","y",";","return","texture2D","(","Et",",","Ey",",","0.0",")",".","rg",";","}","void","EH","(","sampler2D","EA",",","inout","vec2","EB",",","vec4","EC",",","vec2","ED",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EE","=","step","(","ED",".","xy",",","ED",".","yx",")",";","vec2","EF","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","EE",";","EF","/=","EE",".","x","+","EE",".","y",";","vec2","EG","=","vec2","(","1.0",",","1.0",")",";","EG",".","x","-=","EF",".","x","*","texture2D","(","EA",",","EC",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","EG",".","x","-=","EF",".","y","*","texture2D","(","EA",",","EC",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","EG",".","y","-=","EF",".","x","*","texture2D","(","EA",",","EC",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","EG",".","y","-=","EF",".","y","*","texture2D","(","EA",",","EC",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","EB","*=","clamp","(","EG",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","EP","(","sampler2D","EI",",","inout","vec2","EJ",",","vec4","EK",",","vec2","EL",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EM","=","step","(","EL",".","xy",",","EL",".","yx",")",";","vec2","EN","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","EM",";","EN","/=","EM",".","x","+","EM",".","y",";","vec2","EO","=","vec2","(","1.0",",","1.0",")",";","EO",".","x","-=","EN",".","x","*","texture2D","(","EI",",","EK",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","EO",".","x","-=","EN",".","y","*","texture2D","(","EI",",","EK",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","EO",".","y","-=","EN",".","x","*","texture2D","(","EI",",","EK",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","EO",".","y","-=","EN",".","y","*","texture2D","(","EI",",","EK",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","EJ","*=","clamp","(","EO",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Fh","(","vec2","EQ",",","vec2","ER",",","sampler2D","ES",",","sampler2D","ET",",","sampler2D","EU",",","vec4","EV",")","{","vec4","EW","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","EX","=","texture2D","(","ES",",","EQ",")",".","rg",";","if","(","EX",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["EW",".","rg","=","DH","(","ES",",","ET",",","EQ",",","EX",",","EV",")",";","if","(","EW",".","r","==","-","EW",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","EY",";","vec3","EZ",";","EZ",".","x","=","DV","(","ES",",","EU",",","Ce",".","xy",",","Cg",".","x",")",";","EZ",".","y","=","Cf",".","y",";","EY",".","x","=","EZ",".","x",";","float","E_","=","texture2D","(","ES",",","EZ",".","xy",",","0.0",")",".","r",";","EZ",".","z","=","Ec","(","ES",",","EU",",","Ce",".","zw",",","Cg",".","y",")",";","EY",".","y","=","EZ",".","z",";","EY","=","abs","(","CC","(","EY","/","u_texel_size",".","xx","-","ER",".","xx",")",")",";","vec2","Fa","=","sqrt","(","EY",")",";","float","Fb","=","texture2D","(","ES",",","EZ",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","EW",".","rg","=","Ez","(","ET",",","Fa",",","E_",",","Fb",",","EV",".","y",")",";","EZ",".","y","=","EQ",".","y",";","EH","(","ES",",","EW",".","rg",",","EZ",".","xyzy",",","EY",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","EX",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","EX",".","r",">","0.0",")","{","vec2","Fc",";","vec3","Fd",";","Fd",".","y","=","Ek","(","ES",",","EU",",","Cf",".","xy",",","Cg",".","z",")",";","Fd",".","x","=","Ce",".","x",";","Fc",".","x","=","Fd",".","y",";","float","Fe","=","texture2D","(","ES",",","Fd",".","xy",",","0.0",")",".","g",";","Fd",".","z","=","Es","(","ES",",","EU",",","Cf",".","zw",",","Cg",".","w",")",";","Fc",".","y","=","Fd",".","z",";","Fc","=","abs","(","CC","(","Fc","/","u_texel_size",".","yy","-","ER",".","yy",")",")",";","vec2","Ff","=","sqrt","(","Fc",")",";","float","Fg","=","texture2D","(","ES",",","Fd",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","EW",".","ba","=","Ez","(","ET",",","Ff",",","Fe",",","Fg",",","EV",".","x",")",";","Fd",".","x","=","EQ",".","x",";","EP","(","ES",",","EW",".","ba",",","Fd",".","xyxz",",","Fc",")",";","}","return","EW",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Fy","(","vec2","Fi",",","sampler2D","Fj",",","sampler2D","Fk"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Fl"]}]}}]},{type:"textline",tokens:[")","{","vec4","Fm",";","Fm",".","x","=","texture2D","(","Fk",",","Cd",".","xy",")",".","a",";","Fm",".","y","=","texture2D","(","Fk",",","Cd",".","zw",")",".","g",";","Fm",".","wz","=","texture2D","(","Fk",",","Fi",")",".","xz",";","if","(","dot","(","Fm",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","Fn","=","texture2D","(","Fj",",","Fi",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Fo","=","texture2D","(","Fl",",","a",")",";","vec2","Fp","=","2.0","*","gW","(","Fo",")","-","1.0",";","Fn",".","a","=","sqrt","(","2.0","*","length","(","Fp",")",")",";"]}]}}]},{type:"textline",tokens:["return","Fn",";","}","else","{","bool","Fq","=","max","(","Fm",".","x",",","Fm",".","z",")",">","max","(","Fm",".","y",",","Fm",".","w",")",";","vec4","Fr","=","vec4","(","0.0",",","Fm",".","y",",","0.0",",","Fm",".","w",")",";","vec2","Fs","=","Fm",".","yw",";","Cx","(","bvec4","(","Fq",",","Fq",",","Fq",",","Fq",")",",","Fr",",","vec4","(","Fm",".","x",",","0.0",",","Fm",".","z",",","0.0",")",")",";","Cx","(","bvec2","(","Fq",",","Fq",")",",","Fs",",","Fm",".","xz",")",";","Fs","/=","dot","(","Fs",",","vec2","(","1.0",",","1.0",")",")",";","vec4","Ft","=","Fr","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Fi",".","xyxy",";","vec4","Fu","=","Fs",".","x","*","texture2D","(","Fj",",","Ft",".","xy",",","0.0",")",";","Fu","+=","Fs",".","y","*","texture2D","(","Fj",",","Ft",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Fv","=","texture2D","(","Fl",",","Ft",".","xy",")",";","vec2","Fw","=","2.0","*","gW","(","Fv",")","-","1.0",";","vec2","Fx","=","Fs",".","x","*","Fw",";","Fv","=","texture2D","(","Fl",",","Ft",".","zw",")",";","Fw","=","2.0","*","gW","(","Fv",")","-","1.0",";","Fx","+=","Fs",".","y","*","Fw",";","Fu",".","a","=","sqrt","(","2.0","*","length","(","Fx",")",")",";"]}]}}]},{type:"textline",tokens:["return","Fu",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","FK","(","vec2","Fz",",","sampler2D","FA",",","sampler2D","FB"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","FC"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","FD","=","texture2D","(","FC",",","a",")",";","vec2","FE",";","FE","=","2.0","*","gW","(","FD",")","-","1.0",";","vec4","FF","=","texture2D","(","FA",",","Fz",")",";","vec4","FG","=","texture2D","(","FB",",","Fz","-","FE",")",";","float","FH","=","abs","(","FF",".","a","*","FF",".","a","-","FG",".","a","*","FG",".","a",")","/","2.0",";","float","FI","=","0.5","*","clamp","(","1.0","-","sqrt","(","FH",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","FJ","=","mix","(","FF",",","FG",",","FI",")",";","FJ",".","a","=","1.0",";","return","FJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","FF","=","texture2D","(","FA",",","Fz",")",";","vec4","FG","=","texture2D","(","FB",",","Fz",")",";","return","mix","(","FF",",","FG",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","FL","=","vec4","(","CU","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","FL","=","Fh","(","a",",","Ch",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","FL","=","Fy","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","FL","=","vec4","(","FK","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","FL","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","FL",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Cd",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ce",";","varying","vec4","Cf",";","varying","vec4","Cg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Ch",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","Ci","(","vec2","BN",")","{","Ce","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","BN",".","xyxy",";","Cf","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","BN",".","xyxy",";","Cg","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","BN",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","Cl","(","vec2","Cj",",","out","vec2","Ck",")","{","Ck","=","Cj","/","u_texel_size",";","Ce","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","Cj",".","xyxy",";","Cf","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","Cj",".","xyxy",";","Cg","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Ce",".","xz",",","Cf",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","Cn","(","vec2","Cm",")","{","Cd","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Cm",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Ci","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["Cl","(","a",",","Ch",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["Cn","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","Cj","(","in","vec2","Ci",")","{","return","BZ","(","u_depth",",","Ci",",","u_camera_range",")",";","}","void","main","(",")","{","float","Ck","=","texture2D","(","u_color",",","a",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ck",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["vec3","Cl","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","a","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","float","Cm","=","Cj","(","a",")",";","float","Cn","=","Cm","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_8"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Co","=","8.0",";","const","int","Cp","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Co","=","16.0",";","const","int","Cp","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_24"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Co","=","24.0",";","const","int","Cp","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Co","=","32.0",";","const","int","Cp","=","4",";"]}]}}]},{type:"textline",tokens:["float","Cq","=","u_ssao_radius_increase","*","0.001",";","const","float","Cr","=","1.0","+","2.4","/","Co",";","float","Cs","=","0.0",";","for","(","int","Ct","=","0",";","Ct","<","Cp",";","Ct","++",")","for","(","int","Cu","=","-","1",";","Cu","<=","1",";","Cu","+=","2",")","for","(","int","Cv","=","-","1",";","Cv","<=","1",";","Cv","+=","2",")","for","(","int","Cw","=","-","1",";","Cw","<=","1",";","Cw","+=","2",")","{","vec3","Cx","=","reflect","(","normalize","(","vec3","(","Cu",",","Cv",",","Cw",")",")",",","Cl",")","*","(","Cq","*=","Cr",")",";","vec3","Cy","=","vec3","(","a",",","Cn",")",";","Cy","+=","vec3","(","Cx",".","xy",",","Cx",".","z","*","Cn","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Cy",".","z","-=","1.4","*","(","Cy",".","z","-","Cn",")","*","step","(","Cn",",","Cy",".","z",")",";"]}]}}]},{type:"textline",tokens:["float","Cz","=","Cj","(","Cy",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","float","CA","=","clamp","(","(","Cn","-","Cz",")","/","Cz",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Cs","+=","mix","(","1.0",",","CA",",","step","(","Cz",",","Cy",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cs","+=","mix","(","step","(","Cy",".","z",",","Cz",")",",","0.5",",","CA",")",";"]}]}}]},{type:"textline",tokens:["}","Cs","=","Cs","/","Co",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Cs","=","clamp","(","Cs","*","Cs","+","0.6","*","Cs",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cs","=","clamp","(","Cs","*","Cs","+","Cs",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["float","CB","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","Cm",")",";","Cs","=","mix","(","1.0",",","Cs",",","CB",")",";","gl_FragColor","=","vec4","(","Ck",",","Cs",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","Cj","(","in","vec2","Ci",")","{","return","BZ","(","u_depth",",","Ci",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Ck","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cl","=","Cj","(","a",")",";","float","Cm","=","0.0",";","float","Cn","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["vec2","Co","=","vec2","(","-","2.0",")",";","for","(","int","Cp","=","0",";","Cp","<","4",";","++","Cp",")","{","for","(","int","Cq","=","0",";","Cq","<","4",";","++","Cq",")","{","vec2","Cr","=","(","Co","+","vec2","(","float","(","Cp",")",",","float","(","Cq",")",")",")","*","u_texel_size",";","float","Cs","=","texture2D","(","u_ssao_mask",",","a","+","Cr",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","Ct","=","Cj","(","a","+","Cr",")",";","float","Cu","=","1.0","-","clamp","(","abs","(","Ct","-","Cl",")","*","Cn",",","0.0",",","1.0",")",";","Ck","+=","Cs","*","Cu",";","Cm","+=","Cu",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ck","+=","Cs",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","Ck","/","Cm",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","Ck","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","BN","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","Ci","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","BN","-","1.0",",","1.0",")",";","vec4","Cj","=","u_view_proj_inverse","*","Ci",";","vec4","Ck","=","Cj","/","Cj",".","w",";","vec4","Cl","=","u_view_proj_prev","*","Ck",";","Cl","/=","Cl",".","w",";","vec2","Cm","=","(","Ci",".","xy","-","Cl",".","xy",")","/","4.0","+","0.5",";","Cm","=","clamp","(","Cm",",","0.0",",","1.0",")",";","gl_FragColor","=","gK","(","Cm",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","float","c","=","1.0",";","struct","d","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","g","(","vec3","e",",","vec3","f",")","{","return","any","(","lessThan","(","abs","(","e","-","f",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","j","(","in","vec4","h",",","in","vec3","i",")","{","return","i","+","2.0","*","cross","(","h",".","xyz",",","cross","(","h",".","xyz",",","i",")","+","h",".","w","*","i",")",";","}","vec4","l","(","in","vec4","k",")","{","return","vec4","(","-","k",".","xyz",",","k",".","w",")","/","dot","(","k",",","k",")",";","}","vec3","q","(","vec4","m",",","vec4","n",",","vec4","o",")","{","vec3","p","=","o",".","xyz","*","m",".","w",";","p","=","j","(","n",",","p",")",";","p","+=","m",".","xyz","*","o",".","w",";","return","p",";","}","vec3","w","(","vec4","r",",","vec4","s",",","vec4","t",")","{","vec3","u","=","t",".","xyz","-","r",".","xyz","*","t",".","w",";","vec4","v","=","l","(","s",")",";","u","=","j","(","v",",","u",")",";","u","/=","r",".","w",";","return","u",";","}","mat4","x","(",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","z","(","float","y",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","cos","(","y",")",",","sin","(","y",")",",","b",",","b",",","-","sin","(","y",")",",","cos","(","y",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","B","(","float","A",")","{","return","mat4","(","cos","(","A",")",",","b",",","-","sin","(","A",")",",","b",",","b",",","c",",","b",",","b",",","sin","(","A",")",",","b",",","cos","(","A",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","D","(","float","C",")","{","return","mat4","(","cos","(","C",")",",","sin","(","C",")",",","b",",","b",",","-","sin","(","C",")",",","cos","(","C",")",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","d","F","(","in","d","E",")","{","return","d","(","E",".","a",",","E",".","b",",","normalize","(","E",".","c",")",",","normalize","(","E",".","d",")",",","normalize","(","E",".","e",")",",","E",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","G","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","N","(","vec3","H",",","mat4","I",")","{","vec3","J","=","vec3","(","I","[","0","]","[","0","]",",","I","[","1","]","[","0","]",",","I","[","2","]","[","0","]",")",";","vec3","L","=","vec3","(","I","[","0","]","[","1","]",",","I","[","1","]","[","1","]",",","I","[","2","]","[","1","]",")",";","vec3","M","=","vec3","(","I","[","0","]","[","2","]",",","I","[","1","]","[","2","]",",","I","[","2","]","[","2","]",")",";","L","=","cross","(","M",",","J",")",";","J","=","normalize","(","J",")",";","L","=","normalize","(","L",")",";","M","=","normalize","(","M",")",";","return","mat4","(","vec4","(","J",",","0.0",")",",","vec4","(","L",",","0.0",")",",","vec4","(","M",",","0.0",")",",","vec4","(","H",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","(","vec3","O",",","vec3","P",")","{","vec3","Q","=","O","-","P",";","Q",".","y","=","0.0",";","vec3","R","=","cross","(","G",",","Q",")",";","vec3","S","=","cross","(","Q",",","R",")",";","R","=","normalize","(","R",")",";","S","=","normalize","(","S",")",";","Q","=","normalize","(","Q",")",";","return","mat4","(","vec4","(","R",",","0.0",")",",","vec4","(","S",",","0.0",")",",","vec4","(","Q",",","0.0",")",",","vec4","(","P",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ac","(","in","vec3","U",",","float","V",",","float","W",",","float","X",",","vec3","Y",")","{","float","Z","=","fract","(","length","(","Y",")","/","0.17",")",";","float","_","=","X","+","Z","/","10.0",";","float","aa","=","Z",";","if","(","X","!=","0.0",")","aa","/=","X",";","U","*=","1.0","+","0.5","*","sin","(","V",")",";","float","ab","=","length","(","U",")","*","W","*","sin","(","2.0","*","3.14","*","V","*","_","+","aa",")",";","return","D","(","ab",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","an","(","in","vec3","ad",",","in","vec3","ae",",","in","mat4","af",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ag","=","N","(","ae",",","af",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","ah","=","fract","(","(","ae",".","x","*","1.43","+","ae",".","y","*","0.123","+","ae",".","z","*","6.1",")",")",";","float","ai","=","2.0","*","M_PI","*","ah",";","vec3","aj","=","normalize","(","vec3","(","af","[","0","]","[","2","]",",","0.0",",","af","[","2","]","[","2","]",")",")",";","float","ak","=","acos","(","aj","[","2","]",")",";","if","(","aj","[","0","]","<","0.0",")","ak","=","2.0","*","M_PI","-","ak",";","float","al","=","ak","-","ai",";","if","(","al","<","0.0",")","al","=","2.0","*","M_PI","+","al",";","float","am","=","ai",";","if","(","al","<=","MAX_BILLBOARD_ANGLE",")","am","+=","al",";","else","if","(","al","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","am","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","al","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","al","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","am","+=","al","-","M_PI",";","else","if","(","al","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","am","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","al","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","am","+=","al","-","2.0","*","M_PI",";","mat4","ag","=","B","(","am",")",";","ag","[","3","]","=","vec4","(","ae",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","ag","=","T","(","ad",",","ae",")",";"]}]}}]},{type:"textline",tokens:["return","ag",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","&&","!","STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","at","(","in","vec3","ao",",","in","vec3","ap",",","in","mat4","aq",",","mat4","ar",")","{","mat4","as","=","an","(","ao",",","ap",",","aq",")",";","ar","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","as","=","as","*","ar",";","return","as",";","}"]}]}}]},{type:"textline",tokens:["d","aA","(","in","vec3","au",",","in","vec3","av",",","in","vec3","aw",",","in","vec3","ax",",","in","vec3","ay",",","in","mat4","az",")","{","au","=","(","az","*","vec4","(","au",",","1.0",")",")",".","xyz",";","av","=","(","az","*","vec4","(","av",",","1.0",")",")",".","xyz",";","aw","=","(","az","*","vec4","(","aw",",","0.0",")",")",".","xyz",";","ax","=","(","az","*","vec4","(","ax",",","0.0",")",")",".","xyz",";","ay","=","(","az","*","vec4","(","ay",",","0.0",")",")",".","xyz",";","return","F","(","d","(","au",",","av",",","aw",",","ax",",","ay",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","aD","(","vec2","aB",",","vec3","aC",")","{","return","(","aB","+","0.5",")","*","aC",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aM","(","in","vec4","aE",",","in","vec4","aF",",","in","float","aG",")","{","float","aH","=","aE","[","0","]","*","aF","[","0","]","+","aE","[","1","]","*","aF","[","1","]","+","aE","[","2","]","*","aF","[","2","]","+","aE","[","3","]","*","aF","[","3","]",";","if","(","aH","<","0.0",")","{","aF","*=","-","1.0",";","aH","=","-","aH",";","}","if","(","abs","(","aH",")",">=","1.0",")","return","aE",";","float","aI","=","acos","(","aH",")",";","float","aJ","=","sqrt","(","1.0","-","aH","*","aH",")",";","if","(","abs","(","aJ",")","<","0.001",")","return","vec4","(","aE","*","0.5","+","aF","*","0.5",")",";","float","aK","=","sin","(","(","1.0","-","aG",")","*","aI",")","/","aJ",";","float","aL","=","sin","(","aG","*","aI",")","/","aJ",";","return","aE","*","aK","+","aF","*","aL",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","bb","(","in","vec3","aN",",","in","vec4","aO",",","in","vec4","aP",",","in","vec4","aQ",",","in","vec4","aR",",","in","float","aS",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aT","=","aM","(","aO",",","aP",",","aS",")",";","vec4","aU","=","mix","(","aQ",",","aR",",","aS",")",";","vec3","aV","=","j","(","aT",",","aN",")",";","vec3","aW","=","aV","*","aU",".","w","+","aU",".","xyz",";","return","aW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aX","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aN",",","1.0",")",")",";","vec3","aY","=","j","(","aO",",","aX",")",";","vec3","aZ","=","j","(","aP",",","aX",")",";","vec3","a_","=","aY","*","aQ",".","w","+","aQ",".","xyz",";","vec3","ba","=","aZ","*","aR",".","w","+","aR",".","xyz",";","vec3","aW","=","mix","(","a_",",","ba",",","aS",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aW",",","1.0",")",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","bl","(","in","vec3","bc",",","in","vec4","bd",",","in","vec4","be",",","in","float","bf",")","{","vec3","bg","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bc",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bh","=","aM","(","bd",",","be",",","bf",")",";","vec3","bi","=","j","(","bh",",","bg",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bi",",","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","bj","=","j","(","bd",",","bg",")",";","vec3","bk","=","j","(","be",",","bg",")",";","vec3","bi","=","mix","(","bj",",","bk",",","bf",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bi",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","bb","(","in","vec3","bm",",","in","vec4","bn",",","in","vec4","bo",")","{","vec3","bp","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bm",",","1.0",")",")",";","vec3","bq","=","j","(","bn",",","bp",")",";","vec3","br","=","bq","*","bo",".","w","+","bo",".","xyz",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","br",",","1.0",")",")",";","}","vec3","bl","(","in","vec3","bs",",","in","vec4","bt",")","{","vec3","bu","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bs",",","0.0",")",")",";","vec3","bv","=","j","(","bt",",","bu",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bv",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","bK","(","inout","vec3","bw",",","inout","vec3","bx",",","inout","vec3","by",",","inout","vec3","bz",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bA","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bB","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bC","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bD","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bE","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec4","bF","=","a_influence",";","for","(","int","bG","=","0",";","bG","<","4",";","bG","++",")","{","int","bH","=","int","(","bF","[","bG","]",")",";","float","bI","=","fract","(","bF","[","bG","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bB","+=","bI","*","bb","(","bw",",","u_quatsb","[","bH","]",",","u_quatsa","[","bH","]",",","u_transb","[","bH","]",",","u_transa","[","bH","]",",","bA",")",";","bC","+=","bI","*","bl","(","bx",",","u_quatsb","[","bH","]",",","u_quatsa","[","bH","]",",","bA",")",";","bD","+=","bI","*","bl","(","by",",","u_quatsb","[","bH","]",",","u_quatsa","[","bH","]",",","bA",")",";","bE","+=","bI","*","bl","(","bz",",","u_quatsb","[","bH","]",",","u_quatsa","[","bH","]",",","bA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bB","+=","bI","*","bb","(","bw",",","u_quatsb","[","bH","]",",","u_transb","[","bH","]",")",";","bC","+=","bI","*","bl","(","bx",",","u_quatsb","[","bH","]",")",";","bD","+=","bI","*","bl","(","by",",","u_quatsb","[","bH","]",")",";","bE","+=","bI","*","bl","(","bz",",","u_quatsb","[","bH","]",")",";"]}]}}]},{type:"textline",tokens:["}","bw","=","bB",";","bx","=","bC",";","by","=","bD",";","bz","=","bE",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bJ","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bJ",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bw","=","bb","(","bw",",","u_quatsb","[","bJ","]",",","u_quatsa","[","bJ","]",",","u_transb","[","bJ","]",",","u_transa","[","bJ","]",",","bA",")",";","bx","=","bl","(","bx",",","u_quatsb","[","bJ","]",",","u_quatsa","[","bJ","]",",","bA",")",";","by","=","bl","(","by",",","u_quatsb","[","bJ","]",",","u_quatsa","[","bJ","]",",","bA",")",";","bz","=","bl","(","bz",",","u_quatsb","[","bJ","]",",","u_quatsa","[","bJ","]",",","bA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bw","=","bb","(","bw",",","u_quatsb","[","bJ","]",",","u_transb","[","bJ","]",")",";","bx","=","bl","(","bx",",","u_quatsb","[","bJ","]",")",";","by","=","bl","(","by",",","u_quatsb","[","bJ","]",")",";","bz","=","bl","(","bz",",","u_quatsb","[","bJ","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bZ","(","inout","vec3","bL",",","in","vec3","bM",",","in","float","bN",",","in","float","bO",",","in","float","bP",",","in","vec3","bQ",",","in","float","bR",")","{","float","bS","=","length","(","bM",")",";","float","bT","=","bO","*","(","1.0","+","0.1","*","fract","(","bS",")",")",";","float","bU","=","bN","*","bR","*","(","1.0","+","sin","(","2.0","*","3.14","*","bP","*","bT","+","bS",")",")",";","float","bV","=","(","bL",".","y","-","bM",".","y",")","*","abs","(","bU",")",";","bV","+=","1.0",";","bV","*=","bV",";","bV","=","bV","*","bV","-","bV",";","vec3","bW","=","bL",";","bW",".","xz","+=","bQ",".","xz","*","bV","*","sign","(","bU",")",";","vec3","bX","=","bW","-","bM",";","if","(","all","(","equal","(","bX",",","vec3","(","0.0",")",")",")",")","bL","=","bM",";","else","{","float","bY","=","length","(","bL","-","bM",")",";","bL","=","bM","+","normalize","(","bX",")","*","bY",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ca","(","vec4","b_",")","{","return","b_","*","b_","*","(","3.0","-","2.0","*","b_",")",";","}","vec4","cc","(","vec4","cb",")","{","return","abs","(","fract","(","cb","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","ce","(","vec4","cd",")","{","return","ca","(","cc","(","cd",")",")",";","}","void","cv","(","inout","vec3","cf",",","in","float","cg",",","in","vec3","ch",",","in","vec3","ci",",","in","vec3","cj",",","in","float","ck",",","in","float","cl",",","in","float","cm",",","in","vec3","cn",")","{","float","co",";","float","cp",";","float","cq",";","vec2","cr",";","vec4","cs",";","vec2","ct",";","vec3","cu",";","co","=","dot","(","cj",",","vec3","(","1.0",")",")",";","cp","=","co","+","cn",".","g",";","cq","=","dot","(","cf",",","vec3","(","cn",".","g",")",")",";","cr","=","(","cg","+","vec2","(","cq",",","cp",")",")",";","cs","=","(","(","fract","(","(","cr",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","ci",")","*","ck",";","cs","=","ce","(","cs",")",";","ct","=","cs",".","xz","+","cs",".","yw",";","ct",".","y","=","0.5","-","ct",".","y",";","cu","=","ct",".","xyx","*","cn",".","rbr","*","vec3","(","cl","*","ch",".","x",",","cm",",","cl","*","ch",".","z",")",";","cf","+=","cu",";","}"]}]}}]},{type:"textline",tokens:["void","cC","(","inout","vec3","cw",",","inout","vec3","cx",",","in","vec3","cy",")","{","vec3","cz","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cA","=","cx",";","vec3","cB","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cA","=","cw",";","vec3","cB","=","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cv","(","cA",",","u_time",",","cy",",","cz",",","cB",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bZ","(","cA",",","cB",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cz",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bZ","(","cA",",","cB",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cz",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["cw","+=","cA","-","cx",";","cx","=","cA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cw","=","cA",";","cx","=","cB",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MTEX_BLEND",tokens:["0"]},{type:"define",name:"MTEX_ADD",tokens:["1"]},{type:"define",name:"MTEX_SUB",tokens:["2"]},{type:"define",name:"MTEX_MUL",tokens:["3"]},{type:"define",name:"MTEX_SCREEN",tokens:["4"]},{type:"define",name:"MTEX_OVERLAY",tokens:["5"]},{type:"define",name:"MTEX_DIFF",tokens:["6"]},{type:"define",name:"MTEX_DIV",tokens:["7"]},{type:"define",name:"MTEX_DARK",tokens:["8"]},{type:"define",name:"MTEX_LIGHT",tokens:["9"]},{type:"define",name:"MTEX_BLEND_HUE",tokens:["10"]},{type:"define",name:"MTEX_BLEND_SAT",tokens:["11"]},{type:"define",name:"MTEX_BLEND_VAL",tokens:["12"]},{type:"define",name:"MTEX_BLEND_COLOR",tokens:["13"]},{type:"define",name:"MTEX_SOFT_LIGHT",tokens:["14"]},{type:"define",name:"MTEX_LIN_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cJ","=","0.0",";","float","cK","=","1.0",";","vec4","cM","(","vec4","cL",")","{","return","cL","-","floor","(","cL","*","(","cK","/","289.0",")",")","*","289.0",";","}","vec3","cM","(","vec3","cN",")","{","return","cN","-","floor","(","cN","*","(","cK","/","289.0",")",")","*","289.0",";","}","vec2","cM","(","vec2","cO",")","{","return","cO","-","floor","(","cO","*","(","cK","/","289.0",")",")","*","289.0",";","}","vec4","cQ","(","vec4","cP",")","{","return","cP","-","floor","(","cP","*","(","cK","/","7.0",")",")","*","7.0",";","}","vec4","cS","(","vec4","cR",")","{","return","cM","(","(","34.0","*","cR","+","5.0",")","*","cR",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","dd","(","vec2","cT",")","{","vec2","cU","=","cM","(","floor","(","cT",")",")",";","vec2","cV","=","fract","(","cT",")",";","vec4","cW","=","cV",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","cX","=","cV",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","cY","=","cS","(","cU",".","x","+","vec4","(","cJ",",","cK",",","cJ",",","cK",")",")",";","cY","=","cS","(","cY","+","cU",".","y","+","vec4","(","cJ",",","cJ",",","cK",",","cK",")",")",";","vec4","cZ","=","cQ","(","cY",")","*","K","+","K2",";","vec4","c_","=","cQ","(","floor","(","cY","*","K",")",")","*","K","+","K2",";","vec4","da","=","cW","+","JITTER","*","cZ",";","vec4","db","=","cX","+","JITTER","*","c_",";","vec4","dc","=","da","*","da","+","db","*","db",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["dc",".","xy","=","min","(","dc",".","xy",",","dc",".","zw",")",";","dc",".","x","=","min","(","dc",".","x",",","dc",".","y",")",";","return","dc",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dc",".","xy","=","(","dc",".","x","<","dc",".","y",")","?","dc",".","xy",":","dc",".","yx",";","dc",".","xz","=","(","dc",".","x","<","dc",".","z",")","?","dc",".","xz",":","dc",".","zx",";","dc",".","xw","=","(","dc",".","x","<","dc",".","w",")","?","dc",".","xw",":","dc",".","wx",";","dc",".","y","=","min","(","dc",".","y",",","dc",".","z",")",";","dc",".","y","=","min","(","dc",".","y",",","dc",".","w",")",";","return","sqrt","(","dc",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dt","(","vec2","de",",","float","df",")","{","vec2","dg","=","cM","(","floor","(","de",")",")",";","vec2","dh","=","fract","(","de",")",";","vec4","di","=","dh",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","dj","=","dh",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","dk","=","cS","(","dg",".","x","+","vec4","(","cJ",",","cK",",","cJ",",","cK",")",")",";","dk","=","cS","(","dk","+","dg",".","y","+","vec4","(","cJ",",","cJ",",","cK",",","cK",")",")",";","vec4","dl","=","cQ","(","dk",")","*","K","+","K2",";","vec4","dm","=","cQ","(","floor","(","dk","*","K",")",")","*","K","+","K2",";","vec4","dn","=","di","+","JITTER","*","dl",";","vec4","dp","=","dj","+","JITTER","*","dm",";","vec4","dq","=","dn","*","dn","+","dp","*","dp",";","dn","+=","df",";","dp","+=","df",";","vec4","dr","=","dn","*","dn","+","dp","*","dp",";","dn","+=","df",";","dp","+=","df",";","vec4","ds","=","dn","*","dn","+","dp","*","dp",";","dq",".","xy","=","min","(","dq",".","xy",",","dq",".","zw",")",";","dq",".","x","=","min","(","dq",".","x",",","dq",".","y",")",";","dr",".","xy","=","min","(","dr",".","xy",",","dr",".","zw",")",";","dr",".","x","=","min","(","dr",".","x",",","dr",".","y",")",";","ds",".","xy","=","min","(","ds",".","xy",",","ds",".","zw",")",";","ds",".","x","=","min","(","ds",".","x",",","ds",".","y",")",";","return","mat3","(","dq",".","xx",",","cJ",",","dr",".","xx",",","cJ",",","ds",".","xx",",","cJ",")",";","}","vec3","dv","(","vec3","du",")","{","return","cM","(","(","(","du","*","34.0",")","+","cK",")","*","du",")",";","}","float","dJ","(","vec2","dw",")","{","const","vec4","dx","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","dy","=","floor","(","dw","+","dot","(","dw",",","dx",".","yy",")",")",";","vec2","dz","=","dw","-","dy","+","dot","(","dy",",","dx",".","xx",")",";","vec2","dA",";","dA","=","(","dz",".","x",">","dz",".","y",")","?","vec2","(","cK",",","cJ",")",":","vec2","(","cJ",",","cK",")",";","vec4","dB","=","dz",".","xyxy","+","dx",".","xxzz",";","dB",".","xy","-=","dA",";","dy","=","cM","(","dy",")",";","vec3","dC","=","dv","(","dv","(","dy",".","y","+","vec3","(","cJ",",","dA",".","y",",","cK",")",")","+","dy",".","x","+","vec3","(","cJ",",","dA",".","x",",","cK",")",")",";","vec3","dD","=","max","(","0.5","-","vec3","(","dot","(","dz",",","dz",")",",","dot","(","dB",".","xy",",","dB",".","xy",")",",","dot","(","dB",".","zw",",","dB",".","zw",")",")",",","cJ",")",";","dD","=","dD","*","dD",";","dD","=","dD","*","dD",";","vec3","dE","=","2.0","*","fract","(","dC","*","dx",".","www",")","-","cK",";","vec3","dF","=","abs","(","dE",")","-","0.5",";","vec3","dG","=","floor","(","dE","+","0.5",")",";","vec3","dH","=","dE","-","dG",";","dD","*=","1.79284291400159","-","0.85373472095314","*","(","dH","*","dH","+","dF","*","dF",")",";","vec3","dI",";","dI",".","x","=","dH",".","x","*","dz",".","x","+","dF",".","x","*","dz",".","y",";","dI",".","yz","=","dH",".","yz","*","dB",".","xz","+","dF",".","yz","*","dB",".","yw",";","return","130.0","*","dot","(","dD",",","dI",")",";","}","vec2","dP","(","vec2","dK",")","{","float","dL","=","dot","(","dK",",","vec2","(","12.9898",",","78.233",")",")",";","float","dM","=","dot","(","dK",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","dN","=","fract","(","sin","(","dL",")","*","43758.5453",")","*","2.0","-","cK",";","float","dO","=","fract","(","sin","(","dM",")","*","43758.5453",")","*","2.0","-","cK",";","return","vec2","(","dN",",","dO",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION","||","SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dR","=","0.1",";","const","float","dS","=","0.1",";","const","float","dT","=","-","0.01",";","const","float","dU","=","0.05",";","mat4","dV","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dW","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","dZ","(","vec2","dX",",","float","dY",")","{","return","all","(","lessThanEqual","(","dX",",","vec2","(","1.0","+","dY",")",")",")","&&","all","(","greaterThanEqual","(","dX",",","vec2","(","0.0","-","dY",")",")",")",";","}","float","el","(","vec3","d_",",","PRECISION","sampler2D","ea",",","float","eb",")","{"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","d_",".","z",">","u_perspective_cast_far_bound",")","return","1.0",";","else","{"]}]}}]},{type:"textline",tokens:["d_",".","z","=","clamp","(","d_",".","z",",","0.0",",","1.0",")",";","float","ec","=","0.0",";","float","ed","=","dP","(","d_",".","xy",")",".","x","*","M_PI",";","float","ee","=","cos","(","ed",")",";","float","ef","=","sin","(","ed",")",";","mat2","eg","=","mat2","(","ee",",","ef",",","-","ef",",","ee",")",";","vec2","eh",",","ei",";","for","(","int","ej","=","0",";","ej","<","4",";","ej","++",")","for","(","int","ek","=","0",";","ek","<","4",";","ek","++",")","{","ei",".","x","=","dV","[","ej","]","[","ek","]",";","ei",".","y","=","dW","[","ej","]","[","ek","]",";","ei","=","eg","*","ei",";","eh","=","d_",".","xy","+","ei","*","eb","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["!","CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","dZ","(","eh",",","dT",")",")","ec","+=","1.0",";","else"]}]}}]},{type:"textline",tokens:["ec","+=","step","(","d_",".","z",",","texture2D","(","ea",",","eh",")",".","r",")",";","}","ec","/=","16.0",";","return","clamp","(","ec",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","1.0",";","}","float","eD","(","vec3","em",",","PRECISION","sampler2D","en",",","vec3","eo",",","PRECISION","sampler2D","ep",",","float","eq",",","float","er",",","float","es",")","{","float","et",",","eu",";","em",".","z","=","clamp","(","em",".","z",",","0.0",",","1.0",")",";","eo",".","z","=","clamp","(","eo",".","z",",","0.0",",","1.0",")",";","et","=","0.0",";","eu","=","0.0",";","float","ev","=","dP","(","em",".","xy",")",".","x","*","M_PI",";","float","ew","=","cos","(","ev",")",";","float","ex","=","sin","(","ev",")",";","mat2","ey","=","mat2","(","ew",",","ex",",","-","ex",",","ew",")",";","vec2","ez",",","eA",";","for","(","int","eB","=","0",";","eB","<","4",";","eB","++",")","for","(","int","eC","=","0",";","eC","<","4",";","eC","++",")","{","eA",".","x","=","dV","[","eB","]","[","eC","]",";","eA",".","y","=","dW","[","eB","]","[","eC","]",";","eA","=","ey","*","eA",";","ez","=","em",".","xy","+","eA","*","eq","/","SHADOW_TEX_RES",";","et","+=","step","(","em",".","z",",","texture2D","(","en",",","ez",")",".","r",")",";","ez","=","eo",".","xy","+","eA","*","er","/","SHADOW_TEX_RES",";","eu","+=","step","(","eo",".","z",",","texture2D","(","ep",",","ez",")",".","r",")",";","}","et","=","mix","(","et",",","eu",",","es",")",";","et","/=","16.0",";","return","clamp","(","et",",","0.0",",","1.0",")",";","}","float","eH","(","vec2","eE",")","{","float","eF","=","min","(","eE",".","x",",","eE",".","y",")",";","float","eG","=","min","(","1.0","-","eE",".","x",",","1.0","-","eE",".","y",")",";","return","min","(","eF",",","eG",")",";","}","float","eK","(","float","eI",",","float","eJ",")","{","if","(","eJ",">=","0.0","&&","eJ","<=","dS",")","eI","=","(","eI","-","1.0",")","/","dS","*","eJ","+","1.0",";","return","eI",";","}","float","eW","(","vec3","eL",",","vec3","eM",",","PRECISION","sampler2D","eN",",","PRECISION","sampler2D","eO",",","float","eP",",","float","eQ",",","float","eR",",","float","eS",")","{","float","eT",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eU","=","eH","(","eL",".","xy",")",";","if","(","-","eS",">","eR","&&","eU",">=","0.0","&&","eU","<=","dR","&&","dZ","(","eM",".","xy",",","0.0",")",")","{","float","eV","=","1.0","-","eU","/","dR",";","eT","=","eD","(","eL",",","eN",",","eM",",","eO",",","eP",",","eQ",",","eV",")",";","}","else"]}]}}]},{type:"textline",tokens:["eT","=","el","(","eL",",","eN",",","eP",")",";","return","eT",";","}","float","fd","(","vec3","eX",",","PRECISION","sampler2D","eY",",","float","eZ",",","float","e_",",","float","fa",")","{","float","fb","=","el","(","eX",",","eY",",","eZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","fa",">","e_",")","{","float","fc","=","eH","(","eX",".","xy",")",";","fb","=","eK","(","fb",",","fc",")",";","}"]}]}}]},{type:"textline",tokens:["return","fb",";","}","float","fk","(","float","fe",")","{","float","ff","=","1.0",";","vec3","fg","=","cE",".","xyz","/","cE",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fh","=","cF",".","xyz","/","cF",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fi","=","cG",".","xyz","/","cG",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fj","=","cH",".","xyz","/","cH",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dZ","(","fg",".","xy",",","0.0",")",")","{","ff","=","eW","(","fg",",","fh",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","fe",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","dZ","(","fg",".","xy",",","dU",")",")","{","ff","=","fd","(","fg",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","fe",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dZ","(","fh",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["ff","=","eW","(","fh",",","fi",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","fe",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ff","=","fd","(","fh",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","fe",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dZ","(","fi",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["ff","=","eW","(","fi",",","fj",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","fe",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ff","=","fd","(","fi",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","fe",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dZ","(","fj",".","xy",",","0.0",")",")","ff","=","fd","(","fj",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","fe",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","ff",";","}"]}]}}]},{type:"textline",tokens:["float","fp","(","inout","vec3","fl",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fm","=","texture2DProj","(","u_shadow_mask",",","cI",")",".","rg",";","vec3","fn","=","vec3","(","fm",".","r",")",";","float","fo","=","fm",".","g",";","dQ","=","vec4","(","fn",",","fo",")",";","fl","*=","dQ",".","a",";","return","dQ",".","r",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION","||","SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["return","fk","(","cD",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fu","(","vec3","fq",",","float","fr",",","vec2","fs",")","{","vec2","ft","=","vec2","(","(","fq",".","x","-","fs",".","x",")","/","fr",",","-","(","fq",".","z","-","fs",".","y",")","/","fr",")",";","return","fract","(","ft",")",";","}","vec2","fy","(","vec2","fv",",","float","fw",",","vec2","fx",")","{","return","vec2","(","fv",".","x","*","fw",",","-","fv",".","y","*","fw",")","+","fx",";","}","d","fz","(",")","{","return","d","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","d","ge","(","vec3","fA",",","vec3","fB",",","vec3","fC",",","vec3","fD",",","vec3","fE",",","PRECISION","sampler2D","fF",",","sampler2D","fG",",","vec3","fH",",","float","fI",",","vec3","fJ",",","vec4","fK",",","mat4","fL",")","{","vec3","fM","=","j","(","fK",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","fN","=","-","fM",".","x",";","float","fO","=","-","fM",".","z",";","vec2","fP","=","vec2","(","fJ",".","x","+","fI","*","(","-","1.0","-","fN",")","/","2.0",",","fJ",".","z","+","fI","*","(","1.0","-","fO",")","/","2.0",")",";","vec2","fQ","=","fu","(","fE",",","fI",",","fP",")",";","float","fR","=","fI","/","2.0",";","vec2","fS","=","abs","(","fy","(","fQ","-","vec2","(","0.5",")",",","fI",",","vec2","(","0.0",")",")",")",";","float","fT","=","fR","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fS",")",">","fT",")","return","fz","(",")",";","float","fU","=","fI","/","fH",".","z",";","vec2","fV","=","(","fQ","-","vec2","(","0.5",")",")","*","fU","+","vec2","(","0.5",")",";","vec3","fW","=","fM","*","(","fI","/","fH",".","z","-","1.0",")","/","2.0",";","fV",".","x","+=","fW",".","x",";","fV",".","y","-=","fW",".","z",";","vec4","fX","=","texture2D","(","fG",",","fV",")",";","float","fY","=","fX",".","r",";","if","(","fY","<","u_scale_threshold",")","return","fz","(",")",";","float","fZ","=","fH",".","y","-","fH",".","x",";","float","f_","=","fH",".","y","-","texture2D","(","fF",",","fV",")",".","r","*","fZ",";","vec2","ga","=","fA",".","xz","-","fE",".","xz",";","fE",".","xz","=","fy","(","fQ",",","fI",",","fP",")",";","fE",".","y","=","f_",";","fA",".","xz","=","fE",".","xz","+","ga",";","fA",".","y","*=","fY",";","fA",".","y","+=","f_",";","vec3","gb","=","fX",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fA","-=","fE",";","mat4","gc","=","an","(","fJ",",","fE",",","fL",")",";","d","gd","=","aA","(","fA",",","fE",",","fB",",","fC",",","fD",",","gc",")",";","gd",".","b","=","fE",";","gd",".","f","=","gb",";","return","F","(","gd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","F","(","d","(","fA",",","fE",",","fB",",","fC",",","fD",",","gb",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","==","SHADOW_MASK_GENERATION","||","SHADOW_USAGE","==","SHADOW_MAPPING_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gk","(","mat4","gf",",","vec4","gg",")","{","vec2","gh","=","(","gf","*","u_v_light_matrix","[","3","]",")",".","xy",";","float","gi","=","SHADOW_TEX_RES","/","2.0",";","gh","=","floor","(","gh","*","gi","+","0.5",")","/","gi","-","gh",";","vec4","gj","=","gf","*","gg",";","gj",".","xy","+=","gh",";","gj","=","u_b_light_matrix","*","gj",";","return","gj",";","}","void","go","(","vec3","gl",",","vec3","gm",")","{","vec4","gn","=","u_v_light_matrix","*","vec4","(","gl","+","u_normal_offset","*","gm",",","1.0",")",";","cE","=","gk","(","u_p_light_matrix0",",","gn",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cF","=","gk","(","u_p_light_matrix1",",","gn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cG","=","gk","(","u_p_light_matrix2",",","gn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cH","=","gk","(","u_p_light_matrix3",",","gn",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_USAGE","==","SHADOW_MAPPING_OPAQUE"],group:{type:"group",parts:[{type:"textline",tokens:["void","go","(","vec4","gp",")","{","float","gq","=","gp",".","x",";","float","gr","=","gp",".","y",";","float","gs","=","gp",".","w",";","cI",".","x","=","(","gq","+","gs",")","/","2.0",";","cI",".","y","=","(","gr","+","gs",")","/","2.0",";","cI",".","z","=","gs",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","gv","(","inout","vec3","gu",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gu","=","max","(","vec3","(","0.0",")",",","gu",")",";","gu","=","pow","(","gu",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gx","(","inout","vec3","gw",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gw","=","max","(","vec3","(","0.0",")",",","gw",")",";","gw","=","pow","(","gw",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gA","(","inout","vec3","gy",",","in","float","gz",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gy","=","gy","*","gz",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","gD","=","255.0",";","float","gE","=","0.0",";","float","gF","=","1.0",";","vec4","gK","(","const","in","float","gG",")","{","vec4","gH","=","vec4","(","gD","*","gD","*","gD",",","gD","*","gD",",","gD",",","gF",")",";","vec4","gI","=","vec4","(","gE",",","gF","/","gD",",","gF","/","gD",",","gF","/","gD",")",";","vec4","gJ","=","fract","(","gG","*","gH",")",";","gJ","-=","gJ",".","xxyz","*","gI",";","return","gJ",";","}","float","gO","(","const","in","vec4","gL",")","{","float","gM",";","vec4","gN","=","vec4","(","gF","/","(","gD","*","gD","*","gD",")",",","gF","/","(","gD","*","gD",")",",","gF","/","gD",",","gF",")",";","gM","=","dot","(","gL",",","gN",")",";","return","gM",";","}","vec4","gK","(","const","in","vec2","gP",")","{","vec2","gQ","=","vec2","(","gD",",","gF",")",";","vec2","gR","=","vec2","(","gE",",","gF","/","gD",")",";","vec4","gS","=","fract","(","gP",".","xxyy","*","gQ",".","xyxy",")",";","gS","-=","gS",".","xxzz","*","gR",".","xyxy",";","if","(","gP",".","r","==","gF",")","gS",".","rg","=","vec2","(","gE",",","gF",")",";","if","(","gP",".","g","==","gF",")","gS",".","ba","=","vec2","(","gE",",","gF",")",";","return","gS",";","}","vec2","gW","(","const","in","vec4","gT",")","{","vec2","gU",";","vec2","gV","=","vec2","(","gF","/","gD",",","gF",")",";","gU",".","r","=","dot","(","gT",".","rg",",","gV",")",";","gU",".","g","=","dot","(","gT",".","ba",",","gV",")",";","return","gU",";","}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","hb","(","inout","vec3","gX",",","in","float","gY",",","in","vec4","gZ",")","{","float","g_","=","gZ",".","w","*","gY",";","float","ha","=","exp","(","-","g_","*","g_",")",";","ha","=","clamp","(","ha",",","0.0",",","1.0",")",";","gX","=","mix","(","gZ",".","rgb",",","gX",",","ha",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","hi","(","in","mat4","hc",",","in","vec3","hd",")","{","vec3","he","=","mix","(","hc","[","0","]",".","rgb",",","hc","[","1","]",".","rgb",",","max","(","sign","(","hd",".","x",")",",","0.0",")",")",";","vec3","hf","=","mix","(","hc","[","2","]",".","rgb",",","hc","[","3","]",".","rgb",",","max","(","sign","(","hd",".","z",")",",","0.0",")",")",";","vec3","hg","=","vec3","(","hc","[","0","]",".","a",",","hc","[","1","]",".","a",",","hc","[","2","]",".","a",")",";","vec3","hh","=","mix","(","he",",","hf",",","abs","(","hd",".","z",")",")",";","hh","=","mix","(","hh",",","hg",",","abs","(","hd",".","y",")",")",";","return","hh",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","hk","(","inout","float","hj",")","{","hj","-=","0.5",";","hj","=","4.0","*","(","hj","*","hj","*","hj",")","+","0.5",";","}","void","hB","(","inout","vec3","hl",",","in","float","hm",",","in","vec3","hn",",","in","float","ho",",","in","vec4","hp",",","in","vec4","hq",",","in","float","hr",",","in","float","hs",")","{","float","ht","=","hq",".","w","*","hm",";","float","hu","=","exp","(","-","ht","*","ht",")",";","hu","=","clamp","(","hu",",","0.0",",","1.0",")",";","float","hv","=","max","(","hn",".","y",",","0.0",")",";","hm","=","max","(","hm","-","max","(","ho","/","hv",",","0.0",")",",","0.0",")",";","float","hw","=","hp",".","w","*","hm",";","float","hx","=","1.0","-","hw",";","hx","=","max","(","hx",",","0.0",")",";","hk","(","hx",")",";","hx","+=","max","(","hr","-","0.5",",","0.0",")",";","if","(","hx","<","hu",")","{","vec3","hy","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","hz","=","hp",".","rgb",";","ho","=","clamp","(","-","ho","*","0.03",",","0.0",",","0.8",")",";","vec3","hA","=","mix","(","hz",",","hy",",","min","(","hv",",","1.0",")",")",";","hA","=","mix","(","hA",",","vec3","(","0.0",")",",","ho",")","*","hs",";","hl","=","mix","(","hA",",","hl",",","hx",")",";","}","if","(","hx",">=","hu",")","{","hl","=","mix","(","hq",".","rgb",",","hl",",","hu",")",";","}","}","void","hK","(","inout","vec3","hC",",","in","float","hD",",","in","float","hE",",","in","vec4","hF",",","in","float","hG",")","{","float","hH","=","hF",".","w","*","hD",";","float","hI","=","1.0","-","hH",";","hI","=","clamp","(","hI",",","0.0",",","1.0",")",";","hk","(","hI",")",";","hE","=","clamp","(","-","hE","*","0.03",",","0.0",",","0.8",")",";","vec3","hJ","=","mix","(","hF",".","rgb",",","vec3","(","0.0",")",",","hE",")","*","hG",";","hC","=","mix","(","hJ",",","hC",",","hI",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","hL","=","0.0",";","float","hM","=","1.0",";","float","hN","=","0.5",";","struct","hO","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hW","(","vec3","hP",",","vec3","hQ",",","vec3","hR",",","float","hS",",","float","hT",")","{","vec3","hU","=","normalize","(","hP","+","hQ",")",";","float","hV","=","(","hM","-","hS",")","*","max","(","dot","(","hR",",","hU",")",",","hL",")","+","hS",";","return","pow","(","hV",",","hT",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","ih","(","vec3","hX",",","vec3","hY",",","vec3","hZ",",","float","h_",")","{","vec3","ia","=","normalize","(","hX","+","hY",")",";","float","ib","=","max","(","dot","(","hZ",",","ia",")",",","0.001",")",";","float","ic","=","max","(","dot","(","hZ",",","hY",")",",","0.01",")",";","float","id","=","max","(","dot","(","hZ",",","hX",")",",","0.01",")",";","float","ie","=","tan","(","acos","(","ib",")",")",";","float","ig","=","max","(","h_",",","0.001",")",";","return","id","*","(","hM","/","(","4.0","*","M_PI","*","ig","*","ig",")",")","*","(","exp","(","-","(","ie","*","ie",")","/","(","ig","*","ig",")",")","/","(","sqrt","(","ic","*","id",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","iq","(","vec3","ii",",","vec3","ij",",","vec3","ik",",","float","il",",","float","im",")","{","vec3","io","=","normalize","(","ii","+","ij",")",";","float","ip","=","acos","(","dot","(","io",",","ik",")",")",";","if","(","ip","<","il",")","return","hM",";","else","if","(","ip",">=","il","+","im","||","im","==","hL",")","return","hL",";","else","return","hM","-","(","ip","-","il",")","/","im",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_BLINN"],group:{type:"group",parts:[{type:"textline",tokens:["float","iJ","(","vec3","ir",",","vec3","is",",","vec3","it",",","float","iu",",","float","iv",",","float","iw",")","{","if","(","iu","<","1.0","||","iv","==","hL",")","return","hL",";","else","{","if","(","iv","<","100.0",")","iv","=","sqrt","(","1.0","/","iv",")",";","else","iv","=","10.0","/","iv",";","vec3","ix","=","normalize","(","is","+","ir",")",";","float","iy","=","(","hM","-","iw",")","*","max","(","dot","(","it",",","ix",")",",","hL",")","+","iw",";","if","(","iy","<","hL",")","return","hL",";","else","{","float","iz","=","max","(","dot","(","it",",","is",")",",","0.01",")",";","float","iA","=","dot","(","it",",","ir",")",";","if","(","iA","<=","0.01",")","return","hL",";","else","{","float","iB","=","max","(","dot","(","is",",","ix",")",",","0.01",")",";","float","iC","=","hM",";","float","iD","=","(","2.0","*","iy","*","iz",")","/","iB",";","float","iE","=","(","2.0","*","iy","*","iA",")","/","iB",";","float","iF","=","min","(","min","(","iC",",","iD",")",",","iE",")",";","float","iG","=","sqrt","(","pow","(","iu",",","2.0",")","+","pow","(","iB",",","2.0",")","-","hM",")",";","float","iH","=","pow","(","iG","-","iB",",","2.0",")","/","pow","(","iG","+","iB",",","2.0",")","*","(","hM","+","pow","(","iB","*","(","iG","+","iB",")","-","hM",",","2.0",")","/","pow","(","iB","*","(","iG","-","iB",")","+","hM",",","2.0",")",")",";","float","iI","=","acos","(","iy",")",";","return","max","(","iH","*","iF","*","exp","(","-","pow","(","iI",",","2.0",")","/","(","2.0","*","pow","(","iv",",","2.0",")",")",")",",","hL",")",";","}","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["float","jb","(","float","iK",",","vec3","iL",",","vec3","iM",",","vec3","iN",",","float","iO",")","{","if","(","iO",">","hL",")","{","float","iP","=","max","(","dot","(","iL",",","iN",")",",","hL",")",";","float","iQ","=","iO","*","iO",";","float","iR","=","hM","-","hN","*","(","iQ","/","(","iQ","+","0.33",")",")",";","vec3","iS","=","iM","-","iK","*","iL",";","vec3","iT","=","iN","-","iP","*","iL",";","if","(","length","(","iS",")","==","hL","||","length","(","iT",")","==","hL","||","abs","(","iK",")",">","hM","||","abs","(","iP",")",">","hM",")","return","iK","*","iR",";","else","{","float","iU","=","acos","(","iK",")",";","float","iV","=","acos","(","iP",")",";","vec3","iW","=","normalize","(","iS",")",";","vec3","iX","=","normalize","(","iT",")",";","float","iY",",","iZ",";","iY","=","max","(","iU",",","iV",")",";","iZ","=","min","(","iU",",","iV",")",";","iZ","*=","0.95",";","float","i_","=","max","(","dot","(","iW",",","iX",")",",","hL",")",";","float","ja","=","0.45","*","(","iQ","/","(","iQ","+","0.09",")",")",";","return","iK","*","(","iR","+","(","ja","*","i_","*","sin","(","iY",")","*","tan","(","iZ",")",")",")",";","}","}","else","return","iK",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_MINNAERT"],group:{type:"group",parts:[{type:"textline",tokens:["float","jh","(","float","jc",",","vec3","jd",",","vec3","je",",","float","jf",")","{","float","jg","=","max","(","dot","(","jd",",","je",")",",","hL",")",";","if","(","jf","<=","hM",")","return","jc","*","pow","(","max","(","jg","*","jc",",","0.1",")",",","jf","-","hM",")",";","else","return","jc","*","pow","(","1.0001","-","jg",",","jf","-","hM",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","jm","(","float","ji",",","float","jj",",","float","jk",")","{","float","jl","=","acos","(","ji",")",";","if","(","jl","<","jj",")","return","hM",";","else","if","(","jl",">","(","jj","+","jk",")","||","jk","==","hL",")","return","hL",";","else","return","hM","-","(","(","jl","-","jj",")","/","jk",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["float","jr","(","float","jn",",","float","jo",",","float","jp",")","{","float","jq",";","if","(","jo","==","hL",")","{","return","hM",";","}","else","{","jq","=","hM","+","abs","(","jn",")",";","jq","=","jp","+","(","hM","-","jp",")","*","pow","(","jq",",","jo",")",";","return","clamp","(","jq",",","hL",",","hM",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","jz","(","vec3","js",",","vec3","jt",",","vec3","ju",",","vec2","jv",",","const","float","jw",",","out","float","jx",")","{","float","jy","=","(","hM","-","jw",")","*","dot","(","js",",","jt",")","+","jw",";","jx","=","jy",";","if","(","jw","==","hN",")","return",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["jx","=","jr","(","jy",",","jv","[","0","]",",","jv","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["jx","=","jb","(","jy",",","js",",","jt",",","ju",",","jv","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_MINNAERT"],group:{type:"group",parts:[{type:"textline",tokens:["jx","=","jh","(","jy",",","js",",","ju",",","jv","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["jx","=","jm","(","jy",",","jv","[","0","]",",","jv","[","1","]",")",";"]}]}}]},{type:"textline",tokens:["jx","=","max","(","jx",",","hL",")",";"]}]}}]},{type:"textline",tokens:["}","void","jG","(","vec3","jA",",","vec3","jB",",","vec3","jC",",","float","jD",",","vec2","jE",",","out","float","jF",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","hW","(","jA",",","jB",",","jC",",","jD",",","jE","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","ih","(","jA",",","jB",",","jC",",","jE","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","iq","(","jA",",","jB",",","jC",",","jE","[","0","]",",","jE","[","1","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_BLINN"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","iJ","(","jA",",","jB",",","jC",",","jE","[","0","]",",","jE","[","1","]",",","jD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jF","=","hL",";"]}]}}]},{type:"textline",tokens:["}","void","kc","(","vec3","jH",",","vec3","jI",",","vec3","jJ",",","vec2","jK",",","vec4","jL",",","vec3","jM",",","vec3","jN",",","vec3","jO",",","inout","hO","jP",",","float","jQ",",","vec2","jR",",","vec2","jS",",","float","jT",")","{","float","jU","=","hL",";","if","(","jK",".","r","!=","hL",")","jz","(","jJ",",","jI",",","jH",",","jR",",","jT",",","jU",")",";","float","jV","=","hL",";","if","(","jK",".","g","!=","hL",")","jG","(","jI",",","jH",",","jJ",",","jT",",","jS",",","jV",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","jI",",","jJ",")","*","dot","(","jH",",","jJ",")","<","hL",")","{","float","jW","=","jL",".","x",";","float","jX","=","jL",".","y",";","float","jY","=","jL",".","z",";","float","jZ","=","jL",".","w",";","float","j_","=","clamp","(","abs","(","dot","(","jI",",","jJ",")",")",",","hL",",","hM",")",";","float","ka","=","clamp","(","dot","(","jH",",","-","jI",")",",","hL",",","hM",")",";","float","kb","=","pow","(","ka",",","jX",")",";","jP",".","a","+=","jQ","*","vec4","(","jO","*","j_","*","pow","(","jM",",","vec3","(","jW",")",")",",","hM",")",";","jP",".","a","+=","jY","*","mix","(","vec4","(","jM",",","hM",")",",","vec4","(","hM",")",",","jZ",")","*","jQ","*","vec4","(","jO","*","j_","*","vec3","(","kb",")",",","hM",")",";","}","else","{","jP",".","b","+=","jO","*","jN","*","jV",";","jP",".","a","+=","vec4","(","jO","*","jM","*","jU",",","jV",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jP",".","b","+=","jO","*","jN","*","jV",";","jP",".","a","+=","vec4","(","jO","*","jM","*","jU",",","jV",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"lamp",name:"POINT",statements:[{type:"textline",tokens:["vec2","ku","=","kq","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","kv","=","kn","[","LAMP_IND","]",";","vec3","kw","=","kp","[","LAMP_IND","]",";","float","kx","=","hL",";"]},{type:"textline",tokens:["vec3","ky","=","kw",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","ky","*=","km",";","vec3","kz","=","kv","-","kh",";"]},{type:"textline",tokens:["float","kA","=","length","(","kz",")",";","ky","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","kA","*","kA",")",";","kz","=","normalize","(","kz",")",";","kc","(","kj",",","kz",",","ki",",","ku",",","ks",",","kf",",","kg",",","ky",",","kt",",","kr",",","kl",",","kk",",","kx",")",";"]}]},{type:"lamp",name:"SPOT",statements:[{type:"textline",tokens:["vec2","kB","=","kq","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","kC","=","kn","[","LAMP_IND","]",";","vec3","kD","=","kp","[","LAMP_IND","]",";","vec3","kE","=","ko","[","LAMP_IND","]",";","float","kF","=","hL",";"]},{type:"textline",tokens:["vec3","kG","=","kD",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","kG","*=","km",";","vec3","kH","=","kC","-","kh",";"]},{type:"textline",tokens:["float","kI","=","length","(","kH",")",";","kG","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","kI","*","kI",")",";","kH","=","normalize","(","kH",")",";"]},{type:"textline",tokens:["float","kJ","=","dot","(","kH",",","kE",")",";","kJ","*=","smoothstep","(","hL",",","hM",",","(","kJ","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","kG","*=","kJ",";","kc","(","kj",",","kH",",","ki",",","kB",",","ks",",","kf",",","kg",",","kG",",","kt",",","kr",",","kl",",","kk",",","kF",")",";"]}]},{type:"lamp",name:"SUN",statements:[{type:"textline",tokens:["vec2","kK","=","kq","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","kL","=","kp","[","LAMP_IND","]",";","vec3","kM","=","ko","[","LAMP_IND","]",";","float","kN","=","hL",";"]},{type:"textline",tokens:["vec3","kO","=","kL",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","kO","*=","km",";","kc","(","kj",",","kM",",","ki",",","kK",",","ks",",","kf",",","kg",",","kO",",","kt",",","kr",",","kl",",","kk",",","kN",")",";"]}]},{type:"lamp",name:"HEMI",statements:[{type:"textline",tokens:["vec2","kP","=","kq","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","kQ","=","kp","[","LAMP_IND","]",";","vec3","kR","=","ko","[","LAMP_IND","]",";","float","kS","=","hN",";"]},{type:"textline",tokens:["vec3","kT","=","kQ",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","kT","*=","km",";","kc","(","kj",",","kR",",","ki",",","kP",",","ks",",","kf",",","kg",",","kT",",","kt",",","kr",",","kl",",","kk",",","kS",")",";"]}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hO","kU","(","vec3","kd",",","vec3","ke",",","vec3","kf",",","vec3","kg",",","vec3","kh",",","vec3","ki",",","vec3","kj",",","vec2","kk",",","vec2","kl",",","float","km",",","vec3","kn","[","NUM_LIGHTS","]",",","vec3","ko","[","NUM_LIGHTS","]",",","vec3","kp","[","NUM_LIGHTS","]",",","vec4","kq","[","NUM_LFACTORS","]",",","float","kr",",","vec4","ks",")","{","hO","kt",";","kt",".","a","=","vec4","(","kd","+","kf","*","ke",",","hL",")",";","kt",".","b","=","vec3","(","hL",")",";"]},{type:"lamps_main"},{type:"textline",tokens:["return","kt",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hO","kZ","(","vec3","kV",",","vec3","kW",",","vec3","kX",")","{","hO","kY",";","kY",".","a","=","vec4","(","kV","+","kX","*","kW",",","hL",")",";","kY",".","b","=","vec3","(","hL",")",";","return","kY",";","}"]}]}}]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","lz","(","inout","vec3","k_",",","float","la",",","float","lb",",","float","lc",",","vec3","ld",",","vec3","le",",","vec3","lf",",","vec4","lg",",","vec3","lh",",","float","li",")","{","if","(","li",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","lj","=","lg",";","vec3","lk","=","lh","+","ld",";","lk",".","xz","=","10.0","*","sin","(","0.1","*","lk",".","xz",")",";","vec3","ll","=","lk","+","2.0","*","cross","(","-","lj",".","xyz",",","cross","(","-","lj",".","xyz",",","lk",")","+","lj",".","w","*","lk",")",";","vec2","lm","=","ll",".","xz",";","vec3","ln","=","le",";","float","lo","=","max","(","dot","(","ld",",","ln",")",",","0.0",")",";","float","lp","=","0.025",";","lm",".","s","+=","0.5","*","sin","(","dot","(","lh","+","lb",",","vec3","(","1.0",")",")",")",";","lm",".","t","+=","0.7","*","(","-","sin","(","dot","(","lh","-","lb",",","vec3","(","-","0.7",")",")",")",")",";","lm",".","st","+=","0.23","*","cos","(","4.0","*","la","-","CAUST_SPEED",".","x","*","lb",")",";","lm",".","st","+=","3.0","*","sin","(","la","-","0.3","*","CAUST_SPEED",".","y","*","lb",")",";","float","lq","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","la",",","0.0",")",")",";","mat3","lr","=","dt","(","(","lm","/","lq",")",",","lp",")",";","float","ls","=","(","lr","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","lt","=","(","lr","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","lu","=","(","lr","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","lv","=","CAUST_BRIGHT","*","vec3","(","ls",",","lt",",","lu",")",";","float","lw","=","lc","*","lo",";","float","lx","=","max","(","sign","(","la",")",",","0.0",")",";","lw","=","min","(","lw","+","0.5","*","sign","(","-","ld",".","y",")","*","lx",",","1.0",")",";","lw","*=","1.0","-","lx","*","(","0.1","*","la",")",";","lv","*=","lw",";","lv","*=","lv",";","float","ly","=","min","(","-","la","+","10.0",",","1.0",")",";","k_","+=","max","(","(","2.0","*","lf","*","lv",")","*","ly",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFLECTION_TYPE","==","REFL_CUBE","||","REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","lN","(","in","vec3","lG",",","vec3","lH",",","float","lI",",","float","lJ",")","{","vec3","lK","=","normalize","(","lH","+","lG",")",";","float","lL","=","1.0","-","dot","(","lG",",","lK",")",";","float","lM","=","lJ","+","(","1.0","-","lJ",")","*","pow","(","lL",",","lI",")",";","return","lM",";","}","void","ma","(","inout","vec3","lO",",","vec3","lP",",","vec3","lQ",",","float","lR",")","{","vec3","lS","=","reflect","(","-","lP",",","lQ",")",";","float","lT","=","u_fresnel_params","[","2","]",";","float","lU","=","u_fresnel_params","[","3","]",";","float","lV","=","1.0",";","if","(","lT","!=","0.0",")","lV","=","lN","(","lP",",","lS",",","lT",",","lU",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lW","=","textureCube","(","u_cube_reflection",",","lS",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lX","=","u_refl_plane",".","xyz","*","dot","(","lQ",",","u_refl_plane",".","xyz",")",";","vec3","lY","=","lQ","-","lX",";","vec2","lZ","=","(","u_view_matrix_frag","*","vec4","(","lY",",","0.0",")",")",".","xy",";","vec2","l_","=","cI",".","xy","/","cI",".","z",";","l_","+=","lZ","*","REFL_BUMP",";","vec3","lW","=","texture2D","(","u_plane_reflection",",","l_",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lW","=","textureCube","(","u_mirrormap",",","lS",")",".","xyz",";","lR","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["gv","(","lW",".","rgb",")",";","lO","=","mix","(","lO",",","lW",",","lR","*","lV",")",";","}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","mg","(","in","float","mb",",","inout","vec2","mc",",","in","vec2","md",")","{","vec4","me","=","texture2D","(","u_scene_depth",",","mc",")",";","float","mf","=","gO","(","me",")",";","if","(","mf","<","lF",")","{","mc","=","md",";","return","mb",";","}","else","{","return","mf",";","}","return","mb",";","}"]}]}}]},{type:"textline",tokens:["vec3","mo","(","in","vec3","mh",",","in","vec2","mi",")","{","vec2","mj","=","mh",".","xy","/","mh",".","z",";","vec2","mk","=","mj","+","mi",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ml","=","texture2DProj","(","u_scene_depth",",","mh",")",";","float","mm","=","gO","(","ml",")",";","mg","(","mm",",","mk",",","mj",")",";"]}]}}]},{type:"textline",tokens:["vec3","mn","=","texture2D","(","u_refractmap",",","mk",")",".","rgb",";","gv","(","mn",")",";","return","mn",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","mr","(","vec3","mp",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","mp",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","mq","=","0.5","*","mp",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","mq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","||","USE_NODE_TEX_COORD_GE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ms",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","mt","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","mu","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","my","(","in","vec3","mv",",","in","float","mw",")","{","vec3","mx","=","mt",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["mx","=","mo","(","cI",",","mv",".","xz","*","mw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mx","=","texture2D","(","u_refractmap",",","cI",".","xy","/","cI",".","z",")",".","rgb",";","gv","(","mx",")",";"]}]}}]},{type:"textline",tokens:["return","mx",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mF","(","vec3","mz",")","{","vec4","mA","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","vec4","mB","=","mix","(","vec4","(","mz",".","bg",",","mA",".","wz",")",",","vec4","(","mz",".","gb",",","mA",".","xy",")",",","step","(","mz",".","b",",","mz",".","g",")",")",";","vec4","mC","=","mix","(","vec4","(","mB",".","xyw",",","mz",".","r",")",",","vec4","(","mz",".","r",",","mB",".","yzx",")",",","step","(","mB",".","x",",","mz",".","r",")",")",";","float","mD","=","mC",".","x","-","min","(","mC",".","w",",","mC",".","y",")",";","float","mE","=","1.0e-10",";","return","vec3","(","abs","(","mC",".","z","+","(","mC",".","w","-","mC",".","y",")","/","(","6.0","*","mD","+","mE",")",")",",","mD","/","(","mC",".","x","+","mE",")",",","mC",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mJ","(","vec3","mG",")","{","vec4","mH","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","vec3","mI","=","abs","(","fract","(","vec3","(","mG",".","r",",","mG",".","r",",","mG",".","r",")","+","mH",".","xyz",")","*","6.0","-","mH",".","www",")",";","return","mG",".","b","*","mix","(","mH",".","xxx",",","clamp","(","mI","-","mH",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","mG",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_B4W_PARALLAX","||","USE_NODE_UV_MERGED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mL","(","vec2","mK",")","{","return","vec3","(","mK","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mN","(","vec3","mM",")","{","return","vec2","(","mM",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"nr",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ns",qualifier:["float"],is_optional:true},{type:"node_out",name:"nt",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nr"],statements:[{type:"textline",tokens:["nr","=","normalize","(","nm",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ns"],statements:[{type:"textline",tokens:["ns","=","abs","(","nm",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nt"],statements:[{type:"textline",tokens:["nt","=","length","(","nm",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"nu",qualifier:["float"],is_optional:false},{type:"node_in",name:"nv",qualifier:["float"],is_optional:false},{type:"node_in",name:"nw",qualifier:["float"],is_optional:false},{type:"node_out",name:"nx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nx","=","vec3","(","nu",",","nv",",","nw",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"ny",qualifier:["float"],is_optional:false},{type:"node_in",name:"nz",qualifier:["float"],is_optional:false},{type:"node_in",name:"nA",qualifier:["float"],is_optional:false},{type:"node_out",name:"nB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nB","=","mJ","(","vec3","(","ny",",","nz",",","nA",")",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"nC",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"mO",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["nC","=","mL","(","mO",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"nD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nD","=","2.0","*","clamp","(","ms",",","0.0",",","1.0",")","-","mu",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"mP",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["nE","=","mP",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"nF",qualifier:["float"],is_optional:false},{type:"node_param",name:"mQ",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["nF","=","mQ",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"nG",qualifier:["float"],is_optional:false},{type:"node_out",name:"nH",qualifier:["float"],is_optional:false},{type:"node_param",name:"mR",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["nG","=","mR","[","0","]",";","nH","=","mR","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"nI",qualifier:["float"],is_optional:false},{type:"node_out",name:"nJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"nK",qualifier:["float"],is_optional:false},{type:"node_param",name:"mS",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["nI","=","mS","[","0","]",";","nJ","=","mS","[","1","]",";","nK","=","mS","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"nL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nL","=","nh",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"nM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nM","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"nN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nN","=","na",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"nO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nO","[","0","]","=","nm","[","0","]",";","nO","[","1","]","=","nm","[","1","]",";","nO","[","2","]","=","nm","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"nP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nP","=","vec3","(","nl",".","r",",","-","nl",".","b",",","nl",".","g",")",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"nQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nR",qualifier:["float"],is_optional:false},{type:"node_in",name:"nS",qualifier:["float"],is_optional:false},{type:"node_in",name:"nT",qualifier:["float"],is_optional:false},{type:"node_in",name:"nU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vec3","nW","=","mF","(","nU",")",";","nW","[","0","]","+=","(","nQ","-","0.5",")",";","if","(","nW","[","0","]",">","UNITY_VALUE_NODES",")","nW","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","nW","[","0","]","<","ZERO_VALUE_NODES",")","nW","[","0","]","+=","UNITY_VALUE_NODES",";","nW","*=","vec3","(","UNITY_VALUE_NODES",",","nR",",","nS",")",";","nW","=","mix","(","mu",",","mix","(","mt",",","nW",",","step","(","mt",",","nW",")",")",",","step","(","nW",",","mu",")",")",";","nV","=","mix","(","nU",",","mJ","(","nW",")",",","nT",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"nX",qualifier:["float"],is_optional:false},{type:"node_in",name:"nY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nZ","=","mix","(","nY",",","mu","-","nY",",","nX",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"n_",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ob",qualifier:["float"],is_optional:false},{type:"node_out",name:"oc",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_n_"],statements:[{type:"textline",tokens:["n_","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["vec4","od","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","vec3","oe","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","vec3","of","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","float","og","=","od",".","z",";","if","(","og","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["oa","=","of","-","lA",";","ob","=","length","(","oa",")",";","oa","=","normalize","(","oa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oc"],statements:[{type:"textline",tokens:["oc","=","og","/","(","og","+","ob","*","ob",")",";","float","oh","=","od",".","x",";","float","oi","=","od",".","y",";","if","(","oh",">","-","UNITY_VALUE_NODES",")","{","float","oj","=","dot","(","oa",",","oe",")",";","oj","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","oj","-","oh",")","/","oi",")",";","oc","*=","oj",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oa"],statements:[{type:"textline",tokens:["oa","=","oe",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ob"],statements:[{type:"textline",tokens:["ob","=","length","(","of","-","lA",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oc"],statements:[{type:"textline",tokens:["oc","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"ok",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ol",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"om",qualifier:["float"],is_optional:true},{type:"node_param",name:"mT",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ol"],statements:[{type:"textline",tokens:["ol","=","mT",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_om"],statements:[{type:"textline",tokens:["om","=","-","dot","(","ok",",","mT",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oo","=","-","(","u_view_matrix_frag","*","vec4","(","on",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"op",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oq",qualifier:["float"],is_optional:false},{type:"node_in",name:"or",qualifier:["float"],is_optional:false},{type:"node_in",name:"os",qualifier:["float"],is_optional:false},{type:"node_in",name:"ot",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ov",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ov","=","op",";"]},{type:"textline",tokens:["oq",";","or",";","os",";","ot",";","ou",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"ow",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ox",qualifier:["float"],is_optional:false},{type:"node_in",name:"oy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oz","=","ow",";"]},{type:"textline",tokens:["ox",";","oy",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"oA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oB",qualifier:["float"],is_optional:false},{type:"node_in",name:"oC",qualifier:["float"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oE","=","oA",";"]},{type:"textline",tokens:["oB",";","oC",";","oD",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["float"],is_optional:false},{type:"node_in",name:"oH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oI","=","oF",";"]},{type:"textline",tokens:["oG",";","oH",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"oJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oK",qualifier:["float"],is_optional:false},{type:"node_in",name:"oL",qualifier:["float"],is_optional:false},{type:"node_in",name:"oM",qualifier:["float"],is_optional:false},{type:"node_out",name:"oN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oN","=","oJ",";"]},{type:"textline",tokens:["oK",";","oL",";","oM",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"oO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oP","=","oO",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oS","=","oQ",";"]},{type:"textline",tokens:["oR",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"oT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oU",qualifier:["float"],is_optional:false},{type:"node_in",name:"oV",qualifier:["float"],is_optional:false},{type:"node_in",name:"oW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oX","[","0","]","=","oX","[","1","]","=","oX","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["oT",";","oU",";","oV",";","oW",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"o_",qualifier:["float"],is_optional:false},{type:"node_in",name:"pa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pb","=","oY",";"]},{type:"textline",tokens:["oZ",";","o_",";","pa",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pd",qualifier:["float"],is_optional:false},{type:"node_in",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pf","=","pc",";"]},{type:"textline",tokens:["pd",";","pe",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"pg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ph",qualifier:["float"],is_optional:false},{type:"node_in",name:"pi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pj",qualifier:["float"],is_optional:false},{type:"node_in",name:"pk",qualifier:["float"],is_optional:false},{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pm","[","0","]","=","pm","[","1","]","=","pm","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["pg",";","pi",";","pj",";","pk",";","pl",";","ph",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"pn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"po",qualifier:["float"],is_optional:false},{type:"node_out",name:"pp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pp","=","pn",";"]},{type:"textline",tokens:["po",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"pq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pr","[","0","]","=","pr","[","1","]","=","pr","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["pq",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ps","[","0","]","=","ps","[","1","]","=","ps","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"pt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pu",qualifier:["float"],is_optional:false},{type:"node_out",name:"pv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pv","[","0","]","=","pv","[","1","]","=","pv","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["pt",";","pu",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"pw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"px",qualifier:["float"],is_optional:false},{type:"node_in",name:"py",qualifier:["float"],is_optional:false},{type:"node_out",name:"pz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pz","[","0","]","=","pz","[","1","]","=","pz","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["pw",";","px",";","py",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"pA",qualifier:["float"],is_optional:false},{type:"node_in",name:"pB",qualifier:["float"],is_optional:false},{type:"node_in",name:"pC",qualifier:["float"],is_optional:false},{type:"node_in",name:"pD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pE","=","pD",";"]},{type:"textline",tokens:["pA",";","pB",";","pC",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"pF",qualifier:["float"],is_optional:false},{type:"node_in",name:"pG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pH","=","pG",";"]},{type:"textline",tokens:["pF",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"pI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pJ","[","0","]","=","pJ","[","1","]","=","pJ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["pI",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"pK",qualifier:["float"],is_optional:false},{type:"node_out",name:"pL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pL","[","0","]","=","pL","[","1","]","=","pL","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["pK",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"pM",qualifier:["float"],is_optional:false},{type:"node_out",name:"pN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pN","[","0","]","=","pN","[","1","]","=","pN","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["pM",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["float"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"pR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pP","=","pO","[","0","]",";","pQ","=","pO","[","1","]",";","pR","=","pO","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"pS",qualifier:["float"],is_optional:false},{type:"node_in",name:"pT",qualifier:["float"],is_optional:false},{type:"node_in",name:"pU",qualifier:["float"],is_optional:false},{type:"node_out",name:"pV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pV","[","0","]","=","pS",";","pV","[","1","]","=","pT",";","pV","[","2","]","=","pU",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pX",qualifier:["float"],is_optional:false},{type:"node_in",name:"pY",qualifier:["float"],is_optional:false},{type:"node_out",name:"pZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","p_","=","pX","-","pY","*","0.5",";","pZ","=","max","(","(","UNITY_VALUE_NODES","+","pY",")","*","pW","+","p_",",","mt",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"qa",qualifier:["float"],is_optional:false},{type:"node_in",name:"qb",qualifier:["float"],is_optional:false},{type:"node_out",name:"qc",qualifier:["float"],is_optional:false},{type:"node_out",name:"qd",qualifier:["float"],is_optional:false},{type:"node_out",name:"qe",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qc","=","qd","=","qe","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["qa",";","qb",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"qf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qg","[","0","]","=","qg","[","1","]","=","qg","[","2","]","=","ZERO_VALUE_NODES",";","qh","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qf",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"qi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qj","[","0","]","=","qj","[","1","]","=","qj","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["qi",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"qk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ql",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ql","[","0","]","=","ql","[","1","]","=","ql","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["qk",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"qm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qn",qualifier:["float"],is_optional:false},{type:"node_in",name:"qo",qualifier:["float"],is_optional:false},{type:"node_in",name:"qp",qualifier:["float"],is_optional:false},{type:"node_out",name:"qq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qq","[","0","]","=","qq","[","1","]","=","qq","[","2","]","=","ZERO_VALUE_NODES",";","qr","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qm",";","qn",";","qo",";","qp",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"qs",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qt",qualifier:["float"],is_optional:false},{type:"node_in",name:"qu",qualifier:["float"],is_optional:false},{type:"node_in",name:"qv",qualifier:["float"],is_optional:false},{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_out",name:"qx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qx","[","0","]","=","qx","[","1","]","=","qx","[","2","]","=","ZERO_VALUE_NODES",";","qy","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qs",";","qt",";","qu",";","qv",";","qw",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"qz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qA",qualifier:["float"],is_optional:false},{type:"node_out",name:"qB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qB","[","0","]","=","qB","[","1","]","=","qB","[","2","]","=","ZERO_VALUE_NODES",";","qC","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qz",";","qA",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"qD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false},{type:"node_in",name:"qF",qualifier:["float"],is_optional:false},{type:"node_in",name:"qG",qualifier:["float"],is_optional:false},{type:"node_in",name:"qH",qualifier:["float"],is_optional:false},{type:"node_in",name:"qI",qualifier:["float"],is_optional:false},{type:"node_in",name:"qJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"qK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qK","[","0","]","=","qK","[","1","]","=","qK","[","2","]","=","ZERO_VALUE_NODES",";","qL","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qD",";","qE",";","qF",";","qG",";","qH",";","qI",";","qJ",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qN","[","0","]","=","qN","[","1","]","=","qN","[","2","]","=","ZERO_VALUE_NODES",";","qO","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qM",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"qP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"qR",qualifier:["float"],is_optional:false},{type:"node_out",name:"qS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qS","[","0","]","=","qS","[","1","]","=","qS","[","2","]","=","ZERO_VALUE_NODES",";","qT","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qP",";","qQ",";","qR",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"qU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qX",qualifier:["float"],is_optional:false},{type:"node_out",name:"qY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qY","[","0","]","=","qY","[","1","]","=","qY","[","2","]","=","ZERO_VALUE_NODES",";","qZ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["qU",";","qV",";","qW",";","qX",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"q_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ra",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rd",qualifier:["float"],is_optional:false},{type:"node_in",name:"re",qualifier:["float"],is_optional:false},{type:"node_in",name:"rf",qualifier:["float"],is_optional:false},{type:"node_in",name:"rg",qualifier:["float"],is_optional:false},{type:"node_in",name:"rh",qualifier:["float"],is_optional:false},{type:"node_out",name:"ri",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ri","[","0","]","=","ri","[","1","]","=","ri","[","2","]","=","ZERO_VALUE_NODES",";","rj","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["q_",";","ra",";","rb",";","rc",";","rd",";","re",";","rf",";","rg",";","rh",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"rk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rm","=","clamp","(","rk","+","rl",",","mt",",","mu",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"rn",qualifier:["float"],is_optional:false},{type:"node_in",name:"ro",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","rr","=","clamp","(","rn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rq","=","rr","*","ro","+","(","UNITY_VALUE_NODES","-","rr",")","*","rp",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"rs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rt",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"mU",qualifier:["varying","vec2"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rs"],statements:[{type:"textline",tokens:["rs","=","mL","(","mU",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rt"],statements:[{type:"textline",tokens:["rt","=","vec3","(","mU",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"ru",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"mV",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["ru","=","vec3","(","mV",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"rv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rv","=","nh",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"rw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rw","=","abs","(","ms",")",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"rx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rx","[","0","]","=","rx","[","1","]","=","rx","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"ry",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ry","[","0","]","=","nm","[","0","]",";","ry","[","1","]","=","nm","[","1","]",";","ry","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"rz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rz","[","0","]","=","rz","[","1","]","=","rz","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"rA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rA","[","0","]","=","rA","[","1","]","=","rA","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"rB",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"mW",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["rB","=","vec3","(","mW",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"rC",qualifier:["float"],is_optional:false},{type:"node_out",name:"rD",qualifier:["float"],is_optional:false},{type:"node_out",name:"rE",qualifier:["float"],is_optional:false},{type:"node_out",name:"rF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rG",qualifier:["float"],is_optional:false},{type:"node_out",name:"rH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rC","=","ZERO_VALUE_NODES",";","rD","=","ZERO_VALUE_NODES",";","rE","=","ZERO_VALUE_NODES",";","rF","=","vec3","(","ZERO_VALUE_NODES",")",";","rG","=","ZERO_VALUE_NODES",";","rH","=","rF",";","rI","=","rF",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"rJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"rK",qualifier:["float"],is_optional:false},{type:"node_out",name:"rL",qualifier:["float"],is_optional:false},{type:"node_out",name:"rM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rJ","=","ZERO_VALUE_NODES",";","rK","=","ZERO_VALUE_NODES",";","rL","=","ZERO_VALUE_NODES",";","rM","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"rN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rO",qualifier:["float"],is_optional:false},{type:"node_out",name:"rP",qualifier:["float"],is_optional:false},{type:"node_out",name:"rQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rO","=","ZERO_VALUE_NODES",";","rP","=","ZERO_VALUE_NODES",";","rQ","=","ZERO_VALUE_NODES",";","rN","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"rR",qualifier:["float"],is_optional:false},{type:"node_out",name:"rS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rS","=","rR",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"rT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rT","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"rU",qualifier:["float"],is_optional:false},{type:"node_in",name:"rV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rW",qualifier:["float"],is_optional:false},{type:"node_out",name:"rX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rW","=","rX","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["rV",";","rU",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"rY",qualifier:["float"],is_optional:false},{type:"node_out",name:"rZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"r_",qualifier:["float"],is_optional:false},{type:"node_out",name:"sa",qualifier:["float"],is_optional:false},{type:"node_out",name:"sb",qualifier:["float"],is_optional:false},{type:"node_out",name:"sc",qualifier:["float"],is_optional:false},{type:"node_out",name:"sd",qualifier:["float"],is_optional:false},{type:"node_out",name:"se",qualifier:["float"],is_optional:false},{type:"node_out",name:"sf",qualifier:["float"],is_optional:false},{type:"node_out",name:"sg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rY","=","rZ","=","r_","=","ZERO_VALUE_NODES",";","sa","=","sb","=","sc","=","ZERO_VALUE_NODES",";","sd","=","sd","=","sf","=","sg","=","ZERO_VALUE_NODES",";","se","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"sh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"si",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sh","=","si","=","vec3","(","ZERO_VALUE_NODES",")",";","sj","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"sk",qualifier:["float"],is_optional:false},{type:"node_in",name:"sl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["sm","=","sl",";"]},{type:"textline",tokens:["sk",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"sn",qualifier:["float"],is_optional:false},{type:"node_in",name:"so",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["sp","=","so",";"]},{type:"textline",tokens:["sn",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"sq",qualifier:["float"],is_optional:false},{type:"node_out",name:"sr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ss",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sr","[","0","]","=","sr","[","1","]","=","sr","[","2","]","=","clamp","(","sq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ss","=","sr","[","0","]",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"st",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"su",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["su","=","st",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["su","=","(","MAPPING_TRS_MATRIX","*","vec4","(","su",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["su","=","su","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["su","=","su","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["su","=","max","(","su",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["su","=","min","(","su",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["su","=","normalize","(","su",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"sv",qualifier:["float"],is_optional:false},{type:"node_in",name:"sw",qualifier:["float"],is_optional:false},{type:"node_out",name:"sx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sx","=","sv","+","sw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sx","=","clamp","(","sx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"sy",qualifier:["float"],is_optional:false},{type:"node_in",name:"sz",qualifier:["float"],is_optional:false},{type:"node_out",name:"sA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sA","=","sy","-","sz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sA","=","clamp","(","sA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"sB",qualifier:["float"],is_optional:false},{type:"node_in",name:"sC",qualifier:["float"],is_optional:false},{type:"node_out",name:"sD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sD","=","sB","*","sC",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sD","=","clamp","(","sD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"sE",qualifier:["float"],is_optional:false},{type:"node_in",name:"sF",qualifier:["float"],is_optional:false},{type:"node_out",name:"sG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sG","=","(","sF","!=","ZERO_VALUE_NODES",")","?","sE","/","sF",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sG","=","clamp","(","sG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"sH",qualifier:["float"],is_optional:false},{type:"node_in",name:"sI",qualifier:["float"],is_optional:false},{type:"node_out",name:"sJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sJ","=","sin","(","sH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sJ","=","clamp","(","sJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["sI",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"sK",qualifier:["float"],is_optional:false},{type:"node_in",name:"sL",qualifier:["float"],is_optional:false},{type:"node_out",name:"sM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sM","=","cos","(","sK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sM","=","clamp","(","sM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["sL",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"sN",qualifier:["float"],is_optional:false},{type:"node_in",name:"sO",qualifier:["float"],is_optional:false},{type:"node_out",name:"sP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sP","=","tan","(","sN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sP","=","clamp","(","sP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["sO",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"sQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"sR",qualifier:["float"],is_optional:false},{type:"node_out",name:"sS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sS","=","(","sQ","<=","UNITY_VALUE_NODES","&&","sQ",">=","-","UNITY_VALUE_NODES",")","?","asin","(","sQ",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sS","=","clamp","(","sS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["sR",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"sT",qualifier:["float"],is_optional:false},{type:"node_in",name:"sU",qualifier:["float"],is_optional:false},{type:"node_out",name:"sV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sV","=","(","sT","<=","UNITY_VALUE_NODES","&&","sT",">=","-","UNITY_VALUE_NODES",")","?","acos","(","sT",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sV","=","clamp","(","sV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["sU",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"sW",qualifier:["float"],is_optional:false},{type:"node_in",name:"sX",qualifier:["float"],is_optional:false},{type:"node_out",name:"sY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["sY","=","atan","(","sW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["sY","=","clamp","(","sY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["sX",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"sZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"s_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ta",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","sZ","<","ZERO_VALUE_NODES","||","sZ","==","ZERO_VALUE_NODES","&&","s_","==","ZERO_VALUE_NODES",")","ta","=","ZERO_VALUE_NODES",";","else","ta","=","pow","(","sZ",",","s_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ta","=","clamp","(","ta",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"tb",qualifier:["float"],is_optional:false},{type:"node_in",name:"tc",qualifier:["float"],is_optional:false},{type:"node_out",name:"td",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["td","=","(","tb",">","ZERO_VALUE_NODES","&&","tc",">","ZERO_VALUE_NODES",")","?","log2","(","tb",")","/","log2","(","tc",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["td","=","clamp","(","td",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"te",qualifier:["float"],is_optional:false},{type:"node_in",name:"tf",qualifier:["float"],is_optional:false},{type:"node_out",name:"tg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["tg","=","min","(","te",",","tf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["tg","=","clamp","(","tg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"th",qualifier:["float"],is_optional:false},{type:"node_in",name:"ti",qualifier:["float"],is_optional:false},{type:"node_out",name:"tj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["tj","=","max","(","th",",","ti",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["tj","=","clamp","(","tj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"tk",qualifier:["float"],is_optional:false},{type:"node_in",name:"tl",qualifier:["float"],is_optional:false},{type:"node_out",name:"tm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["tm","=","floor","(","tk","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["tm","=","clamp","(","tm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["tl",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"tn",qualifier:["float"],is_optional:false},{type:"node_in",name:"to",qualifier:["float"],is_optional:false},{type:"node_out",name:"tp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["tp","=","(","tn","<","to",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["tp","=","clamp","(","tp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"tq",qualifier:["float"],is_optional:false},{type:"node_in",name:"tr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ts",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ts","=","(","tq",">","tr",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ts","=","clamp","(","ts",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"tt",qualifier:["float"],is_optional:false},{type:"node_in",name:"tu",qualifier:["float"],is_optional:false},{type:"node_out",name:"tv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["tv","=","abs","(","tu",")",">","0.000001","?","mod","(","tt",",","tu",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["tv","=","clamp","(","tv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"tw",qualifier:["float"],is_optional:false},{type:"node_in",name:"tx",qualifier:["float"],is_optional:false},{type:"node_out",name:"ty",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ty","=","abs","(","tw",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ty","=","clamp","(","ty",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["tx",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"tz",qualifier:["float"],is_optional:false},{type:"node_in",name:"tA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","tD","=","clamp","(","tz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","tC","=","mix","(","tA",",","tB",",","tD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["tC","=","clamp","(","tC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"tE",qualifier:["float"],is_optional:false},{type:"node_in",name:"tF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","tI","=","clamp","(","tE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","tH","=","mix","(","tF",",","tF","+","tG",",","tI",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["tH","=","clamp","(","tH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"tJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"tK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","tN","=","clamp","(","tJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","tM","=","mix","(","tK",",","tK","*","tL",",","tN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["tM","=","clamp","(","tM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"tO",qualifier:["float"],is_optional:false},{type:"node_in",name:"tP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","tS","=","clamp","(","tO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","tR","=","mix","(","tP",",","tP","-","tQ",",","tS",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["tR","=","clamp","(","tR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"tT",qualifier:["float"],is_optional:false},{type:"node_in",name:"tU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","tX","=","clamp","(","tT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","tY","=","UNITY_VALUE_NODES","-","tX",";","tW","=","mu","-","(","vec3","(","tY",")","+","tX","*","(","mu","-","tV",")",")","*","(","mu","-","tU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["tW","=","clamp","(","tW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"tZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"t_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ua",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ub",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","uc","=","clamp","(","tZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","ud","=","UNITY_VALUE_NODES","-","uc",";","ua","+=","step","(","ua",",","mt",")",";","ub","=","ud","*","t_","+","uc","*","t_","/","ua",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ub","=","clamp","(","ub",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"ue",qualifier:["float"],is_optional:false},{type:"node_in",name:"uf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ug",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"uh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","ui","=","clamp","(","ue",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","uh","=","mix","(","uf",",","abs","(","uf","-","ug",")",",","ui",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["uh","=","clamp","(","uh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"uj",qualifier:["float"],is_optional:false},{type:"node_in",name:"uk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ul",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"um",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","un","=","clamp","(","uj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","um","=","min","(","uk",".","rgb",",","ul",".","rgb","*","un",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["um","=","clamp","(","um",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"uo",qualifier:["float"],is_optional:false},{type:"node_in",name:"up",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"uq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ur",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","us","=","clamp","(","uo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ur","=","max","(","up",".","rgb",",","uq",".","rgb","*","us",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ur","=","clamp","(","ur",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"ut",qualifier:["float"],is_optional:false},{type:"node_in",name:"uu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"uv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"uw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","ux","=","clamp","(","ut",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","uy","=","vec3","(","UNITY_VALUE_NODES","-","ux",")",";","uw","=","mix","(","uu","*","(","uy","+","2.0","*","ux","*","uv",")",",","mu","-","(","uy","+","2.0","*","ux","*","(","mu","-","uv",")",")","*","(","mu","-","uu",")",",","step","(","0.5",",","uu",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["uw","=","clamp","(","uw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"uz",qualifier:["float"],is_optional:false},{type:"node_in",name:"uA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"uB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"uC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","uD","=","clamp","(","uz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","uE","=","mu","-","uD","*","uB",";","vec3","uF","=","clamp","(","uA","/","uE",",","0.0",",","1.0",")",";","uC","=","mix","(","mix","(","uF",",","mu",",","step","(","uE",",","mt",")",")",",","uA",",","step","(","uA",",","mt",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["uC","=","clamp","(","uC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"uG",qualifier:["float"],is_optional:false},{type:"node_in",name:"uH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"uI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"uJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","uK","=","clamp","(","uG",",","0.0",",","1.0",")",";","vec3","uL","=","vec3","(","1.0","-","uK",")",";","vec3","uM","=","uL","+","uK","*","uI",";","vec3","uN","=","clamp","(","mu","-","(","mu","-","uH",")","/","uM",",","0.0",",","1.0",")",";","uJ","=","mix","(","uN",",","mt",",","step","(","uM",",","mt",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["uJ","=","clamp","(","uJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"uO",qualifier:["float"],is_optional:false},{type:"node_in",name:"uP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"uQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"uR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","uS","=","clamp","(","uO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","uT",",","uU",",","uV",";","uR","=","uP",";","uU","=","mF","(","uQ",")",";","if","(","uU",".","y","!=","ZERO_VALUE_NODES",")","{","uT","=","mF","(","uR",")",";","uT",".","x","=","uU",".","x",";","uV","=","mJ","(","uT",")",";","uR","=","mix","(","uR",",","uV",",","uS",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["uR","=","clamp","(","uR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"uW",qualifier:["float"],is_optional:false},{type:"node_in",name:"uX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"uY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"uZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","u_","=","clamp","(","uW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","va","=","UNITY_VALUE_NODES","-","u_",";","uZ","=","uX",";","vec3","vb",",","vc",";","vb","=","mF","(","uZ",")",";","if","(","vb",".","y","!=","ZERO_VALUE_NODES",")","{","vc","=","mF","(","uY",")",";","vb",".","y","=","va","*","vb",".","y","+","u_","*","vc",".","y",";","uZ","=","mJ","(","vb",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["uZ","=","clamp","(","uZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"vd",qualifier:["float"],is_optional:false},{type:"node_in",name:"ve",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","vh","=","clamp","(","vd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","vi","=","UNITY_VALUE_NODES","-","vh",";","vec3","vj",",","vk",";","vj","=","mF","(","ve",")",";","vk","=","mF","(","vf",")",";","vj",".","z","=","vi","*","vj",".","z","+","vh","*","vk",".","z",";","vg","=","mJ","(","vj",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["vg","=","clamp","(","vg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"vl",qualifier:["float"],is_optional:false},{type:"node_in",name:"vm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","vp","=","clamp","(","vl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","vq",",","vr",",","vs",";","vo","=","vm",";","vr","=","mF","(","vn",")",";","if","(","vr",".","y","!=","ZERO_VALUE_NODES",")","{","vq","=","mF","(","vo",")",";","vq",".","x","=","vr",".","x",";","vq",".","y","=","vr",".","y",";","vs","=","mJ","(","vq",")",";","vo","=","mix","(","vo",",","vs",",","vp",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["vo","=","clamp","(","vo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"vt",qualifier:["float"],is_optional:false},{type:"node_in",name:"vu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","vx","=","clamp","(","vt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","vy","=","UNITY_VALUE_NODES","-","vx",";","vec3","vz","=","vv","+","vu","-","vv","*","vu",";","vw","=","vu","*","(","vec3","(","vy",")","+","vec3","(","vx",")","*","(","(","mu","-","vu",")","*","vv","+","vz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["vw","=","clamp","(","vw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"vA",qualifier:["float"],is_optional:false},{type:"node_in",name:"vB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","vE","=","clamp","(","vA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vD","=","vB","+","vE","*","(","2.0","*","vC","-","mu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["vD","=","clamp","(","vD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"vF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nb","=","vF",";","nf","=","vG",";"]}]},{type:"node",name:"MATERIAL",declarations:[{type:"node_in",name:"vH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vI",qualifier:["float"],is_optional:false},{type:"node_in",name:"vJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vL",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vM",qualifier:["float"],is_optional:true},{type:"node_out",name:"vN",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"mX",qualifier:["const","vec2"]},{type:"node_param",name:"mY",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["vec3","vO","=","clamp","(","vH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["vec3","vP","=","mY","[","0","]","*","clamp","(","vJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["vec3","vQ","=","normalize","(","vK",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vec3","vQ","=","nh",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT","&&","!","NODES_GLOW"],statements:[{type:"textline",tokens:["vec3","vR","=","nn","*","vO",";"]},{type:"textline",tokens:["vec3","vS","=","np","*","u_environment_energy","*","mr","(","vQ",")",";","float","vT","=","fp","(","vO",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["vec2","vU","=","vec2","(","mX","[","0","]",",","mX","[","1","]",")",";"]},{type:"textline",tokens:["vec2","vV","=","vec2","(","mY","[","1","]",",","mY","[","2","]",")",";","nq","=","kU","(","vR",",","vS",",","vO",",","vP",",","nl",",","vQ",",","na",",","vV",",","vU",",","vT",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nq","=","kZ","(","vR",",","vS",",","vO",")",";"]}]}]},{type:"textline",tokens:["ne","=","vT",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nq",".","a","=","vec4","(","vO",",","ZERO_VALUE_NODES",")",";","nq",".","b","=","mt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vL"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["vL","=","nq",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vL","=","mt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["vL","+=","nq",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vM"],statements:[{type:"textline",tokens:["vM","=","clamp","(","vI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["vM","+=","nq",".","a",".","a","*","vP",".","r","*","no",";","vM","=","clamp","(","vM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vN"],statements:[{type:"textline",tokens:["vN","=","vQ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nc","=","nq",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nc","=","mt",";"]}]}]},{type:"textline",tokens:["nd","=","vQ",";"]}]},{type:"node",name:"MATERIAL_EXT",declarations:[{type:"node_in",name:"vW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vX",qualifier:["float"],is_optional:false},{type:"node_in",name:"vY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vZ",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"v_",qualifier:["float"],is_optional:false},{type:"node_in",name:"wa",qualifier:["float"],is_optional:false},{type:"node_in",name:"wb",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"wc",qualifier:["float"],is_optional:false},{type:"node_in",name:"wd",qualifier:["float"],is_optional:false},{type:"node_out",name:"we",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wf",qualifier:["float"],is_optional:true},{type:"node_out",name:"wg",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wh",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wi",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"mZ",qualifier:["const","vec2"]},{type:"node_param",name:"m_",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["vec3","wj","=","clamp","(","vW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["vec3","wk","=","m_","[","0","]","*","clamp","(","vY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["vec3","wl","=","normalize","(","vZ",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vec3","wl","=","nh",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT","&&","!","NODES_GLOW"],statements:[{type:"textline",tokens:["float","wm","=","fp","(","wj",")",";"]},{type:"textline",tokens:["vec3","wn","=","v_","*","wj",";"]},{type:"textline",tokens:["vec3","wo","=","np","*","u_environment_energy","*","mr","(","wl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["vec2","wp","=","vec2","(","mZ","[","0","]",",","mZ","[","1","]",")",";","vec2","wq","=","vec2","(","m_","[","1","]",",","m_","[","2","]",")",";","nq","=","kU","(","wn",",","wo",",","wj",",","wk",",","nl",",","wl",",","na",",","wq",",","wp",",","wm",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","wa",",","wb",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nq","=","kZ","(","wn",",","wo",",","wj",")",";"]}]}]},{type:"textline",tokens:["ne","=","wm",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nq",".","a","=","vec4","(","wj",",","ZERO_VALUE_NODES",")",";","nq",".","b","=","mt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_we"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["we","=","nq",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["we","=","mt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","!=","REFL_NONE"],statements:[{type:"textline",tokens:["ma","(","we",",","na",",","wl",",","wc",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["we","+=","nq",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wf"],statements:[{type:"textline",tokens:["wf","=","clamp","(","vX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["wf","+=","nq",".","a",".","a","*","wk",".","r","*","wd",";","wf","=","clamp","(","wf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wg"],statements:[{type:"textline",tokens:["wg","=","wl",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wh"],statements:[{type:"textline",tokens:["wh","=","nq",".","a",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wi"],statements:[{type:"textline",tokens:["wi","=","nq",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nc","=","nq",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nc","=","mt",";"]}]}]},{type:"textline",tokens:["nd","=","wl",";"]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"wr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wr","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"ws",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wt","=","ws",".","r","*","0.35","+","ws",".","g","*","0.45","+","ws",".","b","*","0.2",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"wu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wv",qualifier:["float"],is_optional:true},{type:"node_out",name:"ww",qualifier:["float"],is_optional:true},{type:"node_out",name:"wx",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wv"],statements:[{type:"textline",tokens:["wv","=","wu",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ww"],statements:[{type:"textline",tokens:["ww","=","wu",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wx"],statements:[{type:"textline",tokens:["wx","=","wu",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"wy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wz",qualifier:["float"],is_optional:true},{type:"node_out",name:"wA",qualifier:["float"],is_optional:true},{type:"node_out",name:"wB",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["vec3","wC","=","mF","(","wy",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wz"],statements:[{type:"textline",tokens:["wz","=","wC",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wA"],statements:[{type:"textline",tokens:["wA","=","wC",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wB"],statements:[{type:"textline",tokens:["wB","=","wC",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"wD",qualifier:["float"],is_optional:false},{type:"node_in",name:"wE",qualifier:["float"],is_optional:false},{type:"node_in",name:"wF",qualifier:["float"],is_optional:false},{type:"node_out",name:"wG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wG","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","wD","-","wF",")","*","wE",")",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"wH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wI",qualifier:["float"],is_optional:false},{type:"node_out",name:"wJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wJ","=","max","(","mt",",","wH",")",";","wJ","=","pow","(","wJ",",","vec3","(","wI",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"wK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wL","=","max","(","mt",",","wK",")",";","wL","=","pow","(","wL",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"wM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wN","=","max","(","mt",",","wM",")",";","wN","=","pow","(","wN",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"wO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wQ",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wQ"],statements:[{type:"textline",tokens:["wO","[","2","]","=","wO","[","1","]","=","wO","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wQ"],statements:[{type:"textline",tokens:["wP","[","2","]","=","wP","[","1","]","=","wP","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wQ"],statements:[{type:"textline",tokens:["wQ","=","0.0",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"wR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wS",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wT",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["vec4","wU","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","wR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wS"],statements:[{type:"textline",tokens:["wS","=","wU",".","xyz",";","gv","(","wS",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wT"],statements:[{type:"textline",tokens:["wT","=","wU",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"wV",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"wW",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"wX",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"wY",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"w_",qualifier:["float"],is_optional:true},{type:"node_out",name:"xa",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xb",qualifier:["float"],is_optional:true},{type:"node_out",name:"xc",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xd",qualifier:["float"],is_optional:true},{type:"node_out",name:"xe",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xf",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["vec4","xg","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","mN","(","wV",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wZ"],statements:[{type:"textline",tokens:["wZ","=","xg",".","xyz",";","gv","(","wZ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_w_"],statements:[{type:"textline",tokens:["w_","=","xg",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["xg","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","mN","(","wW",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xa"],statements:[{type:"textline",tokens:["xa","=","xg",".","xyz",";","gv","(","xa",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xb"],statements:[{type:"textline",tokens:["xb","=","xg",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["xg","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","mN","(","wX",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xc"],statements:[{type:"textline",tokens:["xc","=","xg",".","xyz",";","gv","(","xc",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xd"],statements:[{type:"textline",tokens:["xd","=","xg",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["xg","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","mN","(","wY",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xe"],statements:[{type:"textline",tokens:["xe","=","xg",".","xyz",";","gv","(","xe",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xf"],statements:[{type:"textline",tokens:["xf","=","xg",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"xh",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"xi",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"xj",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"xk",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xm",qualifier:["float"],is_optional:true},{type:"node_out",name:"xn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xo",qualifier:["float"],is_optional:true},{type:"node_out",name:"xp",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xq",qualifier:["float"],is_optional:true},{type:"node_out",name:"xr",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"xs",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["vec4","xt","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","mN","(","xh",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xl"],statements:[{type:"textline",tokens:["xl","=","normalize","(","nk","*","(","xt",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xm"],statements:[{type:"textline",tokens:["xm","=","xt",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["xt","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","mN","(","xi",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xn"],statements:[{type:"textline",tokens:["xn","=","normalize","(","nk","*","(","xt",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xo"],statements:[{type:"textline",tokens:["xo","=","xt",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["xt","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","mN","(","xj",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xp"],statements:[{type:"textline",tokens:["xp","=","normalize","(","nk","*","(","xt",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xq"],statements:[{type:"textline",tokens:["xq","=","xt",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["xt","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","mN","(","xk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xr"],statements:[{type:"textline",tokens:["xr","=","normalize","(","nk","*","(","xt",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xs"],statements:[{type:"textline",tokens:["xs","=","xt",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"xu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xu","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"xv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xy",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["xx","=","xv","+","xw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xy"],statements:[{type:"textline",tokens:["xy","=","(","abs","(","xx","[","0","]",")","+","abs","(","xx","[","1","]",")","+","abs","(","xx","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"xz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xC",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["xB","=","xz","-","xA",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xC"],statements:[{type:"textline",tokens:["xC","=","(","abs","(","xB","[","0","]",")","+","abs","(","xB","[","1","]",")","+","abs","(","xB","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"xD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xG",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["xF","=","xD","+","xE",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xG"],statements:[{type:"textline",tokens:["xG","=","length","(","xF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xF"],statements:[{type:"textline",tokens:["xF","=","normalize","(","xF",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"xH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xK",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["xJ","=","mt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xK"],statements:[{type:"textline",tokens:["xK","=","dot","(","xH",",","xI",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"xL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xO",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["xN","=","cross","(","xL",",","xM",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xO"],statements:[{type:"textline",tokens:["xO","=","length","(","xN",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"xP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xS",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["xR","=","normalize","(","xP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_xS"],statements:[{type:"textline",tokens:["xS","=","length","(","xP",")",";"]}]}]},{type:"textline",tokens:["xQ",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"xT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"xV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xV","=","reflect","(","-","xT",",","xU",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"xW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xX",qualifier:["float"],is_optional:false},{type:"node_in",name:"xY",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"xZ",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"x_",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["float","ya","=","length","(","nm",")",";","if","(","ya","<","xZ",")","{","vec2","yb","=","mN","(","xW",")",";","float","yc","=","clamp","(","0.5","*","(","xZ","-","ya",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","yd","=","xX","*","yc",";"]},{type:"textline",tokens:["vec3","ye","=","normalize","(","na","*","nk",")",";"]},{type:"textline",tokens:["float","yf","=","UNITY_VALUE_NODES","/","xY",";"]},{type:"textline",tokens:["vec2","yg","=","ye",".","xy","*","yd","/","(","xY","*","ye",".","z",")",";","float","yh","=","UNITY_VALUE_NODES",";","float","yi","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yb",")",".","a",";"]},{type:"textline",tokens:["for","(","float","yj","=","1.0",";","yj","<=","xY",";","yj","++",")","{","if","(","yi","<","yh",")","{","yh","-=","yf",";","yb","-=","yg",";","yi","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yb",")",".","a",";","}","}"]},{type:"textline",tokens:["vec2","yk","=","yb","+","yg",";","float","yl","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yk",")",".","a","-","(","yh","+","yf",")",";","float","ym","=","yi","-","yh",";","float","yn","=","ym","/","(","ym","-","yl",")",";"]},{type:"textline",tokens:["yb","=","yn","*","yk","+","(","UNITY_VALUE_NODES","-","yn",")","*","yb",";","x_","=","mL","(","yb",")",";","}","else","x_","=","xW",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"yo",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"yp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","yo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"yq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"yr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ys",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ys","=","my","(","yq",",","yr",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"yt",qualifier:["float"],is_optional:false},{type:"node_in",name:"yu",qualifier:["float"],is_optional:false},{type:"node_in",name:"yv",qualifier:["float"],is_optional:false},{type:"node_in",name:"yw",qualifier:["float"],is_optional:false},{type:"node_in",name:"yx",qualifier:["float"],is_optional:false},{type:"node_out",name:"yy",qualifier:["float"],is_optional:true},{type:"node_out",name:"yz",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yy"],statements:[{type:"textline",tokens:["yy","=","yt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yz"],statements:[{type:"textline",tokens:["yz","=","vec4","(","yu",",","yv",",","yw",",","yx",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"yA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yA","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"yB",qualifier:["float"],is_optional:false},{type:"node_in",name:"yC",qualifier:["float"],is_optional:false},{type:"node_in",name:"yD",qualifier:["float"],is_optional:false},{type:"node_out",name:"yE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yE","=","smoothstep","(","yC",",","yD",",","yB",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"yF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"yG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nb","=","yF",";","nf","=","yG",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"yH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"yI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yI","=","(","yH",".","r","+","yH",".","g","+","yH",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"yJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"yK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yK","[","0","]","=","yJ",";","yK","[","1","]","=","yJ",";","yK","[","2","]","=","yJ",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","yL","(","in","vec3","na",",","out","vec3","nb",",","out","vec3","nc",",","out","vec3","nd",",","out","float","ne",",","out","float","nf",")","{","nb","=","mt",";","nc","=","mt",";","nd","=","mt",";","ne","=","ZERO_VALUE_NODES",";","nf","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE","||","USE_NODE_TEX_COORD_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ng","=","lB",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","ng","=","ng",";","else","ng","=","-","ng",";"]}]}}]},{type:"textline",tokens:["vec3","nh","=","normalize","(","ng",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ni","=","cross","(","ng",",","lC",".","xyz",")","*","lC",".","w",";","mat3","nj","=","mat3","(","lC",".","xyz",",","ni",",","ng",")",";","mat3","nk","=","nj",";"]}]}}]},{type:"textline",tokens:["vec3","nl","=","lA",";","vec4","nm","=","cD",";","float","nn","=","u_emit",";","float","no","=","u_specular_alpha",";","float","np","=","u_ambient",";","hO","nq",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","||","USE_NODE_TEX_COORD_GE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","ms",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"mV",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mV","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"mU",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mU","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"mW",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mW","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"mO",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mO","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"yM",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["yM","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"yN",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["yN","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"yO",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["yO","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"yP",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["yP","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","yQ","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","||","USE_NODE_TEX_COORD_GE"],group:{type:"group",parts:[{type:"textline",tokens:["ms","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","yS","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","yZ","(","inout","float","yT",",","float","yU",",","vec2","yV",",","vec2","yW",")","{","float","yX","=","yW",".","x","-","yV",".","x",";","float","yY","=","(","yU","-","yV",".","x",")","/","yX",";","yT","=","mix","(","yT",",","yW",".","y",",","clamp","(","yY",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","zf","(","inout","vec3","y_",",","float","za",",","vec4","zb",",","vec4","zc",")","{","float","zd","=","zc",".","x","-","zb",".","x",";","float","ze","=","(","za","-","zb",".","x",")","/","zd",";","y_","=","mix","(","y_",",","zc",".","yzw",",","clamp","(","ze",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","zl","(","float","zg",",","float","zh",",","vec2","zi","[","SIZE_RAMP_LENGTH","]",")","{","float","zj","=","zg","/","zh",";","float","zk","=","zi","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["yZ","(","zk",",","zj",",","zi","[","0","]",",","zi","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["yZ","(","zk",",","zj",",","zi","[","1","]",",","zi","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["yZ","(","zk",",","zj",",","zi","[","2","]",",","zi","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","zk",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zr","(","float","zm",",","float","zn",",","vec4","zo","[","COLOR_RAMP_LENGTH","]",")","{","float","zp","=","zm","/","zn",";","vec3","zq","=","zo","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["zf","(","zq",",","zp",",","zo","[","0","]",",","zo","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["zf","(","zq",",","zp",",","zo","[","1","]",",","zo","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["zf","(","zq",",","zp",",","zo","[","2","]",",","zo","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","zq",";","}"]}]}}]},{type:"textline",tokens:["float","zA","(","float","zs",",","float","zt",",","float","zu",",","float","zv",")","{","float","zw","=","max","(","0.01",",","min","(","zt",",","zu",")",")",";","float","zx","=","max","(","0.01",",","min","(","zt",",","zv",")",")",";","float","zy","=","zt","-","zx",";","float","zz","=","clamp","(","zs","/","zw",",","0.0",",","1.0",")","-","step","(","zy",",","zs",")","*","(","zs","-","zy",")","/","zx",";","return","zz",";","}","yS","zG","(",")","{","yS","zB",";","float","zC",";","if","(","u_p_cyclic","==","1",")","{","zC","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","zC","<","0.0",")","zC","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","zC","=","u_p_time","-","a_p_delay",";","}","if","(","zC","<","0.0","||","zC",">=","a_p_lifetime",")","{","zB",".","a","=","0.0001",";","zB",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","zC","<","0.0","||","zC",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","zD","=","a_position",";","vec3","zE","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","zD","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","zE","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["zD","+=","u_p_nfactor","*","zC","*","zE",";","zD","+=","a_p_vels",".","xyz","*","zC",";","zD",".","y","-=","u_p_gravity","*","zC","*","zC","/","2.0",";","float","zF","=","max","(","u_p_mass",",","EPSILON",")",";","zD","+=","(","u_p_wind","/","zF",")","*","zC","*","zC","/","2.0",";","zB",".","b","=","zD",";","zB",".","e","=","a_p_vels",".","w","*","zC",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["zB",".","a","=","zl","(","zC",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zB",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["zB",".","d","=","zr","(","zC",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["zB",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["zB",".","c","=","zA","(","zC",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","zB",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","zI","=","0.0",";","float","zJ","=","1.0",";","vec3","zK","=","vec3","(","zI",")",";","vec3","zL","=","vec3","(","zJ",")",";","vec3","zS","(","vec3","zM",")","{","vec4","zN","=","vec4","(","zI",",","-","zJ","/","3.0",",","2.0","/","3.0",",","-","zJ",")",";","vec4","zO","=","mix","(","vec4","(","zM",".","bg",",","zN",".","wz",")",",","vec4","(","zM",".","gb",",","zN",".","xy",")",",","step","(","zM",".","b",",","zM",".","g",")",")",";","vec4","zP","=","mix","(","vec4","(","zO",".","xyw",",","zM",".","r",")",",","vec4","(","zM",".","r",",","zO",".","yzx",")",",","step","(","zO",".","x",",","zM",".","r",")",")",";","float","zQ","=","zP",".","x","-","min","(","zP",".","w",",","zP",".","y",")",";","float","zR","=","1.0e-10",";","return","vec3","(","abs","(","zP",".","z","+","(","zP",".","w","-","zP",".","y",")","/","(","6.0","*","zQ","+","zR",")",")",",","zQ","/","(","zP",".","x","+","zR",")",",","zP",".","x",")",";","}","vec3","zW","(","vec3","zT",")","{","vec4","zU","=","vec4","(","zJ",",","2.0","/","3.0",",","zJ","/","3.0",",","3.0",")",";","vec3","zV","=","abs","(","fract","(","vec3","(","zT",".","r",",","zT",".","r",",","zT",".","r",")","+","zU",".","xyz",")","*","6.0","-","zU",".","www",")",";","return","zT",".","b","*","mix","(","zU",".","xxx",",","clamp","(","zV","-","zU",".","xxx",",","zI",",","zJ",")",",","zT",".","g",")",";","}","vec3","z_","(","vec3","zX",",","vec3","zY",",","float","zZ",")","{","return","mix","(","zX",",","zY",",","zZ",")",";","}","vec3","Ad","(","vec3","Aa",",","vec3","Ab",",","float","Ac",")","{","return","Ac","*","Aa","+","Ab",";","}","vec3","Ah","(","vec3","Ae",",","vec3","Af",",","float","Ag",")","{","return","Af","-","Ag","*","Ae",";","}","vec3","Am","(","vec3","Ai",",","vec3","Aj",",","float","Ak",")","{","float","Al","=","zJ","-","Ak",";","return","(","vec3","(","Al",")","+","Ak","*","Ai",")","*","Aj",";","}","vec3","Ar","(","vec3","An",",","vec3","Ao",",","float","Ap",")","{","vec3","Aq","=","vec3","(","zJ","-","Ap",")",";","return","zL","-","(","Aq","+","Ap","*","(","zL","-","An",")",")","*","(","zL","-","Ao",")",";","}","vec3","Aw","(","vec3","As",",","vec3","At",",","float","Au",")","{","vec3","Av","=","vec3","(","zJ","-","Au",")",";","return","mix","(","At","*","(","Av","+","2.0","*","Au","*","As",")",",","zL","-","(","Av","+","2.0","*","Au","*","(","zL","-","As",")",")","*","(","zL","-","At",")",",","step","(","0.5",",","At",")",")",";","}","vec3","AA","(","vec3","Ax",",","vec3","Ay",",","float","Az",")","{","return","mix","(","Ay",",","abs","(","Ax","-","Ay",")",",","Az",")",";","}","vec3","AE","(","vec3","AB",",","vec3","AC",",","float","AD",")","{","return","mix","(","AC",",","AC","/","(","AB","+","step","(","AB",",","zK",")",")",",","AD",")",";","}","vec3","AI","(","vec3","AF",",","vec3","AG",",","float","AH",")","{","return","mix","(","AG",",","min","(","AF",",","AG",")",",","AH",")",";","}","vec3","AM","(","vec3","AJ",",","vec3","AK",",","float","AL",")","{","return","max","(","AL","*","AJ",",","AK",")",";","}","vec3","AT","(","vec3","AN",",","vec3","AO",",","float","AP",")","{","vec3","AQ","=","zS","(","AO",")",";","if","(","AQ",".","y","!=","zI",")","{","vec3","AR","=","zS","(","AN",")",";","vec3","AS","=","zW","(","vec3","(","AQ",".","x",",","AR",".","yz",")",")",";","return","mix","(","AN",",","AS",",","AP",")",";","}","return","AN",";","}","vec3","AZ","(","vec3","AU",",","vec3","AV",",","float","AW",")","{","vec3","AX","=","zS","(","AU",")",";","if","(","AX",".","y","!=","zI",")","{","vec3","AY","=","zS","(","AV",")",";","return","zW","(","vec3","(","AX",".","x",",","mix","(","AX",".","y",",","AY",".","y",",","AW",")",",","AX",".","z",")",")",";","}","return","AU",";","}","vec3","Be","(","vec3","A_",",","vec3","Ba",",","float","Bb",")","{","vec3","Bc","=","zS","(","A_",")",";","vec3","Bd","=","zS","(","Ba",")",";","return","zW","(","vec3","(","Bc",".","xy",",","mix","(","Bc",".","z",",","Bd",".","z",",","Bb",")",")",")",";","}","vec3","Bl","(","vec3","Bf",",","vec3","Bg",",","float","Bh",")","{","vec3","Bi","=","zS","(","Bg",")",";","if","(","Bi",".","y","!=","zI",")","{","vec3","Bj","=","zS","(","Bf",")",";","vec3","Bk","=","zW","(","vec3","(","Bi",".","xy",",","Bj",".","z",")",")",";","return","mix","(","Bf",",","Bk",",","Bh",")",";","}","return","Bf",";","}","vec3","Bq","(","vec3","Bm",",","vec3","Bn",",","float","Bo",")","{","vec3","Bp","=","zL","-","(","zL","-","Bn",")","*","(","zL","-","Bm",")",";","return","mix","(","Bm",",","(","(","zL","-","Bm",")","*","Bn","*","Bm",")","+","Bm","*","Bp",",","Bo",")",";","}","vec3","Bu","(","vec3","Br",",","vec3","Bs",",","float","Bt",")","{","return","Br","+","Bt","*","(","2.0","*","Bs","-","zJ",")",";","}","float","BA","(","float","Bv",",","float","Bw",",","float","Bx",",","float","By",")","{","float","Bz","=","zJ","-","By",";","return","(","Bz","+","Bx","*","Bv",")","*","Bw",";","}","float","BG","(","float","BB",",","float","BC",",","float","BD",",","float","BE",")","{","float","BF","=","zJ","-","BE",";","return","zJ","-","(","BF","+","BD","*","(","zJ","-","BB",")",")","*","(","zJ","-","BC",")",";","}","float","BM","(","float","BH",",","float","BI",",","float","BJ",",","float","BK",")","{","float","BL","=","zJ","-","BK",";","return","mix","(","BI","*","(","BL","+","2.0","*","BJ","*","BH",")",",","zJ","-","(","BL","+","2.0","*","BJ","*","(","zJ","-","BH",")",")","*","(","zJ","-","BI",")",",","step","(","0.5",",","BI",")",")",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","BZ","(","in","sampler2D","BS",",","in","vec2","BT",",","in","vec2","BU",")","{","float","BV","=","texture2D","(","BS",",","BT",")",".","r",";","float","BW","=","BU",".","x",";","float","BX","=","BU",".","y",";","float","BY","=","2.0","*","BW","/","(","BW","+","BX","-","(","2.0","*","BV","-","1.0",")","*","(","BX","-","BW",")",")",";","return","BY",";","}"]}]}}